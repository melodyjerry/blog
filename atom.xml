<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>MelodyHub</title>
  
  <subtitle>ä½ ç”¨èµ° å¯æ˜¯æˆ‘ç”¨è·‘</subtitle>
  <link href="/blog/atom.xml" rel="self"/>
  
  <link href="https://melodyjerry.github.io/blog/"/>
  <updated>2020-10-03T09:50:00.442Z</updated>
  <id>https://melodyjerry.github.io/blog/</id>
  
  <author>
    <name>Melody Jerry</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>uTools,ä½ çš„ç”Ÿäº§åŠ›å·¥å…·é›†</title>
    <link href="https://melodyjerry.github.io/blog/2020/10/03/uTools%E4%BD%A0%E7%9A%84%E7%94%9F%E4%BA%A7%E5%8A%9B%E5%B7%A5%E5%85%B7%E9%9B%86/"/>
    <id>https://melodyjerry.github.io/blog/2020/10/03/uTools%E4%BD%A0%E7%9A%84%E7%94%9F%E4%BA%A7%E5%8A%9B%E5%B7%A5%E5%85%B7%E9%9B%86/</id>
    <published>2020-10-03T09:39:00.000Z</published>
    <updated>2020-10-03T09:50:00.442Z</updated>
    
    <content type="html"><![CDATA[<h1 id="uToolsæ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#uToolsæ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="uToolsæ˜¯ä»€ä¹ˆï¼Ÿ"></a>uToolsæ˜¯ä»€ä¹ˆï¼Ÿ</h1><center><font color="#FF2800">u</font><font color="#FF5000">T</font><font color="#FF7800">o</font><font color="#FFA000">o</font><font color="#FFC800">l</font><font color="#FFF000">s</font><font color="#D7FF00">ï¼Œ</font><font color="#AFFF00">ä½ </font><font color="#87FF00">çš„</font><font color="#5FFF00">ç”Ÿ</font><font color="#37FF00">äº§</font><font color="#0FFF00">åŠ›</font><font color="#00FF28">å·¥</font><font color="#00FF50">å…·</font><font color="#00FF78">é›†</font></center><ul><li>æç®€</li><li>æ’ä»¶åŒ–</li><li>è·¨å¹³å°</li></ul><blockquote><p>å®˜ç½‘ï¼š<a href="https://www.u.tools/" target="_blank" rel="noopener">https://www.u.tools/</a></p><p>è‡ªç”±é›†æˆä¸°å¯Œæ’ä»¶ï¼Œå¿«é€ŸåŒ¹é…ã€Œåœºæ™¯åŠŸèƒ½ã€ï¼Œç”¨å®Œå³èµ° ã€‚</p></blockquote><p>é€šè¿‡è‡ªç”±é€‰é…ä¸°å¯Œçš„æ’ä»¶ï¼Œæ‰“é€ ä½ å¾—å¿ƒåº”æ‰‹çš„å·¥å…·é›†åˆã€‚</p><p>è¯¥è½¯ä»¶æ”¯æŒWindowsã€Macä»¥åŠLinuxä½¿ç”¨ï¼Œå¹¶ä¸”æ‹¥æœ‰ä¸°å¯Œçš„æ’ä»¶åº“ã€‚</p><p>ç®€å•æ¥è®²ï¼ŒuToolså¯ä»¥ä½œä¸ºä¸€ä¸ª<strong>ç¨‹åºå¿«é€Ÿå¯åŠ¨å™¨</strong>ï¼Œä½¿ç”¨ä¸­è‹±æ–‡æœç´¢å¹¶å¿«é€Ÿæ‰“å¼€ä½ çš„æœ¬åœ°ç¨‹åºã€æ–‡ä»¶ã€ç³»ç»Ÿè®¾ç½®ç­‰ã€‚ä½ å¯ä»¥ä½¿ç”¨å¿«æ·é”®ï¼ˆé»˜è®¤ä¸º<code>alt+space</code>ï¼‰å¿«é€Ÿå‘¼å‡ºè¿™ä¸ªæœç´¢æ¡†ï¼Œå°å·§å´ä¸ç®€å•ã€‚</p><p><strong>å½“ä½ ç†Ÿæ‚‰å®ƒåï¼Œèƒ½å¤Ÿä¸ºä½ èŠ‚çº¦å¤§é‡æ—¶é—´ï¼Œè®©ä½ å¯ä»¥æ›´åŠ ä¸“æ³¨åœ°æ”¹å˜ä¸–ç•Œã€‚</strong></p><h1 id="uToolsèƒ½åšä»€ä¹ˆï¼Ÿ"><a href="#uToolsèƒ½åšä»€ä¹ˆï¼Ÿ" class="headerlink" title="uToolsèƒ½åšä»€ä¹ˆï¼Ÿ"></a>uToolsèƒ½åšä»€ä¹ˆï¼Ÿ</h1><p>uToolsä½œè€…å°†æ­¤è½¯ä»¶è®¾è®¡ä¸º<font color="red" size="5">â€œä¸€åˆ‡çš†æ’ä»¶â€</font>çš„æ’ä»¶åŒ–å·¥å…·ï¼Œ<strong>æ‰€æœ‰çš„åŠŸèƒ½å‡å¯é€šè¿‡æ’ä»¶å®ç°ã€‚</strong></p><p>æ’ä»¶ä¸­å¿ƒæœ‰å¾ˆå¤šå®ç”¨é«˜æ•ˆåœ°æ’ä»¶ï¼Œä¾‹å¦‚ï¼šåœ¨çº¿ç¿»è¯‘ã€å‹ç¼©å›¾ç‰‡ã€é¢œè‰²å°åŠ©æ‰‹ã€å¼€å‘æ–‡æ¡£ã€å›¾åºŠã€OCRå›¾ç‰‡è¯†åˆ«ç­‰ç­‰å°å·¥å…·ï¼Œä½ å¯ä»¥é€‰æ‹©é€‚åˆè‡ªå·±ä½¿ç”¨åœºæ™¯çš„æ’ä»¶å®‰è£…ä½¿ç”¨ã€‚</p><p><img src="https://s1.ax1x.com/2020/10/03/03G2r9.png" srcset="/blog/img/loading.gif" alt="03G2r9.png"></p><a id="more"></a><hr><p>æ¥ä¸‹æ¥ç»™å¤§å®¶çœ‹çœ‹MelodyJerryç»å¸¸ä½¿ç”¨çš„ä¸€äº›æ’ä»¶ğŸ‘‡</p><h1 id="MelodyJerryçš„uTools"><a href="#MelodyJerryçš„uTools" class="headerlink" title="MelodyJerryçš„uTools"></a>MelodyJerryçš„uTools</h1><h2 id="åœ¨çº¿ç¿»è¯‘"><a href="#åœ¨çº¿ç¿»è¯‘" class="headerlink" title="åœ¨çº¿ç¿»è¯‘"></a>åœ¨çº¿ç¿»è¯‘</h2><p>æœç´¢æ¡†ä¸­æœç´¢â€œç¿»è¯‘â€å°±å¯ä»¥å‘¼å‡ºåœ¨çº¿ç¿»è¯‘ç•Œé¢ã€‚ç®€æ´æ˜“ç”¨ã€éšç”¨éšèµ°ã€‚</p><p><img src="https://s1.ax1x.com/2020/10/03/03GzPf.png" srcset="/blog/img/loading.gif" alt="03GzPf.png"></p><h2 id="å›¾åºŠ"><a href="#å›¾åºŠ" class="headerlink" title="å›¾åºŠ"></a>å›¾åºŠ</h2><p>å†™åšå®¢å¿…å¤‡ï¼Œæ­é…<a href="">Typora</a>ä½¿ç”¨ï¼Œæ•ˆæœæœ€ä½³ï¼ï¼ï¼</p><p>ä½¿ç”¨éå¸¸ç®€å•ï¼š</p><ul><li>æ‹–åŠ¨å›¾ç‰‡åˆ°æœç´¢æ¡†</li><li>å¤åˆ¶å›¾ç‰‡ï¼Œåˆ°æ’ä»¶é¡µCtrl+V</li><li>æ’ä»¶é¡µçš„ä¸Šä¼ æŒ‰é’®</li></ul><p><img src="https://s1.ax1x.com/2020/10/03/03wynO.png" srcset="/blog/img/loading.gif" alt="03wynO.png"></p><p>å›¾åºŠæ”¯æŒä¸‰ç§è¿”å›æ ¼å¼ï¼š</p><ul><li>URL</li><li>MarkDown</li><li>Html</li></ul><p><img src="https://s1.ax1x.com/2020/10/03/03Jsot.png" srcset="/blog/img/loading.gif" alt="03Jsot.png"></p><p>å½“ç„¶ï¼Œè¿˜å¯ä»¥é€‰æ‹©ä¸åŒçš„å›¾åºŠæºã€‚æ›´å¿«é€Ÿçš„ï¼Œâœ”è‡ªåŠ¨å¤åˆ¶ï¼Œå¹¶é€‰æ‹©MarkDownã€‚</p><p>è¿™æ ·ç²˜è´´å¥½å›¾ç‰‡ï¼Œè‡ªåŠ¨å¤åˆ¶mdæ ¼å¼çš„å›¾ç‰‡é“¾æ¥åˆ°å‰ªåˆ‡æ¿ï¼Œæå‡åŠå…¬å†™ä½œæ•ˆç‡å‘¢ï¼</p><ul><li><input disabled="" type="checkbox"> è‡ªåŠ¨å¤åˆ¶ MarkDown</li></ul><p><img src="https://s1.ax1x.com/2020/10/03/03Jooq.png" srcset="/blog/img/loading.gif" alt="03Jooq.png"></p><h2 id="å›¾ç‰‡è¯†åˆ«"><a href="#å›¾ç‰‡è¯†åˆ«" class="headerlink" title="å›¾ç‰‡è¯†åˆ«"></a>å›¾ç‰‡è¯†åˆ«</h2><p><img src="https://s1.ax1x.com/2020/10/03/03wYBF.png" srcset="/blog/img/loading.gif" alt="03wYBF.png"></p><h2 id="å‰ªåˆ‡æ¿"><a href="#å‰ªåˆ‡æ¿" class="headerlink" title="å‰ªåˆ‡æ¿"></a>å‰ªåˆ‡æ¿</h2><p>æœ€å¸¸ç”¨çš„æ’ä»¶ä¹‹ä¸€ï¼Œå¯ä»¥ä¿å­˜æ‰€æœ‰å¤åˆ¶è¿‡çš„å†…å®¹ã€‚</p><ul><li>æ–‡æœ¬</li><li>æ–‡ä»¶</li><li>å›¾ç‰‡</li></ul><p><strong>ä¸ç”¨æ‹…å¿ƒuToolsä¼šæ³„éœ²ä½ çš„ä¿¡æ¯ï¼Œæ‰€æœ‰æ’ä»¶çš„ç”Ÿå‘½å‘¨æœŸå°±æ˜¯ <em>å¼€æœºåˆ°å…³æœºã€‚</em></strong></p><p><img src="https://s1.ax1x.com/2020/10/03/03wZnS.png" srcset="/blog/img/loading.gif" alt="03wZnS.png"></p><h2 id="cmd"><a href="#cmd" class="headerlink" title="cmd"></a>cmd</h2><ul><li>å¿«é€Ÿæ‰“å¼€cmd</li></ul><p><img src="https://s1.ax1x.com/2020/10/03/03Ye0A.png" srcset="/blog/img/loading.gif" alt="03Ye0A.png"></p><h2 id="é¢œè‰²"><a href="#é¢œè‰²" class="headerlink" title="é¢œè‰²"></a>é¢œè‰²</h2><ul><li><font color="red">å‰ç«¯å¼€å‘è€…çš„ç¦åˆ©å·¥å…·</font></li></ul><p>uToolsæä¾›äº†å¤šä¸ªæ’ä»¶ï¼Œæœ‰çš„æ˜¯å®˜æ–¹çš„ï¼Œè¿˜æœ‰çš„æ˜¯å¼€å‘è€…ä»¬ç»´æŠ¤çš„ã€‚</p><p><img src="https://s1.ax1x.com/2020/10/03/03Y36g.png" srcset="/blog/img/loading.gif" alt="03Y36g.png"></p><p>MelodyJerryæœ€å¸¸ç”¨çš„æ˜¯<strong>â€œè‰²å½©åŠ©æ‰‹â€</strong>ã€‚</p><p>çœ‹ï¼Œç¾¡æ…•äº†å—ï¼Ÿ</p><p><img src="https://s1.ax1x.com/2020/10/03/03YIje.png" srcset="/blog/img/loading.gif" alt="03YIje.png"></p><p><img src="https://s1.ax1x.com/2020/10/03/03YLNt.png" srcset="/blog/img/loading.gif" alt="03YLNt.png"></p><p><img src="https://s1.ax1x.com/2020/10/03/03t9Bj.png" srcset="/blog/img/loading.gif" alt="03t9Bj.png"></p><h2 id="æœ¬åœ°å¿«é€Ÿæœç´¢"><a href="#æœ¬åœ°å¿«é€Ÿæœç´¢" class="headerlink" title="æœ¬åœ°å¿«é€Ÿæœç´¢"></a>æœ¬åœ°å¿«é€Ÿæœç´¢</h2><ul><li>é›†æˆEverythingçš„å†…æ ¸<ul><li>å¹²å‡€ç®€æ´çš„ç”¨æˆ·ç•Œé¢</li><li>å¿«é€Ÿæ–‡ä»¶ç´¢å¼•</li><li>å¿«é€Ÿæœç´¢</li><li>æœ€å°èµ„æºä½¿ç”¨</li><li>ä¾¿äºæ–‡ä»¶åˆ†äº«</li><li>å®æ—¶æ›´æ–°</li><li>â€¦â€¦</li></ul></li></ul><p><img src="https://s1.ax1x.com/2020/10/03/03ts8f.png" srcset="/blog/img/loading.gif" alt="03ts8f.png"></p><h2 id="å†…ç½‘ç©¿é€"><a href="#å†…ç½‘ç©¿é€" class="headerlink" title="å†…ç½‘ç©¿é€"></a>å†…ç½‘ç©¿é€</h2><ul><li>èƒ½å¤Ÿå¿«é€Ÿçš„å°†ä½ çš„å†…ç½‘æœåŠ¡æš´éœ²åˆ°å…¬ç½‘</li></ul><p><img src="https://s1.ax1x.com/2020/10/03/03NcJx.png" srcset="/blog/img/loading.gif" alt="03NcJx.png"></p><p>å¯åŠ¨ä½ æœ¬åœ°æœåŠ¡å™¨ï¼Œå¦‚ä¸‹é…ç½®ä½ æœ¬åœ°çš„ipï¼Œå’Œéšä¾¿èµ·ä¸ªå¤–ç½‘åŸŸåã€‚</p><p>è¿™æ ·ä½ å°±å¯ä»¥å¤–ç½‘è®¿é—®ä½ çš„æœåŠ¡äº†ï¼Œè¶…ç®€å•ï¼Œè¿™å¯æ¯”æœ‰äº›ç½‘ç«™æä¸ªå†…ç½‘ç©¿é€è¿˜å¾—æ”¶é’±å¼ºå¤šäº†ã€‚</p><p><img src="https://s1.ax1x.com/2020/10/03/03UklT.png" srcset="/blog/img/loading.gif" alt="03UklT.png"></p><h2 id="å¼€å‘å°å·¥å…·"><a href="#å¼€å‘å°å·¥å…·" class="headerlink" title="å¼€å‘å°å·¥å…·"></a>å¼€å‘å°å·¥å…·</h2><ul><li>åªå±•ç¤ºå…¶ä¸­ä¸€éƒ¨åˆ†æ’ä»¶</li></ul><p><img src="https://s1.ax1x.com/2020/10/03/03U8XD.png" srcset="/blog/img/loading.gif" alt="03U8XD.png"></p><h2 id="ç‹¬ç«‹æ–‡æ¡£"><a href="#ç‹¬ç«‹æ–‡æ¡£" class="headerlink" title="ç‹¬ç«‹æ–‡æ¡£"></a>ç‹¬ç«‹æ–‡æ¡£</h2><ul><li>åªå±•ç¤ºå…¶ä¸­ä¸€éƒ¨åˆ†æ–‡æ¡£æ‰‹å†Œ</li></ul><p><img src="https://s1.ax1x.com/2020/10/03/03UJne.png" srcset="/blog/img/loading.gif" alt="03UJne.png"></p><p>åƒMelodyJerryç»å¸¸ç”¨åˆ°çš„æ˜¯ï¼š</p><ul><li>Linux</li></ul><p><img src="https://s1.ax1x.com/2020/10/03/03Udht.png" srcset="/blog/img/loading.gif" alt="03Udht.png"></p><ul><li>Java</li></ul><p><img src="https://s1.ax1x.com/2020/10/03/03UUAA.png" srcset="/blog/img/loading.gif" alt="03UUAA.png"></p><h2 id="ç¨‹åºå‘˜æ‰‹å†Œ"><a href="#ç¨‹åºå‘˜æ‰‹å†Œ" class="headerlink" title="ç¨‹åºå‘˜æ‰‹å†Œ"></a>ç¨‹åºå‘˜æ‰‹å†Œ</h2><p>ä¸åŒäºä¸Šé¢çš„ç‹¬ç«‹æ–‡æ¡£ï¼Œâ€œç¨‹åºå‘˜æ‰‹å†Œâ€ç›´æ¥é›†æˆäº†å„ç§æ–‡æ¡£ï¼Œlistï¼š</p><ul><li>phpæ‰‹å†Œ</li><li>linuxæ‰‹å†Œ </li><li>pythonæ‰‹å†Œ </li><li>PyQt5æ–‡æ¡£ </li><li>Cå‡½æ•°</li><li>go</li><li>vimå‘½ä»¤</li><li>gitå‘½ä»¤ </li><li>sqlæ‰‹å†Œ </li><li>uTools API</li><li>java </li><li>javascript </li><li>vue</li><li>payload</li><li>devdocs</li></ul><blockquote><p>å…³äºæ­¤æ’ä»¶çš„è¯¦ç»†ä¿¡æ¯ï¼š<a href="https://yuanliao.info/d/356" target="_blank" rel="noopener">https://yuanliao.info/d/356</a></p></blockquote><p><img src="https://s1.ax1x.com/2020/10/03/03UWhq.png" srcset="/blog/img/loading.gif" alt="03UWhq.png"></p><h1 id="è¿›é˜¶ä½¿ç”¨uTools"><a href="#è¿›é˜¶ä½¿ç”¨uTools" class="headerlink" title="è¿›é˜¶ä½¿ç”¨uTools"></a>è¿›é˜¶ä½¿ç”¨uTools</h1><h2 id="å…¨å±€å¿«æ·é”®"><a href="#å…¨å±€å¿«æ·é”®" class="headerlink" title="å…¨å±€å¿«æ·é”®"></a>å…¨å±€å¿«æ·é”®</h2><p>é¡¾åæ€ä¹‰ï¼Œä¸Šå›¾MelodyJerryçš„ï¼š</p><p><img src="https://s1.ax1x.com/2020/10/03/03N7FI.png" srcset="/blog/img/loading.gif" alt="03N7FI.png"></p><h2 id="è¶…çº§é¢æ¿"><a href="#è¶…çº§é¢æ¿" class="headerlink" title="è¶…çº§é¢æ¿"></a>è¶…çº§é¢æ¿</h2><ul><li>è¿™æ˜¯1.3ç‰ˆæœ¬åæ–°å¢çš„</li></ul><p><img src="https://s1.ax1x.com/2020/10/03/03NxmQ.png" srcset="/blog/img/loading.gif" alt="03NxmQ.png"></p><p><img src="https://s1.ax1x.com/2020/10/03/03NOl8.png" srcset="/blog/img/loading.gif" alt="03NOl8.png"></p><h1 id="è‡ªå·±å¼€å‘uToolsæ’ä»¶"><a href="#è‡ªå·±å¼€å‘uToolsæ’ä»¶" class="headerlink" title="è‡ªå·±å¼€å‘uToolsæ’ä»¶"></a>è‡ªå·±å¼€å‘uToolsæ’ä»¶</h1><p>uToolså·²ç»å‘å¼€å‘è€…ä»¬æä¾›å¼€å‘è€…æ–‡æ¡£ï¼Œå¯ä»¥å‚è€ƒæ–‡æ¡£ï¼Œæ£é¼“è‡ªå·±çš„æ’ä»¶å“¦ã€‚</p><p>åƒMelodyJerryçš„ï¼Œæš‚æ—¶å°±ä¸å¼€æºï¼Œä¹Ÿå°±æš‚ä¸æ¼”ç¤ºäº†ã€‚</p><p>æ’ä»¶å¼€å‘æ–‡æ¡£ï¼š<a href="https://u.tools/docs/developer/welcome.html" target="_blank" rel="noopener">https://u.tools/docs/developer/welcome.html</a></p><h1 id="å¿ƒå¾—ä½“ä¼š"><a href="#å¿ƒå¾—ä½“ä¼š" class="headerlink" title="å¿ƒå¾—ä½“ä¼š"></a>å¿ƒå¾—ä½“ä¼š</h1><ul><li>ç”¨æˆ·ä½“éªŒæä½³</li><li>éº»é›€è™½å°ï¼Œäº”è„ä¿±å…¨ï¼šç®€æ´ã€æ–¹ä¾¿ã€è½»é‡ã€å¿«é€Ÿ</li><li>æ–‡æ¡£é½å…¨</li><li>æ”¯æŒå¼€å‘ä¸ªäººæ’ä»¶</li><li>UI å¾ˆèˆ’æœ</li></ul><p>å°±å†™è¿™ä¹ˆå¤šï¼Œæ›´å¤šçš„è¦è‡ªå·±å»æŒ–æ˜å•¦~</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;uToolsæ˜¯ä»€ä¹ˆï¼Ÿ&quot;&gt;&lt;a href=&quot;#uToolsæ˜¯ä»€ä¹ˆï¼Ÿ&quot; class=&quot;headerlink&quot; title=&quot;uToolsæ˜¯ä»€ä¹ˆï¼Ÿ&quot;&gt;&lt;/a&gt;uToolsæ˜¯ä»€ä¹ˆï¼Ÿ&lt;/h1&gt;&lt;center&gt;&lt;font color=&quot;#FF2800&quot;&gt;u&lt;/font&gt;&lt;font color=&quot;#FF5000&quot;&gt;T&lt;/font&gt;&lt;font color=&quot;#FF7800&quot;&gt;o&lt;/font&gt;&lt;font color=&quot;#FFA000&quot;&gt;o&lt;/font&gt;&lt;font color=&quot;#FFC800&quot;&gt;l&lt;/font&gt;&lt;font color=&quot;#FFF000&quot;&gt;s&lt;/font&gt;&lt;font color=&quot;#D7FF00&quot;&gt;ï¼Œ&lt;/font&gt;&lt;font color=&quot;#AFFF00&quot;&gt;ä½ &lt;/font&gt;&lt;font color=&quot;#87FF00&quot;&gt;çš„&lt;/font&gt;&lt;font color=&quot;#5FFF00&quot;&gt;ç”Ÿ&lt;/font&gt;&lt;font color=&quot;#37FF00&quot;&gt;äº§&lt;/font&gt;&lt;font color=&quot;#0FFF00&quot;&gt;åŠ›&lt;/font&gt;&lt;font color=&quot;#00FF28&quot;&gt;å·¥&lt;/font&gt;&lt;font color=&quot;#00FF50&quot;&gt;å…·&lt;/font&gt;&lt;font color=&quot;#00FF78&quot;&gt;é›†&lt;/font&gt;&lt;/center&gt;

&lt;ul&gt;
&lt;li&gt;æç®€&lt;/li&gt;
&lt;li&gt;æ’ä»¶åŒ–&lt;/li&gt;
&lt;li&gt;è·¨å¹³å°&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;å®˜ç½‘ï¼š&lt;a href=&quot;https://www.u.tools/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;https://www.u.tools/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;è‡ªç”±é›†æˆä¸°å¯Œæ’ä»¶ï¼Œå¿«é€ŸåŒ¹é…ã€Œåœºæ™¯åŠŸèƒ½ã€ï¼Œç”¨å®Œå³èµ° ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;é€šè¿‡è‡ªç”±é€‰é…ä¸°å¯Œçš„æ’ä»¶ï¼Œæ‰“é€ ä½ å¾—å¿ƒåº”æ‰‹çš„å·¥å…·é›†åˆã€‚&lt;/p&gt;
&lt;p&gt;è¯¥è½¯ä»¶æ”¯æŒWindowsã€Macä»¥åŠLinuxä½¿ç”¨ï¼Œå¹¶ä¸”æ‹¥æœ‰ä¸°å¯Œçš„æ’ä»¶åº“ã€‚&lt;/p&gt;
&lt;p&gt;ç®€å•æ¥è®²ï¼ŒuToolså¯ä»¥ä½œä¸ºä¸€ä¸ª&lt;strong&gt;ç¨‹åºå¿«é€Ÿå¯åŠ¨å™¨&lt;/strong&gt;ï¼Œä½¿ç”¨ä¸­è‹±æ–‡æœç´¢å¹¶å¿«é€Ÿæ‰“å¼€ä½ çš„æœ¬åœ°ç¨‹åºã€æ–‡ä»¶ã€ç³»ç»Ÿè®¾ç½®ç­‰ã€‚ä½ å¯ä»¥ä½¿ç”¨å¿«æ·é”®ï¼ˆé»˜è®¤ä¸º&lt;code&gt;alt+space&lt;/code&gt;ï¼‰å¿«é€Ÿå‘¼å‡ºè¿™ä¸ªæœç´¢æ¡†ï¼Œå°å·§å´ä¸ç®€å•ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å½“ä½ ç†Ÿæ‚‰å®ƒåï¼Œèƒ½å¤Ÿä¸ºä½ èŠ‚çº¦å¤§é‡æ—¶é—´ï¼Œè®©ä½ å¯ä»¥æ›´åŠ ä¸“æ³¨åœ°æ”¹å˜ä¸–ç•Œã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;h1 id=&quot;uToolsèƒ½åšä»€ä¹ˆï¼Ÿ&quot;&gt;&lt;a href=&quot;#uToolsèƒ½åšä»€ä¹ˆï¼Ÿ&quot; class=&quot;headerlink&quot; title=&quot;uToolsèƒ½åšä»€ä¹ˆï¼Ÿ&quot;&gt;&lt;/a&gt;uToolsèƒ½åšä»€ä¹ˆï¼Ÿ&lt;/h1&gt;&lt;p&gt;uToolsä½œè€…å°†æ­¤è½¯ä»¶è®¾è®¡ä¸º&lt;font color=&quot;red&quot; size=&quot;5&quot;&gt;â€œä¸€åˆ‡çš†æ’ä»¶â€&lt;/font&gt;çš„æ’ä»¶åŒ–å·¥å…·ï¼Œ&lt;strong&gt;æ‰€æœ‰çš„åŠŸèƒ½å‡å¯é€šè¿‡æ’ä»¶å®ç°ã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;æ’ä»¶ä¸­å¿ƒæœ‰å¾ˆå¤šå®ç”¨é«˜æ•ˆåœ°æ’ä»¶ï¼Œä¾‹å¦‚ï¼šåœ¨çº¿ç¿»è¯‘ã€å‹ç¼©å›¾ç‰‡ã€é¢œè‰²å°åŠ©æ‰‹ã€å¼€å‘æ–‡æ¡£ã€å›¾åºŠã€OCRå›¾ç‰‡è¯†åˆ«ç­‰ç­‰å°å·¥å…·ï¼Œä½ å¯ä»¥é€‰æ‹©é€‚åˆè‡ªå·±ä½¿ç”¨åœºæ™¯çš„æ’ä»¶å®‰è£…ä½¿ç”¨ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://s1.ax1x.com/2020/10/03/03G2r9.png&quot; srcset=&quot;/blog/img/loading.gif&quot; alt=&quot;03G2r9.png&quot;&gt;&lt;/p&gt;
    
    </summary>
    
    
    
      <category term="å°æŠ€å·§" scheme="https://melodyjerry.github.io/blog/tags/%E5%B0%8F%E6%8A%80%E5%B7%A7/"/>
    
      <category term="å·¥å…·" scheme="https://melodyjerry.github.io/blog/tags/%E5%B7%A5%E5%85%B7/"/>
    
      <category term="å¼€å‘" scheme="https://melodyjerry.github.io/blog/tags/%E5%BC%80%E5%8F%91/"/>
    
  </entry>
  
  <entry>
    <title>ã€ç‹‚ç¥è¯´Javaã€‘SpringBootç¬”è®°å­˜æ¡£</title>
    <link href="https://melodyjerry.github.io/blog/2020/10/02/%E3%80%90%E7%8B%82%E7%A5%9E%E8%AF%B4Java%E3%80%91SpringBoot%E7%AC%94%E8%AE%B0%E5%AD%98%E6%A1%A3/"/>
    <id>https://melodyjerry.github.io/blog/2020/10/02/%E3%80%90%E7%8B%82%E7%A5%9E%E8%AF%B4Java%E3%80%91SpringBoot%E7%AC%94%E8%AE%B0%E5%AD%98%E6%A1%A3/</id>
    <published>2020-10-02T14:51:02.771Z</published>
    <updated>2020-10-03T07:54:16.372Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>è½¬è‡ª<a href="https://space.bilibili.com/95256449?spm_id_from=333.788.b_765f7570696e666f.1" target="_blank" rel="noopener">ç‹‚ç¥è€å¸ˆ</a>ï¼Œéå¸¸æ„Ÿè°¢è€å¸ˆï¼Œä»…ä½œä¸ºä¸ªäººç¬”è®°ä½¿ç”¨</p><p>éƒ¨åˆ†æ¥è‡ª<a href="https://blog.csdn.net/qq_26017543/article/details/108530412?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522160164522319725255512089%2522%252C%2522scm%2522%253A%252220140713.130102334.pc%255Fall.%2522%257D&amp;request_id=160164522319725255512089&amp;biz_id=0&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~all~first_rank_v2~rank_v28_p-12-108530412.pc_first_rank_v2_rank_v28_p&amp;utm_term=%E7%8B%82%E7%A5%9E+springboot" target="_blank" rel="noopener">CSDN</a></p></blockquote><a id="more"></a><h1 id="1ã€SpringBootç®€ä»‹ï¼šHello-Worldï¼"><a href="#1ã€SpringBootç®€ä»‹ï¼šHello-Worldï¼" class="headerlink" title="1ã€SpringBootç®€ä»‹ï¼šHello,Worldï¼"></a>1ã€SpringBootç®€ä»‹ï¼šHello,Worldï¼</h1><h2 id="1-1ã€å›é¡¾ä»€ä¹ˆæ˜¯Spring"><a href="#1-1ã€å›é¡¾ä»€ä¹ˆæ˜¯Spring" class="headerlink" title="1.1ã€å›é¡¾ä»€ä¹ˆæ˜¯Spring"></a>1.1ã€å›é¡¾ä»€ä¹ˆæ˜¯Spring</h2><p>Springæ˜¯ä¸€ä¸ªå¼€æºæ¡†æ¶ï¼Œ2003 å¹´å…´èµ·çš„ä¸€ä¸ªè½»é‡çº§çš„Java å¼€å‘æ¡†æ¶ï¼Œä½œè€…ï¼šRod Johnson ã€‚</p><p><strong>Springæ˜¯ä¸ºäº†è§£å†³ä¼ä¸šçº§åº”ç”¨å¼€å‘çš„å¤æ‚æ€§è€Œåˆ›å»ºçš„ï¼Œç®€åŒ–å¼€å‘ã€‚</strong></p><h2 id="1-2ã€Springæ˜¯å¦‚ä½•ç®€åŒ–Javaå¼€å‘çš„"><a href="#1-2ã€Springæ˜¯å¦‚ä½•ç®€åŒ–Javaå¼€å‘çš„" class="headerlink" title="1.2ã€Springæ˜¯å¦‚ä½•ç®€åŒ–Javaå¼€å‘çš„"></a>1.2ã€Springæ˜¯å¦‚ä½•ç®€åŒ–Javaå¼€å‘çš„</h2><p>ä¸ºäº†é™ä½Javaå¼€å‘çš„å¤æ‚æ€§ï¼ŒSpringé‡‡ç”¨äº†ä»¥ä¸‹4ç§å…³é”®ç­–ç•¥ï¼š</p><p>1ã€åŸºäºPOJOçš„è½»é‡çº§å’Œæœ€å°ä¾µå…¥æ€§ç¼–ç¨‹ï¼Œæ‰€æœ‰ä¸œè¥¿éƒ½æ˜¯beanï¼›</p><p>2ã€é€šè¿‡IOCï¼Œä¾èµ–æ³¨å…¥ï¼ˆDIï¼‰å’Œé¢å‘æ¥å£å®ç°æ¾è€¦åˆï¼›</p><p>3ã€åŸºäºåˆ‡é¢ï¼ˆAOPï¼‰å’Œæƒ¯ä¾‹è¿›è¡Œå£°æ˜å¼ç¼–ç¨‹ï¼›</p><p>4ã€é€šè¿‡åˆ‡é¢å’Œæ¨¡ç‰ˆå‡å°‘æ ·å¼ä»£ç ï¼ŒRedisTemplateï¼ŒxxxTemplateï¼›</p><h2 id="1-3ã€ä»€ä¹ˆæ˜¯SpringBoot"><a href="#1-3ã€ä»€ä¹ˆæ˜¯SpringBoot" class="headerlink" title="1.3ã€ä»€ä¹ˆæ˜¯SpringBoot"></a>1.3ã€ä»€ä¹ˆæ˜¯SpringBoot</h2><p>å­¦è¿‡javawebçš„åŒå­¦å°±çŸ¥é“ï¼Œå¼€å‘ä¸€ä¸ªwebåº”ç”¨ï¼Œä»æœ€åˆå¼€å§‹æ¥è§¦Servletç»“åˆTomcat, è·‘å‡ºä¸€ä¸ªHello Wolrldç¨‹åºï¼Œæ˜¯è¦ç»å†ç‰¹åˆ«å¤šçš„æ­¥éª¤ï¼›åæ¥å°±ç”¨äº†æ¡†æ¶Strutsï¼Œå†åæ¥æ˜¯SpringMVCï¼Œåˆ°äº†ç°åœ¨çš„SpringBootï¼Œè¿‡ä¸€ä¸¤å¹´åˆä¼šæœ‰å…¶ä»–webæ¡†æ¶å‡ºç°ï¼›ä½ ä»¬æœ‰ç»å†è¿‡æ¡†æ¶ä¸æ–­çš„æ¼”è¿›ï¼Œç„¶åè‡ªå·±å¼€å‘é¡¹ç›®æ‰€æœ‰çš„æŠ€æœ¯ä¹Ÿåœ¨ä¸æ–­çš„å˜åŒ–ã€æ”¹é€ å—ï¼Ÿå»ºè®®éƒ½å¯ä»¥å»ç»å†ä¸€éï¼›</p><p>è¨€å½’æ­£ä¼ ï¼Œä»€ä¹ˆæ˜¯SpringBootå‘¢ï¼Œå°±æ˜¯ä¸€ä¸ªjavawebçš„å¼€å‘æ¡†æ¶ï¼Œå’ŒSpringMVCç±»ä¼¼ï¼Œå¯¹æ¯”å…¶ä»–javawebæ¡†æ¶çš„å¥½å¤„ï¼Œå®˜æ–¹è¯´æ˜¯ç®€åŒ–å¼€å‘ï¼Œçº¦å®šå¤§äºé…ç½®ï¼Œ you can â€œjust runâ€ï¼Œèƒ½è¿…é€Ÿçš„å¼€å‘webåº”ç”¨ï¼Œå‡ è¡Œä»£ç å¼€å‘ä¸€ä¸ªhttpæ¥å£ã€‚</p><p>æ‰€æœ‰çš„æŠ€æœ¯æ¡†æ¶çš„å‘å±•ä¼¼ä¹éƒ½éµå¾ªäº†ä¸€æ¡ä¸»çº¿è§„å¾‹ï¼šä»ä¸€ä¸ªå¤æ‚åº”ç”¨åœºæ™¯ è¡ç”Ÿ ä¸€ç§è§„èŒƒæ¡†æ¶ï¼Œäººä»¬åªéœ€è¦è¿›è¡Œå„ç§é…ç½®è€Œä¸éœ€è¦è‡ªå·±å»å®ç°å®ƒï¼Œè¿™æ—¶å€™å¼ºå¤§çš„é…ç½®åŠŸèƒ½æˆäº†ä¼˜ç‚¹ï¼›å‘å±•åˆ°ä¸€å®šç¨‹åº¦ä¹‹åï¼Œäººä»¬æ ¹æ®å®é™…ç”Ÿäº§åº”ç”¨æƒ…å†µï¼Œé€‰å–å…¶ä¸­å®ç”¨åŠŸèƒ½å’Œè®¾è®¡ç²¾åï¼Œé‡æ„å‡ºä¸€äº›è½»é‡çº§çš„æ¡†æ¶ï¼›ä¹‹åä¸ºäº†æé«˜å¼€å‘æ•ˆç‡ï¼Œå«Œå¼ƒåŸå…ˆçš„å„ç±»é…ç½®è¿‡äºéº»çƒ¦ï¼Œäºæ˜¯å¼€å§‹æå€¡â€œçº¦å®šå¤§äºé…ç½®â€ï¼Œè¿›è€Œè¡ç”Ÿå‡ºä¸€äº›ä¸€ç«™å¼çš„è§£å†³æ–¹æ¡ˆã€‚</p><p>æ˜¯çš„è¿™å°±æ˜¯Javaä¼ä¸šçº§åº”ç”¨-&gt;J2EE-&gt;spring-&gt;springbootçš„è¿‡ç¨‹ã€‚</p><p>éšç€ Spring ä¸æ–­çš„å‘å±•ï¼Œæ¶‰åŠçš„é¢†åŸŸè¶Šæ¥è¶Šå¤šï¼Œé¡¹ç›®æ•´åˆå¼€å‘éœ€è¦é…åˆå„ç§å„æ ·çš„æ–‡ä»¶ï¼Œæ…¢æ…¢å˜å¾—ä¸é‚£ä¹ˆæ˜“ç”¨ç®€å•ï¼Œè¿èƒŒäº†æœ€åˆçš„ç†å¿µï¼Œç”šè‡³äººç§°é…ç½®åœ°ç‹±ã€‚Spring Boot æ­£æ˜¯åœ¨è¿™æ ·çš„ä¸€ä¸ªèƒŒæ™¯ä¸‹è¢«æŠ½è±¡å‡ºæ¥çš„å¼€å‘æ¡†æ¶ï¼Œç›®çš„ä¸ºäº†è®©å¤§å®¶æ›´å®¹æ˜“çš„ä½¿ç”¨ Spring ã€æ›´å®¹æ˜“çš„é›†æˆå„ç§å¸¸ç”¨çš„ä¸­é—´ä»¶ã€å¼€æºè½¯ä»¶ï¼›</p><p>Spring Boot åŸºäº Spring å¼€å‘ï¼ŒSpirng Boot æœ¬èº«å¹¶ä¸æä¾› Spring æ¡†æ¶çš„æ ¸å¿ƒç‰¹æ€§ä»¥åŠæ‰©å±•åŠŸèƒ½ï¼Œåªæ˜¯ç”¨äºå¿«é€Ÿã€æ•æ·åœ°å¼€å‘æ–°ä¸€ä»£åŸºäº Spring æ¡†æ¶çš„åº”ç”¨ç¨‹åºã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå®ƒå¹¶ä¸æ˜¯ç”¨æ¥æ›¿ä»£ Spring çš„è§£å†³æ–¹æ¡ˆï¼Œè€Œæ˜¯å’Œ Spring æ¡†æ¶ç´§å¯†ç»“åˆç”¨äºæå‡ Spring å¼€å‘è€…ä½“éªŒçš„å·¥å…·ã€‚Spring Boot ä»¥<strong>çº¦å®šå¤§äºé…ç½®çš„æ ¸å¿ƒæ€æƒ³</strong>ï¼Œé»˜è®¤å¸®æˆ‘ä»¬è¿›è¡Œäº†å¾ˆå¤šè®¾ç½®ï¼Œå¤šæ•° Spring Boot åº”ç”¨åªéœ€è¦å¾ˆå°‘çš„ Spring é…ç½®ã€‚åŒæ—¶å®ƒé›†æˆäº†å¤§é‡å¸¸ç”¨çš„ç¬¬ä¸‰æ–¹åº“é…ç½®ï¼ˆä¾‹å¦‚ Redisã€MongoDBã€Jpaã€RabbitMQã€Quartz ç­‰ç­‰ï¼‰ï¼ŒSpring Boot åº”ç”¨ä¸­è¿™äº›ç¬¬ä¸‰æ–¹åº“å‡ ä¹å¯ä»¥é›¶é…ç½®çš„å¼€ç®±å³ç”¨ã€‚</p><p>ç®€å•æ¥è¯´å°±æ˜¯SpringBootå…¶å®ä¸æ˜¯ä»€ä¹ˆæ–°çš„æ¡†æ¶ï¼Œå®ƒé»˜è®¤é…ç½®äº†å¾ˆå¤šæ¡†æ¶çš„ä½¿ç”¨æ–¹å¼ï¼Œå°±åƒmavenæ•´åˆäº†æ‰€æœ‰çš„jaråŒ…ï¼Œspring bootæ•´åˆäº†æ‰€æœ‰çš„æ¡†æ¶ ã€‚</p><p>Spring Boot å‡ºç”Ÿåé—¨ï¼Œä»ä¸€å¼€å§‹å°±ç«™åœ¨ä¸€ä¸ªæ¯”è¾ƒé«˜çš„èµ·ç‚¹ï¼Œåˆç»è¿‡è¿™å‡ å¹´çš„å‘å±•ï¼Œç”Ÿæ€è¶³å¤Ÿå®Œå–„ï¼ŒSpring Boot å·²ç»å½“ä¹‹æ— æ„§æˆä¸º Java é¢†åŸŸæœ€çƒ­é—¨çš„æŠ€æœ¯ã€‚</p><p><strong>Spring Bootçš„ä¸»è¦ä¼˜ç‚¹ï¼š</strong></p><ul><li>ä¸ºæ‰€æœ‰Springå¼€å‘è€…æ›´å¿«çš„å…¥é—¨</li><li><strong>å¼€ç®±å³ç”¨</strong>ï¼Œæä¾›å„ç§é»˜è®¤é…ç½®æ¥ç®€åŒ–é¡¹ç›®é…ç½®</li><li>å†…åµŒå¼å®¹å™¨ç®€åŒ–Webé¡¹ç›®</li><li>æ²¡æœ‰å†—ä½™ä»£ç ç”Ÿæˆå’ŒXMLé…ç½®çš„è¦æ±‚</li></ul><p>çœŸçš„å¾ˆçˆ½ï¼Œæˆ‘ä»¬å¿«é€Ÿå»ä½“éªŒå¼€å‘ä¸ªæ¥å£çš„æ„Ÿè§‰å§ï¼</p><p>Helloï¼ŒWorld</p><h2 id="1-4ã€å‡†å¤‡å·¥ä½œ"><a href="#1-4ã€å‡†å¤‡å·¥ä½œ" class="headerlink" title="1.4ã€å‡†å¤‡å·¥ä½œ"></a>1.4ã€å‡†å¤‡å·¥ä½œ</h2><p>æˆ‘ä»¬å°†å­¦ä¹ å¦‚ä½•å¿«é€Ÿçš„åˆ›å»ºä¸€ä¸ªSpring Bootåº”ç”¨ï¼Œå¹¶ä¸”å®ç°ä¸€ä¸ªç®€å•çš„Httpè¯·æ±‚å¤„ç†ã€‚é€šè¿‡è¿™ä¸ªä¾‹å­å¯¹Spring Bootæœ‰ä¸€ä¸ªåˆæ­¥çš„äº†è§£ï¼Œå¹¶ä½“éªŒå…¶ç»“æ„ç®€å•ã€å¼€å‘å¿«é€Ÿçš„ç‰¹æ€§ã€‚</p><p>æˆ‘çš„ç¯å¢ƒå‡†å¤‡ï¼š</p><ul><li>java version â€œ1.8.0_181â€</li><li>Maven-3.6.1</li><li>SpringBoot 2.x æœ€æ–°ç‰ˆ</li></ul><p>å¼€å‘å·¥å…·ï¼š</p><ul><li>IDEA</li></ul><h2 id="1-5ã€åˆ›å»ºåŸºç¡€é¡¹ç›®è¯´æ˜"><a href="#1-5ã€åˆ›å»ºåŸºç¡€é¡¹ç›®è¯´æ˜" class="headerlink" title="1.5ã€åˆ›å»ºåŸºç¡€é¡¹ç›®è¯´æ˜"></a>1.5ã€åˆ›å»ºåŸºç¡€é¡¹ç›®è¯´æ˜</h2><p>Springå®˜æ–¹æä¾›äº†éå¸¸æ–¹ä¾¿çš„å·¥å…·è®©æˆ‘ä»¬å¿«é€Ÿæ„å»ºåº”ç”¨</p><p>Spring Initializrï¼š<a href="https://start.spring.io/" target="_blank" rel="noopener">https://start.spring.io/</a></p><p><strong>é¡¹ç›®åˆ›å»ºæ–¹å¼ä¸€ï¼š</strong>ä½¿ç”¨Spring Initializr çš„ Webé¡µé¢åˆ›å»ºé¡¹ç›®</p><p>1ã€æ‰“å¼€ <a href="https://start.spring.io/" target="_blank" rel="noopener">https://start.spring.io/</a></p><p>2ã€å¡«å†™é¡¹ç›®ä¿¡æ¯</p><p>3ã€ç‚¹å‡»â€Generate Projectâ€œæŒ‰é’®ç”Ÿæˆé¡¹ç›®ï¼›ä¸‹è½½æ­¤é¡¹ç›®</p><p>4ã€è§£å‹é¡¹ç›®åŒ…ï¼Œå¹¶ç”¨IDEAä»¥Mavené¡¹ç›®å¯¼å…¥ï¼Œä¸€è·¯ä¸‹ä¸€æ­¥å³å¯ï¼Œç›´åˆ°é¡¹ç›®å¯¼å…¥å®Œæ¯•ã€‚</p><p>5ã€å¦‚æœæ˜¯ç¬¬ä¸€æ¬¡ä½¿ç”¨ï¼Œå¯èƒ½é€Ÿåº¦ä¼šæ¯”è¾ƒæ…¢ï¼ŒåŒ…æ¯”è¾ƒå¤šã€éœ€è¦è€å¿ƒç­‰å¾…ä¸€åˆ‡å°±ç»ªã€‚</p><p><strong>é¡¹ç›®åˆ›å»ºæ–¹å¼äºŒï¼š</strong>ä½¿ç”¨ IDEA ç›´æ¥åˆ›å»ºé¡¹ç›®</p><p>1ã€åˆ›å»ºä¸€ä¸ªæ–°é¡¹ç›®</p><p>2ã€é€‰æ‹©spring initalizr ï¼Œ å¯ä»¥çœ‹åˆ°é»˜è®¤å°±æ˜¯å»å®˜ç½‘çš„å¿«é€Ÿæ„å»ºå·¥å…·é‚£é‡Œå®ç°</p><p>3ã€å¡«å†™é¡¹ç›®ä¿¡æ¯</p><p>4ã€é€‰æ‹©åˆå§‹åŒ–çš„ç»„ä»¶ï¼ˆåˆå­¦å‹¾é€‰ Web å³å¯ï¼‰</p><p>5ã€å¡«å†™é¡¹ç›®è·¯å¾„</p><p>6ã€ç­‰å¾…é¡¹ç›®æ„å»ºæˆåŠŸ</p><p><strong>é¡¹ç›®ç»“æ„åˆ†æï¼š</strong></p><p>é€šè¿‡ä¸Šé¢æ­¥éª¤å®Œæˆäº†åŸºç¡€é¡¹ç›®çš„åˆ›å»ºã€‚å°±ä¼šè‡ªåŠ¨ç”Ÿæˆä»¥ä¸‹æ–‡ä»¶ã€‚</p><p>1ã€ç¨‹åºçš„ä¸»å¯åŠ¨ç±»</p><p>2ã€ä¸€ä¸ª application.properties é…ç½®æ–‡ä»¶</p><p>3ã€ä¸€ä¸ª æµ‹è¯•ç±»</p><p>4ã€ä¸€ä¸ª pom.xml</p><h2 id="1-6ã€pom-xml-åˆ†æ"><a href="#1-6ã€pom-xml-åˆ†æ" class="headerlink" title="1.6ã€pom.xml åˆ†æ"></a>1.6ã€pom.xml åˆ†æ</h2><p>æ‰“å¼€pom.xmlï¼Œçœ‹çœ‹Spring Booté¡¹ç›®çš„ä¾èµ–ï¼š</p><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- çˆ¶ä¾èµ– --&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">parent</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.2.5.RELEASE<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">relativePath</span>/&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">parent</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span>    <span class="hljs-comment">&lt;!-- webåœºæ™¯å¯åŠ¨å™¨ --&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>    <span class="hljs-comment">&lt;!-- springbootå•å…ƒæµ‹è¯• --&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>test<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span>        <span class="hljs-comment">&lt;!-- å‰”é™¤ä¾èµ– --&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">exclusions</span>&gt;</span>            <span class="hljs-tag">&lt;<span class="hljs-name">exclusion</span>&gt;</span>                <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.junit.vintage<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>                <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>junit-vintage-engine<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>            <span class="hljs-tag">&lt;/<span class="hljs-name">exclusion</span>&gt;</span>        <span class="hljs-tag">&lt;/<span class="hljs-name">exclusions</span>&gt;</span>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">build</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">plugins</span>&gt;</span>        <span class="hljs-comment">&lt;!-- æ‰“åŒ…æ’ä»¶ --&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">plugin</span>&gt;</span>            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>        <span class="hljs-tag">&lt;/<span class="hljs-name">plugin</span>&gt;</span>    <span class="hljs-tag">&lt;/<span class="hljs-name">plugins</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">build</span>&gt;</span></code></pre><h2 id="1-7ã€ç¼–å†™ä¸€ä¸ªhttpæ¥å£"><a href="#1-7ã€ç¼–å†™ä¸€ä¸ªhttpæ¥å£" class="headerlink" title="1.7ã€ç¼–å†™ä¸€ä¸ªhttpæ¥å£"></a>1.7ã€ç¼–å†™ä¸€ä¸ªhttpæ¥å£</h2><p>1ã€åœ¨ä¸»ç¨‹åºçš„åŒçº§ç›®å½•ä¸‹ï¼Œæ–°å»ºä¸€ä¸ªcontrolleråŒ…ï¼Œä¸€å®šè¦åœ¨åŒçº§ç›®å½•ä¸‹ï¼Œå¦åˆ™è¯†åˆ«ä¸åˆ°</p><p>2ã€åœ¨åŒ…ä¸­æ–°å»ºä¸€ä¸ªHelloControllerç±»</p><pre><code class="hljs java"><span class="hljs-meta">@RestController</span><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">HelloController</span> </span>{    <span class="hljs-meta">@RequestMapping</span>(<span class="hljs-string">"/hello"</span>)    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">hello</span><span class="hljs-params">()</span> </span>{        <span class="hljs-keyword">return</span> <span class="hljs-string">"Hello World"</span>;    }    }</code></pre><p>3ã€ç¼–å†™å®Œæ¯•åï¼Œä»ä¸»ç¨‹åºå¯åŠ¨é¡¹ç›®ï¼Œæµè§ˆå™¨å‘èµ·è¯·æ±‚ï¼Œçœ‹é¡µé¢è¿”å›ï¼›æ§åˆ¶å°è¾“å‡ºäº† Tomcat è®¿é—®çš„ç«¯å£å·ï¼</p><p><img src="https://img2020.cnblogs.com/blog/1905053/202004/1905053-20200412220856954-754704117.png" srcset="/blog/img/loading.gif" alt="img"></p><p>ç®€å•å‡ æ­¥ï¼Œå°±å®Œæˆäº†ä¸€ä¸ªwebæ¥å£çš„å¼€å‘ï¼ŒSpringBootå°±æ˜¯è¿™ä¹ˆç®€å•ã€‚æ‰€ä»¥æˆ‘ä»¬å¸¸ç”¨å®ƒæ¥å»ºç«‹æˆ‘ä»¬çš„å¾®æœåŠ¡é¡¹ç›®ï¼</p><h2 id="1-8ã€å°†é¡¹ç›®æ‰“æˆjaråŒ…ï¼Œç‚¹å‡»-mavençš„-package"><a href="#1-8ã€å°†é¡¹ç›®æ‰“æˆjaråŒ…ï¼Œç‚¹å‡»-mavençš„-package" class="headerlink" title="1.8ã€å°†é¡¹ç›®æ‰“æˆjaråŒ…ï¼Œç‚¹å‡» mavençš„ package"></a>1.8ã€å°†é¡¹ç›®æ‰“æˆjaråŒ…ï¼Œç‚¹å‡» mavençš„ package</h2><p><img src="https://img2020.cnblogs.com/blog/1905053/202004/1905053-20200412220931385-1725690944.png" srcset="/blog/img/loading.gif" alt="img"></p><p>å¦‚æœé‡åˆ°ä»¥ä¸Šé”™è¯¯ï¼Œå¯ä»¥é…ç½®æ‰“åŒ…æ—¶ è·³è¿‡é¡¹ç›®è¿è¡Œæµ‹è¯•ç”¨ä¾‹</p><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--</span><span class="hljs-comment">    åœ¨å·¥ä½œä¸­,å¾ˆå¤šæƒ…å†µä¸‹æˆ‘ä»¬æ‰“åŒ…æ˜¯ä¸æƒ³æ‰§è¡Œæµ‹è¯•ç”¨ä¾‹çš„</span><span class="hljs-comment">    å¯èƒ½æ˜¯æµ‹è¯•ç”¨ä¾‹ä¸å®Œäº‹,æˆ–æ˜¯æµ‹è¯•ç”¨ä¾‹ä¼šå½±å“æ•°æ®åº“æ•°æ®</span><span class="hljs-comment">    è·³è¿‡æµ‹è¯•ç”¨ä¾‹æ‰§</span><span class="hljs-comment">    --&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">plugin</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>maven-surefire-plugin<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">configuration</span>&gt;</span>        <span class="hljs-comment">&lt;!--è·³è¿‡é¡¹ç›®è¿è¡Œæµ‹è¯•ç”¨ä¾‹--&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">skipTests</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">skipTests</span>&gt;</span>    <span class="hljs-tag">&lt;/<span class="hljs-name">configuration</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">plugin</span>&gt;</span></code></pre><p>å¦‚æœæ‰“åŒ…æˆåŠŸï¼Œåˆ™ä¼šåœ¨targetç›®å½•ä¸‹ç”Ÿæˆä¸€ä¸ª jar åŒ…</p><p><img src="https://img2020.cnblogs.com/blog/1905053/202004/1905053-20200412220948749-1673815977.png" srcset="/blog/img/loading.gif" alt="img"></p><p>æ‰“æˆäº†jaråŒ…åï¼Œå°±å¯ä»¥åœ¨ä»»ä½•åœ°æ–¹è¿è¡Œäº†ï¼OK</p><p><strong>å½©è›‹</strong></p><p>å¦‚ä½•æ›´æ”¹å¯åŠ¨æ—¶æ˜¾ç¤ºçš„å­—ç¬¦æ‹¼æˆçš„å­—æ¯ï¼ŒSpringBootå‘¢ï¼Ÿä¹Ÿå°±æ˜¯ banner å›¾æ¡ˆï¼›</p><p>åªéœ€ä¸€æ­¥ï¼šåˆ°é¡¹ç›®ä¸‹çš„ resources ç›®å½•ä¸‹æ–°å»ºä¸€ä¸ªbanner.txt å³å¯ã€‚</p><p>å›¾æ¡ˆå¯ä»¥åˆ°ï¼š<a href="https://www.bootschool.net/ascii" target="_blank" rel="noopener">https://www.bootschool.net/ascii</a> è¿™ä¸ªç½‘ç«™ç”Ÿæˆï¼Œç„¶åæ‹·è´åˆ°æ–‡ä»¶ä¸­å³å¯ï¼</p><p><img src="https://img2020.cnblogs.com/blog/1905053/202004/1905053-20200412221004279-2137228085.png" srcset="/blog/img/loading.gif" alt="img"></p><p>**SpringBootè¿™ä¹ˆç®€å•çš„ä¸œè¥¿èƒŒåä¸€å®šæœ‰æ•…äº‹ï¼Œæˆ‘ä»¬ä¹‹å</p><h1 id="2ã€SpringBootï¼šè¿è¡ŒåŸç†åˆæ¢"><a href="#2ã€SpringBootï¼šè¿è¡ŒåŸç†åˆæ¢" class="headerlink" title="2ã€SpringBootï¼šè¿è¡ŒåŸç†åˆæ¢"></a>2ã€SpringBootï¼šè¿è¡ŒåŸç†åˆæ¢</h1><p>æˆ‘ä»¬ä¹‹å‰å†™çš„HelloSpringBootï¼Œåˆ°åº•æ˜¯æ€ä¹ˆè¿è¡Œçš„å‘¢ï¼ŒMavené¡¹ç›®ï¼Œæˆ‘ä»¬ä¸€èˆ¬ä»pom.xmlæ–‡ä»¶æ¢ç©¶èµ·ï¼›</p><blockquote><p><strong>pom.xml</strong></p></blockquote><h2 id="2-1ã€çˆ¶ä¾èµ–"><a href="#2-1ã€çˆ¶ä¾èµ–" class="headerlink" title="2.1ã€çˆ¶ä¾èµ–"></a>2.1ã€çˆ¶ä¾èµ–</h2><p>å…¶ä¸­å®ƒä¸»è¦æ˜¯ä¾èµ–ä¸€ä¸ªçˆ¶é¡¹ç›®ï¼Œä¸»è¦æ˜¯ç®¡ç†é¡¹ç›®çš„èµ„æºè¿‡æ»¤åŠæ’ä»¶ï¼</p><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">parent</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.2.5.RELEASE<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">relativePath</span>/&gt;</span> <span class="hljs-comment">&lt;!-- lookup parent from repository --&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">parent</span>&gt;</span></code></pre><p>ç‚¹è¿›å»ï¼Œå‘ç°è¿˜æœ‰ä¸€ä¸ªçˆ¶ä¾èµ–</p><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">parent</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-dependencies<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.2.5.RELEASE<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">relativePath</span>&gt;</span>../../spring-boot-dependencies<span class="hljs-tag">&lt;/<span class="hljs-name">relativePath</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">parent</span>&gt;</span></code></pre><p>è¿™é‡Œæ‰æ˜¯çœŸæ­£ç®¡ç†SpringBootåº”ç”¨é‡Œé¢æ‰€æœ‰ä¾èµ–ç‰ˆæœ¬çš„åœ°æ–¹ï¼ŒSpringBootçš„ç‰ˆæœ¬æ§åˆ¶ä¸­å¿ƒï¼›</p><p><strong>ä»¥åæˆ‘ä»¬å¯¼å…¥ä¾èµ–é»˜è®¤æ˜¯ä¸éœ€è¦å†™ç‰ˆæœ¬ï¼›ä½†æ˜¯å¦‚æœå¯¼å…¥çš„åŒ…æ²¡æœ‰åœ¨ä¾èµ–ä¸­ç®¡ç†ç€å°±éœ€è¦æ‰‹åŠ¨é…ç½®ç‰ˆæœ¬äº†ï¼›</strong></p><h2 id="2-2ã€å¯åŠ¨å™¨-spring-boot-starter"><a href="#2-2ã€å¯åŠ¨å™¨-spring-boot-starter" class="headerlink" title="2.2ã€å¯åŠ¨å™¨ spring-boot-starter"></a>2.2ã€å¯åŠ¨å™¨ spring-boot-starter</h2><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span></code></pre><p><strong>springboot-boot-starter-xxx</strong>ï¼šå°±æ˜¯spring-bootçš„åœºæ™¯å¯åŠ¨å™¨</p><p><strong>spring-boot-starter-web</strong>ï¼šå¸®æˆ‘ä»¬å¯¼å…¥äº†webæ¨¡å—æ­£å¸¸è¿è¡Œæ‰€ä¾èµ–çš„ç»„ä»¶ï¼›</p><p>SpringBootå°†æ‰€æœ‰çš„åŠŸèƒ½åœºæ™¯éƒ½æŠ½å–å‡ºæ¥ï¼Œåšæˆä¸€ä¸ªä¸ªçš„starter ï¼ˆå¯åŠ¨å™¨ï¼‰ï¼Œåªéœ€è¦åœ¨é¡¹ç›®ä¸­å¼•å…¥è¿™äº›starterå³å¯ï¼Œæ‰€æœ‰ç›¸å…³çš„ä¾èµ–éƒ½ä¼šå¯¼å…¥è¿›æ¥ ï¼Œ æˆ‘ä»¬è¦ç”¨ä»€ä¹ˆåŠŸèƒ½å°±å¯¼å…¥ä»€ä¹ˆæ ·çš„åœºæ™¯å¯åŠ¨å™¨å³å¯ ï¼›æˆ‘ä»¬æœªæ¥ä¹Ÿå¯ä»¥è‡ªå·±è‡ªå®šä¹‰ starterï¼›</p><blockquote><p><strong>ä¸»å¯åŠ¨ç±»</strong></p></blockquote><p>åˆ†æå®Œäº† pom.xml æ¥çœ‹çœ‹è¿™ä¸ªå¯åŠ¨ç±»</p><h2 id="2-3ã€é»˜è®¤çš„ä¸»å¯åŠ¨ç±»"><a href="#2-3ã€é»˜è®¤çš„ä¸»å¯åŠ¨ç±»" class="headerlink" title="2.3ã€é»˜è®¤çš„ä¸»å¯åŠ¨ç±»"></a>2.3ã€é»˜è®¤çš„ä¸»å¯åŠ¨ç±»</h2><pre><code class="hljs java"><span class="hljs-comment">//@SpringBootApplication æ¥æ ‡æ³¨ä¸€ä¸ªä¸»ç¨‹åºç±»</span><span class="hljs-comment">//è¯´æ˜è¿™æ˜¯ä¸€ä¸ªSpring Bootåº”ç”¨</span><span class="hljs-meta">@SpringBootApplication</span><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SpringbootApplication</span> </span>{   <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>{     <span class="hljs-comment">//ä»¥ä¸ºæ˜¯å¯åŠ¨äº†ä¸€ä¸ªæ–¹æ³•ï¼Œæ²¡æƒ³åˆ°å¯åŠ¨äº†ä¸€ä¸ªæœåŠ¡</span>      SpringApplication.run(SpringbootApplication<span class="hljs-class">.<span class="hljs-keyword">class</span>, <span class="hljs-title">args</span>)</span>;   }}</code></pre><p>ä½†æ˜¯<strong>ä¸€ä¸ªç®€å•çš„å¯åŠ¨ç±»å¹¶ä¸ç®€å•ï¼</strong>æˆ‘ä»¬æ¥åˆ†æä¸€ä¸‹è¿™äº›æ³¨è§£éƒ½å¹²äº†ä»€ä¹ˆ</p><h2 id="2-4ã€-SpringBootApplication"><a href="#2-4ã€-SpringBootApplication" class="headerlink" title="2.4ã€@SpringBootApplication"></a>2.4ã€@SpringBootApplication</h2><p>ä½œç”¨ï¼šæ ‡æ³¨åœ¨æŸä¸ªç±»ä¸Šè¯´æ˜è¿™ä¸ªç±»æ˜¯SpringBootçš„ä¸»é…ç½®ç±» ï¼Œ SpringBootå°±åº”è¯¥è¿è¡Œè¿™ä¸ªç±»çš„mainæ–¹æ³•æ¥å¯åŠ¨SpringBootåº”ç”¨ï¼›</p><p>è¿›å…¥è¿™ä¸ªæ³¨è§£ï¼šå¯ä»¥çœ‹åˆ°ä¸Šé¢è¿˜æœ‰å¾ˆå¤šå…¶ä»–æ³¨è§£ï¼</p><pre><code class="hljs java"><span class="hljs-meta">@SpringBootConfiguration</span><span class="hljs-meta">@EnableAutoConfiguration</span><span class="hljs-meta">@ComponentScan</span>(    excludeFilters = {<span class="hljs-meta">@Filter</span>(    type = FilterType.CUSTOM,    classes = {TypeExcludeFilter<span class="hljs-class">.<span class="hljs-keyword">class</span>}</span><span class="hljs-class">), @<span class="hljs-title">Filter</span>(</span><span class="hljs-class">    <span class="hljs-title">type</span> </span>= FilterType.CUSTOM,    classes = {AutoConfigurationExcludeFilter<span class="hljs-class">.<span class="hljs-keyword">class</span>}</span><span class="hljs-class">)}</span><span class="hljs-class">)</span><span class="hljs-class"><span class="hljs-title">public</span> @<span class="hljs-title">interface</span> <span class="hljs-title">SpringBootApplication</span> </span>{    <span class="hljs-comment">// ......</span>}</code></pre><h2 id="2-5ã€-ComponentScan"><a href="#2-5ã€-ComponentScan" class="headerlink" title="2.5ã€@ComponentScan"></a>2.5ã€@ComponentScan</h2><p>è¿™ä¸ªæ³¨è§£åœ¨Springä¸­å¾ˆé‡è¦ ,å®ƒå¯¹åº”XMLé…ç½®ä¸­çš„å…ƒç´ ã€‚</p><p>ä½œç”¨ï¼šè‡ªåŠ¨æ‰«æå¹¶åŠ è½½ç¬¦åˆæ¡ä»¶çš„ç»„ä»¶æˆ–è€…bean ï¼Œ å°†è¿™ä¸ªbeanå®šä¹‰åŠ è½½åˆ°IOCå®¹å™¨ä¸­</p><h2 id="2-6ã€-SpringBootConfiguration"><a href="#2-6ã€-SpringBootConfiguration" class="headerlink" title="2.6ã€@SpringBootConfiguration"></a>2.6ã€@SpringBootConfiguration</h2><p>ä½œç”¨ï¼šSpringBootçš„é…ç½®ç±» ï¼Œæ ‡æ³¨åœ¨æŸä¸ªç±»ä¸Š ï¼Œ è¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªSpringBootçš„é…ç½®ç±»ï¼›</p><p>æˆ‘ä»¬ç»§ç»­è¿›å»è¿™ä¸ªæ³¨è§£æŸ¥çœ‹</p><pre><code class="hljs java"><span class="hljs-comment">// ç‚¹è¿›å»å¾—åˆ°ä¸‹é¢çš„ @Component</span><span class="hljs-meta">@Configuration</span><span class="hljs-keyword">public</span> <span class="hljs-meta">@interface</span> SpringBootConfiguration {}<span class="hljs-meta">@Component</span><span class="hljs-keyword">public</span> <span class="hljs-meta">@interface</span> Configuration {}</code></pre><p>è¿™é‡Œçš„ @Configurationï¼Œè¯´æ˜è¿™æ˜¯ä¸€ä¸ªé…ç½®ç±» ï¼Œé…ç½®ç±»å°±æ˜¯å¯¹åº”Springçš„xml é…ç½®æ–‡ä»¶ï¼›</p><p>é‡Œé¢çš„ @Component è¿™å°±è¯´æ˜ï¼Œå¯åŠ¨ç±»æœ¬èº«ä¹Ÿæ˜¯Springä¸­çš„ä¸€ä¸ªç»„ä»¶è€Œå·²ï¼Œè´Ÿè´£å¯åŠ¨åº”ç”¨ï¼</p><p>æˆ‘ä»¬å›åˆ° SpringBootApplication æ³¨è§£ä¸­ç»§ç»­çœ‹ã€‚</p><h2 id="2-7ã€-EnableAutoConfiguration"><a href="#2-7ã€-EnableAutoConfiguration" class="headerlink" title="2.7ã€@EnableAutoConfiguration"></a>2.7ã€@EnableAutoConfiguration</h2><p><strong>@EnableAutoConfiguration ï¼šå¼€å¯è‡ªåŠ¨é…ç½®åŠŸèƒ½</strong></p><p>ä»¥å‰æˆ‘ä»¬éœ€è¦è‡ªå·±é…ç½®çš„ä¸œè¥¿ï¼Œè€Œç°åœ¨SpringBootå¯ä»¥è‡ªåŠ¨å¸®æˆ‘ä»¬é…ç½® ï¼›@EnableAutoConfigurationå‘Šè¯‰SpringBootå¼€å¯è‡ªåŠ¨é…ç½®åŠŸèƒ½ï¼Œè¿™æ ·è‡ªåŠ¨é…ç½®æ‰èƒ½ç”Ÿæ•ˆï¼›</p><p>ç‚¹è¿›æ³¨è§£æ¥ç»­æŸ¥çœ‹ï¼š</p><p><strong>@AutoConfigurationPackage ï¼šè‡ªåŠ¨é…ç½®åŒ…</strong></p><pre><code class="hljs java"><span class="hljs-meta">@Import</span>({Registrar<span class="hljs-class">.<span class="hljs-keyword">class</span>})</span><span class="hljs-class"><span class="hljs-title">public</span> @<span class="hljs-title">interface</span> <span class="hljs-title">AutoConfigurationPackage</span> </span>{}</code></pre><p><strong>@import</strong> ï¼šSpringåº•å±‚æ³¨è§£@import ï¼Œ ç»™å®¹å™¨ä¸­å¯¼å…¥ä¸€ä¸ªç»„ä»¶</p><p>Registrar.class ä½œç”¨ï¼šå°†ä¸»å¯åŠ¨ç±»çš„æ‰€åœ¨åŒ…åŠåŒ…ä¸‹é¢æ‰€æœ‰å­åŒ…é‡Œé¢çš„æ‰€æœ‰ç»„ä»¶æ‰«æåˆ°Springå®¹å™¨ ï¼›</p><p>è¿™ä¸ªåˆ†æå®Œäº†ï¼Œé€€åˆ°ä¸Šä¸€æ­¥ï¼Œç»§ç»­çœ‹</p><p><strong>@Import({AutoConfigurationImportSelector.class}) ï¼šç»™å®¹å™¨å¯¼å…¥ç»„ä»¶ ï¼›</strong></p><p>AutoConfigurationImportSelector ï¼šè‡ªåŠ¨é…ç½®å¯¼å…¥é€‰æ‹©å™¨ï¼Œé‚£ä¹ˆå®ƒä¼šå¯¼å…¥å“ªäº›ç»„ä»¶çš„é€‰æ‹©å™¨å‘¢ï¼Ÿæˆ‘ä»¬ç‚¹å‡»å»è¿™ä¸ªç±»çœ‹æºç ï¼š</p><p>1ã€è¿™ä¸ªç±»ä¸­æœ‰ä¸€ä¸ªè¿™æ ·çš„æ–¹æ³•</p><pre><code class="hljs java"><span class="hljs-comment">// è·å¾—å€™é€‰çš„é…ç½®</span><span class="hljs-function"><span class="hljs-keyword">protected</span> List&lt;String&gt; <span class="hljs-title">getCandidateConfigurations</span><span class="hljs-params">(AnnotationMetadata metadata, AnnotationAttributes attributes)</span> </span>{    <span class="hljs-comment">//è¿™é‡Œçš„getSpringFactoriesLoaderFactoryClassï¼ˆï¼‰æ–¹æ³•</span>    <span class="hljs-comment">//è¿”å›çš„å°±æ˜¯æˆ‘ä»¬æœ€å¼€å§‹çœ‹çš„å¯åŠ¨è‡ªåŠ¨å¯¼å…¥é…ç½®æ–‡ä»¶çš„æ³¨è§£ç±»ï¼›EnableAutoConfiguration</span>    List&lt;String&gt; configurations = SpringFactoriesLoader.loadFactoryNames(<span class="hljs-keyword">this</span>.getSpringFactoriesLoaderFactoryClass(), <span class="hljs-keyword">this</span>.getBeanClassLoader());    Assert.notEmpty(configurations, <span class="hljs-string">"No auto configuration classes found in META-INF/spring.factories. If you are using a custom packaging, make sure that file is correct."</span>);    <span class="hljs-keyword">return</span> configurations;}</code></pre><p>2ã€è¿™ä¸ªæ–¹æ³•åˆè°ƒç”¨äº† SpringFactoriesLoader ç±»çš„é™æ€æ–¹æ³•ï¼æˆ‘ä»¬è¿›å…¥SpringFactoriesLoaderç±»loadFactoryNames() æ–¹æ³•</p><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> List&lt;String&gt; <span class="hljs-title">loadFactoryNames</span><span class="hljs-params">(Class&lt;?&gt; factoryClass, @Nullable ClassLoader classLoader)</span> </span>{    String factoryClassName = factoryClass.getName();    <span class="hljs-comment">//è¿™é‡Œå®ƒåˆè°ƒç”¨äº† loadSpringFactories æ–¹æ³•</span>    <span class="hljs-keyword">return</span> (List)loadSpringFactories(classLoader).getOrDefault(factoryClassName, Collections.emptyList());}</code></pre><p>3ã€æˆ‘ä»¬ç»§ç»­ç‚¹å‡»æŸ¥çœ‹ loadSpringFactories æ–¹æ³•</p><pre><code class="hljs java"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> Map&lt;String, List&lt;String&gt;&gt; loadSpringFactories(<span class="hljs-meta">@Nullable</span> ClassLoader classLoader) {    <span class="hljs-comment">//è·å¾—classLoader ï¼Œ æˆ‘ä»¬è¿”å›å¯ä»¥çœ‹åˆ°è¿™é‡Œå¾—åˆ°çš„å°±æ˜¯EnableAutoConfigurationæ ‡æ³¨çš„ç±»æœ¬èº«</span>    MultiValueMap&lt;String, String&gt; result = (MultiValueMap)cache.get(classLoader);    <span class="hljs-keyword">if</span> (result != <span class="hljs-keyword">null</span>) {        <span class="hljs-keyword">return</span> result;    } <span class="hljs-keyword">else</span> {        <span class="hljs-keyword">try</span> {            <span class="hljs-comment">//å»è·å–ä¸€ä¸ªèµ„æº "META-INF/spring.factories"</span>            Enumeration&lt;URL&gt; urls = classLoader != <span class="hljs-keyword">null</span> ? classLoader.getResources(<span class="hljs-string">"META-INF/spring.factories"</span>) : ClassLoader.getSystemResources(<span class="hljs-string">"META-INF/spring.factories"</span>);            LinkedMultiValueMap result = <span class="hljs-keyword">new</span> LinkedMultiValueMap();            <span class="hljs-comment">//å°†è¯»å–åˆ°çš„èµ„æºéå†ï¼Œå°è£…æˆä¸ºä¸€ä¸ªProperties</span>            <span class="hljs-keyword">while</span>(urls.hasMoreElements()) {                URL url = (URL)urls.nextElement();                UrlResource resource = <span class="hljs-keyword">new</span> UrlResource(url);                Properties properties = PropertiesLoaderUtils.loadProperties(resource);                Iterator var6 = properties.entrySet().iterator();                <span class="hljs-keyword">while</span>(var6.hasNext()) {                    Entry&lt;?, ?&gt; entry = (Entry)var6.next();                    String factoryClassName = ((String)entry.getKey()).trim();                    String[] var9 = StringUtils.commaDelimitedListToStringArray((String)entry.getValue());                    <span class="hljs-keyword">int</span> var10 = var9.length;                    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> var11 = <span class="hljs-number">0</span>; var11 &lt; var10; ++var11) {                        String factoryName = var9[var11];                        result.add(factoryClassName, factoryName.trim());                    }                }            }            cache.put(classLoader, result);            <span class="hljs-keyword">return</span> result;        } <span class="hljs-keyword">catch</span> (IOException var13) {            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> IllegalArgumentException(<span class="hljs-string">"Unable to load factories from location [META-INF/spring.factories]"</span>, var13);        }    }}</code></pre><p>4ã€å‘ç°ä¸€ä¸ªå¤šæ¬¡å‡ºç°çš„æ–‡ä»¶ï¼šspring.factoriesï¼Œå…¨å±€æœç´¢å®ƒ</p><h2 id="2-8ã€spring-factories"><a href="#2-8ã€spring-factories" class="headerlink" title="2.8ã€spring.factories"></a>2.8ã€spring.factories</h2><p>æˆ‘ä»¬æ ¹æ®æºå¤´æ‰“å¼€spring.factories ï¼Œ çœ‹åˆ°äº†å¾ˆå¤šè‡ªåŠ¨é…ç½®çš„æ–‡ä»¶ï¼›è¿™å°±æ˜¯è‡ªåŠ¨é…ç½®æ ¹æºæ‰€åœ¨ï¼</p><p><img src="https://img2020.cnblogs.com/blog/1905053/202004/1905053-20200412221052594-126548247.png" srcset="/blog/img/loading.gif" alt="img"></p><p><strong>WebMvcAutoConfiguration</strong></p><p>æˆ‘ä»¬åœ¨ä¸Šé¢çš„è‡ªåŠ¨é…ç½®ç±»éšä¾¿æ‰¾ä¸€ä¸ªæ‰“å¼€çœ‹çœ‹ï¼Œæ¯”å¦‚ ï¼šWebMvcAutoConfiguration</p><p><img src="https://img2020.cnblogs.com/blog/1905053/202004/1905053-20200412221108489-300000735.png" srcset="/blog/img/loading.gif" alt="img"></p><p>å¯ä»¥çœ‹åˆ°è¿™äº›ä¸€ä¸ªä¸ªçš„éƒ½æ˜¯JavaConfigé…ç½®ç±»ï¼Œè€Œä¸”éƒ½æ³¨å…¥äº†ä¸€äº›Beanï¼Œå¯ä»¥æ‰¾ä¸€äº›è‡ªå·±è®¤è¯†çš„ç±»ï¼Œçœ‹ç€ç†Ÿæ‚‰ä¸€ä¸‹ï¼</p><p>æ‰€ä»¥ï¼Œè‡ªåŠ¨é…ç½®çœŸæ­£å®ç°æ˜¯ä»classpathä¸­æœå¯»æ‰€æœ‰çš„META-INF/spring.factoriesé…ç½®æ–‡ä»¶ ï¼Œå¹¶å°†å…¶ä¸­å¯¹åº”çš„ org.springframework.boot.autoconfigure. åŒ…ä¸‹çš„é…ç½®é¡¹ï¼Œé€šè¿‡åå°„å®ä¾‹åŒ–ä¸ºå¯¹åº”æ ‡æ³¨äº† @Configurationçš„JavaConfigå½¢å¼çš„IOCå®¹å™¨é…ç½®ç±» ï¼Œ ç„¶åå°†è¿™äº›éƒ½æ±‡æ€»æˆä¸ºä¸€ä¸ªå®ä¾‹å¹¶åŠ è½½åˆ°IOCå®¹å™¨ä¸­ã€‚</p><p><strong>ç»“è®ºï¼š</strong></p><ol><li>SpringBootåœ¨å¯åŠ¨çš„æ—¶å€™ä»ç±»è·¯å¾„ä¸‹çš„META-INF/spring.factoriesä¸­è·å–EnableAutoConfigurationæŒ‡å®šçš„å€¼</li><li>å°†è¿™äº›å€¼ä½œä¸ºè‡ªåŠ¨é…ç½®ç±»å¯¼å…¥å®¹å™¨ ï¼Œ è‡ªåŠ¨é…ç½®ç±»å°±ç”Ÿæ•ˆ ï¼Œ å¸®æˆ‘ä»¬è¿›è¡Œè‡ªåŠ¨é…ç½®å·¥ä½œï¼›</li><li>æ•´ä¸ªJ2EEçš„æ•´ä½“è§£å†³æ–¹æ¡ˆå’Œè‡ªåŠ¨é…ç½®éƒ½åœ¨springboot-autoconfigureçš„jaråŒ…ä¸­ï¼›</li><li>å®ƒä¼šç»™å®¹å™¨ä¸­å¯¼å…¥éå¸¸å¤šçš„è‡ªåŠ¨é…ç½®ç±» ï¼ˆxxxAutoConfigurationï¼‰, å°±æ˜¯ç»™å®¹å™¨ä¸­å¯¼å…¥è¿™ä¸ªåœºæ™¯éœ€è¦çš„æ‰€æœ‰ç»„ä»¶ ï¼Œ å¹¶é…ç½®å¥½è¿™äº›ç»„ä»¶ ï¼›</li><li>æœ‰äº†è‡ªåŠ¨é…ç½®ç±» ï¼Œ å…å»äº†æˆ‘ä»¬æ‰‹åŠ¨ç¼–å†™é…ç½®æ³¨å…¥åŠŸèƒ½ç»„ä»¶ç­‰çš„å·¥ä½œï¼›</li></ol><p><strong>ç°åœ¨å¤§å®¶åº”è¯¥å¤§æ¦‚çš„äº†è§£äº†ä¸‹ï¼ŒSpringBootçš„è¿è¡ŒåŸç†ï¼Œåé¢æˆ‘ä»¬è¿˜ä¼šæ·±åŒ–ä¸€æ¬¡ï¼</strong></p><blockquote><p><strong>SpringApplication</strong></p></blockquote><h2 id="2-9ã€ä¸ç®€å•çš„æ–¹æ³•"><a href="#2-9ã€ä¸ç®€å•çš„æ–¹æ³•" class="headerlink" title="2.9ã€ä¸ç®€å•çš„æ–¹æ³•"></a>2.9ã€ä¸ç®€å•çš„æ–¹æ³•</h2><p>æˆ‘æœ€åˆä»¥ä¸ºå°±æ˜¯è¿è¡Œäº†ä¸€ä¸ªmainæ–¹æ³•ï¼Œæ²¡æƒ³åˆ°å´å¼€å¯äº†ä¸€ä¸ªæœåŠ¡ï¼›</p><pre><code class="hljs java"><span class="hljs-meta">@SpringBootApplication</span><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SpringbootApplication</span> </span>{    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>{        SpringApplication.run(SpringbootApplication<span class="hljs-class">.<span class="hljs-keyword">class</span>, <span class="hljs-title">args</span>)</span>;    }}</code></pre><p><strong>SpringApplication.runåˆ†æ</strong></p><p>åˆ†æè¯¥æ–¹æ³•ä¸»è¦åˆ†ä¸¤éƒ¨åˆ†ï¼Œä¸€éƒ¨åˆ†æ˜¯SpringApplicationçš„å®ä¾‹åŒ–ï¼ŒäºŒæ˜¯runæ–¹æ³•çš„æ‰§è¡Œï¼›</p><h2 id="2-10ã€SpringApplication"><a href="#2-10ã€SpringApplication" class="headerlink" title="2.10ã€SpringApplication"></a>2.10ã€SpringApplication</h2><p><strong>è¿™ä¸ªç±»ä¸»è¦åšäº†ä»¥ä¸‹å››ä»¶äº‹æƒ…ï¼š</strong></p><p>1ã€æ¨æ–­åº”ç”¨çš„ç±»å‹æ˜¯æ™®é€šçš„é¡¹ç›®è¿˜æ˜¯Webé¡¹ç›®</p><p>2ã€æŸ¥æ‰¾å¹¶åŠ è½½æ‰€æœ‰å¯ç”¨åˆå§‹åŒ–å™¨ ï¼Œ è®¾ç½®åˆ°initializerså±æ€§ä¸­</p><p>3ã€æ‰¾å‡ºæ‰€æœ‰çš„åº”ç”¨ç¨‹åºç›‘å¬å™¨ï¼Œè®¾ç½®åˆ°listenerså±æ€§ä¸­</p><p>4ã€æ¨æ–­å¹¶è®¾ç½®mainæ–¹æ³•çš„å®šä¹‰ç±»ï¼Œæ‰¾åˆ°è¿è¡Œçš„ä¸»ç±»</p><p>æŸ¥çœ‹æ„é€ å™¨ï¼š</p><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">SpringApplication</span><span class="hljs-params">(ResourceLoader resourceLoader, Class... primarySources)</span> </span>{    <span class="hljs-comment">// ......</span>    <span class="hljs-keyword">this</span>.webApplicationType = WebApplicationType.deduceFromClasspath();    <span class="hljs-keyword">this</span>.setInitializers(<span class="hljs-keyword">this</span>.getSpringFactoriesInstances();    <span class="hljs-keyword">this</span>.setListeners(<span class="hljs-keyword">this</span>.getSpringFactoriesInstances(ApplicationListener<span class="hljs-class">.<span class="hljs-keyword">class</span>))</span>;    <span class="hljs-keyword">this</span>.mainApplicationClass = <span class="hljs-keyword">this</span>.deduceMainApplicationClass();}</code></pre><h2 id="2-11ã€runæ–¹æ³•æµç¨‹åˆ†æ"><a href="#2-11ã€runæ–¹æ³•æµç¨‹åˆ†æ" class="headerlink" title="2.11ã€runæ–¹æ³•æµç¨‹åˆ†æ"></a>2.11ã€runæ–¹æ³•æµç¨‹åˆ†æ</h2><p><img src="https://img2020.cnblogs.com/blog/1905053/202004/1905053-20200412221135119-1843322351.png" srcset="/blog/img/loading.gif" alt="img"><br>è·Ÿç€æºç å’Œè¿™å¹…å›¾å°±å¯ä»¥ä¸€æ¢ç©¶ç«Ÿäº†ï¼</p><h1 id="3ã€SpringBootï¼šyamlé…ç½®æ³¨å…¥"><a href="#3ã€SpringBootï¼šyamlé…ç½®æ³¨å…¥" class="headerlink" title="3ã€SpringBootï¼šyamlé…ç½®æ³¨å…¥"></a>3ã€SpringBootï¼šyamlé…ç½®æ³¨å…¥</h1><p>yamlè¯­æ³•å­¦ä¹ </p><h2 id="3-1ã€é…ç½®æ–‡ä»¶"><a href="#3-1ã€é…ç½®æ–‡ä»¶" class="headerlink" title="3.1ã€é…ç½®æ–‡ä»¶"></a>3.1ã€é…ç½®æ–‡ä»¶</h2><p>SpringBootä½¿ç”¨ä¸€ä¸ªå…¨å±€çš„é…ç½®æ–‡ä»¶ ï¼Œ é…ç½®æ–‡ä»¶åç§°æ˜¯å›ºå®šçš„</p><ul><li>application.properties</li><li><ul><li>è¯­æ³•ç»“æ„ ï¼škey=value</li></ul></li><li>application.yml</li><li><ul><li>è¯­æ³•ç»“æ„ ï¼škeyï¼šç©ºæ ¼ value</li></ul></li></ul><p><strong>é…ç½®æ–‡ä»¶çš„ä½œç”¨ ï¼š</strong>ä¿®æ”¹SpringBootè‡ªåŠ¨é…ç½®çš„é»˜è®¤å€¼ï¼Œå› ä¸ºSpringBootåœ¨åº•å±‚éƒ½ç»™æˆ‘ä»¬è‡ªåŠ¨é…ç½®å¥½äº†ï¼›</p><p>æ¯”å¦‚æˆ‘ä»¬å¯ä»¥åœ¨é…ç½®æ–‡ä»¶ä¸­ä¿®æ”¹Tomcat é»˜è®¤å¯åŠ¨çš„ç«¯å£å·ï¼æµ‹è¯•ä¸€ä¸‹ï¼</p><ul><li><pre><code class="hljs ini"><span class="hljs-attr">server.port</span>=<span class="hljs-number">8081</span></code></pre></li></ul><h2 id="3-2ã€yamlæ¦‚è¿°"><a href="#3-2ã€yamlæ¦‚è¿°" class="headerlink" title="3.2ã€yamlæ¦‚è¿°"></a>3.2ã€yamlæ¦‚è¿°</h2><p>YAMLæ˜¯ â€œYAML Ainâ€™t a Markup Languageâ€ ï¼ˆYAMLä¸æ˜¯ä¸€ç§æ ‡è®°è¯­è¨€ï¼‰çš„é€’å½’ç¼©å†™ã€‚åœ¨å¼€å‘çš„è¿™ç§è¯­è¨€æ—¶ï¼ŒYAML çš„æ„æ€å…¶å®æ˜¯ï¼šâ€Yet Another Markup Languageâ€ï¼ˆä»æ˜¯ä¸€ç§æ ‡è®°è¯­è¨€ï¼‰</p><p><strong>è¿™ç§è¯­è¨€ä»¥æ•°æ®\</strong>**ä½œ**<em>\</em>ä¸ºä¸­å¿ƒï¼Œè€Œä¸æ˜¯ä»¥æ ‡è®°è¯­è¨€ä¸ºé‡ç‚¹ï¼**</p><p>ä»¥å‰çš„é…ç½®æ–‡ä»¶ï¼Œå¤§å¤šæ•°éƒ½æ˜¯ä½¿ç”¨xmlæ¥é…ç½®ï¼›æ¯”å¦‚ä¸€ä¸ªç®€å•çš„ç«¯å£é…ç½®ï¼Œæˆ‘ä»¬æ¥å¯¹æ¯”ä¸‹yamlå’Œxml</p><p>ä¼ ç»Ÿxmlé…ç½®ï¼š</p><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">server</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">port</span>&gt;</span>8081<span class="hljs-tag">&lt;<span class="hljs-name">port</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">server</span>&gt;</span></code></pre><p>yamlé…ç½®ï¼š</p><pre><code class="hljs yml"><span class="hljs-string">serverï¼š</span>  <span class="hljs-attr">prot:</span> <span class="hljs-number">8080</span></code></pre><h2 id="3-3ã€yamlåŸºç¡€è¯­æ³•"><a href="#3-3ã€yamlåŸºç¡€è¯­æ³•" class="headerlink" title="3.3ã€yamlåŸºç¡€è¯­æ³•"></a>3.3ã€yamlåŸºç¡€è¯­æ³•</h2><p>è¯´æ˜ï¼šè¯­æ³•è¦æ±‚ä¸¥æ ¼ï¼</p><p>1ã€ç©ºæ ¼ä¸èƒ½çœç•¥</p><p>2ã€ä»¥ç¼©è¿›æ¥æ§åˆ¶å±‚çº§å…³ç³»ï¼Œåªè¦æ˜¯å·¦è¾¹å¯¹é½çš„ä¸€åˆ—æ•°æ®éƒ½æ˜¯åŒä¸€ä¸ªå±‚çº§çš„ã€‚</p><p>3ã€å±æ€§å’Œå€¼çš„å¤§å°å†™éƒ½æ˜¯ååˆ†æ•æ„Ÿçš„ã€‚</p><p><strong>å­—é¢é‡ï¼šæ™®é€šçš„å€¼ [ æ•°å­—ï¼Œå¸ƒå°”å€¼ï¼Œå­—ç¬¦ä¸² ]</strong></p><p>å­—é¢é‡ç›´æ¥å†™åœ¨åé¢å°±å¯ä»¥ ï¼Œ å­—ç¬¦ä¸²é»˜è®¤ä¸ç”¨åŠ ä¸ŠåŒå¼•å·æˆ–è€…å•å¼•å·ï¼›</p><pre><code class="hljs yml"><span class="hljs-attr">k:</span> <span class="hljs-string">v</span></code></pre><p>æ³¨æ„ï¼š</p><ul><li><p>â€œ â€ åŒå¼•å·ï¼Œä¸ä¼šè½¬ä¹‰å­—ç¬¦ä¸²é‡Œé¢çš„ç‰¹æ®Šå­—ç¬¦ ï¼Œ ç‰¹æ®Šå­—ç¬¦ä¼šä½œä¸ºæœ¬èº«æƒ³è¡¨ç¤ºçš„æ„æ€ï¼›</p><p>  æ¯”å¦‚ ï¼šname: â€œkuang \n shenâ€ è¾“å‡º ï¼škuang æ¢è¡Œ shen</p></li><li><p>â€˜â€™ å•å¼•å·ï¼Œä¼šè½¬ä¹‰ç‰¹æ®Šå­—ç¬¦ ï¼Œ ç‰¹æ®Šå­—ç¬¦æœ€ç»ˆä¼šå˜æˆå’Œæ™®é€šå­—ç¬¦ä¸€æ ·è¾“å‡º</p><p>  æ¯”å¦‚ ï¼šname: â€˜kuang \n shenâ€™ è¾“å‡º ï¼škuang \n shen</p></li></ul><p><strong>å¯¹è±¡ã€Mapï¼ˆé”®å€¼å¯¹ï¼‰</strong></p><pre><code class="hljs yml"><span class="hljs-comment">#å¯¹è±¡ã€Mapæ ¼å¼</span><span class="hljs-attr">k:</span>     <span class="hljs-attr">v1:</span>    <span class="hljs-attr">v2:</span></code></pre><p>åœ¨ä¸‹ä¸€è¡Œæ¥å†™å¯¹è±¡çš„å±æ€§å’Œå€¼å¾—å…³ç³»ï¼Œæ³¨æ„ç¼©è¿›ï¼›æ¯”å¦‚ï¼š</p><pre><code class="hljs yml"><span class="hljs-attr">student:</span>    <span class="hljs-attr">name:</span> <span class="hljs-string">qinjiang</span>    <span class="hljs-attr">age:</span> <span class="hljs-number">3</span></code></pre><p>è¡Œå†…å†™æ³•</p><pre><code class="hljs yml"><span class="hljs-attr">student:</span> <span class="hljs-string">{name:</span> <span class="hljs-string">qinjiang,age:</span> <span class="hljs-number">3</span><span class="hljs-string">}</span></code></pre><p><strong>æ•°ç»„ï¼ˆ Listã€set ï¼‰</strong></p><p>ç”¨ - å€¼è¡¨ç¤ºæ•°ç»„ä¸­çš„ä¸€ä¸ªå…ƒç´ ,æ¯”å¦‚ï¼š</p><pre><code class="hljs yml"><span class="hljs-attr">pets:</span> <span class="hljs-bullet">-</span> <span class="hljs-string">cat</span> <span class="hljs-bullet">-</span> <span class="hljs-string">dog</span> <span class="hljs-bullet">-</span> <span class="hljs-string">pig</span></code></pre><p>è¡Œå†…å†™æ³•</p><pre><code class="hljs yml"><span class="hljs-attr">pets:</span> <span class="hljs-string">[cat,dog,pig]</span></code></pre><p><strong>ä¿®æ”¹SpringBootçš„é»˜è®¤ç«¯å£å·</strong></p><p>é…ç½®æ–‡ä»¶ä¸­æ·»åŠ ï¼Œç«¯å£å·çš„å‚æ•°ï¼Œå°±å¯ä»¥åˆ‡æ¢ç«¯å£ï¼›</p><pre><code class="hljs yml"><span class="hljs-attr">server:</span>    <span class="hljs-attr">port:</span> <span class="hljs-number">8082</span></code></pre><p>æ³¨å…¥é…ç½®æ–‡ä»¶</p><p>yamlæ–‡ä»¶æ›´å¼ºå¤§çš„åœ°æ–¹åœ¨äºï¼Œä»–å¯ä»¥ç»™æˆ‘ä»¬çš„å®ä½“ç±»ç›´æ¥æ³¨å…¥åŒ¹é…å€¼ï¼</p><h2 id="3-4ã€yamlæ³¨å…¥é…ç½®æ–‡ä»¶"><a href="#3-4ã€yamlæ³¨å…¥é…ç½®æ–‡ä»¶" class="headerlink" title="3.4ã€yamlæ³¨å…¥é…ç½®æ–‡ä»¶"></a>3.4ã€yamlæ³¨å…¥é…ç½®æ–‡ä»¶</h2><p>1ã€åœ¨springbooté¡¹ç›®ä¸­çš„resourcesç›®å½•ä¸‹æ–°å»ºä¸€ä¸ªæ–‡ä»¶ application.yml</p><p>2ã€ç¼–å†™ä¸€ä¸ªå®ä½“ç±» Dogï¼›</p><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.kuang.springboot.pojo;<span class="hljs-meta">@Component</span>  <span class="hljs-comment">//æ³¨å†Œbeanåˆ°å®¹å™¨ä¸­</span><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Dog</span> </span>{    <span class="hljs-keyword">private</span> String name;    <span class="hljs-keyword">private</span> Integer age;        <span class="hljs-comment">//æœ‰å‚æ— å‚æ„é€ ã€getã€setæ–¹æ³•ã€toString()æ–¹æ³•  </span>}</code></pre><p>3ã€æ€è€ƒï¼Œæˆ‘ä»¬åŸæ¥æ˜¯å¦‚ä½•ç»™beanæ³¨å…¥å±æ€§å€¼çš„ï¼@Valueï¼Œç»™ç‹—ç‹—ç±»æµ‹è¯•ä¸€ä¸‹ï¼š</p><pre><code class="hljs java"><span class="hljs-meta">@Component</span> <span class="hljs-comment">//æ³¨å†Œbean</span><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Dog</span> </span>{    <span class="hljs-meta">@Value</span>(<span class="hljs-string">"é˜¿é»„"</span>)    <span class="hljs-keyword">private</span> String name;    <span class="hljs-meta">@Value</span>(<span class="hljs-string">"18"</span>)    <span class="hljs-keyword">private</span> Integer age;}</code></pre><p>4ã€åœ¨SpringBootçš„æµ‹è¯•ç±»ä¸‹æ³¨å…¥ç‹—ç‹—è¾“å‡ºä¸€ä¸‹ï¼›</p><pre><code class="hljs java"><span class="hljs-meta">@SpringBootTest</span><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">DemoApplicationTests</span> </span>{    <span class="hljs-meta">@Autowired</span> <span class="hljs-comment">//å°†ç‹—ç‹—è‡ªåŠ¨æ³¨å…¥è¿›æ¥</span>    Dog dog;    <span class="hljs-meta">@Test</span>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">contextLoads</span><span class="hljs-params">()</span> </span>{        System.out.println(dog); <span class="hljs-comment">//æ‰“å°çœ‹ä¸‹ç‹—ç‹—å¯¹è±¡</span>    }}</code></pre><p>ç»“æœæˆåŠŸè¾“å‡ºï¼Œ@Valueæ³¨å…¥æˆåŠŸï¼Œè¿™æ˜¯æˆ‘ä»¬åŸæ¥çš„åŠæ³•å¯¹å§ã€‚</p><p><img src="https://img2020.cnblogs.com/blog/1905053/202004/1905053-20200412221242434-877025455.png" srcset="/blog/img/loading.gif" alt="img"></p><p>5ã€æˆ‘ä»¬åœ¨ç¼–å†™ä¸€ä¸ªå¤æ‚ä¸€ç‚¹çš„å®ä½“ç±»ï¼šPerson ç±»</p><pre><code class="hljs java"><span class="hljs-meta">@Component</span> <span class="hljs-comment">//æ³¨å†Œbeanåˆ°å®¹å™¨ä¸­</span><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Person</span> </span>{    <span class="hljs-keyword">private</span> String name;    <span class="hljs-keyword">private</span> Integer age;    <span class="hljs-keyword">private</span> Boolean happy;    <span class="hljs-keyword">private</span> Date birth;    <span class="hljs-keyword">private</span> Map&lt;String,Object&gt; maps;    <span class="hljs-keyword">private</span> List&lt;Object&gt; lists;    <span class="hljs-keyword">private</span> Dog dog;        <span class="hljs-comment">//æœ‰å‚æ— å‚æ„é€ ã€getã€setæ–¹æ³•ã€toString()æ–¹æ³•  </span>}</code></pre><p>6ã€æˆ‘ä»¬æ¥ä½¿ç”¨yamlé…ç½®çš„æ–¹å¼è¿›è¡Œæ³¨å…¥ï¼Œå¤§å®¶å†™çš„æ—¶å€™æ³¨æ„åŒºåˆ«å’Œä¼˜åŠ¿ï¼Œæˆ‘ä»¬ç¼–å†™ä¸€ä¸ªyamlé…ç½®ï¼</p><pre><code class="hljs yml"><span class="hljs-attr">person:</span>  <span class="hljs-attr">name:</span> <span class="hljs-string">qinjiang</span>  <span class="hljs-attr">age:</span> <span class="hljs-number">3</span>  <span class="hljs-attr">happy:</span> <span class="hljs-literal">false</span>  <span class="hljs-attr">birth:</span> <span class="hljs-number">2000</span><span class="hljs-string">/01/01</span>  <span class="hljs-attr">maps:</span> <span class="hljs-string">{k1:</span> <span class="hljs-string">v1,k2:</span> <span class="hljs-string">v2}</span>  <span class="hljs-attr">lists:</span>   <span class="hljs-bullet">-</span> <span class="hljs-string">code</span>   <span class="hljs-bullet">-</span> <span class="hljs-string">girl</span>   <span class="hljs-bullet">-</span> <span class="hljs-string">music</span>  <span class="hljs-attr">dog:</span>    <span class="hljs-attr">name:</span> <span class="hljs-string">æ—ºè´¢</span>    <span class="hljs-attr">age:</span> <span class="hljs-number">1</span></code></pre><p>7ã€æˆ‘ä»¬åˆšæ‰å·²ç»æŠŠpersonè¿™ä¸ªå¯¹è±¡çš„æ‰€æœ‰å€¼éƒ½å†™å¥½äº†ï¼Œæˆ‘ä»¬ç°åœ¨æ¥æ³¨å…¥åˆ°æˆ‘ä»¬çš„ç±»ä¸­ï¼</p><pre><code class="hljs java"><span class="hljs-comment">/*</span><span class="hljs-comment">@ConfigurationPropertiesä½œç”¨ï¼š</span><span class="hljs-comment">å°†é…ç½®æ–‡ä»¶ä¸­é…ç½®çš„æ¯ä¸€ä¸ªå±æ€§çš„å€¼ï¼Œæ˜ å°„åˆ°è¿™ä¸ªç»„ä»¶ä¸­ï¼›</span><span class="hljs-comment">å‘Šè¯‰SpringBootå°†æœ¬ç±»ä¸­çš„æ‰€æœ‰å±æ€§å’Œé…ç½®æ–‡ä»¶ä¸­ç›¸å…³çš„é…ç½®è¿›è¡Œç»‘å®š</span><span class="hljs-comment">å‚æ•° prefix = â€œpersonâ€ : å°†é…ç½®æ–‡ä»¶ä¸­çš„personä¸‹é¢çš„æ‰€æœ‰å±æ€§ä¸€ä¸€å¯¹åº”</span><span class="hljs-comment">*/</span><span class="hljs-meta">@Component</span> <span class="hljs-comment">//æ³¨å†Œbean</span><span class="hljs-meta">@ConfigurationProperties</span>(prefix = <span class="hljs-string">"person"</span>)<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Person</span> </span>{    <span class="hljs-keyword">private</span> String name;    <span class="hljs-keyword">private</span> Integer age;    <span class="hljs-keyword">private</span> Boolean happy;    <span class="hljs-keyword">private</span> Date birth;    <span class="hljs-keyword">private</span> Map&lt;String,Object&gt; maps;    <span class="hljs-keyword">private</span> List&lt;Object&gt; lists;    <span class="hljs-keyword">private</span> Dog dog;}</code></pre><p>8ã€IDEA æç¤ºï¼Œspringbooté…ç½®æ³¨è§£å¤„ç†å™¨æ²¡æœ‰æ‰¾åˆ°ï¼Œè®©æˆ‘ä»¬çœ‹æ–‡æ¡£ï¼Œæˆ‘ä»¬å¯ä»¥æŸ¥çœ‹æ–‡æ¡£ï¼Œæ‰¾åˆ°ä¸€ä¸ªä¾èµ–ï¼</p><p><img src="https://img2020.cnblogs.com/blog/1905053/202004/1905053-20200412221317864-79632654.png" srcset="/blog/img/loading.gif" alt="img"></p><p><img src="https://img2020.cnblogs.com/blog/1905053/202004/1905053-20200412221337189-113941879.png" srcset="/blog/img/loading.gif" alt="img"></p><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- å¯¼å…¥é…ç½®æ–‡ä»¶å¤„ç†å™¨ï¼Œé…ç½®æ–‡ä»¶è¿›è¡Œç»‘å®šå°±ä¼šæœ‰æç¤ºï¼Œéœ€è¦é‡å¯ --&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>  <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>  <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-configuration-processor<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>  <span class="hljs-tag">&lt;<span class="hljs-name">optional</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">optional</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span></code></pre><p>9ã€ç¡®è®¤ä»¥ä¸Šé…ç½®éƒ½OKä¹‹åï¼Œæˆ‘ä»¬å»æµ‹è¯•ç±»ä¸­æµ‹è¯•ä¸€ä¸‹ï¼š</p><pre><code class="hljs java"><span class="hljs-meta">@SpringBootTest</span><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">DemoApplicationTests</span> </span>{    <span class="hljs-meta">@Autowired</span>    Person person; <span class="hljs-comment">//å°†personè‡ªåŠ¨æ³¨å…¥è¿›æ¥</span>    <span class="hljs-meta">@Test</span>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">contextLoads</span><span class="hljs-params">()</span> </span>{        System.out.println(person); <span class="hljs-comment">//æ‰“å°personä¿¡æ¯</span>    }}</code></pre><p>ç»“æœï¼šæ‰€æœ‰å€¼å…¨éƒ¨æ³¨å…¥æˆåŠŸï¼</p><p><img src="https://img2020.cnblogs.com/blog/1905053/202004/1905053-20200412221356464-178925188.png" srcset="/blog/img/loading.gif" alt="img"></p><p><strong>yamlé…ç½®æ³¨å…¥åˆ°å®ä½“ç±»å®Œå…¨OKï¼</strong></p><p>è¯¾å ‚æµ‹è¯•ï¼š</p><p>1ã€å°†é…ç½®æ–‡ä»¶çš„key å€¼ å’Œ å±æ€§çš„å€¼è®¾ç½®ä¸ºä¸ä¸€æ ·ï¼Œåˆ™ç»“æœè¾“å‡ºä¸ºnullï¼Œæ³¨å…¥å¤±è´¥</p><p>2ã€åœ¨é…ç½®ä¸€ä¸ªperson2ï¼Œç„¶åå°† @ConfigurationProperties(prefix = â€œperson2â€) æŒ‡å‘æˆ‘ä»¬çš„person2ï¼›</p><h2 id="3-5ã€åŠ è½½æŒ‡å®šçš„é…ç½®æ–‡ä»¶"><a href="#3-5ã€åŠ è½½æŒ‡å®šçš„é…ç½®æ–‡ä»¶" class="headerlink" title="3.5ã€åŠ è½½æŒ‡å®šçš„é…ç½®æ–‡ä»¶"></a>3.5ã€åŠ è½½æŒ‡å®šçš„é…ç½®æ–‡ä»¶</h2><p><strong>@PropertySource ï¼š</strong>åŠ è½½æŒ‡å®šçš„é…ç½®æ–‡ä»¶ï¼›</p><p><strong>@configurationProperties</strong>ï¼šé»˜è®¤ä»å…¨å±€é…ç½®æ–‡ä»¶ä¸­è·å–å€¼ï¼›</p><p>1ã€æˆ‘ä»¬å»åœ¨resourcesç›®å½•ä¸‹æ–°å»ºä¸€ä¸ª<strong>person.properties</strong>æ–‡ä»¶</p><pre><code class="hljs properties"><span class="hljs-attr">name</span>=<span class="hljs-string">kuangshen</span></code></pre><p>2ã€ç„¶ååœ¨æˆ‘ä»¬çš„ä»£ç ä¸­æŒ‡å®šåŠ è½½person.propertiesæ–‡ä»¶</p><pre><code class="hljs java"><span class="hljs-meta">@PropertySource</span>(value = <span class="hljs-string">"classpath:person.properties"</span>)<span class="hljs-meta">@Component</span> <span class="hljs-comment">//æ³¨å†Œbean</span><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Person</span> </span>{    <span class="hljs-meta">@Value</span>(<span class="hljs-string">"${name}"</span>)    <span class="hljs-keyword">private</span> String name;    ......  }</code></pre><p>3ã€å†æ¬¡è¾“å‡ºæµ‹è¯•ä¸€ä¸‹ï¼šæŒ‡å®šé…ç½®æ–‡ä»¶ç»‘å®šæˆåŠŸï¼</p><p><img src="https://img2020.cnblogs.com/blog/1905053/202004/1905053-20200412221412474-1138637819.png" srcset="/blog/img/loading.gif" alt="img"></p><h2 id="3-6ã€é…ç½®æ–‡ä»¶å ä½ç¬¦"><a href="#3-6ã€é…ç½®æ–‡ä»¶å ä½ç¬¦" class="headerlink" title="3.6ã€é…ç½®æ–‡ä»¶å ä½ç¬¦"></a>3.6ã€é…ç½®æ–‡ä»¶å ä½ç¬¦</h2><p>é…ç½®æ–‡ä»¶è¿˜å¯ä»¥ç¼–å†™å ä½ç¬¦ç”Ÿæˆéšæœºæ•°</p><pre><code class="hljs yml"><span class="hljs-attr">person:</span>    <span class="hljs-attr">name:</span> <span class="hljs-string">qinjiang${random.uuid}</span> <span class="hljs-comment"># éšæœºuuid</span>    <span class="hljs-attr">age:</span> <span class="hljs-string">${random.int}</span>  <span class="hljs-comment"># éšæœºint</span>    <span class="hljs-attr">happy:</span> <span class="hljs-literal">false</span>    <span class="hljs-attr">birth:</span> <span class="hljs-number">2000</span><span class="hljs-string">/01/01</span>    <span class="hljs-attr">maps:</span> <span class="hljs-string">{k1:</span> <span class="hljs-string">v1,k2:</span> <span class="hljs-string">v2}</span>    <span class="hljs-attr">lists:</span>      <span class="hljs-bullet">-</span> <span class="hljs-string">code</span>      <span class="hljs-bullet">-</span> <span class="hljs-string">girl</span>      <span class="hljs-bullet">-</span> <span class="hljs-string">music</span>    <span class="hljs-attr">dog:</span>      <span class="hljs-attr">name:</span> <span class="hljs-string">${person.hello:other}_æ—ºè´¢</span>      <span class="hljs-attr">age:</span> <span class="hljs-number">1</span></code></pre><h2 id="3-7ã€å›é¡¾propertiesé…ç½®"><a href="#3-7ã€å›é¡¾propertiesé…ç½®" class="headerlink" title="3.7ã€å›é¡¾propertiesé…ç½®"></a>3.7ã€å›é¡¾propertiesé…ç½®</h2><p>æˆ‘ä»¬ä¸Šé¢é‡‡ç”¨çš„yamlæ–¹æ³•éƒ½æ˜¯æœ€ç®€å•çš„æ–¹å¼ï¼Œå¼€å‘ä¸­æœ€å¸¸ç”¨çš„ï¼›ä¹Ÿæ˜¯springbootæ‰€æ¨èçš„ï¼é‚£æˆ‘ä»¬æ¥å” å” å…¶ä»–çš„å®ç°æ–¹å¼ï¼Œé“ç†éƒ½æ˜¯ç›¸åŒçš„ï¼›å†™è¿˜æ˜¯é‚£æ ·å†™ï¼›é…ç½®æ–‡ä»¶é™¤äº†ymlè¿˜æœ‰æˆ‘ä»¬ä¹‹å‰å¸¸ç”¨çš„properties ï¼Œ æˆ‘ä»¬æ²¡æœ‰è®²ï¼Œæˆ‘ä»¬æ¥å” å” ï¼</p><p>ã€æ³¨æ„ã€‘propertiesé…ç½®æ–‡ä»¶åœ¨å†™ä¸­æ–‡çš„æ—¶å€™ï¼Œä¼šæœ‰ä¹±ç  ï¼Œ æˆ‘ä»¬éœ€è¦å»IDEAä¸­è®¾ç½®ç¼–ç æ ¼å¼ä¸ºUTF-8ï¼›</p><p>settingsâ€“&gt;FileEncodings ä¸­é…ç½®ï¼›</p><p><img src="https://img2020.cnblogs.com/blog/1905053/202004/1905053-20200412221443954-1928760896.png" srcset="/blog/img/loading.gif" alt="img"></p><p><strong>æµ‹è¯•æ­¥éª¤ï¼š</strong></p><p>1ã€æ–°å»ºä¸€ä¸ªå®ä½“ç±»User</p><pre><code class="hljs java"><span class="hljs-meta">@Component</span> <span class="hljs-comment">//æ³¨å†Œbean</span><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">User</span> </span>{    <span class="hljs-keyword">private</span> String name;    <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> age;    <span class="hljs-keyword">private</span> String sex;}</code></pre><p>2ã€ç¼–è¾‘é…ç½®æ–‡ä»¶ user.properties</p><pre><code class="hljs properties"><span class="hljs-meta">user1.name</span>=<span class="hljs-string">kuangshen</span><span class="hljs-meta">user1.age</span>=<span class="hljs-string">18user1.sex=ç”·</span></code></pre><p>3ã€æˆ‘ä»¬åœ¨Userç±»ä¸Šä½¿ç”¨@Valueæ¥è¿›è¡Œæ³¨å…¥ï¼</p><pre><code class="hljs java"><span class="hljs-meta">@Component</span> <span class="hljs-comment">//æ³¨å†Œbean</span><span class="hljs-meta">@PropertySource</span>(value = <span class="hljs-string">"classpath:user.properties"</span>)<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">User</span> </span>{    <span class="hljs-comment">//ç›´æ¥ä½¿ç”¨@value</span>    <span class="hljs-meta">@Value</span>(<span class="hljs-string">"${user.name}"</span>) <span class="hljs-comment">//ä»é…ç½®æ–‡ä»¶ä¸­å–å€¼</span>    <span class="hljs-keyword">private</span> String name;    <span class="hljs-meta">@Value</span>(<span class="hljs-string">"#{9*2}"</span>)  <span class="hljs-comment">// #{SPEL} Springè¡¨è¾¾å¼</span>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> age;    <span class="hljs-meta">@Value</span>(<span class="hljs-string">"ç”·"</span>)  <span class="hljs-comment">// å­—é¢é‡</span>    <span class="hljs-keyword">private</span> String sex;}</code></pre><p>4ã€Springbootæµ‹è¯•</p><pre><code class="hljs ini"><span class="hljs-attr">user1.name</span>=kuangshen<span class="hljs-attr">user1.age</span>=<span class="hljs-number">18</span><span class="hljs-attr">user1.sex</span>=ç”·</code></pre><p>ç»“æœæ­£å¸¸è¾“å‡ºï¼š</p><p><img src="https://img2020.cnblogs.com/blog/1905053/202004/1905053-20200412221511674-573127843.png" srcset="/blog/img/loading.gif" alt="img"></p><h2 id="3-8ã€å¯¹æ¯”å°ç»“"><a href="#3-8ã€å¯¹æ¯”å°ç»“" class="headerlink" title="3.8ã€å¯¹æ¯”å°ç»“"></a>3.8ã€å¯¹æ¯”å°ç»“</h2><p>@Valueè¿™ä¸ªä½¿ç”¨èµ·æ¥å¹¶ä¸å‹å¥½ï¼æˆ‘ä»¬éœ€è¦ä¸ºæ¯ä¸ªå±æ€§å•ç‹¬æ³¨è§£èµ‹å€¼ï¼Œæ¯”è¾ƒéº»çƒ¦ï¼›æˆ‘ä»¬æ¥çœ‹ä¸ªåŠŸèƒ½å¯¹æ¯”å›¾</p><p><img src="https://img2020.cnblogs.com/blog/1905053/202004/1905053-20200412221528114-1258238964.png" srcset="/blog/img/loading.gif" alt="img"></p><p>1ã€@ConfigurationPropertiesåªéœ€è¦å†™ä¸€æ¬¡å³å¯ ï¼Œ @Valueåˆ™éœ€è¦æ¯ä¸ªå­—æ®µéƒ½æ·»åŠ </p><p>2ã€æ¾æ•£ç»‘å®šï¼šè¿™ä¸ªä»€ä¹ˆæ„æ€å‘¢? æ¯”å¦‚æˆ‘çš„ymlä¸­å†™çš„last-nameï¼Œè¿™ä¸ªå’ŒlastNameæ˜¯ä¸€æ ·çš„ï¼Œ - åé¢è·Ÿç€çš„å­—æ¯é»˜è®¤æ˜¯å¤§å†™çš„ã€‚è¿™å°±æ˜¯æ¾æ•£ç»‘å®šã€‚å¯ä»¥æµ‹è¯•ä¸€ä¸‹</p><p>3ã€JSR303æ•°æ®æ ¡éªŒ ï¼Œ è¿™ä¸ªå°±æ˜¯æˆ‘ä»¬å¯ä»¥åœ¨å­—æ®µæ˜¯å¢åŠ ä¸€å±‚è¿‡æ»¤å™¨éªŒè¯ ï¼Œ å¯ä»¥ä¿è¯æ•°æ®çš„åˆæ³•æ€§</p><p>4ã€å¤æ‚ç±»å‹å°è£…ï¼Œymlä¸­å¯ä»¥å°è£…å¯¹è±¡ ï¼Œ ä½¿ç”¨valueå°±ä¸æ”¯æŒ</p><p><strong>ç»“è®ºï¼š</strong></p><p>é…ç½®ymlå’Œé…ç½®propertieséƒ½å¯ä»¥è·å–åˆ°å€¼ ï¼Œ å¼ºçƒˆæ¨è ymlï¼›</p><p>å¦‚æœæˆ‘ä»¬åœ¨æŸä¸ªä¸šåŠ¡ä¸­ï¼Œåªéœ€è¦è·å–é…ç½®æ–‡ä»¶ä¸­çš„æŸä¸ªå€¼ï¼Œå¯ä»¥ä½¿ç”¨ä¸€ä¸‹ @valueï¼›</p><p>å¦‚æœè¯´ï¼Œæˆ‘ä»¬ä¸“é—¨ç¼–å†™äº†ä¸€ä¸ªJavaBeanæ¥å’Œé…ç½®æ–‡ä»¶è¿›è¡Œä¸€ä¸€æ˜ å°„ï¼Œå°±ç›´æ¥@configurationPropertiesï¼Œä¸è¦çŠ¹è±«ï¼</p><h1 id="4ã€SpringBootï¼šJSR303æ•°æ®æ ¡éªŒåŠå¤šç¯å¢ƒåˆ‡æ¢"><a href="#4ã€SpringBootï¼šJSR303æ•°æ®æ ¡éªŒåŠå¤šç¯å¢ƒåˆ‡æ¢" class="headerlink" title="4ã€SpringBootï¼šJSR303æ•°æ®æ ¡éªŒåŠå¤šç¯å¢ƒåˆ‡æ¢"></a>4ã€SpringBootï¼šJSR303æ•°æ®æ ¡éªŒåŠå¤šç¯å¢ƒåˆ‡æ¢</h1><p>JSR303æ•°æ®æ ¡éªŒ</p><h2 id="4-1ã€å…ˆçœ‹çœ‹å¦‚ä½•ä½¿ç”¨"><a href="#4-1ã€å…ˆçœ‹çœ‹å¦‚ä½•ä½¿ç”¨" class="headerlink" title="4.1ã€å…ˆçœ‹çœ‹å¦‚ä½•ä½¿ç”¨"></a>4.1ã€å…ˆçœ‹çœ‹å¦‚ä½•ä½¿ç”¨</h2><p>Springbootä¸­å¯ä»¥ç”¨@validatedæ¥æ ¡éªŒæ•°æ®ï¼Œå¦‚æœæ•°æ®å¼‚å¸¸åˆ™ä¼šç»Ÿä¸€æŠ›å‡ºå¼‚å¸¸ï¼Œæ–¹ä¾¿å¼‚å¸¸ä¸­å¿ƒç»Ÿä¸€å¤„ç†ã€‚æˆ‘ä»¬è¿™é‡Œæ¥å†™ä¸ªæ³¨è§£è®©æˆ‘ä»¬çš„nameåªèƒ½æ”¯æŒEmailæ ¼å¼ï¼›</p><pre><code class="hljs java"><span class="hljs-meta">@Component</span> <span class="hljs-comment">//æ³¨å†Œbean</span><span class="hljs-meta">@ConfigurationProperties</span>(prefix = <span class="hljs-string">"person"</span>)<span class="hljs-meta">@Validated</span>  <span class="hljs-comment">//æ•°æ®æ ¡éªŒ</span><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Person</span> </span>{    <span class="hljs-meta">@Email</span>(message=<span class="hljs-string">"é‚®ç®±æ ¼å¼é”™è¯¯"</span>) <span class="hljs-comment">//nameå¿…é¡»æ˜¯é‚®ç®±æ ¼å¼</span>    <span class="hljs-keyword">private</span> String name;}</code></pre><p>è¿è¡Œç»“æœ ï¼šdefault message [ä¸æ˜¯ä¸€ä¸ªåˆæ³•çš„ç”µå­é‚®ä»¶åœ°å€];</p><p><img src="https://img2020.cnblogs.com/blog/1905053/202004/1905053-20200412221556237-391670975.png" srcset="/blog/img/loading.gif" alt="img"></p><p><strong>ä½¿ç”¨æ•°æ®æ ¡éªŒï¼Œå¯ä»¥ä¿è¯æ•°æ®çš„æ­£ç¡®æ€§ï¼›</strong></p><h2 id="4-2ã€å¸¸è§å‚æ•°"><a href="#4-2ã€å¸¸è§å‚æ•°" class="headerlink" title="4.2ã€å¸¸è§å‚æ•°"></a>4.2ã€å¸¸è§å‚æ•°</h2><pre><code class="hljs java"><span class="hljs-meta">@NotNull</span>(message=<span class="hljs-string">"åå­—ä¸èƒ½ä¸ºç©º"</span>)<span class="hljs-keyword">private</span> String userName;<span class="hljs-meta">@Max</span>(value=<span class="hljs-number">120</span>,message=<span class="hljs-string">"å¹´é¾„æœ€å¤§ä¸èƒ½æŸ¥è¿‡120"</span>)<span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> age;<span class="hljs-meta">@Email</span>(message=<span class="hljs-string">"é‚®ç®±æ ¼å¼é”™è¯¯"</span>)<span class="hljs-keyword">private</span> String email;ç©ºæ£€æŸ¥<span class="hljs-meta">@Null</span>       éªŒè¯å¯¹è±¡æ˜¯å¦ä¸º<span class="hljs-keyword">null</span><span class="hljs-meta">@NotNull</span>    éªŒè¯å¯¹è±¡æ˜¯å¦ä¸ä¸º<span class="hljs-keyword">null</span>, æ— æ³•æŸ¥æ£€é•¿åº¦ä¸º<span class="hljs-number">0</span>çš„å­—ç¬¦ä¸²<span class="hljs-meta">@NotBlank</span>   æ£€æŸ¥çº¦æŸå­—ç¬¦ä¸²æ˜¯ä¸æ˜¯Nullè¿˜æœ‰è¢«Trimçš„é•¿åº¦æ˜¯å¦å¤§äº<span class="hljs-number">0</span>,åªå¯¹å­—ç¬¦ä¸²,ä¸”ä¼šå»æ‰å‰åç©ºæ ¼.<span class="hljs-meta">@NotEmpty</span>   æ£€æŸ¥çº¦æŸå…ƒç´ æ˜¯å¦ä¸ºNULLæˆ–è€…æ˜¯EMPTY.    Booelanæ£€æŸ¥<span class="hljs-meta">@AssertTrue</span>     éªŒè¯ Boolean å¯¹è±¡æ˜¯å¦ä¸º <span class="hljs-keyword">true</span>  <span class="hljs-meta">@AssertFalse</span>    éªŒè¯ Boolean å¯¹è±¡æ˜¯å¦ä¸º <span class="hljs-keyword">false</span>      é•¿åº¦æ£€æŸ¥<span class="hljs-meta">@Size</span>(min=, max=) éªŒè¯å¯¹è±¡ï¼ˆArray,Collection,Map,Stringï¼‰é•¿åº¦æ˜¯å¦åœ¨ç»™å®šçš„èŒƒå›´ä¹‹å†…  <span class="hljs-meta">@Length</span>(min=, max=) string is between min and max included.æ—¥æœŸæ£€æŸ¥<span class="hljs-meta">@Past</span>       éªŒè¯ Date å’Œ Calendar å¯¹è±¡æ˜¯å¦åœ¨å½“å‰æ—¶é—´ä¹‹å‰  <span class="hljs-meta">@Future</span>     éªŒè¯ Date å’Œ Calendar å¯¹è±¡æ˜¯å¦åœ¨å½“å‰æ—¶é—´ä¹‹å  <span class="hljs-meta">@Pattern</span>    éªŒè¯ String å¯¹è±¡æ˜¯å¦ç¬¦åˆæ­£åˆ™è¡¨è¾¾å¼çš„è§„åˆ™.......ç­‰ç­‰é™¤æ­¤ä»¥å¤–ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥è‡ªå®šä¹‰ä¸€äº›æ•°æ®æ ¡éªŒè§„åˆ™</code></pre><p>å¤šç¯å¢ƒåˆ‡æ¢</p><p>profileæ˜¯Springå¯¹ä¸åŒç¯å¢ƒæä¾›ä¸åŒé…ç½®åŠŸèƒ½çš„æ”¯æŒï¼Œå¯ä»¥é€šè¿‡æ¿€æ´»ä¸åŒçš„ç¯å¢ƒç‰ˆæœ¬ï¼Œå®ç°å¿«é€Ÿåˆ‡æ¢ç¯å¢ƒï¼›</p><h2 id="4-3ã€å¤šé…ç½®æ–‡ä»¶"><a href="#4-3ã€å¤šé…ç½®æ–‡ä»¶" class="headerlink" title="4.3ã€å¤šé…ç½®æ–‡ä»¶"></a>4.3ã€å¤šé…ç½®æ–‡ä»¶</h2><p>æˆ‘ä»¬åœ¨ä¸»é…ç½®æ–‡ä»¶ç¼–å†™çš„æ—¶å€™ï¼Œæ–‡ä»¶åå¯ä»¥æ˜¯ application-{profile}.properties/yml , ç”¨æ¥æŒ‡å®šå¤šä¸ªç¯å¢ƒç‰ˆæœ¬ï¼›</p><p><strong>ä¾‹å¦‚ï¼š</strong></p><p>application-test.properties ä»£è¡¨æµ‹è¯•ç¯å¢ƒé…ç½®</p><p>application-dev.properties ä»£è¡¨å¼€å‘ç¯å¢ƒé…ç½®</p><p>ä½†æ˜¯Springbootå¹¶ä¸ä¼šç›´æ¥å¯åŠ¨è¿™äº›é…ç½®æ–‡ä»¶ï¼Œå®ƒ<strong>é»˜è®¤ä½¿ç”¨application.propertiesä¸»é…ç½®æ–‡ä»¶</strong>ï¼›</p><p>æˆ‘ä»¬éœ€è¦é€šè¿‡ä¸€ä¸ªé…ç½®æ¥é€‰æ‹©éœ€è¦æ¿€æ´»çš„ç¯å¢ƒï¼š</p><pre><code class="hljs properties"><span class="hljs-comment">#æ¯”å¦‚åœ¨é…ç½®æ–‡ä»¶ä¸­æŒ‡å®šä½¿ç”¨devç¯å¢ƒï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡è®¾ç½®ä¸åŒçš„ç«¯å£å·è¿›è¡Œæµ‹è¯•ï¼›</span><span class="hljs-comment">#æˆ‘ä»¬å¯åŠ¨SpringBootï¼Œå°±å¯ä»¥çœ‹åˆ°å·²ç»åˆ‡æ¢åˆ°devä¸‹çš„é…ç½®äº†ï¼›</span><span class="hljs-meta">spring.profiles.active</span>=<span class="hljs-string">dev</span></code></pre><h2 id="4-4ã€yamlçš„å¤šæ–‡æ¡£å—"><a href="#4-4ã€yamlçš„å¤šæ–‡æ¡£å—" class="headerlink" title="4.4ã€yamlçš„å¤šæ–‡æ¡£å—"></a>4.4ã€yamlçš„å¤šæ–‡æ¡£å—</h2><p>å’Œpropertiesé…ç½®æ–‡ä»¶ä¸­ä¸€æ ·ï¼Œä½†æ˜¯ä½¿ç”¨ymlå»å®ç°ä¸éœ€è¦åˆ›å»ºå¤šä¸ªé…ç½®æ–‡ä»¶ï¼Œæ›´åŠ æ–¹ä¾¿äº† !</p><pre><code class="hljs yml"><span class="hljs-attr">server:</span>  <span class="hljs-attr">port:</span> <span class="hljs-number">8081</span><span class="hljs-comment">#é€‰æ‹©è¦æ¿€æ´»é‚£ä¸ªç¯å¢ƒå—</span><span class="hljs-attr">spring:</span>  <span class="hljs-attr">profiles:</span>    <span class="hljs-attr">active:</span> <span class="hljs-string">prod</span><span class="hljs-meta">---</span><span class="hljs-attr">server:</span>  <span class="hljs-attr">port:</span> <span class="hljs-number">8083</span><span class="hljs-attr">spring:</span>  <span class="hljs-attr">profiles:</span> <span class="hljs-string">dev</span> <span class="hljs-comment">#é…ç½®ç¯å¢ƒçš„åç§°</span><span class="hljs-meta">---</span><span class="hljs-attr">server:</span>  <span class="hljs-attr">port:</span> <span class="hljs-number">8084</span><span class="hljs-attr">spring:</span>  <span class="hljs-attr">profiles:</span> <span class="hljs-string">prod</span>  <span class="hljs-comment">#é…ç½®ç¯å¢ƒçš„åç§°</span></code></pre><p><strong>æ³¨æ„ï¼šå¦‚æœymlå’ŒpropertiesåŒæ—¶éƒ½é…ç½®äº†ç«¯å£ï¼Œå¹¶ä¸”æ²¡æœ‰æ¿€æ´»å…¶ä»–ç¯å¢ƒ ï¼Œ é»˜è®¤ä¼šä½¿ç”¨propertiesé…ç½®æ–‡ä»¶çš„ï¼</strong></p><h2 id="4-5ã€é…ç½®æ–‡ä»¶åŠ è½½ä½ç½®"><a href="#4-5ã€é…ç½®æ–‡ä»¶åŠ è½½ä½ç½®" class="headerlink" title="4.5ã€é…ç½®æ–‡ä»¶åŠ è½½ä½ç½®"></a>4.5ã€é…ç½®æ–‡ä»¶åŠ è½½ä½ç½®</h2><p><strong>å¤–éƒ¨åŠ è½½é…ç½®æ–‡ä»¶çš„æ–¹å¼ååˆ†å¤šï¼Œæˆ‘ä»¬é€‰æ‹©æœ€å¸¸ç”¨çš„å³å¯ï¼Œåœ¨å¼€å‘çš„èµ„æºæ–‡ä»¶ä¸­è¿›è¡Œé…ç½®ï¼</strong></p><p>å®˜æ–¹å¤–éƒ¨é…ç½®æ–‡ä»¶è¯´æ˜å‚è€ƒæ–‡æ¡£</p><p><img src="https://img2020.cnblogs.com/blog/1905053/202004/1905053-20200412221627864-281289739.png" srcset="/blog/img/loading.gif" alt="img"></p><p>springboot å¯åŠ¨ä¼šæ‰«æä»¥ä¸‹ä½ç½®çš„application.propertiesæˆ–è€…application.ymlæ–‡ä»¶ä½œä¸ºSpring bootçš„é»˜è®¤é…ç½®æ–‡ä»¶ï¼š</p><pre><code class="hljs angelscript">ä¼˜å…ˆçº§<span class="hljs-number">1</span>ï¼šé¡¹ç›®è·¯å¾„ä¸‹çš„configæ–‡ä»¶å¤¹é…ç½®æ–‡ä»¶ä¼˜å…ˆçº§<span class="hljs-number">2</span>ï¼šé¡¹ç›®è·¯å¾„ä¸‹é…ç½®æ–‡ä»¶ä¼˜å…ˆçº§<span class="hljs-number">3</span>ï¼šèµ„æºè·¯å¾„ä¸‹çš„configæ–‡ä»¶å¤¹é…ç½®æ–‡ä»¶ä¼˜å…ˆçº§<span class="hljs-number">4</span>ï¼šèµ„æºè·¯å¾„ä¸‹é…ç½®æ–‡ä»¶</code></pre><p>ä¼˜å…ˆçº§ç”±é«˜åˆ°åº•ï¼Œé«˜ä¼˜å…ˆçº§çš„é…ç½®ä¼šè¦†ç›–ä½ä¼˜å…ˆçº§çš„é…ç½®ï¼›</p><p><strong>SpringBootä¼šä»è¿™å››ä¸ªä½ç½®å…¨éƒ¨åŠ è½½ä¸»é…ç½®æ–‡ä»¶ï¼›äº’è¡¥é…ç½®ï¼›</strong></p><p>æˆ‘ä»¬åœ¨æœ€ä½çº§çš„é…ç½®æ–‡ä»¶ä¸­è®¾ç½®ä¸€ä¸ªé¡¹ç›®è®¿é—®è·¯å¾„çš„é…ç½®æ¥æµ‹è¯•äº’è¡¥é—®é¢˜ï¼›</p><pre><code class="hljs properties"><span class="hljs-comment">#é…ç½®é¡¹ç›®çš„è®¿é—®è·¯å¾„</span><span class="hljs-meta">server.servlet.context-path</span>=<span class="hljs-string">/kuang</span></code></pre><h2 id="4-6ã€æ‹“å±•ï¼Œè¿ç»´å°æŠ€å·§"><a href="#4-6ã€æ‹“å±•ï¼Œè¿ç»´å°æŠ€å·§" class="headerlink" title="4.6ã€æ‹“å±•ï¼Œè¿ç»´å°æŠ€å·§"></a>4.6ã€æ‹“å±•ï¼Œè¿ç»´å°æŠ€å·§</h2><p>æŒ‡å®šä½ç½®åŠ è½½é…ç½®æ–‡ä»¶</p><p>æˆ‘ä»¬è¿˜å¯ä»¥é€šè¿‡spring.config.locationæ¥æ”¹å˜é»˜è®¤çš„é…ç½®æ–‡ä»¶ä½ç½®</p><p>é¡¹ç›®æ‰“åŒ…å¥½ä»¥åï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å‘½ä»¤è¡Œå‚æ•°çš„å½¢å¼ï¼Œå¯åŠ¨é¡¹ç›®çš„æ—¶å€™æ¥æŒ‡å®šé…ç½®æ–‡ä»¶çš„æ–°ä½ç½®ï¼›è¿™ç§æƒ…å†µï¼Œä¸€èˆ¬æ˜¯åæœŸè¿ç»´åšçš„å¤šï¼Œç›¸åŒé…ç½®ï¼Œå¤–éƒ¨æŒ‡å®šçš„é…ç½®æ–‡ä»¶ä¼˜å…ˆçº§æœ€é«˜</p><h1 id="5ã€SpringBootï¼šè‡ªåŠ¨é…ç½®åŸç†"><a href="#5ã€SpringBootï¼šè‡ªåŠ¨é…ç½®åŸç†" class="headerlink" title="5ã€SpringBootï¼šè‡ªåŠ¨é…ç½®åŸç†"></a>5ã€SpringBootï¼šè‡ªåŠ¨é…ç½®åŸç†</h1><p>è‡ªåŠ¨é…ç½®åŸç†</p><p>é…ç½®æ–‡ä»¶åˆ°åº•èƒ½å†™ä»€ä¹ˆï¼Ÿæ€ä¹ˆå†™ï¼Ÿ</p><p>SpringBootå®˜æ–¹æ–‡æ¡£ä¸­æœ‰å¤§é‡çš„é…ç½®ï¼Œæˆ‘ä»¬æ— æ³•å…¨éƒ¨è®°ä½</p><p><img src="https://img2020.cnblogs.com/blog/1905053/202004/1905053-20200412221646159-343420531.png" srcset="/blog/img/loading.gif" alt="img"></p><h2 id="5-1ã€åˆ†æè‡ªåŠ¨é…ç½®åŸç†"><a href="#5-1ã€åˆ†æè‡ªåŠ¨é…ç½®åŸç†" class="headerlink" title="5.1ã€åˆ†æè‡ªåŠ¨é…ç½®åŸç†"></a>5.1ã€åˆ†æè‡ªåŠ¨é…ç½®åŸç†</h2><p>æˆ‘ä»¬ä»¥<strong>HttpEncodingAutoConfigurationï¼ˆHttpç¼–ç è‡ªåŠ¨é…ç½®ï¼‰</strong>ä¸ºä¾‹è§£é‡Šè‡ªåŠ¨é…ç½®åŸç†ï¼›</p><pre><code class="hljs java"><span class="hljs-comment">//è¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªé…ç½®ç±»ï¼Œå’Œä»¥å‰ç¼–å†™çš„é…ç½®æ–‡ä»¶ä¸€æ ·ï¼Œä¹Ÿå¯ä»¥ç»™å®¹å™¨ä¸­æ·»åŠ ç»„ä»¶ï¼›</span><span class="hljs-meta">@Configuration</span> <span class="hljs-comment">//å¯åŠ¨æŒ‡å®šç±»çš„ConfigurationPropertiesåŠŸèƒ½ï¼›</span>  <span class="hljs-comment">//è¿›å…¥è¿™ä¸ªHttpPropertiesæŸ¥çœ‹ï¼Œå°†é…ç½®æ–‡ä»¶ä¸­å¯¹åº”çš„å€¼å’ŒHttpPropertiesç»‘å®šèµ·æ¥ï¼›</span>  <span class="hljs-comment">//å¹¶æŠŠHttpPropertiesåŠ å…¥åˆ°iocå®¹å™¨ä¸­</span><span class="hljs-meta">@EnableConfigurationProperties</span>({HttpProperties<span class="hljs-class">.<span class="hljs-keyword">class</span>}) </span><span class="hljs-class"></span><span class="hljs-class">//<span class="hljs-title">Spring</span>åº•å±‚@<span class="hljs-title">Conditional</span>æ³¨è§£</span><span class="hljs-class">  //æ ¹æ®ä¸åŒçš„æ¡ä»¶åˆ¤æ–­ï¼Œå¦‚æœæ»¡è¶³æŒ‡å®šçš„æ¡ä»¶ï¼Œæ•´ä¸ªé…ç½®ç±»é‡Œé¢çš„é…ç½®å°±ä¼šç”Ÿæ•ˆï¼›</span><span class="hljs-class">  //è¿™é‡Œçš„æ„æ€å°±æ˜¯åˆ¤æ–­å½“å‰åº”ç”¨æ˜¯å¦æ˜¯<span class="hljs-title">web</span>åº”ç”¨ï¼Œå¦‚æœæ˜¯ï¼Œå½“å‰é…ç½®ç±»ç”Ÿæ•ˆ</span><span class="hljs-class">@<span class="hljs-title">ConditionalOnWebApplication</span>(</span><span class="hljs-class">    <span class="hljs-title">type</span> </span>= Type.SERVLET)<span class="hljs-comment">//åˆ¤æ–­å½“å‰é¡¹ç›®æœ‰æ²¡æœ‰è¿™ä¸ªç±»CharacterEncodingFilterï¼›SpringMVCä¸­è¿›è¡Œä¹±ç è§£å†³çš„è¿‡æ»¤å™¨ï¼›</span><span class="hljs-meta">@ConditionalOnClass</span>({CharacterEncodingFilter<span class="hljs-class">.<span class="hljs-keyword">class</span>})</span><span class="hljs-class"></span><span class="hljs-class">//åˆ¤æ–­é…ç½®æ–‡ä»¶ä¸­æ˜¯å¦å­˜åœ¨æŸä¸ªé…ç½®ï¼š<span class="hljs-title">spring</span>.<span class="hljs-title">http</span>.<span class="hljs-title">encoding</span>.<span class="hljs-title">enabled</span>ï¼›</span><span class="hljs-class">  //å¦‚æœä¸å­˜åœ¨ï¼Œåˆ¤æ–­ä¹Ÿæ˜¯æˆç«‹çš„</span><span class="hljs-class">  //å³ä½¿æˆ‘ä»¬é…ç½®æ–‡ä»¶ä¸­ä¸é…ç½®<span class="hljs-title">pring</span>.<span class="hljs-title">http</span>.<span class="hljs-title">encoding</span>.<span class="hljs-title">enabled</span></span>=<span class="hljs-keyword">true</span>ï¼Œä¹Ÿæ˜¯é»˜è®¤ç”Ÿæ•ˆçš„ï¼›<span class="hljs-meta">@ConditionalOnProperty</span>(    prefix = <span class="hljs-string">"spring.http.encoding"</span>,    value = {<span class="hljs-string">"enabled"</span>},    matchIfMissing = <span class="hljs-keyword">true</span>)<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">HttpEncodingAutoConfiguration</span> </span>{    <span class="hljs-comment">//ä»–å·²ç»å’ŒSpringBootçš„é…ç½®æ–‡ä»¶æ˜ å°„äº†</span>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Encoding properties;    <span class="hljs-comment">//åªæœ‰ä¸€ä¸ªæœ‰å‚æ„é€ å™¨çš„æƒ…å†µä¸‹ï¼Œå‚æ•°çš„å€¼å°±ä¼šä»å®¹å™¨ä¸­æ‹¿</span>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">HttpEncodingAutoConfiguration</span><span class="hljs-params">(HttpProperties properties)</span> </span>{        <span class="hljs-keyword">this</span>.properties = properties.getEncoding();    }        <span class="hljs-comment">//ç»™å®¹å™¨ä¸­æ·»åŠ ä¸€ä¸ªç»„ä»¶ï¼Œè¿™ä¸ªç»„ä»¶çš„æŸäº›å€¼éœ€è¦ä»propertiesä¸­è·å–</span>    <span class="hljs-meta">@Bean</span>    <span class="hljs-meta">@ConditionalOnMissingBean</span> <span class="hljs-comment">//åˆ¤æ–­å®¹å™¨æ²¡æœ‰è¿™ä¸ªç»„ä»¶ï¼Ÿ</span>    <span class="hljs-function"><span class="hljs-keyword">public</span> CharacterEncodingFilter <span class="hljs-title">characterEncodingFilter</span><span class="hljs-params">()</span> </span>{        CharacterEncodingFilter filter = <span class="hljs-keyword">new</span> OrderedCharacterEncodingFilter();        filter.setEncoding(<span class="hljs-keyword">this</span>.properties.getCharset().name());        filter.setForceRequestEncoding(<span class="hljs-keyword">this</span>.properties.shouldForce(org.springframework.boot.autoconfigure.http.HttpProperties.Encoding.Type.REQUEST));        filter.setForceResponseEncoding(<span class="hljs-keyword">this</span>.properties.shouldForce(org.springframework.boot.autoconfigure.http.HttpProperties.Encoding.Type.RESPONSE));        <span class="hljs-keyword">return</span> filter;    }    <span class="hljs-comment">//ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚</span>}</code></pre><p><strong>ä¸€å¥è¯æ€»ç»“ ï¼šæ ¹æ®å½“å‰ä¸åŒçš„æ¡ä»¶åˆ¤æ–­ï¼Œå†³å®šè¿™ä¸ªé…ç½®ç±»æ˜¯å¦ç”Ÿæ•ˆï¼</strong></p><ul><li>ä¸€ä½†è¿™ä¸ªé…ç½®ç±»ç”Ÿæ•ˆï¼›è¿™ä¸ªé…ç½®ç±»å°±ä¼šç»™å®¹å™¨ä¸­æ·»åŠ å„ç§ç»„ä»¶ï¼›</li><li>è¿™äº›ç»„ä»¶çš„å±æ€§æ˜¯ä»å¯¹åº”çš„propertiesç±»ä¸­è·å–çš„ï¼Œè¿™äº›ç±»é‡Œé¢çš„æ¯ä¸€ä¸ªå±æ€§åˆæ˜¯å’Œé…ç½®æ–‡ä»¶ç»‘å®šçš„ï¼›</li><li>æ‰€æœ‰åœ¨é…ç½®æ–‡ä»¶ä¸­èƒ½é…ç½®çš„å±æ€§éƒ½æ˜¯åœ¨xxxxPropertiesç±»ä¸­å°è£…ç€ï¼›</li><li>é…ç½®æ–‡ä»¶èƒ½é…ç½®ä»€ä¹ˆå°±å¯ä»¥å‚ç…§æŸä¸ªåŠŸèƒ½å¯¹åº”çš„è¿™ä¸ªå±æ€§ç±»</li></ul><pre><code class="hljs java"><span class="hljs-comment">//ä»é…ç½®æ–‡ä»¶ä¸­è·å–æŒ‡å®šçš„å€¼å’Œbeançš„å±æ€§è¿›è¡Œç»‘å®š</span><span class="hljs-meta">@ConfigurationProperties</span>(prefix = <span class="hljs-string">"spring.http"</span>) <span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">HttpProperties</span> </span>{    <span class="hljs-comment">// .....</span>}</code></pre><p>æˆ‘ä»¬å»é…ç½®æ–‡ä»¶é‡Œé¢è¯•è¯•å‰ç¼€ï¼Œçœ‹æç¤ºï¼</p><p><img src="https://img2020.cnblogs.com/blog/1905053/202004/1905053-20200412221709469-1927678332.png" srcset="/blog/img/loading.gif" alt="img"></p><p><strong>è¿™å°±æ˜¯è‡ªåŠ¨è£…é…çš„åŸç†ï¼</strong></p><h2 id="5-2ã€ç²¾é«“"><a href="#5-2ã€ç²¾é«“" class="headerlink" title="5.2ã€ç²¾é«“"></a>5.2ã€ç²¾é«“</h2><p>1ã€SpringBootå¯åŠ¨ä¼šåŠ è½½å¤§é‡çš„è‡ªåŠ¨é…ç½®ç±»</p><p>2ã€æˆ‘ä»¬çœ‹æˆ‘ä»¬éœ€è¦çš„åŠŸèƒ½æœ‰æ²¡æœ‰åœ¨SpringBooté»˜è®¤å†™å¥½çš„è‡ªåŠ¨é…ç½®ç±»å½“ä¸­ï¼›</p><p>3ã€æˆ‘ä»¬å†æ¥çœ‹è¿™ä¸ªè‡ªåŠ¨é…ç½®ç±»ä¸­åˆ°åº•é…ç½®äº†å“ªäº›ç»„ä»¶ï¼›ï¼ˆåªè¦æˆ‘ä»¬è¦ç”¨çš„ç»„ä»¶å­˜åœ¨åœ¨å…¶ä¸­ï¼Œæˆ‘ä»¬å°±ä¸éœ€è¦å†æ‰‹åŠ¨é…ç½®äº†ï¼‰</p><p>4ã€ç»™å®¹å™¨ä¸­è‡ªåŠ¨é…ç½®ç±»æ·»åŠ ç»„ä»¶çš„æ—¶å€™ï¼Œä¼šä»propertiesç±»ä¸­è·å–æŸäº›å±æ€§ã€‚æˆ‘ä»¬åªéœ€è¦åœ¨é…ç½®æ–‡ä»¶ä¸­æŒ‡å®šè¿™äº›å±æ€§çš„å€¼å³å¯ï¼›</p><p><strong>xxxxAutoConfigurartionï¼šè‡ªåŠ¨é…ç½®ç±»ï¼›</strong>ç»™å®¹å™¨ä¸­æ·»åŠ ç»„ä»¶</p><p><strong>xxxxProperties:å°è£…é…ç½®æ–‡ä»¶ä¸­ç›¸å…³å±æ€§ï¼›</strong></p><h2 id="5-3ã€äº†è§£ï¼š-Conditional"><a href="#5-3ã€äº†è§£ï¼š-Conditional" class="headerlink" title="5.3ã€äº†è§£ï¼š@Conditional"></a>5.3ã€äº†è§£ï¼š@Conditional</h2><p>äº†è§£å®Œè‡ªåŠ¨è£…é…çš„åŸç†åï¼Œæˆ‘ä»¬æ¥å…³æ³¨ä¸€ä¸ªç»†èŠ‚é—®é¢˜ï¼Œ<strong>è‡ªåŠ¨é…ç½®ç±»å¿…é¡»åœ¨ä¸€å®šçš„æ¡ä»¶ä¸‹æ‰èƒ½ç”Ÿæ•ˆï¼›</strong></p><p><strong>@Conditionalæ´¾ç”Ÿæ³¨è§£ï¼ˆSpringæ³¨è§£ç‰ˆåŸç”Ÿçš„@Conditionalä½œç”¨ï¼‰</strong></p><p>ä½œç”¨ï¼šå¿…é¡»æ˜¯@ConditionalæŒ‡å®šçš„æ¡ä»¶æˆç«‹ï¼Œæ‰ç»™å®¹å™¨ä¸­æ·»åŠ ç»„ä»¶ï¼Œé…ç½®é…é‡Œé¢çš„æ‰€æœ‰å†…å®¹æ‰ç”Ÿæ•ˆï¼›</p><p><img src="https://img2020.cnblogs.com/blog/1905053/202004/1905053-20200412221747954-591282661.png" srcset="/blog/img/loading.gif" alt="img"></p><p><strong>é‚£ä¹ˆå¤šçš„è‡ªåŠ¨é…ç½®ç±»ï¼Œå¿…é¡»åœ¨ä¸€å®šçš„æ¡ä»¶ä¸‹æ‰èƒ½ç”Ÿæ•ˆï¼›ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬åŠ è½½äº†è¿™ä¹ˆå¤šçš„é…ç½®ç±»ï¼Œä½†ä¸æ˜¯æ‰€æœ‰çš„éƒ½ç”Ÿæ•ˆäº†ã€‚</strong></p><p>æˆ‘ä»¬æ€ä¹ˆçŸ¥é“å“ªäº›è‡ªåŠ¨é…ç½®ç±»ç”Ÿæ•ˆï¼Ÿ</p><p><strong>æˆ‘ä»¬å¯ä»¥é€šè¿‡å¯ç”¨ debug=trueå±æ€§ï¼›æ¥è®©æ§åˆ¶å°æ‰“å°è‡ªåŠ¨é…ç½®æŠ¥å‘Šï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥å¾ˆæ–¹ä¾¿çš„çŸ¥é“å“ªäº›è‡ªåŠ¨é…ç½®ç±»ç”Ÿæ•ˆï¼›</strong></p><pre><code class="hljs properties"><span class="hljs-comment">#å¼€å¯springbootçš„è°ƒè¯•ç±»</span><span class="hljs-attr">debug</span>=<span class="hljs-string">true</span></code></pre><p><strong>Positive matches:ï¼ˆè‡ªåŠ¨é…ç½®ç±»å¯ç”¨çš„ï¼šæ­£åŒ¹é…ï¼‰</strong></p><p><strong>Negative matches:ï¼ˆæ²¡æœ‰å¯åŠ¨ï¼Œæ²¡æœ‰åŒ¹é…æˆåŠŸçš„è‡ªåŠ¨é…ç½®ç±»ï¼šè´ŸåŒ¹é…ï¼‰</strong></p><p><strong>Unconditional classes: ï¼ˆæ²¡æœ‰æ¡ä»¶çš„ç±»ï¼‰</strong></p><p>ã€æ¼”ç¤ºï¼šæŸ¥çœ‹è¾“å‡ºçš„æ—¥å¿—ã€‘</p><p>æŒæ¡å¸æ”¶ç†è§£åŸç†ï¼Œå³å¯ä»¥ä¸å˜åº”ä¸‡å˜ï¼</p><h1 id="6ã€SpringBootï¼šè‡ªå®šä¹‰starter"><a href="#6ã€SpringBootï¼šè‡ªå®šä¹‰starter" class="headerlink" title="6ã€SpringBootï¼šè‡ªå®šä¹‰starter"></a>6ã€SpringBootï¼šè‡ªå®šä¹‰starter</h1><p>æˆ‘ä»¬åˆ†æå®Œæ¯•äº†æºç ä»¥åŠè‡ªåŠ¨è£…é…çš„è¿‡ç¨‹ï¼Œæˆ‘ä»¬å¯ä»¥å°è¯•è‡ªå®šä¹‰ä¸€ä¸ªå¯åŠ¨å™¨æ¥ç©ç©ï¼</p><h2 id="6-1ã€è¯´æ˜"><a href="#6-1ã€è¯´æ˜" class="headerlink" title="6.1ã€è¯´æ˜"></a>6.1ã€è¯´æ˜</h2><p>å¯åŠ¨å™¨æ¨¡å—æ˜¯ä¸€ä¸ª ç©º jar æ–‡ä»¶ï¼Œä»…æä¾›è¾…åŠ©æ€§ä¾èµ–ç®¡ç†ï¼Œè¿™äº›ä¾èµ–å¯èƒ½ç”¨äºè‡ªåŠ¨è£…é…æˆ–è€…å…¶ä»–ç±»åº“ï¼›</p><p><strong>å‘½åå½’çº¦ï¼š</strong></p><p>å®˜æ–¹å‘½åï¼š</p><ul><li>å‰ç¼€ï¼šspring-boot-starter-xxx</li><li>æ¯”å¦‚ï¼šspring-boot-starter-webâ€¦.</li></ul><p>è‡ªå®šä¹‰å‘½åï¼š</p><ul><li>xxx-spring-boot-starter</li><li>æ¯”å¦‚ï¼šmybatis-spring-boot-starter</li></ul><h2 id="6-2ã€ç¼–å†™å¯åŠ¨å™¨"><a href="#6-2ã€ç¼–å†™å¯åŠ¨å™¨" class="headerlink" title="6.2ã€ç¼–å†™å¯åŠ¨å™¨"></a>6.2ã€ç¼–å†™å¯åŠ¨å™¨</h2><p>1ã€åœ¨IDEAä¸­æ–°å»ºä¸€ä¸ªç©ºé¡¹ç›® spring-boot-starter-diy</p><p>2ã€æ–°å»ºä¸€ä¸ªæ™®é€šMavenæ¨¡å—ï¼škuang-spring-boot-starter</p><p><img src="https://img2020.cnblogs.com/blog/1905053/202004/1905053-20200412221856069-1152361375.png" srcset="/blog/img/loading.gif" alt="img"></p><p>3ã€æ–°å»ºä¸€ä¸ªSpringbootæ¨¡å—ï¼škuang-spring-boot-starter-autoconfigure</p><p><img src="https://img2020.cnblogs.com/blog/1905053/202004/1905053-20200412221930344-363603356.png" srcset="/blog/img/loading.gif" alt="img"></p><p>4ã€ç‚¹å‡»applyå³å¯ï¼ŒåŸºæœ¬ç»“æ„</p><p><img src="https://img2020.cnblogs.com/blog/1905053/202004/1905053-20200412222010544-802039453.png" srcset="/blog/img/loading.gif" alt="img"></p><p>5ã€åœ¨æˆ‘ä»¬çš„ starter ä¸­ å¯¼å…¥ autoconfigure çš„ä¾èµ–ï¼</p><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- å¯åŠ¨å™¨ --&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span>    <span class="hljs-comment">&lt;!--  å¼•å…¥è‡ªåŠ¨é…ç½®æ¨¡å— --&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.kuang<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>kuang-spring-boot-starter-autoconfigure<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>0.0.1-SNAPSHOT<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span></code></pre><p>6ã€å°† autoconfigure é¡¹ç›®ä¸‹å¤šä½™çš„æ–‡ä»¶éƒ½åˆ æ‰ï¼ŒPomä¸­åªç•™ä¸‹ä¸€ä¸ª starterï¼Œè¿™æ˜¯æ‰€æœ‰çš„å¯åŠ¨å™¨åŸºæœ¬é…ç½®ï¼</p><p><img src="https://img2020.cnblogs.com/blog/1905053/202004/1905053-20200412222056275-508024261.png" srcset="/blog/img/loading.gif" alt="img"></p><p>7ã€æˆ‘ä»¬ç¼–å†™ä¸€ä¸ªè‡ªå·±çš„æœåŠ¡</p><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.kuang;<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">HelloService</span> </span>{    HelloProperties helloProperties;    <span class="hljs-function"><span class="hljs-keyword">public</span> HelloProperties <span class="hljs-title">getHelloProperties</span><span class="hljs-params">()</span> </span>{        <span class="hljs-keyword">return</span> helloProperties;    }    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setHelloProperties</span><span class="hljs-params">(HelloProperties helloProperties)</span> </span>{        <span class="hljs-keyword">this</span>.helloProperties = helloProperties;    }    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">sayHello</span><span class="hljs-params">(String name)</span></span>{        <span class="hljs-keyword">return</span> helloProperties.getPrefix() + name + helloProperties.getSuffix();    }}</code></pre><p>8ã€ç¼–å†™HelloProperties é…ç½®ç±»</p><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.kuang;<span class="hljs-keyword">import</span> org.springframework.boot.context.properties.ConfigurationProperties;<span class="hljs-comment">// å‰ç¼€ kuang.hello</span><span class="hljs-meta">@ConfigurationProperties</span>(prefix = <span class="hljs-string">"kuang.hello"</span>)<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">HelloProperties</span> </span>{    <span class="hljs-keyword">private</span> String prefix;    <span class="hljs-keyword">private</span> String suffix;    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">getPrefix</span><span class="hljs-params">()</span> </span>{        <span class="hljs-keyword">return</span> prefix;    }    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setPrefix</span><span class="hljs-params">(String prefix)</span> </span>{        <span class="hljs-keyword">this</span>.prefix = prefix;    }    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">getSuffix</span><span class="hljs-params">()</span> </span>{        <span class="hljs-keyword">return</span> suffix;    }    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setSuffix</span><span class="hljs-params">(String suffix)</span> </span>{        <span class="hljs-keyword">this</span>.suffix = suffix;    }}</code></pre><p>9ã€ç¼–å†™æˆ‘ä»¬çš„è‡ªåŠ¨é…ç½®ç±»å¹¶æ³¨å…¥beanï¼Œæµ‹è¯•ï¼</p><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.kuang;<span class="hljs-keyword">import</span> org.springframework.beans.factory.annotation.Autowired;<span class="hljs-keyword">import</span> org.springframework.boot.autoconfigure.condition.ConditionalOnWebApplication;<span class="hljs-keyword">import</span> org.springframework.boot.context.properties.EnableConfigurationProperties;<span class="hljs-keyword">import</span> org.springframework.context.annotation.Bean;<span class="hljs-keyword">import</span> org.springframework.context.annotation.Configuration;<span class="hljs-meta">@Configuration</span><span class="hljs-meta">@ConditionalOnWebApplication</span> <span class="hljs-comment">//webåº”ç”¨ç”Ÿæ•ˆ</span><span class="hljs-meta">@EnableConfigurationProperties</span>(HelloProperties<span class="hljs-class">.<span class="hljs-keyword">class</span>)</span><span class="hljs-class"><span class="hljs-title">public</span> <span class="hljs-title">class</span> <span class="hljs-title">HelloServiceAutoConfiguration</span> </span>{    <span class="hljs-meta">@Autowired</span>    HelloProperties helloProperties;    <span class="hljs-meta">@Bean</span>    <span class="hljs-function"><span class="hljs-keyword">public</span> HelloService <span class="hljs-title">helloService</span><span class="hljs-params">()</span></span>{        HelloService service = <span class="hljs-keyword">new</span> HelloService();        service.setHelloProperties(helloProperties);        <span class="hljs-keyword">return</span> service;    }}</code></pre><p>10ã€åœ¨resourcesç¼–å†™ä¸€ä¸ªè‡ªå·±çš„ META-INF\spring.factories</p><pre><code class="hljs xml"># Auto Configureorg.springframework.boot.autoconfigure.EnableAutoConfiguration=\com.kuang.HelloServiceAutoConfiguration</code></pre><p>11ã€ç¼–å†™å®Œæˆåï¼Œå¯ä»¥å®‰è£…åˆ°mavenä»“åº“ä¸­ï¼</p><p><img src="https://img2020.cnblogs.com/blog/1905053/202004/1905053-20200412223705466-546919127.png" srcset="/blog/img/loading.gif" alt="img"></p><h2 id="6-3ã€æ–°å»ºé¡¹ç›®æµ‹è¯•æˆ‘ä»¬è‡ªå·±å†™çš„å¯åŠ¨å™¨"><a href="#6-3ã€æ–°å»ºé¡¹ç›®æµ‹è¯•æˆ‘ä»¬è‡ªå·±å†™çš„å¯åŠ¨å™¨" class="headerlink" title="6.3ã€æ–°å»ºé¡¹ç›®æµ‹è¯•æˆ‘ä»¬è‡ªå·±å†™çš„å¯åŠ¨å™¨"></a>6.3ã€æ–°å»ºé¡¹ç›®æµ‹è¯•æˆ‘ä»¬è‡ªå·±å†™çš„å¯åŠ¨å™¨</h2><p>1ã€æ–°å»ºä¸€ä¸ªSpringBoot é¡¹ç›®</p><p>2ã€å¯¼å…¥æˆ‘ä»¬è‡ªå·±å†™çš„å¯åŠ¨å™¨</p><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.kuang<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>kuang-spring-boot-starter<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.0-SNAPSHOT<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span></code></pre><p>3ã€ç¼–å†™ä¸€ä¸ª HelloController è¿›è¡Œæµ‹è¯•æˆ‘ä»¬è‡ªå·±çš„å†™çš„æ¥å£ï¼</p><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.kuang.controller;<span class="hljs-meta">@RestController</span><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">HelloController</span> </span>{    <span class="hljs-meta">@Autowired</span>    HelloService helloService;    <span class="hljs-meta">@RequestMapping</span>(<span class="hljs-string">"/hello"</span>)    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">hello</span><span class="hljs-params">()</span></span>{        <span class="hljs-keyword">return</span> helloService.sayHello(<span class="hljs-string">"zxc"</span>);    }}</code></pre><p>4ã€ç¼–å†™é…ç½®æ–‡ä»¶ application.properties</p><pre><code class="hljs java">kuang.hello.prefix=<span class="hljs-string">"ppp"</span>kuang.hello.suffix=<span class="hljs-string">"sss"</span></code></pre><p>5ã€å¯åŠ¨é¡¹ç›®è¿›è¡Œæµ‹è¯•ï¼Œç»“æœæˆåŠŸ !</p><p><img src="https://img2020.cnblogs.com/blog/1905053/202004/1905053-20200412222355347-1685568990.png" srcset="/blog/img/loading.gif" alt="img"></p><h1 id="7ã€SpringBootæ•´åˆJDBC"><a href="#7ã€SpringBootæ•´åˆJDBC" class="headerlink" title="7ã€SpringBootæ•´åˆJDBC"></a>7ã€SpringBootæ•´åˆJDBC</h1><h2 id="7-1ã€SpringDataç®€ä»‹"><a href="#7-1ã€SpringDataç®€ä»‹" class="headerlink" title="7.1ã€SpringDataç®€ä»‹"></a>7.1ã€SpringDataç®€ä»‹</h2><p>å¯¹äºæ•°æ®è®¿é—®å±‚ï¼Œæ— è®ºæ˜¯ SQL(å…³ç³»å‹æ•°æ®åº“) è¿˜æ˜¯ NOSQL(éå…³ç³»å‹æ•°æ®åº“)ï¼ŒSpring Boot åº•å±‚éƒ½æ˜¯é‡‡ç”¨ Spring Data çš„æ–¹å¼è¿›è¡Œç»Ÿä¸€å¤„ç†ã€‚</p><p>Spring Boot åº•å±‚éƒ½æ˜¯é‡‡ç”¨ Spring Data çš„æ–¹å¼è¿›è¡Œç»Ÿä¸€å¤„ç†å„ç§æ•°æ®åº“ï¼ŒSpring Data ä¹Ÿæ˜¯ Spring ä¸­ä¸ Spring Bootã€Spring Cloud ç­‰é½åçš„çŸ¥åé¡¹ç›®ã€‚</p><p>Sping Data å®˜ç½‘ï¼š<a href="https://spring.io/projects/spring-data" target="_blank" rel="noopener">https://spring.io/projects/spring-data</a></p><p>æ•°æ®åº“ç›¸å…³çš„å¯åŠ¨å™¨ ï¼šå¯ä»¥å‚è€ƒå®˜æ–¹æ–‡æ¡£ï¼š</p><p><a href="https://docs.spring.io/spring-boot/docs/2.2.5.RELEASE/reference/htmlsingle/#using-boot-starter" target="_blank" rel="noopener">https://docs.spring.io/spring-boot/docs/2.2.5.RELEASE/reference/htmlsingle/#using-boot-starter</a></p><p>æ•´åˆJDBC</p><h2 id="7-2ã€åˆ›å»ºæµ‹è¯•é¡¹ç›®æµ‹è¯•æ•°æ®æº"><a href="#7-2ã€åˆ›å»ºæµ‹è¯•é¡¹ç›®æµ‹è¯•æ•°æ®æº" class="headerlink" title="7.2ã€åˆ›å»ºæµ‹è¯•é¡¹ç›®æµ‹è¯•æ•°æ®æº"></a>7.2ã€åˆ›å»ºæµ‹è¯•é¡¹ç›®æµ‹è¯•æ•°æ®æº</h2><p>1ã€æˆ‘å»æ–°å»ºä¸€ä¸ªé¡¹ç›®æµ‹è¯•ï¼šspringboot-data-jdbc ; å¼•å…¥ç›¸åº”çš„æ¨¡å—ï¼åŸºç¡€æ¨¡å—</p><p><img src="https://img2020.cnblogs.com/blog/1905053/202004/1905053-20200412223600851-874349014.png" srcset="/blog/img/loading.gif" alt="img"></p><p>2ã€é¡¹ç›®å»ºå¥½ä¹‹åï¼Œå‘ç°è‡ªåŠ¨å¸®æˆ‘ä»¬å¯¼å…¥äº†å¦‚ä¸‹çš„å¯åŠ¨å™¨</p><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-jdbc<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>mysql<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mysql-connector-java<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>runtime<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span></code></pre><p>3ã€ç¼–å†™yamlé…ç½®æ–‡ä»¶è¿æ¥æ•°æ®åº“ï¼›</p><pre><code class="hljs yml"><span class="hljs-attr">spring:</span>  <span class="hljs-attr">datasource:</span>    <span class="hljs-attr">username:</span> <span class="hljs-string">root</span>    <span class="hljs-attr">password:</span> <span class="hljs-number">123456</span>    <span class="hljs-comment">#?serverTimezone=UTCè§£å†³æ—¶åŒºçš„æŠ¥é”™</span>    <span class="hljs-attr">url:</span> <span class="hljs-string">jdbc:mysql://localhost:3306/springboot?serverTimezone=UTC&amp;useUnicode=true&amp;characterEncoding=utf-8</span>    <span class="hljs-attr">driver-class-name:</span> <span class="hljs-string">com.mysql.cj.jdbc.Driver</span></code></pre><p>4ã€é…ç½®å®Œè¿™ä¸€äº›ä¸œè¥¿åï¼Œæˆ‘ä»¬å°±å¯ä»¥ç›´æ¥å»ä½¿ç”¨äº†ï¼Œå› ä¸ºSpringBootå·²ç»é»˜è®¤å¸®æˆ‘ä»¬è¿›è¡Œäº†è‡ªåŠ¨é…ç½®ï¼›å»æµ‹è¯•ç±»æµ‹è¯•ä¸€ä¸‹</p><pre><code class="hljs java"><span class="hljs-meta">@SpringBootTest</span><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SpringbootDataJdbcApplicationTests</span> </span>{    <span class="hljs-comment">//DIæ³¨å…¥æ•°æ®æº</span>    <span class="hljs-meta">@Autowired</span>    DataSource dataSource;    <span class="hljs-meta">@Test</span>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">contextLoads</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> SQLException </span>{        <span class="hljs-comment">//çœ‹ä¸€ä¸‹é»˜è®¤æ•°æ®æº</span>        System.out.println(dataSource.getClass());        <span class="hljs-comment">//è·å¾—è¿æ¥</span>        Connection connection =   dataSource.getConnection();        System.out.println(connection);        <span class="hljs-comment">//å…³é—­è¿æ¥</span>        connection.close();    }}</code></pre><p>ç»“æœï¼šæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ä»–é»˜è®¤ç»™æˆ‘ä»¬é…ç½®çš„æ•°æ®æºä¸º : class com.zaxxer.hikari.HikariDataSource ï¼Œ æˆ‘ä»¬å¹¶æ²¡æœ‰æ‰‹åŠ¨é…ç½®</p><p>æˆ‘ä»¬æ¥å…¨å±€æœç´¢ä¸€ä¸‹ï¼Œæ‰¾åˆ°æ•°æ®æºçš„æ‰€æœ‰è‡ªåŠ¨é…ç½®éƒ½åœ¨ ï¼šDataSourceAutoConfigurationæ–‡ä»¶ï¼š</p><pre><code class="hljs java"><span class="hljs-meta">@Import</span>(    {Hikari<span class="hljs-class">.<span class="hljs-keyword">class</span>, <span class="hljs-title">Tomcat</span>.<span class="hljs-title">class</span>, <span class="hljs-title">Dbcp2</span>.<span class="hljs-title">class</span>, <span class="hljs-title">Generic</span>.<span class="hljs-title">class</span>, <span class="hljs-title">DataSourceJmxConfiguration</span>.<span class="hljs-title">class</span>}</span><span class="hljs-class">)</span><span class="hljs-class"><span class="hljs-title">protected</span> <span class="hljs-title">static</span> <span class="hljs-title">class</span> <span class="hljs-title">PooledDataSourceConfiguration</span> </span>{    <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-title">PooledDataSourceConfiguration</span><span class="hljs-params">()</span> </span>{    }}</code></pre><p>è¿™é‡Œå¯¼å…¥çš„ç±»éƒ½åœ¨ DataSourceConfiguration é…ç½®ç±»ä¸‹ï¼Œå¯ä»¥çœ‹å‡º Spring Boot 2.2.5 é»˜è®¤ä½¿ç”¨HikariDataSource æ•°æ®æºï¼Œè€Œä»¥å‰ç‰ˆæœ¬ï¼Œå¦‚ Spring Boot 1.5 é»˜è®¤ä½¿ç”¨ org.apache.tomcat.jdbc.pool.DataSource ä½œä¸ºæ•°æ®æºï¼›</p><p><strong>HikariDataSource å·ç§° Java WEB å½“å‰é€Ÿåº¦æœ€å¿«çš„æ•°æ®æºï¼Œç›¸æ¯”äºä¼ ç»Ÿçš„ C3P0 ã€DBCPã€Tomcat jdbc ç­‰è¿æ¥æ± æ›´åŠ ä¼˜ç§€ï¼›</strong></p><p><strong>å¯ä»¥ä½¿ç”¨ spring.datasource.type æŒ‡å®šè‡ªå®šä¹‰çš„æ•°æ®æºç±»å‹ï¼Œå€¼ä¸º è¦ä½¿ç”¨çš„è¿æ¥æ± å®ç°çš„å®Œå…¨é™å®šåã€‚</strong></p><p>å…³äºæ•°æ®æºæˆ‘ä»¬å¹¶ä¸åšä»‹ç»ï¼Œæœ‰äº†æ•°æ®åº“è¿æ¥ï¼Œæ˜¾ç„¶å°±å¯ä»¥ CRUD æ“ä½œæ•°æ®åº“äº†ã€‚ä½†æ˜¯æˆ‘ä»¬éœ€è¦å…ˆäº†è§£ä¸€ä¸ªå¯¹è±¡ JdbcTemplate</p><h2 id="7-3ã€JDBCTemplate"><a href="#7-3ã€JDBCTemplate" class="headerlink" title="7.3ã€JDBCTemplate"></a>7.3ã€JDBCTemplate</h2><p>1ã€æœ‰äº†æ•°æ®æº(com.zaxxer.hikari.HikariDataSource)ï¼Œç„¶åå¯ä»¥æ‹¿åˆ°æ•°æ®åº“è¿æ¥(java.sql.Connection)ï¼Œæœ‰äº†è¿æ¥ï¼Œå°±å¯ä»¥ä½¿ç”¨åŸç”Ÿçš„ JDBC è¯­å¥æ¥æ“ä½œæ•°æ®åº“ï¼›</p><p>2ã€å³ä½¿ä¸ä½¿ç”¨ç¬¬ä¸‰æ–¹ç¬¬æ•°æ®åº“æ“ä½œæ¡†æ¶ï¼Œå¦‚ MyBatisç­‰ï¼ŒSpring æœ¬èº«ä¹Ÿå¯¹åŸç”Ÿçš„JDBC åšäº†è½»é‡çº§çš„å°è£…ï¼Œå³JdbcTemplateã€‚</p><p>3ã€æ•°æ®åº“æ“ä½œçš„æ‰€æœ‰ CRUD æ–¹æ³•éƒ½åœ¨ JdbcTemplate ä¸­ã€‚</p><p>4ã€Spring Boot ä¸ä»…æä¾›äº†é»˜è®¤çš„æ•°æ®æºï¼ŒåŒæ—¶é»˜è®¤å·²ç»é…ç½®å¥½äº† JdbcTemplate æ”¾åœ¨äº†å®¹å™¨ä¸­ï¼Œç¨‹åºå‘˜åªéœ€è‡ªå·±æ³¨å…¥å³å¯ä½¿ç”¨</p><p>5ã€JdbcTemplate çš„è‡ªåŠ¨é…ç½®æ˜¯ä¾èµ– org.springframework.boot.autoconfigure.jdbc åŒ…ä¸‹çš„ JdbcTemplateConfiguration ç±»</p><p><strong>JdbcTemplateä¸»è¦æä¾›ä»¥ä¸‹å‡ ç±»æ–¹æ³•ï¼š</strong></p><ul><li>executeæ–¹æ³•ï¼šå¯ä»¥ç”¨äºæ‰§è¡Œä»»ä½•SQLè¯­å¥ï¼Œä¸€èˆ¬ç”¨äºæ‰§è¡ŒDDLè¯­å¥ï¼›</li><li>updateæ–¹æ³•åŠbatchUpdateæ–¹æ³•ï¼šupdateæ–¹æ³•ç”¨äºæ‰§è¡Œæ–°å¢ã€ä¿®æ”¹ã€åˆ é™¤ç­‰è¯­å¥ï¼›batchUpdateæ–¹æ³•ç”¨äºæ‰§è¡Œæ‰¹å¤„ç†ç›¸å…³è¯­å¥ï¼›</li><li>queryæ–¹æ³•åŠqueryForXXXæ–¹æ³•ï¼šç”¨äºæ‰§è¡ŒæŸ¥è¯¢ç›¸å…³è¯­å¥ï¼›</li><li>callæ–¹æ³•ï¼šç”¨äºæ‰§è¡Œå­˜å‚¨è¿‡ç¨‹ã€å‡½æ•°ç›¸å…³è¯­å¥ã€‚</li></ul><h2 id="7-4ã€æµ‹è¯•"><a href="#7-4ã€æµ‹è¯•" class="headerlink" title="7.4ã€æµ‹è¯•"></a>7.4ã€æµ‹è¯•</h2><p>ç¼–å†™ä¸€ä¸ªControllerï¼Œæ³¨å…¥ jdbcTemplateï¼Œç¼–å†™æµ‹è¯•æ–¹æ³•è¿›è¡Œè®¿é—®æµ‹è¯•ï¼›</p><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.kuang.controller;<span class="hljs-keyword">import</span> org.springframework.beans.factory.annotation.Autowired;<span class="hljs-keyword">import</span> org.springframework.jdbc.core.JdbcTemplate;<span class="hljs-keyword">import</span> org.springframework.web.bind.annotation.GetMapping;<span class="hljs-keyword">import</span> org.springframework.web.bind.annotation.PathVariable;<span class="hljs-keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;<span class="hljs-keyword">import</span> org.springframework.web.bind.annotation.RestController;<span class="hljs-keyword">import</span> java.util.Date;<span class="hljs-keyword">import</span> java.util.List;<span class="hljs-keyword">import</span> java.util.Map;<span class="hljs-meta">@RestController</span><span class="hljs-meta">@RequestMapping</span>(<span class="hljs-string">"/jdbc"</span>)<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">JdbcController</span> </span>{    <span class="hljs-comment">/**</span><span class="hljs-comment">     * Spring Boot é»˜è®¤æä¾›äº†æ•°æ®æºï¼Œé»˜è®¤æä¾›äº† org.springframework.jdbc.core.JdbcTemplate</span><span class="hljs-comment">     * JdbcTemplate ä¸­ä¼šè‡ªå·±æ³¨å…¥æ•°æ®æºï¼Œç”¨äºç®€åŒ– JDBCæ“ä½œ</span><span class="hljs-comment">     * è¿˜èƒ½é¿å…ä¸€äº›å¸¸è§çš„é”™è¯¯,ä½¿ç”¨èµ·æ¥ä¹Ÿä¸ç”¨å†è‡ªå·±æ¥å…³é—­æ•°æ®åº“è¿æ¥</span><span class="hljs-comment">     */</span>    <span class="hljs-meta">@Autowired</span>    JdbcTemplate jdbcTemplate;    <span class="hljs-comment">//æŸ¥è¯¢employeeè¡¨ä¸­æ‰€æœ‰æ•°æ®</span>    <span class="hljs-comment">//List ä¸­çš„1ä¸ª Map å¯¹åº”æ•°æ®åº“çš„ 1è¡Œæ•°æ®</span>    <span class="hljs-comment">//Map ä¸­çš„ key å¯¹åº”æ•°æ®åº“çš„å­—æ®µåï¼Œvalue å¯¹åº”æ•°æ®åº“çš„å­—æ®µå€¼</span>    <span class="hljs-meta">@GetMapping</span>(<span class="hljs-string">"/list"</span>)    <span class="hljs-keyword">public</span> List&lt;Map&lt;String, Object&gt;&gt; userList(){        String sql = <span class="hljs-string">"select * from employee"</span>;        List&lt;Map&lt;String, Object&gt;&gt; maps = jdbcTemplate.queryForList(sql);        <span class="hljs-keyword">return</span> maps;    }        <span class="hljs-comment">//æ–°å¢ä¸€ä¸ªç”¨æˆ·</span>    <span class="hljs-meta">@GetMapping</span>(<span class="hljs-string">"/add"</span>)    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">addUser</span><span class="hljs-params">()</span></span>{        <span class="hljs-comment">//æ’å…¥è¯­å¥ï¼Œæ³¨æ„æ—¶é—´é—®é¢˜</span>        String sql = <span class="hljs-string">"insert into employee(last_name, email,gender,department,birth)"</span> +                <span class="hljs-string">" values ('ç‹‚ç¥è¯´','24736743@qq.com',1,101,'"</span>+ <span class="hljs-keyword">new</span> Date().toLocaleString() +<span class="hljs-string">"')"</span>;        jdbcTemplate.update(sql);        <span class="hljs-comment">//æŸ¥è¯¢</span>        <span class="hljs-keyword">return</span> <span class="hljs-string">"addOk"</span>;    }    <span class="hljs-comment">//ä¿®æ”¹ç”¨æˆ·ä¿¡æ¯</span>    <span class="hljs-meta">@GetMapping</span>(<span class="hljs-string">"/update/{id}"</span>)    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">updateUser</span><span class="hljs-params">(@PathVariable(<span class="hljs-string">"id"</span>)</span> <span class="hljs-keyword">int</span> id)</span>{        <span class="hljs-comment">//æ’å…¥è¯­å¥</span>        String sql = <span class="hljs-string">"update employee set last_name=?,email=? where id="</span>+id;        <span class="hljs-comment">//æ•°æ®</span>        Object[] objects = <span class="hljs-keyword">new</span> Object[<span class="hljs-number">2</span>];        objects[<span class="hljs-number">0</span>] = <span class="hljs-string">"ç§¦ç–†"</span>;        objects[<span class="hljs-number">1</span>] = <span class="hljs-string">"24736743@sina.com"</span>;        jdbcTemplate.update(sql,objects);        <span class="hljs-comment">//æŸ¥è¯¢</span>        <span class="hljs-keyword">return</span> <span class="hljs-string">"updateOk"</span>;    }    <span class="hljs-comment">//åˆ é™¤ç”¨æˆ·</span>    <span class="hljs-meta">@GetMapping</span>(<span class="hljs-string">"/delete/{id}"</span>)    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">delUser</span><span class="hljs-params">(@PathVariable(<span class="hljs-string">"id"</span>)</span> <span class="hljs-keyword">int</span> id)</span>{        <span class="hljs-comment">//æ’å…¥è¯­å¥</span>        String sql = <span class="hljs-string">"delete from employee where id=?"</span>;        jdbcTemplate.update(sql,id);        <span class="hljs-comment">//æŸ¥è¯¢</span>        <span class="hljs-keyword">return</span> <span class="hljs-string">"deleteOk"</span>;    }    }</code></pre><p>æµ‹è¯•è¯·æ±‚ï¼Œç»“æœæ­£å¸¸ï¼›</p><p>åˆ°æ­¤ï¼ŒCURDçš„åŸºæœ¬æ“ä½œï¼Œä½¿ç”¨ JDBC å°±æå®šäº†ã€‚<a href="https://docs.spring.io/spring-boot/docs/2.0.4.RELEASE/reference/htmlsingle/#using-boot-starter" target="_blank" rel="noopener">https://docs.spring.io/spring-boot/docs/2.0.4.RELEASE/reference/htmlsingle/#using-boot-starter</a>)</p><h2 id=""><a href="#" class="headerlink" title=""></a></h2><h2 id="7-5ã€åŸç†æ¢ç©¶-ï¼š"><a href="#7-5ã€åŸç†æ¢ç©¶-ï¼š" class="headerlink" title="7.5ã€åŸç†æ¢ç©¶ ï¼š"></a>7.5ã€åŸç†æ¢ç©¶ ï¼š</h2><p>org.springframework.boot.autoconfigure.jdbc.DataSourceConfiguration æ•°æ®æºé…ç½®ç±»ä½œç”¨ ï¼šæ ¹æ®é€»è¾‘åˆ¤æ–­ä¹‹åï¼Œæ·»åŠ æ•°æ®æºï¼›</p><p><strong>SpringBooté»˜è®¤æ”¯æŒä»¥ä¸‹æ•°æ®æºï¼š</strong></p><p><strong>com.zaxxer.hikari.HikariDataSource ï¼ˆSpring Boot 2.0 ä»¥ä¸Šï¼Œé»˜è®¤ä½¿ç”¨æ­¤æ•°æ®æºï¼‰</strong></p><p>org.apache.tomcat.jdbc.pool.DataSource</p><p>org.apache.commons.dbcp2.BasicDataSource</p><p><strong>å¯ä»¥ä½¿ç”¨ spring.datasource.type æŒ‡å®šè‡ªå®šä¹‰çš„æ•°æ®æºç±»å‹ï¼Œå€¼ä¸º è¦ä½¿ç”¨çš„è¿æ¥æ± å®ç°çš„å®Œå…¨é™å®šåã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œå®ƒæ˜¯ä»ç±»è·¯å¾„è‡ªåŠ¨æ£€æµ‹çš„ã€‚</strong></p><pre><code class="hljs less"><span class="hljs-variable">@Configuration</span><span class="hljs-variable">@ConditionalOnMissingBean</span>({DataSource.class})<span class="hljs-variable">@ConditionalOnProperty</span>(    name = {<span class="hljs-string">"spring.datasource.type"</span>})static class Generic {    <span class="hljs-selector-tag">Generic</span>() {    }    <span class="hljs-variable">@Bean</span>    public DataSource dataSource(DataSourceProperties properties) {        <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">properties</span><span class="hljs-selector-class">.initializeDataSourceBuilder</span>()<span class="hljs-selector-class">.build</span>();    }}</code></pre><h1 id="8ã€SpringBootæ•´åˆDruid"><a href="#8ã€SpringBootæ•´åˆDruid" class="headerlink" title="8ã€SpringBootæ•´åˆDruid"></a>8ã€SpringBootæ•´åˆDruid</h1><h2 id="8-1ã€Druidç®€ä»‹"><a href="#8-1ã€Druidç®€ä»‹" class="headerlink" title="8.1ã€Druidç®€ä»‹"></a>8.1ã€Druidç®€ä»‹</h2><p>Javaç¨‹åºå¾ˆå¤§ä¸€éƒ¨åˆ†è¦æ“ä½œæ•°æ®åº“ï¼Œä¸ºäº†æé«˜æ€§èƒ½æ“ä½œæ•°æ®åº“çš„æ—¶å€™ï¼Œåˆä¸å¾—ä¸ä½¿ç”¨æ•°æ®åº“è¿æ¥æ± ã€‚</p><p>Druid æ˜¯é˜¿é‡Œå·´å·´å¼€æºå¹³å°ä¸Šä¸€ä¸ªæ•°æ®åº“è¿æ¥æ± å®ç°ï¼Œç»“åˆäº† C3P0ã€DBCP ç­‰ DB æ± çš„ä¼˜ç‚¹ï¼ŒåŒæ—¶åŠ å…¥äº†æ—¥å¿—ç›‘æ§ã€‚</p><p>Druid å¯ä»¥å¾ˆå¥½çš„ç›‘æ§ DB æ± è¿æ¥å’Œ SQL çš„æ‰§è¡Œæƒ…å†µï¼Œå¤©ç”Ÿå°±æ˜¯é’ˆå¯¹ç›‘æ§è€Œç”Ÿçš„ DB è¿æ¥æ± ã€‚</p><p>Druidå·²ç»åœ¨é˜¿é‡Œå·´å·´éƒ¨ç½²äº†è¶…è¿‡600ä¸ªåº”ç”¨ï¼Œç»è¿‡ä¸€å¹´å¤šç”Ÿäº§ç¯å¢ƒå¤§è§„æ¨¡éƒ¨ç½²çš„ä¸¥è‹›è€ƒéªŒã€‚</p><p>Spring Boot 2.0 ä»¥ä¸Šé»˜è®¤ä½¿ç”¨ Hikari æ•°æ®æºï¼Œå¯ä»¥è¯´ Hikari ä¸ Driud éƒ½æ˜¯å½“å‰ Java Web ä¸Šæœ€ä¼˜ç§€çš„æ•°æ®æºï¼Œæˆ‘ä»¬æ¥é‡ç‚¹ä»‹ç» Spring Boot å¦‚ä½•é›†æˆ Druid æ•°æ®æºï¼Œå¦‚ä½•å®ç°æ•°æ®åº“ç›‘æ§ã€‚</p><p>Githubåœ°å€ï¼š<a href="https://github.com/alibaba/druid/" target="_blank" rel="noopener">https://github.com/alibaba/druid/</a></p><p><strong>com.alibaba.druid.pool.DruidDataSource åŸºæœ¬é…ç½®å‚æ•°å¦‚ä¸‹ï¼š</strong></p><table><thead><tr><th>é…ç½®</th><th>ç¼ºçœå€¼</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>name</td><td></td><td>é…ç½®è¿™ä¸ªå±æ€§çš„æ„ä¹‰åœ¨äºï¼Œå¦‚æœå­˜åœ¨å¤šä¸ªæ•°æ®æºï¼Œç›‘æ§çš„æ—¶å€™å¯ä»¥é€šè¿‡åå­—æ¥åŒºåˆ†å¼€æ¥ã€‚ å¦‚æœæ²¡æœ‰é…ç½®ï¼Œå°†ä¼šç”Ÿæˆä¸€ä¸ªåå­—ï¼Œæ ¼å¼æ˜¯ï¼šâ€DataSource-â€œ + System.identityHashCode(this). å¦å¤–é…ç½®æ­¤å±æ€§è‡³å°‘åœ¨1.0.5ç‰ˆæœ¬ä¸­æ˜¯ä¸èµ·ä½œç”¨çš„ï¼Œå¼ºè¡Œè®¾ç½®nameä¼šå‡ºé”™ <a href="http://blog.csdn.net/lanmo555/article/details/41248763" target="_blank" rel="noopener">è¯¦æƒ…-ç‚¹æ­¤å¤„</a>ã€‚</td></tr><tr><td>url</td><td></td><td>è¿æ¥æ•°æ®åº“çš„urlï¼Œä¸åŒæ•°æ®åº“ä¸ä¸€æ ·ã€‚ä¾‹å¦‚ï¼š mysql : jdbc:mysql://10.20.153.104:3306/druid2 oracle : jdbc:oracle:thin:@10.20.149.85:1521:ocnauto</td></tr><tr><td>username</td><td></td><td>è¿æ¥æ•°æ®åº“çš„ç”¨æˆ·å</td></tr><tr><td>password</td><td></td><td>è¿æ¥æ•°æ®åº“çš„å¯†ç ã€‚å¦‚æœä½ ä¸å¸Œæœ›å¯†ç ç›´æ¥å†™åœ¨é…ç½®æ–‡ä»¶ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ConfigFilterã€‚è¯¦ç»†çœ‹è¿™é‡Œï¼š<a href="https://github.com/alibaba/druid/wiki/ä½¿ç”¨ConfigFilter" target="_blank" rel="noopener">https://github.com/alibaba/druid/wiki/ä½¿ç”¨ConfigFilter</a></td></tr><tr><td>driverClassName</td><td>æ ¹æ®urlè‡ªåŠ¨è¯†åˆ«</td><td>è¿™ä¸€é¡¹å¯é…å¯ä¸é…ï¼Œå¦‚æœä¸é…ç½®druidä¼šæ ¹æ®urlè‡ªåŠ¨è¯†åˆ«dbTypeï¼Œç„¶åé€‰æ‹©ç›¸åº”çš„driverClassName</td></tr><tr><td>initialSize</td><td>0</td><td>åˆå§‹åŒ–æ—¶å»ºç«‹ç‰©ç†è¿æ¥çš„ä¸ªæ•°ã€‚åˆå§‹åŒ–å‘ç”Ÿåœ¨æ˜¾ç¤ºè°ƒç”¨initæ–¹æ³•ï¼Œæˆ–è€…ç¬¬ä¸€æ¬¡getConnectionæ—¶</td></tr><tr><td>maxActive</td><td>8</td><td>æœ€å¤§è¿æ¥æ± æ•°é‡</td></tr><tr><td>maxIdle</td><td>8</td><td>å·²ç»ä¸å†ä½¿ç”¨ï¼Œé…ç½®äº†ä¹Ÿæ²¡æ•ˆæœ</td></tr><tr><td>minIdle</td><td></td><td>æœ€å°è¿æ¥æ± æ•°é‡</td></tr><tr><td>maxWait</td><td></td><td>è·å–è¿æ¥æ—¶æœ€å¤§ç­‰å¾…æ—¶é—´ï¼Œå•ä½æ¯«ç§’ã€‚é…ç½®äº†maxWaitä¹‹åï¼Œç¼ºçœå¯ç”¨å…¬å¹³é”ï¼Œå¹¶å‘æ•ˆç‡ä¼šæœ‰æ‰€ä¸‹é™ï¼Œå¦‚æœéœ€è¦å¯ä»¥é€šè¿‡é…ç½®useUnfairLockå±æ€§ä¸ºtrueä½¿ç”¨éå…¬å¹³é”ã€‚</td></tr><tr><td>poolPreparedStatements</td><td>false</td><td>æ˜¯å¦ç¼“å­˜preparedStatementï¼Œä¹Ÿå°±æ˜¯PSCacheã€‚PSCacheå¯¹æ”¯æŒæ¸¸æ ‡çš„æ•°æ®åº“æ€§èƒ½æå‡å·¨å¤§ï¼Œæ¯”å¦‚è¯´oracleã€‚åœ¨mysqlä¸‹å»ºè®®å…³é—­ã€‚</td></tr><tr><td>maxOpenPreparedStatements</td><td>-1</td><td>è¦å¯ç”¨PSCacheï¼Œå¿…é¡»é…ç½®å¤§äº0ï¼Œå½“å¤§äº0æ—¶ï¼ŒpoolPreparedStatementsè‡ªåŠ¨è§¦å‘ä¿®æ”¹ä¸ºtrueã€‚åœ¨Druidä¸­ï¼Œä¸ä¼šå­˜åœ¨Oracleä¸‹PSCacheå ç”¨å†…å­˜è¿‡å¤šçš„é—®é¢˜ï¼Œå¯ä»¥æŠŠè¿™ä¸ªæ•°å€¼é…ç½®å¤§ä¸€äº›ï¼Œæ¯”å¦‚è¯´100</td></tr><tr><td>validationQuery</td><td></td><td>ç”¨æ¥æ£€æµ‹è¿æ¥æ˜¯å¦æœ‰æ•ˆçš„sqlï¼Œè¦æ±‚æ˜¯ä¸€ä¸ªæŸ¥è¯¢è¯­å¥ã€‚å¦‚æœvalidationQueryä¸ºnullï¼ŒtestOnBorrowã€testOnReturnã€testWhileIdleéƒ½ä¸ä¼šå…¶ä½œç”¨ã€‚</td></tr><tr><td>validationQueryTimeout</td><td></td><td>å•ä½ï¼šç§’ï¼Œæ£€æµ‹è¿æ¥æ˜¯å¦æœ‰æ•ˆçš„è¶…æ—¶æ—¶é—´ã€‚åº•å±‚è°ƒç”¨jdbc Statementå¯¹è±¡çš„void setQueryTimeout(int seconds)æ–¹æ³•</td></tr><tr><td>testOnBorrow</td><td>true</td><td>ç”³è¯·è¿æ¥æ—¶æ‰§è¡ŒvalidationQueryæ£€æµ‹è¿æ¥æ˜¯å¦æœ‰æ•ˆï¼Œåšäº†è¿™ä¸ªé…ç½®ä¼šé™ä½æ€§èƒ½ã€‚</td></tr><tr><td>testOnReturn</td><td>false</td><td>å½’è¿˜è¿æ¥æ—¶æ‰§è¡ŒvalidationQueryæ£€æµ‹è¿æ¥æ˜¯å¦æœ‰æ•ˆï¼Œåšäº†è¿™ä¸ªé…ç½®ä¼šé™ä½æ€§èƒ½</td></tr><tr><td>testWhileIdle</td><td>false</td><td>å»ºè®®é…ç½®ä¸ºtrueï¼Œä¸å½±å“æ€§èƒ½ï¼Œå¹¶ä¸”ä¿è¯å®‰å…¨æ€§ã€‚ç”³è¯·è¿æ¥çš„æ—¶å€™æ£€æµ‹ï¼Œå¦‚æœç©ºé—²æ—¶é—´å¤§äºtimeBetweenEvictionRunsMillisï¼Œæ‰§è¡ŒvalidationQueryæ£€æµ‹è¿æ¥æ˜¯å¦æœ‰æ•ˆã€‚</td></tr><tr><td>timeBetweenEvictionRunsMillis</td><td>1åˆ†é’Ÿï¼ˆ1.0.14ï¼‰</td><td>æœ‰ä¸¤ä¸ªå«ä¹‰ï¼š 1) Destroyçº¿ç¨‹ä¼šæ£€æµ‹è¿æ¥çš„é—´éš”æ—¶é—´ï¼Œå¦‚æœè¿æ¥ç©ºé—²æ—¶é—´å¤§äºç­‰äºminEvictableIdleTimeMillisåˆ™å…³é—­ç‰©ç†è¿æ¥ 2) testWhileIdleçš„åˆ¤æ–­ä¾æ®ï¼Œè¯¦ç»†çœ‹testWhileIdleå±æ€§çš„è¯´æ˜</td></tr><tr><td>numTestsPerEvictionRun</td><td></td><td>ä¸å†ä½¿ç”¨ï¼Œä¸€ä¸ªDruidDataSourceåªæ”¯æŒä¸€ä¸ªEvictionRun</td></tr><tr><td>minEvictableIdleTimeMillis</td><td>30åˆ†é’Ÿï¼ˆ1.0.14ï¼‰</td><td>è¿æ¥ä¿æŒç©ºé—²è€Œä¸è¢«é©±é€çš„æœ€é•¿æ—¶é—´</td></tr><tr><td>connectionInitSqls</td><td></td><td>ç‰©ç†è¿æ¥åˆå§‹åŒ–çš„æ—¶å€™æ‰§è¡Œçš„sql</td></tr><tr><td>exceptionSorter</td><td>æ ¹æ®dbTypeè‡ªåŠ¨è¯†åˆ«</td><td>å½“æ•°æ®åº“æŠ›å‡ºä¸€äº›ä¸å¯æ¢å¤çš„å¼‚å¸¸æ—¶ï¼ŒæŠ›å¼ƒè¿æ¥</td></tr><tr><td>filters</td><td></td><td>å±æ€§ç±»å‹æ˜¯å­—ç¬¦ä¸²ï¼Œé€šè¿‡åˆ«åçš„æ–¹å¼é…ç½®æ‰©å±•æ’ä»¶ï¼Œå¸¸ç”¨çš„æ’ä»¶æœ‰ï¼š ç›‘æ§ç»Ÿè®¡ç”¨çš„filter:stat æ—¥å¿—ç”¨çš„filter:log4j é˜²å¾¡sqlæ³¨å…¥çš„filter:wall</td></tr><tr><td>proxyFilters</td><td></td><td>ç±»å‹æ˜¯List&lt;com.alibaba.druid.filter.Filter&gt;ï¼Œå¦‚æœåŒæ—¶é…ç½®äº†filterså’ŒproxyFiltersï¼Œæ˜¯ç»„åˆå…³ç³»ï¼Œå¹¶éæ›¿æ¢å…³ç³»</td></tr></tbody></table><h2 id="8-2ã€é…ç½®æ•°æ®æº"><a href="#8-2ã€é…ç½®æ•°æ®æº" class="headerlink" title="8.2ã€é…ç½®æ•°æ®æº"></a>8.2ã€é…ç½®æ•°æ®æº</h2><p>1ã€æ·»åŠ ä¸Š Druid æ•°æ®æºä¾èµ–ã€‚</p><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- https://mvnrepository.com/artifact/com.alibaba/druid --&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.alibaba<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>druid<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.1.12<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span></code></pre><p>2ã€åˆ‡æ¢æ•°æ®æºï¼›ä¹‹å‰å·²ç»è¯´è¿‡ Spring Boot 2.0 ä»¥ä¸Šé»˜è®¤ä½¿ç”¨ com.zaxxer.hikari.HikariDataSource æ•°æ®æºï¼Œä½†å¯ä»¥ é€šè¿‡ spring.datasource.type æŒ‡å®šæ•°æ®æºã€‚</p><pre><code class="hljs yml"><span class="hljs-attr">spring:</span>  <span class="hljs-attr">datasource:</span>    <span class="hljs-attr">username:</span> <span class="hljs-string">root</span>    <span class="hljs-attr">password:</span> <span class="hljs-number">123456</span>    <span class="hljs-attr">url:</span> <span class="hljs-string">jdbc:mysql://localhost:3306/springboot?serverTimezone=UTC&amp;useUnicode=true&amp;characterEncoding=utf-8</span>    <span class="hljs-attr">driver-class-name:</span> <span class="hljs-string">com.mysql.cj.jdbc.Driver</span>    <span class="hljs-attr">type:</span> <span class="hljs-string">com.alibaba.druid.pool.DruidDataSource</span> <span class="hljs-comment"># è‡ªå®šä¹‰æ•°æ®æº</span></code></pre><p>3ã€æ•°æ®æºåˆ‡æ¢ä¹‹åï¼Œåœ¨æµ‹è¯•ç±»ä¸­æ³¨å…¥ DataSourceï¼Œç„¶åè·å–åˆ°å®ƒï¼Œè¾“å‡ºä¸€çœ‹ä¾¿çŸ¥æ˜¯å¦æˆåŠŸåˆ‡æ¢ï¼›</p><p><img src="https://img2020.cnblogs.com/blog/1905053/202004/1905053-20200412223942091-598892546.png" srcset="/blog/img/loading.gif" alt="img"></p><p>4ã€åˆ‡æ¢æˆåŠŸï¼æ—¢ç„¶åˆ‡æ¢æˆåŠŸï¼Œå°±å¯ä»¥è®¾ç½®æ•°æ®æºè¿æ¥åˆå§‹åŒ–å¤§å°ã€æœ€å¤§è¿æ¥æ•°ã€ç­‰å¾…æ—¶é—´ã€æœ€å°è¿æ¥æ•° ç­‰è®¾ç½®é¡¹ï¼›å¯ä»¥æŸ¥çœ‹æºç </p><pre><code class="hljs yml"><span class="hljs-attr">spring:</span>  <span class="hljs-attr">datasource:</span>    <span class="hljs-attr">username:</span> <span class="hljs-string">root</span>    <span class="hljs-attr">password:</span> <span class="hljs-number">123456</span>    <span class="hljs-comment">#?serverTimezone=UTCè§£å†³æ—¶åŒºçš„æŠ¥é”™</span>    <span class="hljs-attr">url:</span> <span class="hljs-string">jdbc:mysql://localhost:3306/springboot?serverTimezone=UTC&amp;useUnicode=true&amp;characterEncoding=utf-8</span>    <span class="hljs-attr">driver-class-name:</span> <span class="hljs-string">com.mysql.cj.jdbc.Driver</span>    <span class="hljs-attr">type:</span> <span class="hljs-string">com.alibaba.druid.pool.DruidDataSource</span>    <span class="hljs-comment">#Spring Boot é»˜è®¤æ˜¯ä¸æ³¨å…¥è¿™äº›å±æ€§å€¼çš„ï¼Œéœ€è¦è‡ªå·±ç»‘å®š</span>    <span class="hljs-comment">#druid æ•°æ®æºä¸“æœ‰é…ç½®</span>    <span class="hljs-attr">initialSize:</span> <span class="hljs-number">5</span>    <span class="hljs-attr">minIdle:</span> <span class="hljs-number">5</span>    <span class="hljs-attr">maxActive:</span> <span class="hljs-number">20</span>    <span class="hljs-attr">maxWait:</span> <span class="hljs-number">60000</span>    <span class="hljs-attr">timeBetweenEvictionRunsMillis:</span> <span class="hljs-number">60000</span>    <span class="hljs-attr">minEvictableIdleTimeMillis:</span> <span class="hljs-number">300000</span>    <span class="hljs-attr">validationQuery:</span> <span class="hljs-string">SELECT</span> <span class="hljs-number">1</span> <span class="hljs-string">FROM</span> <span class="hljs-string">DUAL</span>    <span class="hljs-attr">testWhileIdle:</span> <span class="hljs-literal">true</span>    <span class="hljs-attr">testOnBorrow:</span> <span class="hljs-literal">false</span>    <span class="hljs-attr">testOnReturn:</span> <span class="hljs-literal">false</span>    <span class="hljs-attr">poolPreparedStatements:</span> <span class="hljs-literal">true</span>    <span class="hljs-comment">#é…ç½®ç›‘æ§ç»Ÿè®¡æ‹¦æˆªçš„filtersï¼Œstat:ç›‘æ§ç»Ÿè®¡ã€log4jï¼šæ—¥å¿—è®°å½•ã€wallï¼šé˜²å¾¡sqlæ³¨å…¥</span>    <span class="hljs-comment">#å¦‚æœå…è®¸æ—¶æŠ¥é”™  java.lang.ClassNotFoundException: org.apache.log4j.Priority</span>    <span class="hljs-comment">#åˆ™å¯¼å…¥ log4j ä¾èµ–å³å¯ï¼ŒMaven åœ°å€ï¼šhttps://mvnrepository.com/artifact/log4j/log4j</span>    <span class="hljs-attr">filters:</span> <span class="hljs-string">stat,wall,log4j</span>    <span class="hljs-attr">maxPoolPreparedStatementPerConnectionSize:</span> <span class="hljs-number">20</span>    <span class="hljs-attr">useGlobalDataSourceStat:</span> <span class="hljs-literal">true</span>    <span class="hljs-attr">connectionProperties:</span> <span class="hljs-string">druid.stat.mergeSql=true;druid.stat.slowSqlMillis=500</span></code></pre><p>5ã€å¯¼å…¥Log4j çš„ä¾èµ–</p><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- https://mvnrepository.com/artifact/log4j/log4j --&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>log4j<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>log4j<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.2.17<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span></code></pre><p>6ã€ç°åœ¨éœ€è¦ç¨‹åºå‘˜è‡ªå·±ä¸º DruidDataSource ç»‘å®šå…¨å±€é…ç½®æ–‡ä»¶ä¸­çš„å‚æ•°ï¼Œå†æ·»åŠ åˆ°å®¹å™¨ä¸­ï¼Œè€Œä¸å†ä½¿ç”¨ Spring Boot çš„è‡ªåŠ¨ç”Ÿæˆäº†ï¼›æˆ‘ä»¬éœ€è¦ è‡ªå·±æ·»åŠ  DruidDataSource ç»„ä»¶åˆ°å®¹å™¨ä¸­ï¼Œå¹¶ç»‘å®šå±æ€§ï¼›</p><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.kuang.config;<span class="hljs-keyword">import</span> com.alibaba.druid.pool.DruidDataSource;<span class="hljs-keyword">import</span> org.springframework.boot.context.properties.ConfigurationProperties;<span class="hljs-keyword">import</span> org.springframework.context.annotation.Bean;<span class="hljs-keyword">import</span> org.springframework.context.annotation.Configuration;<span class="hljs-keyword">import</span> javax.sql.DataSource;<span class="hljs-meta">@Configuration</span><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">DruidConfig</span> </span>{    <span class="hljs-comment">/*</span><span class="hljs-comment">       å°†è‡ªå®šä¹‰çš„ Druidæ•°æ®æºæ·»åŠ åˆ°å®¹å™¨ä¸­ï¼Œä¸å†è®© Spring Boot è‡ªåŠ¨åˆ›å»º</span><span class="hljs-comment">       ç»‘å®šå…¨å±€é…ç½®æ–‡ä»¶ä¸­çš„ druid æ•°æ®æºå±æ€§åˆ° com.alibaba.druid.pool.DruidDataSourceä»è€Œè®©å®ƒä»¬ç”Ÿæ•ˆ</span><span class="hljs-comment">       @ConfigurationProperties(prefix = "spring.datasource")ï¼šä½œç”¨å°±æ˜¯å°† å…¨å±€é…ç½®æ–‡ä»¶ä¸­</span><span class="hljs-comment">       å‰ç¼€ä¸º spring.datasourceçš„å±æ€§å€¼æ³¨å…¥åˆ° com.alibaba.druid.pool.DruidDataSource çš„åŒåå‚æ•°ä¸­</span><span class="hljs-comment">     */</span>    <span class="hljs-meta">@ConfigurationProperties</span>(prefix = <span class="hljs-string">"spring.datasource"</span>)    <span class="hljs-meta">@Bean</span>    <span class="hljs-function"><span class="hljs-keyword">public</span> DataSource <span class="hljs-title">druidDataSource</span><span class="hljs-params">()</span> </span>{        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> DruidDataSource();    }}</code></pre><p>7ã€å»æµ‹è¯•ç±»ä¸­æµ‹è¯•ä¸€ä¸‹ï¼›çœ‹æ˜¯å¦æˆåŠŸï¼</p><pre><code class="hljs java"><span class="hljs-meta">@SpringBootTest</span><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SpringbootDataJdbcApplicationTests</span> </span>{    <span class="hljs-comment">//DIæ³¨å…¥æ•°æ®æº</span>    <span class="hljs-meta">@Autowired</span>    DataSource dataSource;    <span class="hljs-meta">@Test</span>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">contextLoads</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> SQLException </span>{        <span class="hljs-comment">//çœ‹ä¸€ä¸‹é»˜è®¤æ•°æ®æº</span>        System.out.println(dataSource.getClass());        <span class="hljs-comment">//è·å¾—è¿æ¥</span>        Connection connection =   dataSource.getConnection();        System.out.println(connection);        DruidDataSource druidDataSource = (DruidDataSource) dataSource;        System.out.println(<span class="hljs-string">"druidDataSource æ•°æ®æºæœ€å¤§è¿æ¥æ•°ï¼š"</span> + druidDataSource.getMaxActive());        System.out.println(<span class="hljs-string">"druidDataSource æ•°æ®æºåˆå§‹åŒ–è¿æ¥æ•°ï¼š"</span> + druidDataSource.getInitialSize());        <span class="hljs-comment">//å…³é—­è¿æ¥</span>        connection.close();    }}</code></pre><p>è¾“å‡ºç»“æœ ï¼šå¯è§é…ç½®å‚æ•°å·²ç»ç”Ÿæ•ˆï¼</p><p><img src="https://img2020.cnblogs.com/blog/1905053/202004/1905053-20200412224035706-1280927557.png" srcset="/blog/img/loading.gif" alt="img"></p><h2 id="8-3ã€é…ç½®Druidæ•°æ®æºç›‘æ§"><a href="#8-3ã€é…ç½®Druidæ•°æ®æºç›‘æ§" class="headerlink" title="8.3ã€é…ç½®Druidæ•°æ®æºç›‘æ§"></a>8.3ã€é…ç½®Druidæ•°æ®æºç›‘æ§</h2><p>Druid æ•°æ®æºå…·æœ‰ç›‘æ§çš„åŠŸèƒ½ï¼Œå¹¶æä¾›äº†ä¸€ä¸ª web ç•Œé¢æ–¹ä¾¿ç”¨æˆ·æŸ¥çœ‹ï¼Œç±»ä¼¼å®‰è£… è·¯ç”±å™¨ æ—¶ï¼Œäººå®¶ä¹Ÿæä¾›äº†ä¸€ä¸ªé»˜è®¤çš„ web é¡µé¢ã€‚</p><p>æ‰€ä»¥ç¬¬ä¸€æ­¥éœ€è¦è®¾ç½® Druid çš„åå°ç®¡ç†é¡µé¢ï¼Œæ¯”å¦‚ ç™»å½•è´¦å·ã€å¯†ç  ç­‰ï¼›é…ç½®åå°ç®¡ç†ï¼›</p><pre><code class="hljs java"><span class="hljs-comment">//é…ç½® Druid ç›‘æ§ç®¡ç†åå°çš„Servletï¼›</span><span class="hljs-comment">//å†…ç½® Servlet å®¹å™¨æ—¶æ²¡æœ‰web.xmlæ–‡ä»¶ï¼Œæ‰€ä»¥ä½¿ç”¨ Spring Boot çš„æ³¨å†Œ Servlet æ–¹å¼</span><span class="hljs-meta">@Bean</span><span class="hljs-function"><span class="hljs-keyword">public</span> ServletRegistrationBean <span class="hljs-title">statViewServlet</span><span class="hljs-params">()</span> </span>{    ServletRegistrationBean bean = <span class="hljs-keyword">new</span> ServletRegistrationBean(<span class="hljs-keyword">new</span> StatViewServlet(), <span class="hljs-string">"/druid/*"</span>);    <span class="hljs-comment">// è¿™äº›å‚æ•°å¯ä»¥åœ¨ com.alibaba.druid.support.http.StatViewServlet </span>    <span class="hljs-comment">// çš„çˆ¶ç±» com.alibaba.druid.support.http.ResourceServlet ä¸­æ‰¾åˆ°</span>    Map&lt;String, String&gt; initParams = <span class="hljs-keyword">new</span> HashMap&lt;&gt;();    initParams.put(<span class="hljs-string">"loginUsername"</span>, <span class="hljs-string">"admin"</span>); <span class="hljs-comment">//åå°ç®¡ç†ç•Œé¢çš„ç™»å½•è´¦å·</span>    initParams.put(<span class="hljs-string">"loginPassword"</span>, <span class="hljs-string">"123456"</span>); <span class="hljs-comment">//åå°ç®¡ç†ç•Œé¢çš„ç™»å½•å¯†ç </span>    <span class="hljs-comment">//åå°å…è®¸è°å¯ä»¥è®¿é—®</span>    <span class="hljs-comment">//initParams.put("allow", "localhost")ï¼šè¡¨ç¤ºåªæœ‰æœ¬æœºå¯ä»¥è®¿é—®</span>    <span class="hljs-comment">//initParams.put("allow", "")ï¼šä¸ºç©ºæˆ–è€…ä¸ºnullæ—¶ï¼Œè¡¨ç¤ºå…è®¸æ‰€æœ‰è®¿é—®</span>    initParams.put(<span class="hljs-string">"allow"</span>, <span class="hljs-string">""</span>);    <span class="hljs-comment">//denyï¼šDruid åå°æ‹’ç»è°è®¿é—®</span>    <span class="hljs-comment">//initParams.put("kuangshen", "192.168.1.20");è¡¨ç¤ºç¦æ­¢æ­¤ipè®¿é—®</span>    <span class="hljs-comment">//è®¾ç½®åˆå§‹åŒ–å‚æ•°</span>    bean.setInitParameters(initParams);    <span class="hljs-keyword">return</span> bean;}</code></pre><p>é…ç½®å®Œæ¯•åï¼Œæˆ‘ä»¬å¯ä»¥é€‰æ‹©è®¿é—® ï¼š<a href="http://localhost:8080/druid/login.html" target="_blank" rel="noopener">http://localhost:8080/druid/login.html</a></p><p><img src="https://img2020.cnblogs.com/blog/1905053/202004/1905053-20200412224112471-646829041.png" srcset="/blog/img/loading.gif" alt="img"></p><p>è¿›å…¥ä¹‹å</p><p><img src="https://img2020.cnblogs.com/blog/1905053/202004/1905053-20200412224131010-12963631.png" srcset="/blog/img/loading.gif" alt="img"></p><p><strong>é…ç½® Druid web ç›‘æ§ filter è¿‡æ»¤å™¨</strong></p><pre><code class="hljs java"><span class="hljs-comment">//é…ç½® Druid ç›‘æ§ ä¹‹  web ç›‘æ§çš„ filter</span><span class="hljs-comment">//WebStatFilterï¼šç”¨äºé…ç½®Webå’ŒDruidæ•°æ®æºä¹‹é—´çš„ç®¡ç†å…³è”ç›‘æ§ç»Ÿè®¡</span><span class="hljs-meta">@Bean</span><span class="hljs-function"><span class="hljs-keyword">public</span> FilterRegistrationBean <span class="hljs-title">webStatFilter</span><span class="hljs-params">()</span> </span>{    FilterRegistrationBean bean = <span class="hljs-keyword">new</span> FilterRegistrationBean();    bean.setFilter(<span class="hljs-keyword">new</span> WebStatFilter());    <span class="hljs-comment">//exclusionsï¼šè®¾ç½®å“ªäº›è¯·æ±‚è¿›è¡Œè¿‡æ»¤æ’é™¤æ‰ï¼Œä»è€Œä¸è¿›è¡Œç»Ÿè®¡</span>    Map&lt;String, String&gt; initParams = <span class="hljs-keyword">new</span> HashMap&lt;&gt;();    initParams.put(<span class="hljs-string">"exclusions"</span>, <span class="hljs-string">"*.js,*.css,/druid/*,/jdbc/*"</span>);    bean.setInitParameters(initParams);    <span class="hljs-comment">//"/*" è¡¨ç¤ºè¿‡æ»¤æ‰€æœ‰è¯·æ±‚</span>    bean.setUrlPatterns(Arrays.asList(<span class="hljs-string">"/*"</span>));    <span class="hljs-keyword">return</span> bean;}</code></pre><p>å¹³æ—¶åœ¨å·¥ä½œä¸­ï¼ŒæŒ‰éœ€æ±‚è¿›è¡Œé…ç½®å³å¯ï¼Œä¸»è¦ç”¨ä½œç›‘</p><h1 id="9ã€SpringBoot-æ•´åˆmybatis"><a href="#9ã€SpringBoot-æ•´åˆmybatis" class="headerlink" title="9ã€SpringBoot æ•´åˆmybatis"></a>9ã€SpringBoot æ•´åˆmybatis</h1><h2 id="9-1ã€å¯¼å…¥mybatisæ‰€éœ€è¦çš„ä¾èµ–"><a href="#9-1ã€å¯¼å…¥mybatisæ‰€éœ€è¦çš„ä¾èµ–" class="headerlink" title="9.1ã€å¯¼å…¥mybatisæ‰€éœ€è¦çš„ä¾èµ–"></a><strong>9.1ã€å¯¼å…¥mybatisæ‰€éœ€è¦çš„ä¾èµ–</strong></h2><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- å¼•å…¥ myBatisï¼Œè¿™æ˜¯ MyBatiså®˜æ–¹æä¾›çš„é€‚é… Spring Boot çš„ï¼Œè€Œä¸æ˜¯Spring Bootè‡ªå·±çš„--&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.mybatis.spring.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mybatis-spring-boot-starter<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.1.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span></code></pre><h2 id="9-2ã€é…ç½®æ•°æ®åº“è¿æ¥ä¿¡æ¯"><a href="#9-2ã€é…ç½®æ•°æ®åº“è¿æ¥ä¿¡æ¯" class="headerlink" title="9.2ã€é…ç½®æ•°æ®åº“è¿æ¥ä¿¡æ¯"></a><strong>9.2ã€é…ç½®æ•°æ®åº“è¿æ¥ä¿¡æ¯</strong></h2><pre><code class="hljs properties"><span class="hljs-meta">spring.datasource.username</span>=<span class="hljs-string">root</span><span class="hljs-meta">spring.datasource.password</span>=<span class="hljs-string">123456</span><span class="hljs-meta">spring.datasource.url</span>=<span class="hljs-string">jdbc:mysql://localhost:3306/mybatis?serverTimezone=UTC&amp;useUnicode=true&amp;characterEncoding=utf-8</span><span class="hljs-meta">spring.datasource.driver-class-name</span>=<span class="hljs-string">com.mysql.jdbc.Driver</span></code></pre><h2 id="9-3ã€æˆ‘ä»¬è¿™é‡Œå°±æ˜¯ç”¨é»˜è®¤çš„æ•°æ®æºäº†ï¼›å…ˆå»æµ‹è¯•ä¸€ä¸‹è¿æ¥æ˜¯å¦æˆåŠŸï¼"><a href="#9-3ã€æˆ‘ä»¬è¿™é‡Œå°±æ˜¯ç”¨é»˜è®¤çš„æ•°æ®æºäº†ï¼›å…ˆå»æµ‹è¯•ä¸€ä¸‹è¿æ¥æ˜¯å¦æˆåŠŸï¼" class="headerlink" title="9.3ã€æˆ‘ä»¬è¿™é‡Œå°±æ˜¯ç”¨é»˜è®¤çš„æ•°æ®æºäº†ï¼›å…ˆå»æµ‹è¯•ä¸€ä¸‹è¿æ¥æ˜¯å¦æˆåŠŸï¼"></a>9.3ã€æˆ‘ä»¬è¿™é‡Œå°±æ˜¯ç”¨é»˜è®¤çš„æ•°æ®æºäº†ï¼›å…ˆå»æµ‹è¯•ä¸€ä¸‹è¿æ¥æ˜¯å¦æˆåŠŸï¼</h2><pre><code class="hljs java"><span class="hljs-meta">@RunWith</span>(SpringRunner<span class="hljs-class">.<span class="hljs-keyword">class</span>)</span><span class="hljs-class">@<span class="hljs-title">SpringBootTest</span></span><span class="hljs-class"><span class="hljs-title">public</span> <span class="hljs-title">class</span> <span class="hljs-title">SpringbootDemoMybatisApplicationTests</span> </span>{    <span class="hljs-meta">@Autowired</span>    DataSource dataSource;    <span class="hljs-meta">@Test</span>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">contextLoads</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> SQLException </span>{        System.out.println(<span class="hljs-string">"æ•°æ®æº&gt;&gt;&gt;&gt;&gt;&gt;"</span> + dataSource.getClass());        Connection connection = dataSource.getConnection();        System.out.println(<span class="hljs-string">"è¿æ¥&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;"</span> + connection);        System.out.println(<span class="hljs-string">"è¿æ¥åœ°å€&gt;&gt;&gt;&gt;&gt;"</span> + connection.getMetaData().getURL());        connection.close();    }}</code></pre><p><strong>æŸ¥çœ‹è¾“å‡ºç»“æœï¼Œæ•°æ®åº“é…ç½®OKï¼</strong></p><h2 id="9-4ã€åˆ›å»ºå®ä½“ç±»"><a href="#9-4ã€åˆ›å»ºå®ä½“ç±»" class="headerlink" title="9.4ã€åˆ›å»ºå®ä½“ç±»"></a><strong>9.4ã€åˆ›å»ºå®ä½“ç±»</strong></h2><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.kuang.mybatis.pojo;<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">User</span> </span>{    <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> id;    <span class="hljs-keyword">private</span> String name;    <span class="hljs-keyword">private</span> String pwd;    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">User</span><span class="hljs-params">()</span> </span>{    }    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">User</span><span class="hljs-params">(<span class="hljs-keyword">int</span> id, String name, String pwd)</span> </span>{        <span class="hljs-keyword">this</span>.id = id;        <span class="hljs-keyword">this</span>.name = name;        <span class="hljs-keyword">this</span>.pwd = pwd;    }    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> <span class="hljs-title">getId</span><span class="hljs-params">()</span> </span>{        <span class="hljs-keyword">return</span> id;    }    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setId</span><span class="hljs-params">(<span class="hljs-keyword">int</span> id)</span> </span>{        <span class="hljs-keyword">this</span>.id = id;    }    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">getName</span><span class="hljs-params">()</span> </span>{        <span class="hljs-keyword">return</span> name;    }    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setName</span><span class="hljs-params">(String name)</span> </span>{        <span class="hljs-keyword">this</span>.name = name;    }    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">getPwd</span><span class="hljs-params">()</span> </span>{        <span class="hljs-keyword">return</span> pwd;    }    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setPwd</span><span class="hljs-params">(String pwd)</span> </span>{        <span class="hljs-keyword">this</span>.pwd = pwd;    }    <span class="hljs-meta">@Override</span>    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">toString</span><span class="hljs-params">()</span> </span>{        <span class="hljs-keyword">return</span> <span class="hljs-string">"User{"</span> +                <span class="hljs-string">"id="</span> + id +                <span class="hljs-string">", name='"</span> + name + <span class="hljs-string">'\''</span> +                <span class="hljs-string">", pwd='"</span> + pwd + <span class="hljs-string">'\''</span> +                <span class="hljs-string">'}'</span>;    }}</code></pre><h2 id="9-5ã€é…ç½®Mapperæ¥å£ç±»"><a href="#9-5ã€é…ç½®Mapperæ¥å£ç±»" class="headerlink" title="9.5ã€é…ç½®Mapperæ¥å£ç±»"></a>9.5ã€é…ç½®Mapperæ¥å£ç±»</h2><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.kuang.mybatis.pojo.mapper;<span class="hljs-keyword">import</span> com.kuang.mybatis.pojo.User;<span class="hljs-keyword">import</span> org.apache.ibatis.annotations.Mapper;<span class="hljs-keyword">import</span> org.springframework.stereotype.Repository;<span class="hljs-keyword">import</span> java.util.List;<span class="hljs-comment">//@Mapper : è¡¨ç¤ºæœ¬ç±»æ˜¯ä¸€ä¸ª MyBatis çš„ Mapperï¼Œç­‰ä»·äºä»¥å‰ Spring æ•´åˆ MyBatis æ—¶çš„ Mapper æ¥å£</span><span class="hljs-meta">@Mapper</span><span class="hljs-meta">@Repository</span><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">UserMapper</span> </span>{    <span class="hljs-comment">//é€‰æ‹©å…¨éƒ¨ç”¨æˆ·</span>    <span class="hljs-function">List&lt;User&gt; <span class="hljs-title">selectUser</span><span class="hljs-params">()</span></span>;    <span class="hljs-comment">//æ ¹æ®idé€‰æ‹©ç”¨æˆ·</span>    <span class="hljs-function">User <span class="hljs-title">selectUserById</span><span class="hljs-params">(<span class="hljs-keyword">int</span> id)</span></span>;    <span class="hljs-comment">//æ·»åŠ ä¸€ä¸ªç”¨æˆ·</span>    <span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">addUser</span><span class="hljs-params">(User user)</span></span>;    <span class="hljs-comment">//ä¿®æ”¹ä¸€ä¸ªç”¨æˆ·</span>    <span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">updateUser</span><span class="hljs-params">(User user)</span></span>;    <span class="hljs-comment">//æ ¹æ®idåˆ é™¤ç”¨æˆ·</span>    <span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">deleteUser</span><span class="hljs-params">(<span class="hljs-keyword">int</span> id)</span></span>;}</code></pre><h2 id="9-6ã€å¯¹åº”Mapperæ˜ å°„æ–‡ä»¶"><a href="#9-6ã€å¯¹åº”Mapperæ˜ å°„æ–‡ä»¶" class="headerlink" title="9.6ã€å¯¹åº”Mapperæ˜ å°„æ–‡ä»¶"></a>9.6ã€å¯¹åº”Mapperæ˜ å°„æ–‡ä»¶</h2><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</span><span class="hljs-meta">&lt;!DOCTYPE mapper</span><span class="hljs-meta">        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"</span><span class="hljs-meta">        "http://mybatis.org/dtd/mybatis-3-mapper.dtd"&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">mapper</span> <span class="hljs-attr">namespace</span>=<span class="hljs-string">"com.kuang.mybatis.pojo.mapper.UserMapper"</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"selectUser"</span> <span class="hljs-attr">resultType</span>=<span class="hljs-string">"User"</span>&gt;</span>    select * from user  <span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"selectUserById"</span> <span class="hljs-attr">resultType</span>=<span class="hljs-string">"User"</span>&gt;</span>    select * from user where id = #{id}<span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">insert</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"addUser"</span> <span class="hljs-attr">parameterType</span>=<span class="hljs-string">"User"</span>&gt;</span>    insert into user (id,name,pwd) values (#{id},#{name},#{pwd})<span class="hljs-tag">&lt;/<span class="hljs-name">insert</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">update</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"updateUser"</span> <span class="hljs-attr">parameterType</span>=<span class="hljs-string">"User"</span>&gt;</span>    update user set name=#{name},pwd=#{pwd} where id = #{id}<span class="hljs-tag">&lt;/<span class="hljs-name">update</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">delete</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"deleteUser"</span> <span class="hljs-attr">parameterType</span>=<span class="hljs-string">"int"</span>&gt;</span>    delete from user where id = #{id}<span class="hljs-tag">&lt;/<span class="hljs-name">delete</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">mapper</span>&gt;</span></code></pre><h2 id="9-7ã€mavené…ç½®èµ„æºè¿‡æ»¤é—®é¢˜"><a href="#9-7ã€mavené…ç½®èµ„æºè¿‡æ»¤é—®é¢˜" class="headerlink" title="9.7ã€mavené…ç½®èµ„æºè¿‡æ»¤é—®é¢˜"></a>9.7ã€mavené…ç½®èµ„æºè¿‡æ»¤é—®é¢˜</h2><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">resources</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">resource</span>&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">directory</span>&gt;</span>src/main/java<span class="hljs-tag">&lt;/<span class="hljs-name">directory</span>&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">includes</span>&gt;</span>            <span class="hljs-tag">&lt;<span class="hljs-name">include</span>&gt;</span>**/*.xml<span class="hljs-tag">&lt;/<span class="hljs-name">include</span>&gt;</span>        <span class="hljs-tag">&lt;/<span class="hljs-name">includes</span>&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">filtering</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">filtering</span>&gt;</span>    <span class="hljs-tag">&lt;/<span class="hljs-name">resource</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">resources</span>&gt;</span></code></pre><h2 id="9-8ã€SpringBoot-æ•´åˆï¼"><a href="#9-8ã€SpringBoot-æ•´åˆï¼" class="headerlink" title="9.8ã€SpringBoot æ•´åˆï¼"></a>9.8ã€SpringBoot æ•´åˆï¼</h2><p>ä»¥å‰ MyBatis æœªä¸ spring æ•´åˆæ—¶ï¼Œé…ç½®æ•°æ®æºã€äº‹åŠ¡ã€è¿æ¥æ•°æ®åº“çš„è´¦å·ã€å¯†ç ç­‰éƒ½æ˜¯åœ¨ myBatis æ ¸å¿ƒé…ç½®æ–‡ä»¶ä¸­è¿›è¡Œçš„myBatis ä¸ spring æ•´åˆåï¼Œé…ç½®æ•°æ®æºã€äº‹åŠ¡ã€è¿æ¥æ•°æ®åº“çš„è´¦å·ã€å¯†ç ç­‰å°±äº¤ç”± spring ç®¡ç†ã€‚å› æ­¤ï¼Œåœ¨è¿™é‡Œæˆ‘ä»¬å³ä½¿ä¸ä½¿ç”¨mybatisé…ç½®æ–‡ä»¶ä¹Ÿå®Œå…¨okï¼<br><strong>æ—¢ç„¶å·²ç»æä¾›äº† myBatis çš„æ˜ å°„é…ç½®æ–‡ä»¶ï¼Œè‡ªç„¶è¦å‘Šè¯‰ spring boot è¿™äº›æ–‡ä»¶çš„ä½ç½®</strong></p><pre><code class="hljs properties"><span class="hljs-meta">spring.datasource.username</span>=<span class="hljs-string">root</span><span class="hljs-meta">spring.datasource.password</span>=<span class="hljs-string">123456</span><span class="hljs-meta">spring.datasource.url</span>=<span class="hljs-string">jdbc:mysql://localhost:3306/mybatis?serverTimezone=UTC&amp;useUnicode=true&amp;characterEncoding=utf-8</span><span class="hljs-meta">spring.datasource.driver-class-name</span>=<span class="hljs-string">com.mysql.jdbc.Driver</span><span class="hljs-comment">#æŒ‡å®šmyBatisçš„æ ¸å¿ƒé…ç½®æ–‡ä»¶ä¸Mapperæ˜ å°„æ–‡ä»¶</span><span class="hljs-meta">mybatis.mapper-locations</span>=<span class="hljs-string">classpath:mybatis/mapper/*.xml</span><span class="hljs-comment"># æ³¨æ„ï¼šå¯¹åº”å®ä½“ç±»çš„è·¯å¾„</span><span class="hljs-meta">mybatis.type-aliases-package</span>=<span class="hljs-string">com.kuang.mybatis.pojo</span></code></pre><p>å·²ç»è¯´è¿‡ spring boot å®˜æ–¹å¹¶æ²¡æœ‰æä¾› myBaits çš„å¯åŠ¨å™¨ï¼Œæ˜¯ myBatis å®˜æ–¹æä¾›çš„å¼€å‘åŒ…æ¥é€‚é…çš„ spring bootï¼Œä» pom.xml æ–‡ä»¶ä¸­çš„ä¾èµ–åŒ…åä¹Ÿèƒ½çœ‹å‡ºæ¥ï¼Œå¹¶éæ˜¯ä»¥ spring-boot å¼€å¤´çš„ï¼›</p><p>åŒç†ä¸Šé¢å…¨å±€é…ç½®æ–‡ä»¶ä¸­çš„è¿™ä¸¤è¡Œé…ç½®ä¹Ÿæ˜¯ä»¥ mybatis å¼€å¤´ è€Œé spring å¼€å¤´ä¹Ÿå……åˆ†è¯´æ˜è¿™äº›éƒ½æ˜¯ myBatis å®˜æ–¹æä¾›çš„</p><p>å¯ä»¥ä» org.mybatis.spring.boot.autoconfigure.MybatisProperties ä¸­æŸ¥çœ‹æ‰€æœ‰é…ç½®é¡¹</p><pre><code class="hljs java"><span class="hljs-meta">@ConfigurationProperties</span>(    prefix = <span class="hljs-string">"mybatis"</span>)<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MybatisProperties</span> </span>{    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> String MYBATIS_PREFIX = <span class="hljs-string">"mybatis"</span>;    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> ResourcePatternResolver resourceResolver = <span class="hljs-keyword">new</span> PathMatchingResourcePatternResolver();    <span class="hljs-keyword">private</span> String configLocation;    <span class="hljs-keyword">private</span> String[] mapperLocations;    <span class="hljs-keyword">private</span> String typeAliasesPackage;    <span class="hljs-keyword">private</span> Class&lt;?&gt; typeAliasesSuperType;    <span class="hljs-keyword">private</span> String typeHandlersPackage;    <span class="hljs-keyword">private</span> <span class="hljs-keyword">boolean</span> checkConfigLocation = <span class="hljs-keyword">false</span>;    <span class="hljs-keyword">private</span> ExecutorType executorType;    <span class="hljs-keyword">private</span> Class&lt;? extends LanguageDriver&gt; defaultScriptingLanguageDriver;    <span class="hljs-keyword">private</span> Properties configurationProperties;    <span class="hljs-meta">@NestedConfigurationProperty</span>    <span class="hljs-keyword">private</span> Configuration configuration;</code></pre><p>ä¹Ÿå¯ä»¥ç›´æ¥å»æŸ¥çœ‹ <a href="http://www.mybatis.org/spring-boot-starter/mybatis-spring-boot-autoconfigure/" target="_blank" rel="noopener">å®˜æ–¹æ–‡æ¡£</a></p><h2 id="9-9ã€ç¼–å†™controller"><a href="#9-9ã€ç¼–å†™controller" class="headerlink" title="9.9ã€ç¼–å†™controller"></a>9.9ã€ç¼–å†™controller</h2><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.kuang.mybatis.controller;<span class="hljs-keyword">import</span> com.kuang.mybatis.pojo.User;<span class="hljs-keyword">import</span> com.kuang.mybatis.pojo.mapper.UserMapper;<span class="hljs-keyword">import</span> org.springframework.beans.factory.annotation.Autowired;<span class="hljs-keyword">import</span> org.springframework.web.bind.annotation.GetMapping;<span class="hljs-keyword">import</span> org.springframework.web.bind.annotation.RestController;<span class="hljs-keyword">import</span> java.util.List;<span class="hljs-meta">@RestController</span><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserController</span> </span>{    <span class="hljs-meta">@Autowired</span>    <span class="hljs-keyword">private</span> UserMapper userMapper;    <span class="hljs-comment">//é€‰æ‹©å…¨éƒ¨ç”¨æˆ·</span>    <span class="hljs-meta">@GetMapping</span>(<span class="hljs-string">"/selectUser"</span>)    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">selectUser</span><span class="hljs-params">()</span></span>{        List&lt;User&gt; users = userMapper.selectUser();        <span class="hljs-keyword">for</span> (User user : users) {            System.out.println(user);        }        <span class="hljs-keyword">return</span> <span class="hljs-string">"ok"</span>;    }    <span class="hljs-comment">//æ ¹æ®idé€‰æ‹©ç”¨æˆ·</span>    <span class="hljs-meta">@GetMapping</span>(<span class="hljs-string">"/selectUserById"</span>)    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">selectUserById</span><span class="hljs-params">()</span></span>{        User user = userMapper.selectUserById(<span class="hljs-number">1</span>);        System.out.println(user);        <span class="hljs-keyword">return</span> <span class="hljs-string">"ok"</span>;    }    <span class="hljs-comment">//æ·»åŠ ä¸€ä¸ªç”¨æˆ·</span>    <span class="hljs-meta">@GetMapping</span>(<span class="hljs-string">"/addUser"</span>)    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">addUser</span><span class="hljs-params">()</span></span>{        userMapper.addUser(<span class="hljs-keyword">new</span> User(<span class="hljs-number">5</span>,<span class="hljs-string">"é˜¿æ¯›"</span>,<span class="hljs-string">"456789"</span>));        <span class="hljs-keyword">return</span> <span class="hljs-string">"ok"</span>;    }    <span class="hljs-comment">//ä¿®æ”¹ä¸€ä¸ªç”¨æˆ·</span>    <span class="hljs-meta">@GetMapping</span>(<span class="hljs-string">"/updateUser"</span>)    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">updateUser</span><span class="hljs-params">()</span></span>{        userMapper.updateUser(<span class="hljs-keyword">new</span> User(<span class="hljs-number">5</span>,<span class="hljs-string">"é˜¿æ¯›"</span>,<span class="hljs-string">"421319"</span>));        <span class="hljs-keyword">return</span> <span class="hljs-string">"ok"</span>;    }    <span class="hljs-comment">//æ ¹æ®idåˆ é™¤ç”¨æˆ·</span>    <span class="hljs-meta">@GetMapping</span>(<span class="hljs-string">"/deleteUser"</span>)    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">deleteUser</span><span class="hljs-params">()</span></span>{        userMapper.deleteUser(<span class="hljs-number">5</span>);        <span class="hljs-keyword">return</span> <span class="hljs-string">"ok"</span>;    }}</code></pre><h2 id="9-10ã€å¯åŠ¨é¡¹ç›®è®¿é—®è¿›è¡Œæµ‹è¯•ï¼"><a href="#9-10ã€å¯åŠ¨é¡¹ç›®è®¿é—®è¿›è¡Œæµ‹è¯•ï¼" class="headerlink" title="9.10ã€å¯åŠ¨é¡¹ç›®è®¿é—®è¿›è¡Œæµ‹è¯•ï¼"></a><strong>9.10ã€å¯åŠ¨é¡¹ç›®è®¿é—®è¿›è¡Œæµ‹è¯•ï¼</strong></h2><p><strong>æ­¥éª¤ï¼š</strong></p><p>Mybatisæ•´åˆåŒ…</p><p>mybatis-spring-boot-starter</p><p>1.å¯¼å…¥åŒ…</p><p>2.é…ç½®æ–‡ä»¶</p><p>3.mybatisé…ç½®</p><p>4.ç¼–å†™sql</p><p>5.serviceå±‚è°ƒç”¨daoå±‚</p><p>6.controllerè°ƒç”¨serviceå±‚</p><h2 id="æ³¨ï¼šé…ç½®æ•°æ®åº“è¿æ¥ä¿¡æ¯ï¼ˆä¸å˜ï¼‰"><a href="#æ³¨ï¼šé…ç½®æ•°æ®åº“è¿æ¥ä¿¡æ¯ï¼ˆä¸å˜ï¼‰" class="headerlink" title="æ³¨ï¼šé…ç½®æ•°æ®åº“è¿æ¥ä¿¡æ¯ï¼ˆä¸å˜ï¼‰"></a><strong>æ³¨ï¼šé…ç½®æ•°æ®åº“è¿æ¥ä¿¡æ¯ï¼ˆä¸å˜ï¼‰</strong></h2><pre><code class="hljs yml"><span class="hljs-attr">spring:</span>  <span class="hljs-attr">datasource:</span>    <span class="hljs-attr">username:</span> <span class="hljs-string">root</span>    <span class="hljs-attr">password:</span> <span class="hljs-number">123456</span>    <span class="hljs-comment">#?serverTimezone=UTCè§£å†³æ—¶åŒºçš„æŠ¥é”™</span>    <span class="hljs-attr">url:</span> <span class="hljs-string">jdbc:mysql://localhost:3306/mybatis?serverTimezone=UTC&amp;useUnicode=true&amp;characterEncoding=utf-8</span>    <span class="hljs-attr">driver-class-name:</span> <span class="hljs-string">com.mysql.jdbc.Driver</span>    <span class="hljs-attr">type:</span> <span class="hljs-string">com.alibaba.druid.pool.DruidDataSource</span>    <span class="hljs-comment">#Spring Boot é»˜è®¤æ˜¯ä¸æ³¨å…¥è¿™äº›å±æ€§å€¼çš„ï¼Œéœ€è¦è‡ªå·±ç»‘å®š</span>    <span class="hljs-comment">#druid æ•°æ®æºä¸“æœ‰é…ç½®</span>    <span class="hljs-attr">initialSize:</span> <span class="hljs-number">5</span>    <span class="hljs-attr">minIdle:</span> <span class="hljs-number">5</span>    <span class="hljs-attr">maxActive:</span> <span class="hljs-number">20</span>    <span class="hljs-attr">maxWait:</span> <span class="hljs-number">60000</span>    <span class="hljs-attr">timeBetweenEvictionRunsMillis:</span> <span class="hljs-number">60000</span>    <span class="hljs-attr">minEvictableIdleTimeMillis:</span> <span class="hljs-number">300000</span>    <span class="hljs-attr">validationQuery:</span> <span class="hljs-string">SELECT</span> <span class="hljs-number">1</span> <span class="hljs-string">FROM</span> <span class="hljs-string">DUAL</span>    <span class="hljs-attr">testWhileIdle:</span> <span class="hljs-literal">true</span>    <span class="hljs-attr">testOnBorrow:</span> <span class="hljs-literal">false</span>    <span class="hljs-attr">testOnReturn:</span> <span class="hljs-literal">false</span>    <span class="hljs-attr">poolPreparedStatements:</span> <span class="hljs-literal">true</span>    <span class="hljs-comment">#é…ç½®ç›‘æ§ç»Ÿè®¡æ‹¦æˆªçš„filtersï¼Œstat:ç›‘æ§ç»Ÿè®¡ã€log4jï¼šæ—¥å¿—è®°å½•ã€wallï¼šé˜²å¾¡sqlæ³¨å…¥</span>    <span class="hljs-comment">#å¦‚æœå…è®¸æ—¶æŠ¥é”™  java.lang.ClassNotFoundException: org.apache.log4j.Priority</span>    <span class="hljs-comment">#åˆ™å¯¼å…¥ log4j ä¾èµ–å³å¯ï¼ŒMaven åœ°å€ï¼š https://mvnrepository.com/artifact/log4j/log4j</span>    <span class="hljs-attr">filters:</span> <span class="hljs-string">stat,wall,log4j</span>    <span class="hljs-attr">maxPoolPreparedStatementPerConnectionSize:</span> <span class="hljs-number">20</span>    <span class="hljs-attr">useGlobalDataSourceStat:</span> <span class="hljs-literal">true</span>    <span class="hljs-attr">connectionProperties:</span> <span class="hljs-string">druid.stat.mergeSql=true;druid.stat.slowSqlMillis=500</span></code></pre><h1 id="10ã€SpringBootï¼šWebå¼€å‘é™æ€èµ„æºå¤„ç†"><a href="#10ã€SpringBootï¼šWebå¼€å‘é™æ€èµ„æºå¤„ç†" class="headerlink" title="10ã€SpringBootï¼šWebå¼€å‘é™æ€èµ„æºå¤„ç†"></a>10ã€SpringBootï¼šWebå¼€å‘é™æ€èµ„æºå¤„ç†</h1><p>Webå¼€å‘æ¢ç©¶</p><h2 id="10-1ã€ç®€ä»‹"><a href="#10-1ã€ç®€ä»‹" class="headerlink" title="10.1ã€ç®€ä»‹"></a>10.1ã€ç®€ä»‹</h2><p>å¥½çš„ï¼ŒåŒå­¦ä»¬ï¼Œé‚£ä¹ˆæ¥ä¸‹æ¥å‘¢ï¼Œæˆ‘ä»¬å¼€å§‹å­¦ä¹ SpringBootä¸Webå¼€å‘ï¼Œä»è¿™ä¸€ç« å¾€åï¼Œå°±å±äºæˆ‘ä»¬å®æˆ˜éƒ¨åˆ†çš„å†…å®¹äº†ï¼›</p><p>å…¶å®SpringBootçš„ä¸œè¥¿ç”¨èµ·æ¥éå¸¸ç®€å•ï¼Œå› ä¸ºSpringBootæœ€å¤§çš„ç‰¹ç‚¹å°±æ˜¯è‡ªåŠ¨è£…é…ã€‚</p><p><strong>ä½¿ç”¨SpringBootçš„æ­¥éª¤ï¼š</strong></p><p>1ã€åˆ›å»ºä¸€ä¸ªSpringBootåº”ç”¨ï¼Œé€‰æ‹©æˆ‘ä»¬éœ€è¦çš„æ¨¡å—ï¼ŒSpringBootå°±ä¼šé»˜è®¤å°†æˆ‘ä»¬çš„éœ€è¦çš„æ¨¡å—è‡ªåŠ¨é…ç½®å¥½</p><p>2ã€æ‰‹åŠ¨åœ¨é…ç½®æ–‡ä»¶ä¸­é…ç½®éƒ¨åˆ†é…ç½®é¡¹ç›®å°±å¯ä»¥è¿è¡Œèµ·æ¥äº†</p><p>3ã€ä¸“æ³¨ç¼–å†™ä¸šåŠ¡ä»£ç ï¼Œä¸éœ€è¦è€ƒè™‘ä»¥å‰é‚£æ ·ä¸€å¤§å †çš„é…ç½®äº†ã€‚</p><p>è¦ç†Ÿæ‚‰æŒæ¡å¼€å‘ï¼Œä¹‹å‰å­¦ä¹ çš„è‡ªåŠ¨é…ç½®çš„åŸç†ä¸€å®šè¦ææ˜ç™½ï¼</p><p>æ¯”å¦‚SpringBootåˆ°åº•å¸®æˆ‘ä»¬é…ç½®äº†ä»€ä¹ˆï¼Ÿæˆ‘ä»¬èƒ½ä¸èƒ½ä¿®æ”¹ï¼Ÿæˆ‘ä»¬èƒ½ä¿®æ”¹å“ªäº›é…ç½®ï¼Ÿæˆ‘ä»¬èƒ½ä¸èƒ½æ‰©å±•ï¼Ÿ</p><ul><li>å‘å®¹å™¨ä¸­è‡ªåŠ¨é…ç½®ç»„ä»¶ ï¼š*** Autoconfiguration</li><li>è‡ªåŠ¨é…ç½®ç±»ï¼Œå°è£…é…ç½®æ–‡ä»¶çš„å†…å®¹ï¼š***Properties</li></ul><p>æ²¡äº‹å°±æ‰¾æ‰¾ç±»ï¼Œçœ‹çœ‹è‡ªåŠ¨è£…é…åŸç†ï¼</p><p>æˆ‘ä»¬ä¹‹åæ¥è¿›è¡Œä¸€ä¸ªå•ä½“é¡¹ç›®çš„å°é¡¹ç›®æµ‹è¯•ï¼Œè®©å¤§å®¶èƒ½å¤Ÿå¿«é€Ÿä¸Šæ‰‹å¼€å‘ï¼</p><p>é™æ€èµ„æºå¤„ç†</p><h2 id="10-2ã€é™æ€èµ„æºæ˜ å°„è§„åˆ™"><a href="#10-2ã€é™æ€èµ„æºæ˜ å°„è§„åˆ™" class="headerlink" title="10.2ã€é™æ€èµ„æºæ˜ å°„è§„åˆ™"></a>10.2ã€é™æ€èµ„æºæ˜ å°„è§„åˆ™</h2><p><strong>é¦–å…ˆï¼Œæˆ‘ä»¬æ­å»ºä¸€ä¸ªæ™®é€šçš„SpringBooté¡¹ç›®ï¼Œå›é¡¾ä¸€ä¸‹HelloWorldç¨‹åºï¼</strong></p><p>å†™è¯·æ±‚éå¸¸ç®€å•ï¼Œé‚£æˆ‘ä»¬è¦å¼•å…¥æˆ‘ä»¬å‰ç«¯èµ„æºï¼Œæˆ‘ä»¬é¡¹ç›®ä¸­æœ‰è®¸å¤šçš„é™æ€èµ„æºï¼Œæ¯”å¦‚cssï¼Œjsç­‰æ–‡ä»¶ï¼Œè¿™ä¸ªSpringBootæ€ä¹ˆå¤„ç†å‘¢ï¼Ÿ</p><p>å¦‚æœæˆ‘ä»¬æ˜¯ä¸€ä¸ªwebåº”ç”¨ï¼Œæˆ‘ä»¬çš„mainä¸‹ä¼šæœ‰ä¸€ä¸ªwebappï¼Œæˆ‘ä»¬ä»¥å‰éƒ½æ˜¯å°†æ‰€æœ‰çš„é¡µé¢å¯¼åœ¨è¿™é‡Œé¢çš„ï¼Œå¯¹å§ï¼ä½†æ˜¯æˆ‘ä»¬ç°åœ¨çš„pomå‘¢ï¼Œæ‰“åŒ…æ–¹å¼æ˜¯ä¸ºjarçš„æ–¹å¼ï¼Œé‚£ä¹ˆè¿™ç§æ–¹å¼SpringBootèƒ½ä¸èƒ½æ¥ç»™æˆ‘ä»¬å†™é¡µé¢å‘¢ï¼Ÿå½“ç„¶æ˜¯å¯ä»¥çš„ï¼Œä½†æ˜¯SpringBootå¯¹äºé™æ€èµ„æºæ”¾ç½®çš„ä½ç½®ï¼Œæ˜¯æœ‰è§„å®šçš„ï¼</p><p><strong>æˆ‘ä»¬å…ˆæ¥èŠèŠè¿™ä¸ªé™æ€èµ„æºæ˜ å°„è§„åˆ™ï¼š</strong></p><p>SpringBootä¸­ï¼ŒSpringMVCçš„webé…ç½®éƒ½åœ¨ WebMvcAutoConfiguration è¿™ä¸ªé…ç½®ç±»é‡Œé¢ï¼›</p><p>æˆ‘ä»¬å¯ä»¥å»çœ‹çœ‹ WebMvcAutoConfigurationAdapter ä¸­æœ‰å¾ˆå¤šé…ç½®æ–¹æ³•ï¼›</p><p>æœ‰ä¸€ä¸ªæ–¹æ³•ï¼šaddResourceHandlers æ·»åŠ èµ„æºå¤„ç†</p><pre><code class="hljs java"><span class="hljs-meta">@Override</span><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">addResourceHandlers</span><span class="hljs-params">(ResourceHandlerRegistry registry)</span> </span>{    <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.resourceProperties.isAddMappings()) {        <span class="hljs-comment">// å·²ç¦ç”¨é»˜è®¤èµ„æºå¤„ç†</span>        logger.debug(<span class="hljs-string">"Default resource handling disabled"</span>);        <span class="hljs-keyword">return</span>;    }    <span class="hljs-comment">// ç¼“å­˜æ§åˆ¶</span>    Duration cachePeriod = <span class="hljs-keyword">this</span>.resourceProperties.getCache().getPeriod();    CacheControl cacheControl = <span class="hljs-keyword">this</span>.resourceProperties.getCache().getCachecontrol().toHttpCacheControl();    <span class="hljs-comment">// webjars é…ç½®</span>    <span class="hljs-keyword">if</span> (!registry.hasMappingForPattern(<span class="hljs-string">"/webjars/**"</span>)) {        customizeResourceHandlerRegistration(registry.addResourceHandler(<span class="hljs-string">"/webjars/**"</span>)                                             .addResourceLocations(<span class="hljs-string">"classpath:/META-INF/resources/webjars/"</span>)                                             .setCachePeriod(getSeconds(cachePeriod)).setCacheControl(cacheControl));    }    <span class="hljs-comment">// é™æ€èµ„æºé…ç½®</span>    String staticPathPattern = <span class="hljs-keyword">this</span>.mvcProperties.getStaticPathPattern();    <span class="hljs-keyword">if</span> (!registry.hasMappingForPattern(staticPathPattern)) {        customizeResourceHandlerRegistration(registry.addResourceHandler(staticPathPattern)                                             .addResourceLocations(getResourceLocations(<span class="hljs-keyword">this</span>.resourceProperties.getStaticLocations()))                                             .setCachePeriod(getSeconds(cachePeriod)).setCacheControl(cacheControl));    }}</code></pre><p>è¯»ä¸€ä¸‹æºä»£ç ï¼šæ¯”å¦‚æ‰€æœ‰çš„ /webjars/** ï¼Œ éƒ½éœ€è¦å» classpath:/META-INF/resources/webjars/ æ‰¾å¯¹åº”çš„èµ„æºï¼›</p><h2 id="10-3ã€ä»€ä¹ˆæ˜¯webjars-å‘¢ï¼Ÿ"><a href="#10-3ã€ä»€ä¹ˆæ˜¯webjars-å‘¢ï¼Ÿ" class="headerlink" title="10.3ã€ä»€ä¹ˆæ˜¯webjars å‘¢ï¼Ÿ"></a>10.3ã€ä»€ä¹ˆæ˜¯webjars å‘¢ï¼Ÿ</h2><p>Webjarsæœ¬è´¨å°±æ˜¯ä»¥jaråŒ…çš„æ–¹å¼å¼•å…¥æˆ‘ä»¬çš„é™æ€èµ„æº ï¼Œ æˆ‘ä»¬ä»¥å‰è¦å¯¼å…¥ä¸€ä¸ªé™æ€èµ„æºæ–‡ä»¶ï¼Œç›´æ¥å¯¼å…¥å³å¯ã€‚</p><p>ä½¿ç”¨SpringBootéœ€è¦ä½¿ç”¨Webjarsï¼Œæˆ‘ä»¬å¯ä»¥å»æœç´¢ä¸€ä¸‹ï¼š</p><p>ç½‘ç«™ï¼š<a href="https://www.webjars.org/" target="_blank" rel="noopener">https://www.webjars.org</a></p><p>è¦ä½¿ç”¨jQueryï¼Œæˆ‘ä»¬åªè¦è¦å¼•å…¥jQueryå¯¹åº”ç‰ˆæœ¬çš„pomä¾èµ–å³å¯ï¼</p><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.webjars<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>jquery<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.4.1<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span></code></pre><p>å¯¼å…¥å®Œæ¯•ï¼ŒæŸ¥çœ‹webjarsç›®å½•ç»“æ„ï¼Œå¹¶è®¿é—®Jquery.jsæ–‡ä»¶ï¼</p><p><img src="https://img2020.cnblogs.com/blog/1905053/202004/1905053-20200412224229426-796441519.png" srcset="/blog/img/loading.gif" alt="img"></p><p>è®¿é—®ï¼šåªè¦æ˜¯é™æ€èµ„æºï¼ŒSpringBootå°±ä¼šå»å¯¹åº”çš„è·¯å¾„å¯»æ‰¾èµ„æºï¼Œæˆ‘ä»¬è¿™é‡Œè®¿é—®ï¼š<a href="http://localhost:8080/webjars/jquery/3.4.1/jquery.js" target="_blank" rel="noopener">http://localhost:8080/webjars/jquery/3.4.1/jquery.js</a></p><p><img src="https://img2020.cnblogs.com/blog/1905053/202004/1905053-20200412224306836-344577320.png" srcset="/blog/img/loading.gif" alt="img"></p><h2 id="10-4ã€ç¬¬äºŒç§é™æ€èµ„æºæ˜ å°„è§„åˆ™"><a href="#10-4ã€ç¬¬äºŒç§é™æ€èµ„æºæ˜ å°„è§„åˆ™" class="headerlink" title="10.4ã€ç¬¬äºŒç§é™æ€èµ„æºæ˜ å°„è§„åˆ™"></a>10.4ã€ç¬¬äºŒç§é™æ€èµ„æºæ˜ å°„è§„åˆ™</h2><p>é‚£æˆ‘ä»¬é¡¹ç›®ä¸­è¦æ˜¯ä½¿ç”¨è‡ªå·±çš„é™æ€èµ„æºè¯¥æ€ä¹ˆå¯¼å…¥å‘¢ï¼Ÿæˆ‘ä»¬çœ‹ä¸‹ä¸€è¡Œä»£ç ï¼›</p><p>æˆ‘ä»¬å»æ‰¾staticPathPatternå‘ç°ç¬¬äºŒç§æ˜ å°„è§„åˆ™ ï¼š/** , è®¿é—®å½“å‰çš„é¡¹ç›®ä»»æ„èµ„æºï¼Œå®ƒä¼šå»æ‰¾ resourceProperties è¿™ä¸ªç±»ï¼Œæˆ‘ä»¬å¯ä»¥ç‚¹è¿›å»çœ‹ä¸€ä¸‹åˆ†æï¼š</p><pre><code class="hljs java"><span class="hljs-comment">// è¿›å…¥æ–¹æ³•</span><span class="hljs-keyword">public</span> String[] getStaticLocations() {    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.staticLocations;}<span class="hljs-comment">// æ‰¾åˆ°å¯¹åº”çš„å€¼</span><span class="hljs-keyword">private</span> String[] staticLocations = CLASSPATH_RESOURCE_LOCATIONS;<span class="hljs-comment">// æ‰¾åˆ°è·¯å¾„</span><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> String[] CLASSPATH_RESOURCE_LOCATIONS = {     <span class="hljs-string">"classpath:/META-INF/resources/"</span>,  <span class="hljs-string">"classpath:/resources/"</span>,     <span class="hljs-string">"classpath:/static/"</span>,     <span class="hljs-string">"classpath:/public/"</span> };</code></pre><p>ResourceProperties å¯ä»¥è®¾ç½®å’Œæˆ‘ä»¬é™æ€èµ„æºæœ‰å…³çš„å‚æ•°ï¼›è¿™é‡Œé¢æŒ‡å‘äº†å®ƒä¼šå»å¯»æ‰¾èµ„æºçš„æ–‡ä»¶å¤¹ï¼Œå³ä¸Šé¢æ•°ç»„çš„å†…å®¹ã€‚</p><p>æ‰€ä»¥å¾—å‡ºç»“è®ºï¼Œä»¥ä¸‹å››ä¸ªç›®å½•å­˜æ”¾çš„é™æ€èµ„æºå¯ä»¥è¢«æˆ‘ä»¬è¯†åˆ«ï¼š</p><pre><code class="hljs java"><span class="hljs-string">"classpath:/META-INF/resources/"</span><span class="hljs-string">"classpath:/resources/"</span><span class="hljs-string">"classpath:/static/"</span><span class="hljs-string">"classpath:/public/"</span></code></pre><p>æˆ‘ä»¬å¯ä»¥åœ¨resourcesæ ¹ç›®å½•ä¸‹æ–°å»ºå¯¹åº”çš„æ–‡ä»¶å¤¹ï¼Œéƒ½å¯ä»¥å­˜æ”¾æˆ‘ä»¬çš„é™æ€æ–‡ä»¶ï¼›</p><p>æ¯”å¦‚æˆ‘ä»¬è®¿é—® <a href="http://localhost:8080/1.js" target="_blank" rel="noopener">http://localhost:8080/1.js</a> , ä»–å°±ä¼šå»è¿™äº›æ–‡ä»¶å¤¹ä¸­å¯»æ‰¾å¯¹åº”çš„é™æ€èµ„æºæ–‡ä»¶ï¼›</p><h2 id="10-5ã€è‡ªå®šä¹‰é™æ€èµ„æºè·¯å¾„"><a href="#10-5ã€è‡ªå®šä¹‰é™æ€èµ„æºè·¯å¾„" class="headerlink" title="10.5ã€è‡ªå®šä¹‰é™æ€èµ„æºè·¯å¾„"></a>10.5ã€è‡ªå®šä¹‰é™æ€èµ„æºè·¯å¾„</h2><p>æˆ‘ä»¬ä¹Ÿå¯ä»¥è‡ªå·±é€šè¿‡é…ç½®æ–‡ä»¶æ¥æŒ‡å®šä¸€ä¸‹ï¼Œå“ªäº›æ–‡ä»¶å¤¹æ˜¯éœ€è¦æˆ‘ä»¬æ”¾é™æ€èµ„æºæ–‡ä»¶çš„ï¼Œåœ¨application.propertiesä¸­é…ç½®ï¼›</p><pre><code class="hljs properties"><span class="hljs-meta">spring.resources.static-locations</span>=<span class="hljs-string">classpath:/coding/,classpath:/kuang/</span></code></pre><p>ä¸€æ—¦è‡ªå·±å®šä¹‰äº†é™æ€æ–‡ä»¶å¤¹çš„è·¯å¾„ï¼ŒåŸæ¥çš„è‡ªåŠ¨é…ç½®å°±éƒ½ä¼šå¤±æ•ˆäº†ï¼</p><p>é¦–é¡µå¤„ç†</p><p>é™æ€èµ„æºæ–‡ä»¶å¤¹è¯´å®Œåï¼Œæˆ‘ä»¬ç»§ç»­å‘ä¸‹çœ‹æºç ï¼å¯ä»¥çœ‹åˆ°ä¸€ä¸ªæ¬¢è¿é¡µçš„æ˜ å°„ï¼Œå°±æ˜¯æˆ‘ä»¬çš„é¦–é¡µï¼</p><pre><code class="hljs java"><span class="hljs-meta">@Bean</span><span class="hljs-function"><span class="hljs-keyword">public</span> WelcomePageHandlerMapping <span class="hljs-title">welcomePageHandlerMapping</span><span class="hljs-params">(ApplicationContext applicationContext, FormattingConversionService mvcConversionService,ResourceUrlProvider mvcResourceUrlProvider)</span> </span>{    WelcomePageHandlerMapping welcomePageHandlerMapping = <span class="hljs-keyword">new</span> WelcomePageHandlerMapping(        <span class="hljs-keyword">new</span> TemplateAvailabilityProviders(applicationContext), applicationContext, getWelcomePage(), <span class="hljs-comment">// getWelcomePage è·å¾—æ¬¢è¿é¡µ</span>        <span class="hljs-keyword">this</span>.mvcProperties.getStaticPathPattern());    welcomePageHandlerMapping.setInterceptors(getInterceptors(mvcConversionService, mvcResourceUrlProvider));    <span class="hljs-keyword">return</span> welcomePageHandlerMapping;}</code></pre><p>ç‚¹è¿›å»ç»§ç»­çœ‹</p><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">private</span> Optional&lt;Resource&gt; <span class="hljs-title">getWelcomePage</span><span class="hljs-params">()</span> </span>{    String[] locations = getResourceLocations(<span class="hljs-keyword">this</span>.resourceProperties.getStaticLocations());    <span class="hljs-comment">// ::æ˜¯java8 ä¸­æ–°å¼•å…¥çš„è¿ç®—ç¬¦</span>    <span class="hljs-comment">// Class::functionçš„æ—¶å€™functionæ˜¯å±äºClassçš„ï¼Œåº”è¯¥æ˜¯é™æ€æ–¹æ³•ã€‚</span>    <span class="hljs-comment">// this::functionçš„funtionæ˜¯å±äºè¿™ä¸ªå¯¹è±¡çš„ã€‚</span>    <span class="hljs-comment">// ç®€è€Œè¨€ä¹‹ï¼Œå°±æ˜¯ä¸€ç§è¯­æ³•ç³–è€Œå·²ï¼Œæ˜¯ä¸€ç§ç®€å†™</span>    <span class="hljs-keyword">return</span> Arrays.stream(locations).map(<span class="hljs-keyword">this</span>::getIndexHtml).filter(<span class="hljs-keyword">this</span>::isReadable).findFirst();}<span class="hljs-comment">// æ¬¢è¿é¡µå°±æ˜¯ä¸€ä¸ªlocationä¸‹çš„çš„ index.html è€Œå·²</span><span class="hljs-function"><span class="hljs-keyword">private</span> Resource <span class="hljs-title">getIndexHtml</span><span class="hljs-params">(String location)</span> </span>{    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.resourceLoader.getResource(location + <span class="hljs-string">"index.html"</span>);}</code></pre><p>æ¬¢è¿é¡µï¼Œé™æ€èµ„æºæ–‡ä»¶å¤¹ä¸‹çš„æ‰€æœ‰ index.html é¡µé¢ï¼›è¢« /** æ˜ å°„ã€‚</p><p>æ¯”å¦‚æˆ‘è®¿é—® <a href="http://localhost:8080/" target="_blank" rel="noopener">http://localhost:8080/</a> ï¼Œå°±ä¼šæ‰¾é™æ€èµ„æºæ–‡ä»¶å¤¹ä¸‹çš„ index.html</p><p>æ–°å»ºä¸€ä¸ª index.html ï¼Œåœ¨æˆ‘ä»¬ä¸Šé¢çš„3ä¸ªç›®å½•ä¸­ä»»æ„ä¸€ä¸ªï¼›ç„¶åè®¿é—®æµ‹è¯• <a href="http://localhost:8080/" target="_blank" rel="noopener">http://localhost:8080/</a> çœ‹ç»“æœï¼</p><p><strong>å…³äºç½‘ç«™å›¾æ ‡è¯´æ˜</strong>ï¼š</p><p><img src="https://img2020.cnblogs.com/blog/1905053/202004/1905053-20200412224327971-166301362.png" srcset="/blog/img/loading.gif" alt="img"></p><p>ä¸å…¶ä»–é™æ€èµ„æºä¸€æ ·ï¼ŒSpring Bootåœ¨é…ç½®çš„é™æ€å†…å®¹ä½ç½®ä¸­æŸ¥æ‰¾ favicon.icoã€‚å¦‚æœå­˜åœ¨è¿™æ ·çš„æ–‡ä»¶ï¼Œå®ƒå°†è‡ªåŠ¨ç”¨ä½œåº”ç”¨ç¨‹åºçš„faviconã€‚</p><p>1ã€å…³é—­SpringBooté»˜è®¤å›¾æ ‡</p><pre><code class="hljs properties"><span class="hljs-comment">#å…³é—­é»˜è®¤å›¾æ ‡spring.mvc.favicon.enabled=false</span></code></pre><p>2ã€è‡ªå·±æ”¾ä¸€ä¸ªå›¾æ ‡åœ¨é™æ€èµ„æºç›®å½•ä¸‹ï¼Œæˆ‘æ”¾åœ¨ public ç›®å½•ä¸‹</p><p>3ã€æ¸…é™¤æµè§ˆå™¨ç¼“å­˜ï¼åˆ·æ–°ç½‘é¡µï¼Œå‘ç°å›¾æ ‡å·²ç»å˜æˆè‡ªå·±çš„äº†ï¼</p><p><img src="https://img2020.cnblogs.com/blog/1905053/202004/1905053-20200412224343431-2144081992.png" srcset="/blog/img/loading.gif" alt="img"></p><h1 id="11ã€SpringBootï¼šThymeleafæ¨¡æ¿å¼•æ“"><a href="#11ã€SpringBootï¼šThymeleafæ¨¡æ¿å¼•æ“" class="headerlink" title="11ã€SpringBootï¼šThymeleafæ¨¡æ¿å¼•æ“"></a>11ã€SpringBootï¼šThymeleafæ¨¡æ¿å¼•æ“</h1><h2 id="11-1ã€æ¨¡æ¿å¼•æ“"><a href="#11-1ã€æ¨¡æ¿å¼•æ“" class="headerlink" title="11.1ã€æ¨¡æ¿å¼•æ“"></a>11.1ã€æ¨¡æ¿å¼•æ“</h2><p>å‰ç«¯äº¤ç»™æˆ‘ä»¬çš„é¡µé¢ï¼Œæ˜¯htmlé¡µé¢ã€‚å¦‚æœæ˜¯æˆ‘ä»¬ä»¥å‰å¼€å‘ï¼Œæˆ‘ä»¬éœ€è¦æŠŠä»–ä»¬è½¬æˆjspé¡µé¢ï¼Œjspå¥½å¤„å°±æ˜¯å½“æˆ‘ä»¬æŸ¥å‡ºä¸€äº›æ•°æ®è½¬å‘åˆ°JSPé¡µé¢ä»¥åï¼Œæˆ‘ä»¬å¯ä»¥ç”¨jspè½»æ¾å®ç°æ•°æ®çš„æ˜¾ç¤ºï¼ŒåŠäº¤äº’ç­‰ã€‚</p><p>jspæ”¯æŒéå¸¸å¼ºå¤§çš„åŠŸèƒ½ï¼ŒåŒ…æ‹¬èƒ½å†™Javaä»£ç ï¼Œä½†æ˜¯å‘¢ï¼Œæˆ‘ä»¬ç°åœ¨çš„è¿™ç§æƒ…å†µï¼ŒSpringBootè¿™ä¸ªé¡¹ç›®é¦–å…ˆæ˜¯ä»¥jarçš„æ–¹å¼ï¼Œä¸æ˜¯warï¼Œåƒç¬¬äºŒï¼Œæˆ‘ä»¬ç”¨çš„è¿˜æ˜¯åµŒå…¥å¼çš„Tomcatï¼Œæ‰€ä»¥å‘¢ï¼Œ<strong>ä»–ç°åœ¨é»˜è®¤æ˜¯ä¸æ”¯æŒjspçš„</strong>ã€‚</p><p>é‚£ä¸æ”¯æŒjspï¼Œå¦‚æœæˆ‘ä»¬ç›´æ¥ç”¨çº¯é™æ€é¡µé¢çš„æ–¹å¼ï¼Œé‚£ç»™æˆ‘ä»¬å¼€å‘ä¼šå¸¦æ¥éå¸¸å¤§çš„éº»çƒ¦ï¼Œé‚£æ€ä¹ˆåŠå‘¢ï¼Ÿ</p><p><strong>SpringBootæ¨èä½ å¯ä»¥æ¥ä½¿ç”¨æ¨¡æ¿å¼•æ“ï¼š</strong></p><p>æ¨¡æ¿å¼•æ“ï¼Œæˆ‘ä»¬å…¶å®å¤§å®¶å¬åˆ°å¾ˆå¤šï¼Œå…¶å®jspå°±æ˜¯ä¸€ä¸ªæ¨¡æ¿å¼•æ“ï¼Œè¿˜æœ‰ç”¨çš„æ¯”è¾ƒå¤šçš„freemarkerï¼ŒåŒ…æ‹¬SpringBootç»™æˆ‘ä»¬æ¨èçš„Thymeleafï¼Œæ¨¡æ¿å¼•æ“æœ‰éå¸¸å¤šï¼Œä½†å†å¤šçš„æ¨¡æ¿å¼•æ“ï¼Œä»–ä»¬çš„æ€æƒ³éƒ½æ˜¯ä¸€æ ·çš„ï¼Œä»€ä¹ˆæ ·ä¸€ä¸ªæ€æƒ³å‘¢æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹è¿™å¼ å›¾ï¼š</p><p><img src="https://img2020.cnblogs.com/blog/1905053/202004/1905053-20200412224715664-994768786.png" srcset="/blog/img/loading.gif" alt="img"></p><p>æ¨¡æ¿å¼•æ“çš„ä½œç”¨å°±æ˜¯æˆ‘ä»¬æ¥å†™ä¸€ä¸ªé¡µé¢æ¨¡æ¿ï¼Œæ¯”å¦‚æœ‰äº›å€¼å‘¢ï¼Œæ˜¯åŠ¨æ€çš„ï¼Œæˆ‘ä»¬å†™ä¸€äº›è¡¨è¾¾å¼ã€‚è€Œè¿™äº›å€¼ï¼Œä»å“ªæ¥å‘¢ï¼Œå°±æ˜¯æˆ‘ä»¬åœ¨åå°å°è£…ä¸€äº›æ•°æ®ã€‚ç„¶åæŠŠè¿™ä¸ªæ¨¡æ¿å’Œè¿™ä¸ªæ•°æ®äº¤ç»™æˆ‘ä»¬æ¨¡æ¿å¼•æ“ï¼Œæ¨¡æ¿å¼•æ“æŒ‰ç…§æˆ‘ä»¬è¿™ä¸ªæ•°æ®å¸®ä½ æŠŠè¿™è¡¨è¾¾å¼è§£æã€å¡«å……åˆ°æˆ‘ä»¬æŒ‡å®šçš„ä½ç½®ï¼Œç„¶åæŠŠè¿™ä¸ªæ•°æ®æœ€ç»ˆç”Ÿæˆä¸€ä¸ªæˆ‘ä»¬æƒ³è¦çš„å†…å®¹ç»™æˆ‘ä»¬å†™å‡ºå»ï¼Œè¿™å°±æ˜¯æˆ‘ä»¬è¿™ä¸ªæ¨¡æ¿å¼•æ“ï¼Œä¸ç®¡æ˜¯jspè¿˜æ˜¯å…¶ä»–æ¨¡æ¿å¼•æ“ï¼Œéƒ½æ˜¯è¿™ä¸ªæ€æƒ³ã€‚åªä¸è¿‡å‘¢ï¼Œå°±æ˜¯è¯´ä¸åŒæ¨¡æ¿å¼•æ“ä¹‹é—´ï¼Œä»–ä»¬å¯èƒ½è¿™ä¸ªè¯­æ³•æœ‰ç‚¹ä¸ä¸€æ ·ã€‚å…¶ä»–çš„æˆ‘å°±ä¸ä»‹ç»äº†ï¼Œæˆ‘ä¸»è¦æ¥ä»‹ç»ä¸€ä¸‹SpringBootç»™æˆ‘ä»¬æ¨èçš„Thymeleafæ¨¡æ¿å¼•æ“ï¼Œè¿™æ¨¡æ¿å¼•æ“å‘¢ï¼Œæ˜¯ä¸€ä¸ªé«˜çº§è¯­è¨€çš„æ¨¡æ¿å¼•æ“ï¼Œä»–çš„è¿™ä¸ªè¯­æ³•æ›´ç®€å•ã€‚è€Œä¸”å‘¢ï¼ŒåŠŸèƒ½æ›´å¼ºå¤§ã€‚</p><p>æˆ‘ä»¬å‘¢ï¼Œå°±æ¥çœ‹ä¸€ä¸‹è¿™ä¸ªæ¨¡æ¿å¼•æ“ï¼Œé‚£æ—¢ç„¶è¦çœ‹è¿™ä¸ªæ¨¡æ¿å¼•æ“ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬æ¥çœ‹SpringBooté‡Œè¾¹æ€ä¹ˆç”¨ã€‚</p><h2 id="11-2ã€å¼•å…¥Thymeleaf"><a href="#11-2ã€å¼•å…¥Thymeleaf" class="headerlink" title="11.2ã€å¼•å…¥Thymeleaf"></a>11.2ã€å¼•å…¥Thymeleaf</h2><p>æ€ä¹ˆå¼•å…¥å‘¢ï¼Œå¯¹äºspringbootæ¥è¯´ï¼Œä»€ä¹ˆäº‹æƒ…ä¸éƒ½æ˜¯ä¸€ä¸ªstartçš„äº‹æƒ…å˜›ï¼Œæˆ‘ä»¬å»åœ¨é¡¹ç›®ä¸­å¼•å…¥ä¸€ä¸‹ã€‚ç»™å¤§å®¶ä¸‰ä¸ªç½‘å€ï¼š</p><p>Thymeleaf å®˜ç½‘ï¼š<a href="https://www.thymeleaf.org/" target="_blank" rel="noopener">https://www.thymeleaf.org/</a></p><p>Thymeleaf åœ¨Github çš„ä¸»é¡µï¼š<a href="https://github.com/thymeleaf/thymeleaf" target="_blank" rel="noopener">https://github.com/thymeleaf/thymeleaf</a></p><p>Springå®˜æ–¹æ–‡æ¡£ï¼šæ‰¾åˆ°æˆ‘ä»¬å¯¹åº”çš„ç‰ˆæœ¬</p><p><a href="https://docs.spring.io/spring-boot/docs/2.2.5.RELEASE/reference/htmlsingle/#using-boot-starter" target="_blank" rel="noopener">https://docs.spring.io/spring-boot/docs/2.2.5.RELEASE/reference/htmlsingle/#using-boot-starter</a></p><p>æ‰¾åˆ°å¯¹åº”çš„pomä¾èµ–ï¼šå¯ä»¥é€‚å½“ç‚¹è¿›æºç çœ‹ä¸‹æœ¬æ¥çš„åŒ…ï¼</p><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--thymeleaf--&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-thymeleaf<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span></code></pre><p>Mavenä¼šè‡ªåŠ¨ä¸‹è½½jaråŒ…ï¼Œæˆ‘ä»¬å¯ä»¥å»çœ‹ä¸‹ä¸‹è½½çš„ä¸œè¥¿ï¼›</p><p><img src="https://img2020.cnblogs.com/blog/1905053/202004/1905053-20200412224749784-1143746028.png" srcset="/blog/img/loading.gif" alt="img"></p><h2 id="11-3ã€Thymeleafåˆ†æ"><a href="#11-3ã€Thymeleafåˆ†æ" class="headerlink" title="11.3ã€Thymeleafåˆ†æ"></a>11.3ã€Thymeleafåˆ†æ</h2><p>å‰é¢å‘¢ï¼Œæˆ‘ä»¬å·²ç»å¼•å…¥äº†Thymeleafï¼Œé‚£è¿™ä¸ªè¦æ€ä¹ˆä½¿ç”¨å‘¢ï¼Ÿ</p><p>æˆ‘ä»¬é¦–å…ˆå¾—æŒ‰ç…§SpringBootçš„è‡ªåŠ¨é…ç½®åŸç†çœ‹ä¸€ä¸‹æˆ‘ä»¬è¿™ä¸ªThymeleafçš„è‡ªåŠ¨é…ç½®è§„åˆ™ï¼Œåœ¨æŒ‰ç…§é‚£ä¸ªè§„åˆ™ï¼Œæˆ‘ä»¬è¿›è¡Œä½¿ç”¨ã€‚</p><p>æˆ‘ä»¬å»æ‰¾ä¸€ä¸‹Thymeleafçš„è‡ªåŠ¨é…ç½®ç±»ï¼šThymeleafPropert</p><pre><code class="hljs java"><span class="hljs-meta">@ConfigurationProperties</span>(    prefix = <span class="hljs-string">"spring.thymeleaf"</span>)<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ThymeleafProperties</span> </span>{    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> Charset DEFAULT_ENCODING;    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> String DEFAULT_PREFIX = <span class="hljs-string">"classpath:/templates/"</span>;    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> String DEFAULT_SUFFIX = <span class="hljs-string">".html"</span>;    <span class="hljs-keyword">private</span> <span class="hljs-keyword">boolean</span> checkTemplate = <span class="hljs-keyword">true</span>;    <span class="hljs-keyword">private</span> <span class="hljs-keyword">boolean</span> checkTemplateLocation = <span class="hljs-keyword">true</span>;    <span class="hljs-keyword">private</span> String prefix = <span class="hljs-string">"classpath:/templates/"</span>;    <span class="hljs-keyword">private</span> String suffix = <span class="hljs-string">".html"</span>;    <span class="hljs-keyword">private</span> String mode = <span class="hljs-string">"HTML"</span>;    <span class="hljs-keyword">private</span> Charset encoding;}</code></pre><p>æˆ‘ä»¬å¯ä»¥åœ¨å…¶ä¸­çœ‹åˆ°é»˜è®¤çš„å‰ç¼€å’Œåç¼€ï¼</p><p>æˆ‘ä»¬åªéœ€è¦æŠŠæˆ‘ä»¬çš„htmlé¡µé¢æ”¾åœ¨ç±»è·¯å¾„ä¸‹çš„templatesä¸‹ï¼Œthymeleafå°±å¯ä»¥å¸®æˆ‘ä»¬è‡ªåŠ¨æ¸²æŸ“äº†ã€‚</p><p>ä½¿ç”¨thymeleafä»€ä¹ˆéƒ½ä¸éœ€è¦é…ç½®ï¼Œåªéœ€è¦å°†ä»–æ”¾åœ¨æŒ‡å®šçš„æ–‡ä»¶å¤¹ä¸‹å³å¯ï¼</p><p><strong>æµ‹è¯•</strong></p><p>1ã€ç¼–å†™ä¸€ä¸ªTestController</p><pre><code class="hljs java"><span class="hljs-meta">@Controller</span><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">TestController</span> </span>{        <span class="hljs-meta">@RequestMapping</span>(<span class="hljs-string">"/t1"</span>)    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">test1</span><span class="hljs-params">()</span></span>{        <span class="hljs-comment">//classpath:/templates/test.html</span>        <span class="hljs-keyword">return</span> <span class="hljs-string">"test"</span>;    }    }</code></pre><p>2ã€ç¼–å†™ä¸€ä¸ªæµ‹è¯•é¡µé¢ test.html æ”¾åœ¨ templates ç›®å½•ä¸‹</p><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE html&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"en"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Title<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>æµ‹è¯•é¡µé¢<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></code></pre><p>3ã€å¯åŠ¨é¡¹ç›®è¯·æ±‚æµ‹è¯•</p><h2 id="11-4ã€Thymeleaf-è¯­æ³•å­¦ä¹ "><a href="#11-4ã€Thymeleaf-è¯­æ³•å­¦ä¹ " class="headerlink" title="11.4ã€Thymeleaf è¯­æ³•å­¦ä¹ "></a>11.4ã€Thymeleaf è¯­æ³•å­¦ä¹ </h2><p>è¦å­¦ä¹ è¯­æ³•ï¼Œè¿˜æ˜¯å‚è€ƒå®˜ç½‘æ–‡æ¡£æœ€ä¸ºå‡†ç¡®ï¼Œæˆ‘ä»¬æ‰¾åˆ°å¯¹åº”çš„ç‰ˆæœ¬çœ‹ä¸€ä¸‹ï¼›</p><p>Thymeleaf å®˜ç½‘ï¼š<a href="https://www.thymeleaf.org/" target="_blank" rel="noopener">https://www.thymeleaf.org/</a> ï¼Œ ç®€å•çœ‹ä¸€ä¸‹å®˜ç½‘ï¼æˆ‘ä»¬å»ä¸‹è½½Thymeleafçš„å®˜æ–¹æ–‡æ¡£ï¼</p><p><strong>æˆ‘ä»¬åšä¸ªæœ€ç®€å•çš„ç»ƒä¹  ï¼šæˆ‘ä»¬éœ€è¦æŸ¥å‡ºä¸€äº›æ•°æ®ï¼Œåœ¨é¡µé¢ä¸­å±•ç¤º</strong></p><p>1ã€ä¿®æ”¹æµ‹è¯•è¯·æ±‚ï¼Œå¢åŠ æ•°æ®ä¼ è¾“ï¼›</p><pre><code class="hljs java"><span class="hljs-meta">@RequestMapping</span>(<span class="hljs-string">"/t1"</span>)<span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">test1</span><span class="hljs-params">(Model model)</span></span>{    <span class="hljs-comment">//å­˜å…¥æ•°æ®</span>    model.addAttribute(<span class="hljs-string">"msg"</span>,<span class="hljs-string">"Hello,Thymeleaf"</span>);    <span class="hljs-comment">//classpath:/templates/test.html</span>    <span class="hljs-keyword">return</span> <span class="hljs-string">"test"</span>;}</code></pre><p>2ã€æˆ‘ä»¬è¦ä½¿ç”¨thymeleafï¼Œéœ€è¦åœ¨htmlæ–‡ä»¶ä¸­å¯¼å…¥å‘½åç©ºé—´çš„çº¦æŸï¼Œæ–¹ä¾¿æç¤ºã€‚</p><p>æˆ‘ä»¬å¯ä»¥å»å®˜æ–¹æ–‡æ¡£çš„#3ä¸­çœ‹ä¸€ä¸‹å‘½åç©ºé—´æ‹¿æ¥è¿‡æ¥ï¼š</p><pre><code class="hljs html">xmlns:th="http://www.thymeleaf.org"</code></pre><p>3ã€æˆ‘ä»¬å»ç¼–å†™ä¸‹å‰ç«¯é¡µé¢</p><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE html&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"en"</span> <span class="hljs-attr">xmlns:th</span>=<span class="hljs-string">"http://www.thymeleaf.org"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>ç‹‚ç¥è¯´<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>æµ‹è¯•é¡µé¢<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span><span class="hljs-comment">&lt;!--th:textå°±æ˜¯å°†divä¸­çš„å†…å®¹è®¾ç½®ä¸ºå®ƒæŒ‡å®šçš„å€¼ï¼Œå’Œä¹‹å‰å­¦ä¹ çš„Vueä¸€æ ·--&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">th:text</span>=<span class="hljs-string">"${msg}"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></code></pre><p>4ã€å¯åŠ¨æµ‹è¯•ï¼</p><p><img src="https://img2020.cnblogs.com/blog/1905053/202004/1905053-20200412224807885-1463858775.png" srcset="/blog/img/loading.gif" alt="img"></p><p><strong>OKï¼Œå…¥é—¨æå®šï¼Œæˆ‘ä»¬æ¥è®¤çœŸç ”ä¹ ä¸€ä¸‹Thymeleafçš„ä½¿ç”¨è¯­æ³•ï¼</strong></p><p><strong>1ã€æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä»»æ„çš„ th:attr æ¥æ›¿æ¢Htmlä¸­åŸç”Ÿå±æ€§çš„å€¼ï¼</strong></p><p><img src="https://img2020.cnblogs.com/blog/1905053/202004/1905053-20200412224828773-2028075377.png" srcset="/blog/img/loading.gif" alt="img"></p><p><strong>2ã€æˆ‘ä»¬èƒ½å†™å“ªäº›è¡¨è¾¾å¼å‘¢ï¼Ÿ</strong></p><pre><code class="hljs java">Simple expressions:ï¼ˆè¡¨è¾¾å¼è¯­æ³•ï¼‰Variable Expressions: ${...}ï¼šè·å–å˜é‡å€¼ï¼›OGNLï¼›    <span class="hljs-number">1</span>ï¼‰ã€è·å–å¯¹è±¡çš„å±æ€§ã€è°ƒç”¨æ–¹æ³•    2ï¼‰ã€ä½¿ç”¨å†…ç½®çš„åŸºæœ¬å¯¹è±¡ï¼š#18         #ctx : the context object.         #vars: the context variables.         #locale : the context locale.         #request : (only in Web Contexts) the HttpServletRequest object.         #response : (only in Web Contexts) the HttpServletResponse object.         #session : (only in Web Contexts) the HttpSession object.         #servletContext : (only in Web Contexts) the ServletContext object.    <span class="hljs-number">3</span>ï¼‰ã€å†…ç½®çš„ä¸€äº›å·¥å…·å¯¹è±¡ï¼šã€€ã€€ã€€ã€€ã€€ã€€#execInfo : information about the template being processed.ã€€ã€€ã€€ã€€ã€€ã€€#uris : methods for escaping parts of URLs/URIsã€€ã€€ã€€ã€€ã€€ã€€#conversions : methods for executing the configured conversion service (if any).ã€€ã€€ã€€ã€€ã€€ã€€#dates : methods for java.util.Date objects: formatting, component extraction, etc.ã€€ã€€ã€€ã€€ã€€ã€€#calendars : analogous to #dates , but for java.util.Calendar objects.ã€€ã€€ã€€ã€€ã€€ã€€#numbers : methods for formatting numeric objects.ã€€ã€€ã€€ã€€ã€€ã€€#strings : methods for String objects: contains, startsWith, prepending/appending, etc.ã€€ã€€ã€€ã€€ã€€ã€€#objects : methods for objects in general.ã€€ã€€ã€€ã€€ã€€ã€€#bools : methods for boolean evaluation.ã€€ã€€ã€€ã€€ã€€ã€€#arrays : methods for arrays.ã€€ã€€ã€€ã€€ã€€ã€€#lists : methods for lists.ã€€ã€€ã€€ã€€ã€€ã€€#sets : methods for sets.ã€€ã€€ã€€ã€€ã€€ã€€#maps : methods for maps.ã€€ã€€ã€€ã€€ã€€ã€€#aggregates : methods for creating aggregates on arrays or collections.==================================================================================  Selection Variable Expressions: *{...}ï¼šé€‰æ‹©è¡¨è¾¾å¼ï¼šå’Œ${}åœ¨åŠŸèƒ½ä¸Šæ˜¯ä¸€æ ·ï¼›  Message Expressions: #{...}ï¼šè·å–å›½é™…åŒ–å†…å®¹  Link URL Expressions: @{...}ï¼šå®šä¹‰URLï¼›  Fragment Expressions: ~{...}ï¼šç‰‡æ®µå¼•ç”¨è¡¨è¾¾å¼Literalsï¼ˆå­—é¢é‡ï¼‰      Text literals: <span class="hljs-string">'one text'</span> , <span class="hljs-string">'Another one!'</span> ,â€¦      Number literals: <span class="hljs-number">0</span> , <span class="hljs-number">34</span> , <span class="hljs-number">3.0</span> , <span class="hljs-number">12.3</span> ,â€¦      Boolean literals: <span class="hljs-keyword">true</span> , <span class="hljs-keyword">false</span>      Null literal: <span class="hljs-keyword">null</span>      Literal tokens: one , sometext , main ,â€¦      Text operations:ï¼ˆæ–‡æœ¬æ“ä½œï¼‰    String concatenation: +    Literal substitutions: |The name is ${name}|    Arithmetic operations:ï¼ˆæ•°å­¦è¿ç®—ï¼‰    Binary operators: + , - , * , / , %    <span class="hljs-function">Minus <span class="hljs-title">sign</span> <span class="hljs-params">(unary operator)</span>: -</span><span class="hljs-function">    </span><span class="hljs-function">Boolean operations:ï¼ˆå¸ƒå°”è¿ç®—ï¼‰</span><span class="hljs-function">    Binary operators: and , or</span><span class="hljs-function">    Boolean <span class="hljs-title">negation</span> <span class="hljs-params">(unary operator)</span>: ! , not</span><span class="hljs-function">    </span><span class="hljs-function">Comparisons and equality:ï¼ˆæ¯”è¾ƒè¿ç®—ï¼‰</span><span class="hljs-function">    Comparators: &gt; , &lt; , &gt;</span>= , &lt;= ( gt , lt , ge , le )    Equality operators: == , != ( eq , ne )    Conditional operators:æ¡ä»¶è¿ç®—ï¼ˆä¸‰å…ƒè¿ç®—ç¬¦ï¼‰    If-then: (<span class="hljs-keyword">if</span>) ? (then)    If-then-<span class="hljs-keyword">else</span>: (<span class="hljs-keyword">if</span>) ? (then) : (<span class="hljs-keyword">else</span>)    Default: (value) ?: (defaultvalue)    Special tokens:    No-Operation: _</code></pre><p><strong>ç»ƒä¹ æµ‹è¯•ï¼š</strong></p><p>1ã€ æˆ‘ä»¬ç¼–å†™ä¸€ä¸ªControllerï¼Œæ”¾ä¸€äº›æ•°æ®</p><pre><code class="hljs java"><span class="hljs-meta">@RequestMapping</span>(<span class="hljs-string">"/t2"</span>)<span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">test2</span><span class="hljs-params">(Map&lt;String,Object&gt; map)</span></span>{    <span class="hljs-comment">//å­˜å…¥æ•°æ®</span>    map.put(<span class="hljs-string">"msg"</span>,<span class="hljs-string">"&lt;h1&gt;Hello&lt;/h1&gt;"</span>);    map.put(<span class="hljs-string">"users"</span>, Arrays.asList(<span class="hljs-string">"qinjiang"</span>,<span class="hljs-string">"kuangshen"</span>));    <span class="hljs-comment">//classpath:/templates/test.html</span>    <span class="hljs-keyword">return</span> <span class="hljs-string">"test"</span>;}</code></pre><p>2ã€æµ‹è¯•é¡µé¢å–å‡ºæ•°æ®</p><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE html&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"en"</span> <span class="hljs-attr">xmlns:th</span>=<span class="hljs-string">"http://www.thymeleaf.org"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>ç‹‚ç¥è¯´<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>æµ‹è¯•é¡µé¢<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">th:text</span>=<span class="hljs-string">"${msg}"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><span class="hljs-comment">&lt;!--ä¸è½¬ä¹‰--&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">th:utext</span>=<span class="hljs-string">"${msg}"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><span class="hljs-comment">&lt;!--éå†æ•°æ®--&gt;</span><span class="hljs-comment">&lt;!--th:eachæ¯æ¬¡éå†éƒ½ä¼šç”Ÿæˆå½“å‰è¿™ä¸ªæ ‡ç­¾ï¼šå®˜ç½‘#9--&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">h4</span> <span class="hljs-attr">th:each</span>=<span class="hljs-string">"user :${users}"</span> <span class="hljs-attr">th:text</span>=<span class="hljs-string">"${user}"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">h4</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">h4</span>&gt;</span>    <span class="hljs-comment">&lt;!--è¡Œå†…å†™æ³•ï¼šå®˜ç½‘#12--&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">th:each</span>=<span class="hljs-string">"user:${users}"</span>&gt;</span>[[${user}]]<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">h4</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></code></pre><p>3ã€å¯åŠ¨é¡¹ç›®æµ‹è¯•ï¼</p><p><strong>æˆ‘ä»¬çœ‹å®Œè¯­æ³•ï¼Œå¾ˆå¤šæ ·å¼ï¼Œæˆ‘ä»¬å³ä½¿ç°åœ¨å­¦ä¹ äº†ï¼Œä¹Ÿä¼šå¿˜è®°ï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨å­¦ä¹ è¿‡ç¨‹ä¸­ï¼Œéœ€è¦ä½¿ç”¨ä»€ä¹ˆï¼Œæ ¹æ®å®˜æ–¹æ–‡æ¡£æ¥æŸ¥è¯¢ï¼Œæ‰æ˜¯æœ€é‡è¦çš„ï¼Œè¦ç†Ÿç»ƒä½¿ç”¨å®˜æ–¹æ–‡æ¡£ï¼</strong></p><h1 id="12ã€SpringBootï¼šMVCè‡ªåŠ¨é…ç½®åŸç†"><a href="#12ã€SpringBootï¼šMVCè‡ªåŠ¨é…ç½®åŸç†" class="headerlink" title="12ã€SpringBootï¼šMVCè‡ªåŠ¨é…ç½®åŸç†"></a>12ã€SpringBootï¼šMVCè‡ªåŠ¨é…ç½®åŸç†</h1><h2 id="12-1ã€å®˜ç½‘é˜…è¯»"><a href="#12-1ã€å®˜ç½‘é˜…è¯»" class="headerlink" title="12.1ã€å®˜ç½‘é˜…è¯»"></a>12.1ã€å®˜ç½‘é˜…è¯»</h2><p>åœ¨è¿›è¡Œé¡¹ç›®ç¼–å†™å‰ï¼Œæˆ‘ä»¬è¿˜éœ€è¦çŸ¥é“ä¸€ä¸ªä¸œè¥¿ï¼Œå°±æ˜¯SpringBootå¯¹æˆ‘ä»¬çš„SpringMVCè¿˜åšäº†å“ªäº›é…ç½®ï¼ŒåŒ…æ‹¬å¦‚ä½•æ‰©å±•ï¼Œå¦‚ä½•å®šåˆ¶ã€‚</p><p>åªæœ‰æŠŠè¿™äº›éƒ½ææ¸…æ¥šäº†ï¼Œæˆ‘ä»¬åœ¨ä¹‹åä½¿ç”¨æ‰ä¼šæ›´åŠ å¾—å¿ƒåº”æ‰‹ã€‚é€”å¾„ä¸€ï¼šæºç åˆ†æï¼Œé€”å¾„äºŒï¼šå®˜æ–¹æ–‡æ¡£ï¼</p><p>åœ°å€ ï¼š<a href="https://docs.spring.io/spring-boot/docs/2.2.5.RELEASE/reference/htmlsingle/#boot-features-spring-mvc-auto-configuration" target="_blank" rel="noopener">https://docs.spring.io/spring-boot/docs/2.2.5.RELEASE/reference/htmlsingle/#boot-features-spring-mvc-auto-configuration</a></p><pre><code class="hljs java">Spring MVC Auto-configuration<span class="hljs-comment">// Spring Bootä¸ºSpring MVCæä¾›äº†è‡ªåŠ¨é…ç½®ï¼Œå®ƒå¯ä»¥å¾ˆå¥½åœ°ä¸å¤§å¤šæ•°åº”ç”¨ç¨‹åºä¸€èµ·å·¥ä½œã€‚</span>Spring Boot provides auto-configuration <span class="hljs-keyword">for</span> Spring MVC that works well with most applications.<span class="hljs-comment">// è‡ªåŠ¨é…ç½®åœ¨Springé»˜è®¤è®¾ç½®çš„åŸºç¡€ä¸Šæ·»åŠ äº†ä»¥ä¸‹åŠŸèƒ½ï¼š</span>The auto-configuration adds the following features on top of Springâ€™s defaults:<span class="hljs-comment">// åŒ…å«è§†å›¾è§£æå™¨</span>Inclusion of ContentNegotiatingViewResolver and BeanNameViewResolver beans.<span class="hljs-comment">// æ”¯æŒé™æ€èµ„æºæ–‡ä»¶å¤¹çš„è·¯å¾„ï¼Œä»¥åŠwebjars</span>Support <span class="hljs-keyword">for</span> serving <span class="hljs-keyword">static</span> resources, including support <span class="hljs-keyword">for</span> WebJars <span class="hljs-comment">// è‡ªåŠ¨æ³¨å†Œäº†Converterï¼š</span><span class="hljs-comment">// è½¬æ¢å™¨ï¼Œè¿™å°±æ˜¯æˆ‘ä»¬ç½‘é¡µæäº¤æ•°æ®åˆ°åå°è‡ªåŠ¨å°è£…æˆä¸ºå¯¹è±¡çš„ä¸œè¥¿ï¼Œæ¯”å¦‚æŠŠ"1"å­—ç¬¦ä¸²è‡ªåŠ¨è½¬æ¢ä¸ºintç±»å‹</span><span class="hljs-comment">// Formatterï¼šã€æ ¼å¼åŒ–å™¨ï¼Œæ¯”å¦‚é¡µé¢ç»™æˆ‘ä»¬äº†ä¸€ä¸ª2019-8-10ï¼Œå®ƒä¼šç»™æˆ‘ä»¬è‡ªåŠ¨æ ¼å¼åŒ–ä¸ºDateå¯¹è±¡ã€‘</span>Automatic registration of Converter, GenericConverter, and Formatter beans.<span class="hljs-comment">// HttpMessageConverters</span><span class="hljs-comment">// SpringMVCç”¨æ¥è½¬æ¢Httpè¯·æ±‚å’Œå“åº”çš„çš„ï¼Œæ¯”å¦‚æˆ‘ä»¬è¦æŠŠä¸€ä¸ªUserå¯¹è±¡è½¬æ¢ä¸ºJSONå­—ç¬¦ä¸²ï¼Œå¯ä»¥å»çœ‹å®˜ç½‘æ–‡æ¡£è§£é‡Šï¼›</span><span class="hljs-function">Support <span class="hljs-keyword">for</span> <span class="hljs-title">HttpMessageConverters</span> <span class="hljs-params">(covered later in <span class="hljs-keyword">this</span> document)</span>.</span><span class="hljs-function"><span class="hljs-comment">// å®šä¹‰é”™è¯¯ä»£ç ç”Ÿæˆè§„åˆ™çš„</span></span><span class="hljs-function">Automatic registration of <span class="hljs-title">MessageCodesResolver</span> <span class="hljs-params">(covered later in <span class="hljs-keyword">this</span> document)</span>.</span><span class="hljs-function"><span class="hljs-comment">// é¦–é¡µå®šåˆ¶</span></span><span class="hljs-function">Static index.html support.</span><span class="hljs-function"><span class="hljs-comment">// å›¾æ ‡å®šåˆ¶</span></span><span class="hljs-function">Custom Favicon <span class="hljs-title">support</span> <span class="hljs-params">(covered later in <span class="hljs-keyword">this</span> document)</span>.</span><span class="hljs-function"><span class="hljs-comment">// åˆå§‹åŒ–æ•°æ®ç»‘å®šå™¨ï¼šå¸®æˆ‘ä»¬æŠŠè¯·æ±‚æ•°æ®ç»‘å®šåˆ°JavaBeanä¸­ï¼</span></span><span class="hljs-function">Automatic use of a ConfigurableWebBindingInitializer <span class="hljs-title">bean</span> <span class="hljs-params">(covered later in <span class="hljs-keyword">this</span> document)</span>.</span><span class="hljs-function"></span><span class="hljs-function"><span class="hljs-comment">/*</span></span><span class="hljs-function"><span class="hljs-comment">å¦‚æœæ‚¨å¸Œæœ›ä¿ç•™Spring Boot MVCåŠŸèƒ½ï¼Œå¹¶ä¸”å¸Œæœ›æ·»åŠ å…¶ä»–MVCé…ç½®ï¼ˆæ‹¦æˆªå™¨ã€æ ¼å¼åŒ–ç¨‹åºã€è§†å›¾æ§åˆ¶å™¨å’Œå…¶ä»–åŠŸèƒ½ï¼‰ï¼Œåˆ™å¯ä»¥æ·»åŠ è‡ªå·±</span></span><span class="hljs-function"><span class="hljs-comment">çš„@configurationç±»ï¼Œç±»å‹ä¸ºwebmvcconfiguerï¼Œä½†ä¸æ·»åŠ @EnableWebMvcã€‚å¦‚æœå¸Œæœ›æä¾›</span></span><span class="hljs-function"><span class="hljs-comment">RequestMappingHandlerMappingã€RequestMappingHandlerAdapteræˆ–ExceptionHandlerExceptionResolverçš„è‡ªå®šä¹‰</span></span><span class="hljs-function"><span class="hljs-comment">å®ä¾‹ï¼Œåˆ™å¯ä»¥å£°æ˜WebMVCregistrationAdapterå®ä¾‹æ¥æä¾›æ­¤ç±»ç»„ä»¶ã€‚</span></span><span class="hljs-function"><span class="hljs-comment">*/</span></span><span class="hljs-function">If you want to keep Spring Boot MVC features and you want to add additional MVC configuration </span><span class="hljs-function"><span class="hljs-params">(interceptors, formatters, view controllers, and other features)</span>, you can add your own </span><span class="hljs-function">@Configuration class of type WebMvcConfigurer but without @EnableWebMvc. If you wish to provide </span><span class="hljs-function">custom instances of RequestMappingHandlerMapping, RequestMappingHandlerAdapter, or </span><span class="hljs-function">ExceptionHandlerExceptionResolver, you can declare a WebMvcRegistrationsAdapter instance to provide such components.</span><span class="hljs-function"></span><span class="hljs-function"><span class="hljs-comment">// å¦‚æœæ‚¨æƒ³å®Œå…¨æ§åˆ¶Spring MVCï¼Œå¯ä»¥æ·»åŠ è‡ªå·±çš„@Configurationï¼Œå¹¶ç”¨@EnableWebMvcè¿›è¡Œæ³¨é‡Šã€‚</span></span><span class="hljs-function">If you want to take complete control of Spring MVC, you can add your own @Configuration annotated with @EnableWebMvc.</span></code></pre><p>æˆ‘ä»¬æ¥ä»”ç»†å¯¹ç…§ï¼Œçœ‹ä¸€ä¸‹å®ƒæ€ä¹ˆå®ç°çš„ï¼Œå®ƒå‘Šè¯‰æˆ‘ä»¬SpringBootå·²ç»å¸®æˆ‘ä»¬è‡ªåŠ¨é…ç½®å¥½äº†SpringMVCï¼Œç„¶åè‡ªåŠ¨é…ç½®äº†å“ªäº›ä¸œè¥¿å‘¢ï¼Ÿ</p><h2 id="12-2ã€ContentNegotiatingViewResolver-å†…å®¹åå•†è§†å›¾è§£æå™¨"><a href="#12-2ã€ContentNegotiatingViewResolver-å†…å®¹åå•†è§†å›¾è§£æå™¨" class="headerlink" title="12.2ã€ContentNegotiatingViewResolver å†…å®¹åå•†è§†å›¾è§£æå™¨"></a><strong>12.2ã€ContentNegotiatingViewResolver å†…å®¹åå•†è§†å›¾è§£æå™¨</strong></h2><p>è‡ªåŠ¨é…ç½®äº†ViewResolverï¼Œå°±æ˜¯æˆ‘ä»¬ä¹‹å‰å­¦ä¹ çš„SpringMVCçš„è§†å›¾è§£æå™¨ï¼›</p><p>å³æ ¹æ®æ–¹æ³•çš„è¿”å›å€¼å–å¾—è§†å›¾å¯¹è±¡ï¼ˆViewï¼‰ï¼Œç„¶åç”±è§†å›¾å¯¹è±¡å†³å®šå¦‚ä½•æ¸²æŸ“ï¼ˆè½¬å‘ï¼Œé‡å®šå‘ï¼‰ã€‚</p><p>æˆ‘ä»¬å»çœ‹çœ‹è¿™é‡Œçš„æºç ï¼šæˆ‘ä»¬æ‰¾åˆ° WebMvcAutoConfiguration ï¼Œ ç„¶åæœç´¢ContentNegotiatingViewResolverã€‚æ‰¾åˆ°å¦‚ä¸‹æ–¹æ³•ï¼</p><pre><code class="hljs java"><span class="hljs-meta">@Bean</span><span class="hljs-meta">@ConditionalOnBean</span>(ViewResolver<span class="hljs-class">.<span class="hljs-keyword">class</span>)</span><span class="hljs-class">@<span class="hljs-title">ConditionalOnMissingBean</span>(<span class="hljs-title">name</span> </span>= <span class="hljs-string">"viewResolver"</span>, value = ContentNegotiatingViewResolver<span class="hljs-class">.<span class="hljs-keyword">class</span>)</span><span class="hljs-class"><span class="hljs-title">public</span> <span class="hljs-title">ContentNegotiatingViewResolver</span> <span class="hljs-title">viewResolver</span>(<span class="hljs-title">BeanFactory</span> <span class="hljs-title">beanFactory</span>) </span>{    ContentNegotiatingViewResolver resolver = <span class="hljs-keyword">new</span> ContentNegotiatingViewResolver();    resolver.setContentNegotiationManager(beanFactory.getBean(ContentNegotiationManager<span class="hljs-class">.<span class="hljs-keyword">class</span>))</span>;    <span class="hljs-comment">// ContentNegotiatingViewResolverä½¿ç”¨æ‰€æœ‰å…¶ä»–è§†å›¾è§£æå™¨æ¥å®šä½è§†å›¾ï¼Œå› æ­¤å®ƒåº”è¯¥å…·æœ‰è¾ƒé«˜çš„ä¼˜å…ˆçº§</span>    resolver.setOrder(Ordered.HIGHEST_PRECEDENCE);    <span class="hljs-keyword">return</span> resolver;}</code></pre><p>æˆ‘ä»¬å¯ä»¥ç‚¹è¿›è¿™ç±»çœ‹çœ‹ï¼æ‰¾åˆ°å¯¹åº”çš„è§£æè§†å›¾çš„ä»£ç ï¼›</p><pre><code class="hljs java"><span class="hljs-meta">@Nullable</span> <span class="hljs-comment">// æ³¨è§£è¯´æ˜ï¼š@Nullable å³å‚æ•°å¯ä¸ºnull</span><span class="hljs-function"><span class="hljs-keyword">public</span> View <span class="hljs-title">resolveViewName</span><span class="hljs-params">(String viewName, Locale locale)</span> <span class="hljs-keyword">throws</span> Exception </span>{    RequestAttributes attrs = RequestContextHolder.getRequestAttributes();    Assert.state(attrs <span class="hljs-keyword">instanceof</span> ServletRequestAttributes, <span class="hljs-string">"No current ServletRequestAttributes"</span>);    List&lt;MediaType&gt; requestedMediaTypes = <span class="hljs-keyword">this</span>.getMediaTypes(((ServletRequestAttributes)attrs).getRequest());    <span class="hljs-keyword">if</span> (requestedMediaTypes != <span class="hljs-keyword">null</span>) {        <span class="hljs-comment">// è·å–å€™é€‰çš„è§†å›¾å¯¹è±¡</span>        List&lt;View&gt; candidateViews = <span class="hljs-keyword">this</span>.getCandidateViews(viewName, locale, requestedMediaTypes);        <span class="hljs-comment">// é€‰æ‹©ä¸€ä¸ªæœ€é€‚åˆçš„è§†å›¾å¯¹è±¡ï¼Œç„¶åæŠŠè¿™ä¸ªå¯¹è±¡è¿”å›</span>        View bestView = <span class="hljs-keyword">this</span>.getBestView(candidateViews, requestedMediaTypes, attrs);        <span class="hljs-keyword">if</span> (bestView != <span class="hljs-keyword">null</span>) {            <span class="hljs-keyword">return</span> bestView;        }    }    <span class="hljs-comment">// .....</span>}</code></pre><p>æˆ‘ä»¬ç»§ç»­ç‚¹è¿›å»çœ‹ï¼Œä»–æ˜¯æ€ä¹ˆè·å¾—å€™é€‰çš„è§†å›¾çš„å‘¢ï¼Ÿ</p><p>getCandidateViewsä¸­çœ‹åˆ°ä»–æ˜¯æŠŠæ‰€æœ‰çš„è§†å›¾è§£æå™¨æ‹¿æ¥ï¼Œè¿›è¡Œwhileå¾ªç¯ï¼ŒæŒ¨ä¸ªè§£æï¼</p><pre><code class="hljs java">Iterator var5 = <span class="hljs-keyword">this</span>.viewResolvers.iterator();</code></pre><p>æ‰€ä»¥å¾—å‡ºç»“è®ºï¼š<strong>ContentNegotiatingViewResolver è¿™ä¸ªè§†å›¾è§£æå™¨å°±æ˜¯ç”¨æ¥ç»„åˆæ‰€æœ‰çš„è§†å›¾è§£æå™¨çš„</strong></p><p>æˆ‘ä»¬å†å»ç ”ç©¶ä¸‹ä»–çš„ç»„åˆé€»è¾‘ï¼Œçœ‹åˆ°æœ‰ä¸ªå±æ€§viewResolversï¼Œçœ‹çœ‹å®ƒæ˜¯åœ¨å“ªé‡Œè¿›è¡Œèµ‹å€¼çš„ï¼</p><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">initServletContext</span><span class="hljs-params">(ServletContext servletContext)</span> </span>{    <span class="hljs-comment">// è¿™é‡Œå®ƒæ˜¯ä»beanFactoryå·¥å…·ä¸­è·å–å®¹å™¨ä¸­çš„æ‰€æœ‰è§†å›¾è§£æå™¨</span>    <span class="hljs-comment">// ViewRescolver.class æŠŠæ‰€æœ‰çš„è§†å›¾è§£æå™¨æ¥ç»„åˆçš„</span>    Collection&lt;ViewResolver&gt; matchingBeans = BeanFactoryUtils.beansOfTypeIncludingAncestors(<span class="hljs-keyword">this</span>.obtainApplicationContext(), ViewResolver<span class="hljs-class">.<span class="hljs-keyword">class</span>).<span class="hljs-title">values</span>()</span>;    ViewResolver viewResolver;    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.viewResolvers == <span class="hljs-keyword">null</span>) {        <span class="hljs-keyword">this</span>.viewResolvers = <span class="hljs-keyword">new</span> ArrayList(matchingBeans.size());    }    <span class="hljs-comment">// ...............</span>}</code></pre><p>æ—¢ç„¶å®ƒæ˜¯åœ¨å®¹å™¨ä¸­å»æ‰¾è§†å›¾è§£æå™¨ï¼Œæˆ‘ä»¬æ˜¯å¦å¯ä»¥çŒœæƒ³ï¼Œæˆ‘ä»¬å°±å¯ä»¥å»å®ç°ä¸€ä¸ªè§†å›¾è§£æå™¨äº†å‘¢ï¼Ÿ</p><p>æˆ‘ä»¬å¯ä»¥è‡ªå·±ç»™å®¹å™¨ä¸­å»æ·»åŠ ä¸€ä¸ªè§†å›¾è§£æå™¨ï¼›è¿™ä¸ªç±»å°±ä¼šå¸®æˆ‘ä»¬è‡ªåŠ¨çš„å°†å®ƒç»„åˆè¿›æ¥ï¼›<strong>æˆ‘ä»¬å»å®ç°ä¸€ä¸‹</strong></p><p>1ã€æˆ‘ä»¬åœ¨æˆ‘ä»¬çš„ä¸»ç¨‹åºä¸­å»å†™ä¸€ä¸ªè§†å›¾è§£æå™¨æ¥è¯•è¯•ï¼›</p><pre><code class="hljs java"><span class="hljs-meta">@Bean</span> <span class="hljs-comment">//æ”¾åˆ°beanä¸­</span><span class="hljs-function"><span class="hljs-keyword">public</span> ViewResolver <span class="hljs-title">myViewResolver</span><span class="hljs-params">()</span></span>{    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> MyViewResolver();}<span class="hljs-comment">//æˆ‘ä»¬å†™ä¸€ä¸ªé™æ€å†…éƒ¨ç±»ï¼Œè§†å›¾è§£æå™¨å°±éœ€è¦å®ç°ViewResolveræ¥å£</span><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyViewResolver</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">ViewResolver</span></span>{    <span class="hljs-meta">@Override</span>    <span class="hljs-function"><span class="hljs-keyword">public</span> View <span class="hljs-title">resolveViewName</span><span class="hljs-params">(String s, Locale locale)</span> <span class="hljs-keyword">throws</span> Exception </span>{        <span class="hljs-keyword">return</span> <span class="hljs-keyword">null</span>;    }}</code></pre><p>2ã€æ€ä¹ˆçœ‹æˆ‘ä»¬è‡ªå·±å†™çš„è§†å›¾è§£æå™¨æœ‰æ²¡æœ‰èµ·ä½œç”¨å‘¢ï¼Ÿ</p><p>æˆ‘ä»¬ç»™ DispatcherServlet ä¸­çš„ doDispatchæ–¹æ³• åŠ ä¸ªæ–­ç‚¹è¿›è¡Œè°ƒè¯•ä¸€ä¸‹ï¼Œå› ä¸ºæ‰€æœ‰çš„è¯·æ±‚éƒ½ä¼šèµ°åˆ°è¿™ä¸ªæ–¹æ³•ä¸­</p><p><img src="https://img2020.cnblogs.com/blog/1905053/202004/1905053-20200412224922244-774346297.png" srcset="/blog/img/loading.gif" alt="img"></p><p>3ã€æˆ‘ä»¬å¯åŠ¨æˆ‘ä»¬çš„é¡¹ç›®ï¼Œç„¶åéšä¾¿è®¿é—®ä¸€ä¸ªé¡µé¢ï¼Œçœ‹ä¸€ä¸‹Debugä¿¡æ¯ï¼›</p><p>æ‰¾åˆ°this</p><p><img src="https://img2020.cnblogs.com/blog/1905053/202004/1905053-20200412224940354-738491944.png" srcset="/blog/img/loading.gif" alt="img"></p><p>æ‰¾åˆ°è§†å›¾è§£æå™¨ï¼Œæˆ‘ä»¬çœ‹åˆ°æˆ‘ä»¬è‡ªå·±å®šä¹‰çš„å°±åœ¨è¿™é‡Œäº†ï¼›</p><p><img src="https://img2020.cnblogs.com/blog/1905053/202004/1905053-20200412224955594-693958833.png" srcset="/blog/img/loading.gif" alt="img"></p><p>æ‰€ä»¥è¯´ï¼Œæˆ‘ä»¬å¦‚æœæƒ³è¦ä½¿ç”¨è‡ªå·±å®šåˆ¶åŒ–çš„ä¸œè¥¿ï¼Œæˆ‘ä»¬åªéœ€è¦ç»™å®¹å™¨ä¸­æ·»åŠ è¿™ä¸ªç»„ä»¶å°±å¥½äº†ï¼å‰©ä¸‹çš„äº‹æƒ…SpringBootå°±ä¼šå¸®æˆ‘ä»¬åšäº†ï¼</p><h2 id="12-3ã€è½¬æ¢å™¨å’Œæ ¼å¼åŒ–å™¨"><a href="#12-3ã€è½¬æ¢å™¨å’Œæ ¼å¼åŒ–å™¨" class="headerlink" title="12.3ã€è½¬æ¢å™¨å’Œæ ¼å¼åŒ–å™¨"></a>12.3ã€è½¬æ¢å™¨å’Œæ ¼å¼åŒ–å™¨</h2><p>æ‰¾åˆ°æ ¼å¼åŒ–è½¬æ¢å™¨ï¼š</p><pre><code class="hljs java"><span class="hljs-meta">@Bean</span><span class="hljs-meta">@Override</span><span class="hljs-function"><span class="hljs-keyword">public</span> FormattingConversionService <span class="hljs-title">mvcConversionService</span><span class="hljs-params">()</span> </span>{    <span class="hljs-comment">// æ‹¿åˆ°é…ç½®æ–‡ä»¶ä¸­çš„æ ¼å¼åŒ–è§„åˆ™</span>    WebConversionService conversionService =         <span class="hljs-keyword">new</span> WebConversionService(<span class="hljs-keyword">this</span>.mvcProperties.getDateFormat());    addFormatters(conversionService);    <span class="hljs-keyword">return</span> conversionService;}</code></pre><p>ç‚¹å‡»å»ï¼š</p><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">getDateFormat</span><span class="hljs-params">()</span> </span>{    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.dateFormat;}<span class="hljs-comment">/**</span><span class="hljs-comment">* Date format to use. For instance, `dd/MM/yyyy`. é»˜è®¤çš„</span><span class="hljs-comment"> */</span><span class="hljs-keyword">private</span> String dateFormat;</code></pre><p>å¯ä»¥çœ‹åˆ°åœ¨æˆ‘ä»¬çš„Propertiesæ–‡ä»¶ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥è¿›è¡Œè‡ªåŠ¨é…ç½®å®ƒï¼</p><p>å¦‚æœé…ç½®äº†è‡ªå·±çš„æ ¼å¼åŒ–æ–¹å¼ï¼Œå°±ä¼šæ³¨å†Œåˆ°Beanä¸­ç”Ÿæ•ˆï¼Œæˆ‘ä»¬å¯ä»¥åœ¨é…ç½®æ–‡ä»¶ä¸­é…ç½®æ—¥æœŸæ ¼å¼åŒ–çš„è§„åˆ™ï¼š</p><p><img src="https://img2020.cnblogs.com/blog/1905053/202004/1905053-20200412225016479-244888602.png" srcset="/blog/img/loading.gif" alt="img"></p><p>å…¶ä½™çš„å°±ä¸ä¸€ä¸€ä¸¾ä¾‹äº†ï¼Œå¤§å®¶å¯ä»¥ä¸‹å»å¤šç ”ç©¶æ¢è®¨å³å¯ï¼</p><h2 id="12-4ã€ä¿®æ”¹SpringBootçš„é»˜è®¤é…ç½®"><a href="#12-4ã€ä¿®æ”¹SpringBootçš„é»˜è®¤é…ç½®" class="headerlink" title="12.4ã€ä¿®æ”¹SpringBootçš„é»˜è®¤é…ç½®"></a>12.4ã€ä¿®æ”¹SpringBootçš„é»˜è®¤é…ç½®</h2><p>è¿™ä¹ˆå¤šçš„è‡ªåŠ¨é…ç½®ï¼ŒåŸç†éƒ½æ˜¯ä¸€æ ·çš„ï¼Œé€šè¿‡è¿™ä¸ªWebMVCçš„è‡ªåŠ¨é…ç½®åŸç†åˆ†æï¼Œæˆ‘ä»¬è¦å­¦ä¼šä¸€ç§å­¦ä¹ æ–¹å¼ï¼Œé€šè¿‡æºç æ¢ç©¶ï¼Œå¾—å‡ºç»“è®ºï¼›è¿™ä¸ªç»“è®ºä¸€å®šæ˜¯å±äºè‡ªå·±çš„ï¼Œè€Œä¸”ä¸€é€šç™¾é€šã€‚</p><p>SpringBootçš„åº•å±‚ï¼Œå¤§é‡ç”¨åˆ°äº†è¿™äº›è®¾è®¡ç»†èŠ‚æ€æƒ³ï¼Œæ‰€ä»¥ï¼Œæ²¡äº‹éœ€è¦å¤šé˜…è¯»æºç ï¼å¾—å‡ºç»“è®ºï¼›</p><p>SpringBootåœ¨è‡ªåŠ¨é…ç½®å¾ˆå¤šç»„ä»¶çš„æ—¶å€™ï¼Œå…ˆçœ‹å®¹å™¨ä¸­æœ‰æ²¡æœ‰ç”¨æˆ·è‡ªå·±é…ç½®çš„ï¼ˆå¦‚æœç”¨æˆ·è‡ªå·±é…ç½®@beanï¼‰ï¼Œå¦‚æœæœ‰å°±ç”¨ç”¨æˆ·é…ç½®çš„ï¼Œå¦‚æœæ²¡æœ‰å°±ç”¨è‡ªåŠ¨é…ç½®çš„ï¼›</p><p>å¦‚æœæœ‰äº›ç»„ä»¶å¯ä»¥å­˜åœ¨å¤šä¸ªï¼Œæ¯”å¦‚æˆ‘ä»¬çš„è§†å›¾è§£æå™¨ï¼Œå°±å°†ç”¨æˆ·é…ç½®çš„å’Œè‡ªå·±é»˜è®¤çš„ç»„åˆèµ·æ¥ï¼</p><p><strong>æ‰©å±•ä½¿ç”¨SpringMVC</strong> å®˜æ–¹æ–‡æ¡£å¦‚ä¸‹ï¼š</p><p>If you want to keep Spring Boot MVC features and you want to add additional MVC configuration (interceptors, formatters, view controllers, and other features), you can add your own @Configuration class of type WebMvcConfigurer but without @EnableWebMvc. If you wish to provide custom instances of RequestMappingHandlerMapping, RequestMappingHandlerAdapter, or ExceptionHandlerExceptionResolver, you can declare a WebMvcRegistrationsAdapter instance to provide such components.</p><p>æˆ‘ä»¬è¦åšçš„å°±æ˜¯ç¼–å†™ä¸€ä¸ª@Configurationæ³¨è§£ç±»ï¼Œå¹¶ä¸”ç±»å‹è¦ä¸ºWebMvcConfigurerï¼Œè¿˜ä¸èƒ½æ ‡æ³¨@EnableWebMvcæ³¨è§£ï¼›æˆ‘ä»¬å»è‡ªå·±å†™ä¸€ä¸ªï¼›æˆ‘ä»¬æ–°å»ºä¸€ä¸ªåŒ…å«configï¼Œå†™ä¸€ä¸ªç±»MyMvcConfigï¼›</p><pre><code class="hljs java"><span class="hljs-comment">//åº”ä¸ºç±»å‹è¦æ±‚ä¸ºWebMvcConfigurerï¼Œæ‰€ä»¥æˆ‘ä»¬å®ç°å…¶æ¥å£</span><span class="hljs-comment">//å¯ä»¥ä½¿ç”¨è‡ªå®šä¹‰ç±»æ‰©å±•MVCçš„åŠŸèƒ½</span><span class="hljs-meta">@Configuration</span><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyMvcConfig</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">WebMvcConfigurer</span> </span>{    <span class="hljs-meta">@Override</span>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">addViewControllers</span><span class="hljs-params">(ViewControllerRegistry registry)</span> </span>{        <span class="hljs-comment">// æµè§ˆå™¨å‘é€/test ï¼Œ å°±ä¼šè·³è½¬åˆ°testé¡µé¢ï¼›</span>        registry.addViewController(<span class="hljs-string">"/test"</span>).setViewName(<span class="hljs-string">"test"</span>);    }}</code></pre><p>æˆ‘ä»¬å»æµè§ˆå™¨è®¿é—®ä¸€ä¸‹ï¼š</p><p><img src="https://img2020.cnblogs.com/blog/1905053/202004/1905053-20200412225034989-1426302926.png" srcset="/blog/img/loading.gif" alt="img"></p><p><strong>ç¡®å®ä¹Ÿè·³è½¬è¿‡æ¥äº†ï¼æ‰€ä»¥è¯´ï¼Œæˆ‘ä»¬è¦æ‰©å±•SpringMVCï¼Œå®˜æ–¹å°±æ¨èæˆ‘ä»¬è¿™ä¹ˆå»ä½¿ç”¨ï¼Œæ—¢ä¿SpringBootç•™æ‰€æœ‰çš„è‡ªåŠ¨é…ç½®ï¼Œä¹Ÿèƒ½ç”¨æˆ‘ä»¬æ‰©å±•çš„é…ç½®ï¼</strong></p><p>æˆ‘ä»¬å¯ä»¥å»åˆ†æä¸€ä¸‹åŸç†ï¼š</p><p>1ã€WebMvcAutoConfiguration æ˜¯ SpringMVCçš„è‡ªåŠ¨é…ç½®ç±»ï¼Œé‡Œé¢æœ‰ä¸€ä¸ªç±»WebMvcAutoConfigurationAdapter</p><p>2ã€è¿™ä¸ªç±»ä¸Šæœ‰ä¸€ä¸ªæ³¨è§£ï¼Œåœ¨åšå…¶ä»–è‡ªåŠ¨é…ç½®æ—¶ä¼šå¯¼å…¥ï¼š@Import(EnableWebMvcConfiguration.class)</p><p>3ã€æˆ‘ä»¬ç‚¹è¿›EnableWebMvcConfigurationè¿™ä¸ªç±»çœ‹ä¸€ä¸‹ï¼Œå®ƒç»§æ‰¿äº†ä¸€ä¸ªçˆ¶ç±»ï¼šDelegatingWebMvcConfiguration</p><p>è¿™ä¸ªçˆ¶ç±»ä¸­æœ‰è¿™æ ·ä¸€æ®µä»£ç ï¼š</p><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">DelegatingWebMvcConfiguration</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">WebMvcConfigurationSupport</span> </span>{    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> WebMvcConfigurerComposite configurers = <span class="hljs-keyword">new</span> WebMvcConfigurerComposite();      <span class="hljs-comment">// ä»å®¹å™¨ä¸­è·å–æ‰€æœ‰çš„webmvcConfigurer</span>    <span class="hljs-meta">@Autowired</span>(required = <span class="hljs-keyword">false</span>)    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setConfigurers</span><span class="hljs-params">(List&lt;WebMvcConfigurer&gt; configurers)</span> </span>{        <span class="hljs-keyword">if</span> (!CollectionUtils.isEmpty(configurers)) {            <span class="hljs-keyword">this</span>.configurers.addWebMvcConfigurers(configurers);        }    }}</code></pre><p>4ã€æˆ‘ä»¬å¯ä»¥åœ¨è¿™ä¸ªç±»ä¸­å»å¯»æ‰¾ä¸€ä¸ªæˆ‘ä»¬åˆšæ‰è®¾ç½®çš„viewControllerå½“åšå‚è€ƒï¼Œå‘ç°å®ƒè°ƒç”¨äº†ä¸€ä¸ª</p><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">addViewControllers</span><span class="hljs-params">(ViewControllerRegistry registry)</span> </span>{    <span class="hljs-keyword">this</span>.configurers.addViewControllers(registry);}</code></pre><p>5ã€æˆ‘ä»¬ç‚¹è¿›å»çœ‹ä¸€ä¸‹</p><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">addViewControllers</span><span class="hljs-params">(ViewControllerRegistry registry)</span> </span>{    Iterator var2 = <span class="hljs-keyword">this</span>.delegates.iterator();    <span class="hljs-keyword">while</span>(var2.hasNext()) {        <span class="hljs-comment">// å°†æ‰€æœ‰çš„WebMvcConfigurerç›¸å…³é…ç½®æ¥ä¸€èµ·è°ƒç”¨ï¼åŒ…æ‹¬æˆ‘ä»¬è‡ªå·±é…ç½®çš„å’ŒSpringç»™æˆ‘ä»¬é…ç½®çš„</span>        WebMvcConfigurer delegate = (WebMvcConfigurer)var2.next();        delegate.addViewControllers(registry);    }}</code></pre><p>æ‰€ä»¥å¾—å‡ºç»“è®ºï¼šæ‰€æœ‰çš„WebMvcConfigurationéƒ½ä¼šè¢«ä½œç”¨ï¼Œä¸æ­¢Springè‡ªå·±çš„é…ç½®ç±»ï¼Œæˆ‘ä»¬è‡ªå·±çš„é…ç½®ç±»å½“ç„¶ä¹Ÿä¼šè¢«è°ƒç”¨ï¼›</p><h2 id="12-5ã€å…¨é¢æ¥ç®¡SpringMVC"><a href="#12-5ã€å…¨é¢æ¥ç®¡SpringMVC" class="headerlink" title="12.5ã€å…¨é¢æ¥ç®¡SpringMVC"></a>12.5ã€å…¨é¢æ¥ç®¡SpringMVC</h2><p>å®˜æ–¹æ–‡æ¡£ï¼š</p><pre><code class="hljs java">If you want to take complete control of Spring MVCyou can add your own <span class="hljs-meta">@Configuration</span> annotated with <span class="hljs-meta">@EnableWebMvc</span>.</code></pre><p>å…¨é¢æ¥ç®¡å³ï¼šSpringBootå¯¹SpringMVCçš„è‡ªåŠ¨é…ç½®ä¸éœ€è¦äº†ï¼Œæ‰€æœ‰éƒ½æ˜¯æˆ‘ä»¬è‡ªå·±å»é…ç½®ï¼</p><p>åªéœ€åœ¨æˆ‘ä»¬çš„é…ç½®ç±»ä¸­è¦åŠ ä¸€ä¸ª@EnableWebMvcã€‚</p><p>æˆ‘ä»¬çœ‹ä¸‹å¦‚æœæˆ‘ä»¬å…¨é¢æ¥ç®¡äº†SpringMVCäº†ï¼Œæˆ‘ä»¬ä¹‹å‰SpringBootç»™æˆ‘ä»¬é…ç½®çš„é™æ€èµ„æºæ˜ å°„ä¸€å®šä¼šæ— æ•ˆï¼Œæˆ‘ä»¬å¯ä»¥å»æµ‹è¯•ä¸€ä¸‹ï¼›</p><p>ä¸åŠ æ³¨è§£ä¹‹å‰ï¼Œè®¿é—®é¦–é¡µï¼š</p><p><img src="https://img2020.cnblogs.com/blog/1905053/202004/1905053-20200412225051724-1570792880.png" srcset="/blog/img/loading.gif" alt="img"></p><p>ç»™é…ç½®ç±»åŠ ä¸Šæ³¨è§£ï¼š@EnableWebMvc</p><p><img src="https://img2020.cnblogs.com/blog/1905053/202004/1905053-20200412225103839-1070501209.png" srcset="/blog/img/loading.gif" alt="img"></p><p>æˆ‘ä»¬å‘ç°æ‰€æœ‰çš„SpringMVCè‡ªåŠ¨é…ç½®éƒ½å¤±æ•ˆäº†ï¼å›å½’åˆ°äº†æœ€åˆçš„æ ·å­ï¼›</p><p><strong>å½“ç„¶ï¼Œæˆ‘ä»¬å¼€å‘ä¸­ï¼Œä¸æ¨èä½¿ç”¨å…¨é¢æ¥ç®¡SpringMVC</strong></p><p>æ€è€ƒé—®é¢˜ï¼Ÿä¸ºä»€ä¹ˆåŠ äº†ä¸€ä¸ªæ³¨è§£ï¼Œè‡ªåŠ¨é…ç½®å°±å¤±æ•ˆäº†ï¼æˆ‘ä»¬çœ‹ä¸‹æºç ï¼š</p><p>1ã€è¿™é‡Œå‘ç°å®ƒæ˜¯å¯¼å…¥äº†ä¸€ä¸ªç±»ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­è¿›å»çœ‹</p><pre><code class="hljs java"><span class="hljs-meta">@Import</span>({DelegatingWebMvcConfiguration<span class="hljs-class">.<span class="hljs-keyword">class</span>})<span class="hljs-title">public</span> @<span class="hljs-title">interface</span> <span class="hljs-title">EnableWebMvc</span> </span>{}</code></pre><p>2ã€å®ƒç»§æ‰¿äº†ä¸€ä¸ªçˆ¶ç±» WebMvcConfigurationSupport</p><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">DelegatingWebMvcConfiguration</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">WebMvcConfigurationSupport</span> </span>{  <span class="hljs-comment">// ......}</span></code></pre><p>3ã€æˆ‘ä»¬æ¥å›é¡¾ä¸€ä¸‹Webmvcè‡ªåŠ¨é…ç½®ç±»</p><pre><code class="hljs java"><span class="hljs-meta">@Configuration</span>(proxyBeanMethods = <span class="hljs-keyword">false</span>)<span class="hljs-meta">@ConditionalOnWebApplication</span>(type = Type.SERVLET)<span class="hljs-meta">@ConditionalOnClass</span>({ Servlet<span class="hljs-class">.<span class="hljs-keyword">class</span>, <span class="hljs-title">DispatcherServlet</span>.<span class="hljs-title">class</span>, <span class="hljs-title">WebMvcConfigurer</span>.<span class="hljs-title">class</span> })</span><span class="hljs-class">// è¿™ä¸ªæ³¨è§£çš„æ„æ€å°±æ˜¯ï¼šå®¹å™¨ä¸­æ²¡æœ‰è¿™ä¸ªç»„ä»¶çš„æ—¶å€™ï¼Œè¿™ä¸ªè‡ªåŠ¨é…ç½®ç±»æ‰ç”Ÿæ•ˆ</span><span class="hljs-class">@<span class="hljs-title">ConditionalOnMissingBean</span>(<span class="hljs-title">WebMvcConfigurationSupport</span>.<span class="hljs-title">class</span>)</span><span class="hljs-class">@<span class="hljs-title">AutoConfigureOrder</span>(<span class="hljs-title">Ordered</span>.<span class="hljs-title">HIGHEST_PRECEDENCE</span> + 10)</span><span class="hljs-class">@<span class="hljs-title">AutoConfigureAfter</span>(</span>{ DispatcherServletAutoConfiguration<span class="hljs-class">.<span class="hljs-keyword">class</span>, <span class="hljs-title">TaskExecutionAutoConfiguration</span>.<span class="hljs-title">class</span>,</span><span class="hljs-class">    <span class="hljs-title">ValidationAutoConfiguration</span>.<span class="hljs-title">class</span> })</span><span class="hljs-class"><span class="hljs-title">public</span> <span class="hljs-title">class</span> <span class="hljs-title">WebMvcAutoConfiguration</span> </span>{    }</code></pre><p>æ€»ç»“ä¸€å¥è¯ï¼š@EnableWebMvcå°†WebMvcConfigurationSupportç»„ä»¶å¯¼å…¥è¿›æ¥äº†ï¼›</p><p>è€Œå¯¼å…¥çš„WebMvcConfigurationSupportåªæ˜¯SpringMVCæœ€åŸºæœ¬çš„åŠŸèƒ½ï¼</p><p><strong>åœ¨SpringBootä¸­ä¼šæœ‰éå¸¸å¤šçš„æ‰©å±•é…ç½®ï¼Œåªè¦çœ‹è§äº†è¿™ä¸ªï¼Œæˆ‘ä»¬å°±åº”è¯¥å¤šç•™å¿ƒæ³¨æ„~</strong></p><h1 id="13ã€SpringBootï¼šé¡µé¢å›½é™…åŒ–"><a href="#13ã€SpringBootï¼šé¡µé¢å›½é™…åŒ–" class="headerlink" title="13ã€SpringBootï¼šé¡µé¢å›½é™…åŒ–"></a>13ã€SpringBootï¼šé¡µé¢å›½é™…åŒ–</h1><p>æœ‰çš„æ—¶å€™ï¼Œæˆ‘ä»¬çš„ç½‘ç«™ä¼šå»æ¶‰åŠä¸­è‹±æ–‡ç”šè‡³å¤šè¯­è¨€çš„åˆ‡æ¢ï¼Œè¿™æ—¶å€™æˆ‘ä»¬å°±éœ€è¦å­¦ä¹ å›½é™…åŒ–äº†ï¼</p><h2 id="13-1ã€å‡†å¤‡å·¥ä½œ"><a href="#13-1ã€å‡†å¤‡å·¥ä½œ" class="headerlink" title="13.1ã€å‡†å¤‡å·¥ä½œ"></a>13.1ã€å‡†å¤‡å·¥ä½œ</h2><p>å…ˆåœ¨IDEAä¸­ç»Ÿä¸€è®¾ç½®propertiesçš„ç¼–ç é—®é¢˜ï¼</p><p><img src="https://img2020.cnblogs.com/blog/1905053/202004/1905053-20200412225128194-996554004.png" srcset="/blog/img/loading.gif" alt="img"></p><p>ç¼–å†™å›½é™…åŒ–é…ç½®æ–‡ä»¶ï¼ŒæŠ½å–é¡µé¢éœ€è¦æ˜¾ç¤ºçš„å›½é™…åŒ–é¡µé¢æ¶ˆæ¯ã€‚æˆ‘ä»¬å¯ä»¥å»ç™»å½•é¡µé¢æŸ¥çœ‹ä¸€ä¸‹ï¼Œå“ªäº›å†…å®¹æˆ‘ä»¬éœ€è¦ç¼–å†™å›½é™…åŒ–çš„é…ç½®ï¼</p><h2 id="13-2ã€é…ç½®æ–‡ä»¶ç¼–å†™"><a href="#13-2ã€é…ç½®æ–‡ä»¶ç¼–å†™" class="headerlink" title="13.2ã€é…ç½®æ–‡ä»¶ç¼–å†™"></a>13.2ã€é…ç½®æ–‡ä»¶ç¼–å†™</h2><p>1ã€æˆ‘ä»¬åœ¨resourcesèµ„æºæ–‡ä»¶ä¸‹æ–°å»ºä¸€ä¸ªi18nç›®å½•ï¼Œå­˜æ”¾å›½é™…åŒ–é…ç½®æ–‡ä»¶</p><p>2ã€å»ºç«‹ä¸€ä¸ªlogin.propertiesæ–‡ä»¶ï¼Œè¿˜æœ‰ä¸€ä¸ªlogin_zh_CN.propertiesï¼›å‘ç°IDEAè‡ªåŠ¨è¯†åˆ«äº†æˆ‘ä»¬è¦åšå›½é™…åŒ–æ“ä½œï¼›æ–‡ä»¶å¤¹å˜äº†ï¼</p><p><img src="https://img2020.cnblogs.com/blog/1905053/202004/1905053-20200412225141876-1307608137.png" srcset="/blog/img/loading.gif" alt="img"></p><p>3ã€æˆ‘ä»¬å¯ä»¥åœ¨è¿™ä¸Šé¢å»æ–°å»ºä¸€ä¸ªæ–‡ä»¶ï¼›</p><p><img src="https://img2020.cnblogs.com/blog/1905053/202004/1905053-20200412225154889-1524653449.png" srcset="/blog/img/loading.gif" alt="img"></p><p>å¼¹å‡ºå¦‚ä¸‹é¡µé¢ï¼šæˆ‘ä»¬å†æ·»åŠ ä¸€ä¸ªè‹±æ–‡çš„ï¼›</p><p><img src="https://img2020.cnblogs.com/blog/1905053/202004/1905053-20200412225207604-1238451568.png" srcset="/blog/img/loading.gif" alt="img"></p><p>è¿™æ ·å°±å¿«æ·å¤šäº†ï¼</p><p><img src="https://img2020.cnblogs.com/blog/1905053/202004/1905053-20200412225221065-887398655.png" srcset="/blog/img/loading.gif" alt="img"></p><p><strong>4ã€æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±æ¥ç¼–å†™é…ç½®ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ideaä¸‹é¢æœ‰å¦å¤–ä¸€ä¸ªè§†å›¾ï¼›</strong></p><p><img src="https://img2020.cnblogs.com/blog/1905053/202004/1905053-20200412225234441-258590952.png" srcset="/blog/img/loading.gif" alt="img"></p><p>è¿™ä¸ªè§†å›¾æˆ‘ä»¬ç‚¹å‡» + å·å°±å¯ä»¥ç›´æ¥æ·»åŠ å±æ€§äº†ï¼›æˆ‘ä»¬æ–°å»ºä¸€ä¸ªlogin.tipï¼Œå¯ä»¥çœ‹åˆ°è¾¹ä¸Šæœ‰ä¸‰ä¸ªæ–‡ä»¶æ¡†å¯ä»¥è¾“å…¥</p><p><img src="https://img2020.cnblogs.com/blog/1905053/202004/1905053-20200412225247649-1746815344.png" srcset="/blog/img/loading.gif" alt="img"></p><p>æˆ‘ä»¬æ·»åŠ ä¸€ä¸‹é¦–é¡µçš„å†…å®¹ï¼</p><p><img src="https://img2020.cnblogs.com/blog/1905053/202004/1905053-20200412225259474-1140791172.png" srcset="/blog/img/loading.gif" alt="img"></p><p>ç„¶åä¾æ¬¡æ·»åŠ å…¶ä»–é¡µé¢å†…å®¹å³å¯ï¼</p><p><img src="https://img2020.cnblogs.com/blog/1905053/202004/1905053-20200412225311999-716532013.png" srcset="/blog/img/loading.gif" alt="img"></p><p>ç„¶åå»æŸ¥çœ‹æˆ‘ä»¬çš„é…ç½®æ–‡ä»¶ï¼›</p><p>login.properties ï¼šé»˜è®¤</p><pre><code class="hljs properties"><span class="hljs-meta">login.btn</span>=<span class="hljs-string">ç™»å½•</span><span class="hljs-meta">login.password</span>=<span class="hljs-string">å¯†ç </span><span class="hljs-meta">login.remember</span>=<span class="hljs-string">è®°ä½æˆ‘</span><span class="hljs-meta">login.tip</span>=<span class="hljs-string">è¯·ç™»å½•</span><span class="hljs-meta">login.username</span>=<span class="hljs-string">ç”¨æˆ·å</span></code></pre><p>è‹±æ–‡ï¼š</p><pre><code class="hljs properties"><span class="hljs-meta">login.btn</span>=<span class="hljs-string">Sign in</span><span class="hljs-meta">login.password</span>=<span class="hljs-string">Password</span><span class="hljs-meta">login.remember</span>=<span class="hljs-string">Remember me</span><span class="hljs-meta">login.tip</span>=<span class="hljs-string">Please sign in</span><span class="hljs-meta">login.username</span>=<span class="hljs-string">Username</span></code></pre><p>ä¸­æ–‡ï¼š</p><pre><code class="hljs properties"><span class="hljs-meta">login.btn</span>=<span class="hljs-string">ç™»å½•</span><span class="hljs-meta">login.password</span>=<span class="hljs-string">å¯†ç </span><span class="hljs-meta">login.remember</span>=<span class="hljs-string">è®°ä½æˆ‘</span><span class="hljs-meta">login.tip</span>=<span class="hljs-string">è¯·ç™»å½•</span><span class="hljs-meta">login.username</span>=<span class="hljs-string">ç”¨æˆ·å</span></code></pre><p>OKï¼Œé…ç½®æ–‡ä»¶æ­¥éª¤æå®šï¼</p><h2 id="13-3ã€é…ç½®æ–‡ä»¶ç”Ÿæ•ˆæ¢ç©¶"><a href="#13-3ã€é…ç½®æ–‡ä»¶ç”Ÿæ•ˆæ¢ç©¶" class="headerlink" title="13.3ã€é…ç½®æ–‡ä»¶ç”Ÿæ•ˆæ¢ç©¶"></a>13.3ã€é…ç½®æ–‡ä»¶ç”Ÿæ•ˆæ¢ç©¶</h2><p>æˆ‘ä»¬å»çœ‹ä¸€ä¸‹SpringBootå¯¹å›½é™…åŒ–çš„è‡ªåŠ¨é…ç½®ï¼è¿™é‡Œåˆæ¶‰åŠåˆ°ä¸€ä¸ªç±»ï¼šMessageSourceAutoConfiguration</p><p>é‡Œé¢æœ‰ä¸€ä¸ªæ–¹æ³•ï¼Œè¿™é‡Œå‘ç°SpringBootå·²ç»è‡ªåŠ¨é…ç½®å¥½äº†ç®¡ç†æˆ‘ä»¬å›½é™…åŒ–èµ„æºæ–‡ä»¶çš„ç»„ä»¶ ResourceBundleMessageSourceï¼›</p><pre><code class="hljs java"><span class="hljs-comment">// è·å– properties ä¼ é€’è¿‡æ¥çš„å€¼è¿›è¡Œåˆ¤æ–­</span><span class="hljs-meta">@Bean</span><span class="hljs-function"><span class="hljs-keyword">public</span> MessageSource <span class="hljs-title">messageSource</span><span class="hljs-params">(MessageSourceProperties properties)</span> </span>{    ResourceBundleMessageSource messageSource = <span class="hljs-keyword">new</span> ResourceBundleMessageSource();    <span class="hljs-keyword">if</span> (StringUtils.hasText(properties.getBasename())) {        <span class="hljs-comment">// è®¾ç½®å›½é™…åŒ–æ–‡ä»¶çš„åŸºç¡€åï¼ˆå»æ‰è¯­è¨€å›½å®¶ä»£ç çš„ï¼‰</span>        messageSource.setBasenames(            StringUtils.commaDelimitedListToStringArray(                                       StringUtils.trimAllWhitespace(properties.getBasename())));    }    <span class="hljs-keyword">if</span> (properties.getEncoding() != <span class="hljs-keyword">null</span>) {        messageSource.setDefaultEncoding(properties.getEncoding().name());    }    messageSource.setFallbackToSystemLocale(properties.isFallbackToSystemLocale());    Duration cacheDuration = properties.getCacheDuration();    <span class="hljs-keyword">if</span> (cacheDuration != <span class="hljs-keyword">null</span>) {        messageSource.setCacheMillis(cacheDuration.toMillis());    }    messageSource.setAlwaysUseMessageFormat(properties.isAlwaysUseMessageFormat());    messageSource.setUseCodeAsDefaultMessage(properties.isUseCodeAsDefaultMessage());    <span class="hljs-keyword">return</span> messageSource;}</code></pre><p>æˆ‘ä»¬çœŸå® çš„æƒ…å†µæ˜¯æ”¾åœ¨äº†i18nç›®å½•ä¸‹ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦å»é…ç½®è¿™ä¸ªmessagesçš„è·¯å¾„ï¼›</p><pre><code class="hljs java">spring.messages.basename=i18n.login</code></pre><h2 id="13-4ã€é…ç½®é¡µé¢å›½é™…åŒ–å€¼"><a href="#13-4ã€é…ç½®é¡µé¢å›½é™…åŒ–å€¼" class="headerlink" title="13.4ã€é…ç½®é¡µé¢å›½é™…åŒ–å€¼"></a>13.4ã€é…ç½®é¡µé¢å›½é™…åŒ–å€¼</h2><p>å»é¡µé¢è·å–å›½é™…åŒ–çš„å€¼ï¼ŒæŸ¥çœ‹Thymeleafçš„æ–‡æ¡£ï¼Œæ‰¾åˆ°messageå–å€¼æ“ä½œä¸ºï¼š#{â€¦}ã€‚æˆ‘ä»¬å»é¡µé¢æµ‹è¯•ä¸‹ï¼š</p><p>IDEAè¿˜æœ‰æç¤ºï¼Œéå¸¸æ™ºèƒ½çš„ï¼</p><p><img src="https://img2020.cnblogs.com/blog/1905053/202004/1905053-20200412225332289-780138786.png" srcset="/blog/img/loading.gif" alt="img"></p><p>æˆ‘ä»¬å¯ä»¥å»å¯åŠ¨é¡¹ç›®ï¼Œè®¿é—®ä¸€ä¸‹ï¼Œå‘ç°å·²ç»è‡ªåŠ¨è¯†åˆ«ä¸ºä¸­æ–‡çš„äº†ï¼</p><p><img src="https://img2020.cnblogs.com/blog/1905053/202004/1905053-20200412225346425-1869149052.png" srcset="/blog/img/loading.gif" alt="img"></p><p><strong>ä½†æ˜¯æˆ‘ä»¬æƒ³è¦æ›´å¥½ï¼å¯ä»¥æ ¹æ®æŒ‰é’®è‡ªåŠ¨åˆ‡æ¢ä¸­æ–‡è‹±æ–‡ï¼</strong></p><h2 id="13-5ã€é…ç½®å›½é™…åŒ–è§£æ"><a href="#13-5ã€é…ç½®å›½é™…åŒ–è§£æ" class="headerlink" title="13.5ã€é…ç½®å›½é™…åŒ–è§£æ"></a>13.5ã€é…ç½®å›½é™…åŒ–è§£æ</h2><p>åœ¨Springä¸­æœ‰ä¸€ä¸ªå›½é™…åŒ–çš„Locale ï¼ˆåŒºåŸŸä¿¡æ¯å¯¹è±¡ï¼‰ï¼›é‡Œé¢æœ‰ä¸€ä¸ªå«åšLocaleResolver ï¼ˆè·å–åŒºåŸŸä¿¡æ¯å¯¹è±¡ï¼‰çš„è§£æå™¨ï¼</p><p>æˆ‘ä»¬å»æˆ‘ä»¬webmvcè‡ªåŠ¨é…ç½®æ–‡ä»¶ï¼Œå¯»æ‰¾ä¸€ä¸‹ï¼çœ‹åˆ°SpringBooté»˜è®¤é…ç½®ï¼š</p><pre><code class="hljs java"><span class="hljs-meta">@Bean</span><span class="hljs-meta">@ConditionalOnMissingBean</span><span class="hljs-meta">@ConditionalOnProperty</span>(prefix = <span class="hljs-string">"spring.mvc"</span>, name = <span class="hljs-string">"locale"</span>)<span class="hljs-function"><span class="hljs-keyword">public</span> LocaleResolver <span class="hljs-title">localeResolver</span><span class="hljs-params">()</span> </span>{    <span class="hljs-comment">// å®¹å™¨ä¸­æ²¡æœ‰å°±è‡ªå·±é…ï¼Œæœ‰çš„è¯å°±ç”¨ç”¨æˆ·é…ç½®çš„</span>    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.mvcProperties.getLocaleResolver() == WebMvcProperties.LocaleResolver.FIXED) {        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> FixedLocaleResolver(<span class="hljs-keyword">this</span>.mvcProperties.getLocale());    }    <span class="hljs-comment">// æ¥æ”¶å¤´å›½é™…åŒ–åˆ†è§£</span>    AcceptHeaderLocaleResolver localeResolver = <span class="hljs-keyword">new</span> AcceptHeaderLocaleResolver();    localeResolver.setDefaultLocale(<span class="hljs-keyword">this</span>.mvcProperties.getLocale());    <span class="hljs-keyword">return</span> localeResolver;}</code></pre><p>AcceptHeaderLocaleResolver è¿™ä¸ªç±»ä¸­æœ‰ä¸€ä¸ªæ–¹æ³•</p><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">public</span> Locale <span class="hljs-title">resolveLocale</span><span class="hljs-params">(HttpServletRequest request)</span> </span>{    Locale defaultLocale = <span class="hljs-keyword">this</span>.getDefaultLocale();    <span class="hljs-comment">// é»˜è®¤çš„å°±æ˜¯æ ¹æ®è¯·æ±‚å¤´å¸¦æ¥çš„åŒºåŸŸä¿¡æ¯è·å–Localeè¿›è¡Œå›½é™…åŒ–</span>    <span class="hljs-keyword">if</span> (defaultLocale != <span class="hljs-keyword">null</span> &amp;&amp; request.getHeader(<span class="hljs-string">"Accept-Language"</span>) == <span class="hljs-keyword">null</span>) {        <span class="hljs-keyword">return</span> defaultLocale;    } <span class="hljs-keyword">else</span> {        Locale requestLocale = request.getLocale();        List&lt;Locale&gt; supportedLocales = <span class="hljs-keyword">this</span>.getSupportedLocales();        <span class="hljs-keyword">if</span> (!supportedLocales.isEmpty() &amp;&amp; !supportedLocales.contains(requestLocale)) {            Locale supportedLocale = <span class="hljs-keyword">this</span>.findSupportedLocale(request, supportedLocales);            <span class="hljs-keyword">if</span> (supportedLocale != <span class="hljs-keyword">null</span>) {                <span class="hljs-keyword">return</span> supportedLocale;            } <span class="hljs-keyword">else</span> {                <span class="hljs-keyword">return</span> defaultLocale != <span class="hljs-keyword">null</span> ? defaultLocale : requestLocale;            }        } <span class="hljs-keyword">else</span> {            <span class="hljs-keyword">return</span> requestLocale;        }    }}</code></pre><p>é‚£å‡å¦‚æˆ‘ä»¬ç°åœ¨æƒ³ç‚¹å‡»é“¾æ¥è®©æˆ‘ä»¬çš„å›½é™…åŒ–èµ„æºç”Ÿæ•ˆï¼Œå°±éœ€è¦è®©æˆ‘ä»¬è‡ªå·±çš„Localeç”Ÿæ•ˆï¼</p><p>æˆ‘ä»¬å»è‡ªå·±å†™ä¸€ä¸ªè‡ªå·±çš„LocaleResolverï¼Œå¯ä»¥åœ¨é“¾æ¥ä¸Šæºå¸¦åŒºåŸŸä¿¡æ¯ï¼</p><p>ä¿®æ”¹ä¸€ä¸‹å‰ç«¯é¡µé¢çš„è·³è½¬è¿æ¥ï¼š</p><pre><code class="hljs html"><span class="hljs-comment">&lt;!-- è¿™é‡Œä¼ å…¥å‚æ•°ä¸éœ€è¦ä½¿ç”¨ ï¼Ÿä½¿ç”¨ ï¼ˆkey=valueï¼‰--&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-sm"</span> <span class="hljs-attr">th:href</span>=<span class="hljs-string">"@{/index.html(l='zh_CN')}"</span>&gt;</span>ä¸­æ–‡<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-sm"</span> <span class="hljs-attr">th:href</span>=<span class="hljs-string">"@{/index.html(l='en_US')}"</span>&gt;</span>English<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span></code></pre><p>æˆ‘ä»¬å»å†™ä¸€ä¸ªå¤„ç†çš„ç»„ä»¶ç±»ï¼</p><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.kuang.component;<span class="hljs-keyword">import</span> org.springframework.util.StringUtils;<span class="hljs-keyword">import</span> org.springframework.web.servlet.LocaleResolver;<span class="hljs-keyword">import</span> javax.servlet.http.HttpServletRequest;<span class="hljs-keyword">import</span> javax.servlet.http.HttpServletResponse;<span class="hljs-keyword">import</span> java.util.Locale;<span class="hljs-comment">//å¯ä»¥åœ¨é“¾æ¥ä¸Šæºå¸¦åŒºåŸŸä¿¡æ¯</span><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyLocaleResolver</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">LocaleResolver</span> </span>{    <span class="hljs-comment">//è§£æè¯·æ±‚</span>    <span class="hljs-meta">@Override</span>    <span class="hljs-function"><span class="hljs-keyword">public</span> Locale <span class="hljs-title">resolveLocale</span><span class="hljs-params">(HttpServletRequest request)</span> </span>{        String language = request.getParameter(<span class="hljs-string">"l"</span>);        Locale locale = Locale.getDefault(); <span class="hljs-comment">// å¦‚æœæ²¡æœ‰è·å–åˆ°å°±ä½¿ç”¨ç³»ç»Ÿé»˜è®¤çš„</span>        <span class="hljs-comment">//å¦‚æœè¯·æ±‚é“¾æ¥ä¸ä¸ºç©º</span>        <span class="hljs-keyword">if</span> (!StringUtils.isEmpty(language)){            <span class="hljs-comment">//åˆ†å‰²è¯·æ±‚å‚æ•°</span>            String[] split = language.split(<span class="hljs-string">"_"</span>);            <span class="hljs-comment">//å›½å®¶ï¼Œåœ°åŒº</span>            locale = <span class="hljs-keyword">new</span> Locale(split[<span class="hljs-number">0</span>],split[<span class="hljs-number">1</span>]);        }        <span class="hljs-keyword">return</span> locale;    }    <span class="hljs-meta">@Override</span>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setLocale</span><span class="hljs-params">(HttpServletRequest httpServletRequest, HttpServletResponse httpServletResponse, Locale locale)</span> </span>{    }}</code></pre><p>ä¸ºäº†è®©æˆ‘ä»¬çš„åŒºåŸŸåŒ–ä¿¡æ¯èƒ½å¤Ÿç”Ÿæ•ˆï¼Œæˆ‘ä»¬éœ€è¦å†é…ç½®ä¸€ä¸‹è¿™ä¸ªç»„ä»¶ï¼åœ¨æˆ‘ä»¬è‡ªå·±çš„MvcConofigä¸‹æ·»åŠ beanï¼›</p><pre><code class="hljs java"><span class="hljs-meta">@Beanpublic</span> <span class="hljs-function">LocaleResolver <span class="hljs-title">localeResolver</span><span class="hljs-params">()</span></span>{    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> MyLocaleResolver();}</code></pre><p><strong>æˆ‘ä»¬é‡å¯é¡¹ç›®ï¼Œæ¥è®¿é—®ä¸€ä¸‹ï¼Œå‘ç°ç‚¹å‡»æŒ‰é’®å¯ä»¥å®ç°æˆåŠŸåˆ‡æ¢ï¼æå®šæ”¶å·¥ï¼</strong></p><h1 id="14ã€SpringBootï¼šé›†æˆSwaggerç»ˆæç‰ˆ"><a href="#14ã€SpringBootï¼šé›†æˆSwaggerç»ˆæç‰ˆ" class="headerlink" title="14ã€SpringBootï¼šé›†æˆSwaggerç»ˆæç‰ˆ"></a>14ã€SpringBootï¼šé›†æˆSwaggerç»ˆæç‰ˆ</h1><p><img src="https://img2020.cnblogs.com/blog/1905053/202004/1905053-20200412225407880-1259118410.png" srcset="/blog/img/loading.gif" alt="img"></p><p><strong>å­¦ä¹ ç›®æ ‡ï¼š</strong></p><ul><li>äº†è§£Swaggerçš„æ¦‚å¿µåŠä½œç”¨</li><li>æŒæ¡åœ¨é¡¹ç›®ä¸­é›†æˆSwaggerè‡ªåŠ¨ç”ŸæˆAPIæ–‡æ¡£</li></ul><h3 id="14-1ã€Swaggerç®€ä»‹"><a href="#14-1ã€Swaggerç®€ä»‹" class="headerlink" title="14.1ã€Swaggerç®€ä»‹"></a>14.1ã€Swaggerç®€ä»‹</h3><p><strong>å‰åç«¯åˆ†ç¦»</strong></p><ul><li>å‰ç«¯ -&gt; å‰ç«¯æ§åˆ¶å±‚ã€è§†å›¾å±‚</li><li>åç«¯ -&gt; åç«¯æ§åˆ¶å±‚ã€æœåŠ¡å±‚ã€æ•°æ®è®¿é—®å±‚</li><li>å‰åç«¯é€šè¿‡APIè¿›è¡Œäº¤äº’</li><li>å‰åç«¯ç›¸å¯¹ç‹¬ç«‹ä¸”æ¾è€¦åˆ</li></ul><p><strong>äº§ç”Ÿçš„é—®é¢˜</strong></p><ul><li>å‰åç«¯é›†æˆï¼Œå‰ç«¯æˆ–è€…åç«¯æ— æ³•åšåˆ°â€œåŠæ—¶åå•†ï¼Œå°½æ—©è§£å†³â€ï¼Œæœ€ç»ˆå¯¼è‡´é—®é¢˜é›†ä¸­çˆ†å‘</li></ul><p><strong>è§£å†³æ–¹æ¡ˆ</strong></p><ul><li>é¦–å…ˆå®šä¹‰schema [ è®¡åˆ’çš„æçº² ]ï¼Œå¹¶å®æ—¶è·Ÿè¸ªæœ€æ–°çš„APIï¼Œé™ä½é›†æˆé£é™©</li></ul><p><strong>Swagger</strong></p><ul><li>å·ç§°ä¸–ç•Œä¸Šæœ€æµè¡Œçš„APIæ¡†æ¶</li><li>Restful Api æ–‡æ¡£åœ¨çº¿è‡ªåŠ¨ç”Ÿæˆå™¨ =&gt; <strong>API æ–‡æ¡£ ä¸API å®šä¹‰åŒæ­¥æ›´æ–°</strong></li><li>ç›´æ¥è¿è¡Œï¼Œåœ¨çº¿æµ‹è¯•API</li><li>æ”¯æŒå¤šç§è¯­è¨€ ï¼ˆå¦‚ï¼šJavaï¼ŒPHPç­‰ï¼‰</li><li>å®˜ç½‘ï¼š<a href="https://swagger.io/" target="_blank" rel="noopener">https://swagger.io/</a></li></ul><h3 id="14-2ã€SpringBooté›†æˆSwagger"><a href="#14-2ã€SpringBooté›†æˆSwagger" class="headerlink" title="14.2ã€SpringBooté›†æˆSwagger"></a>14.2ã€SpringBooté›†æˆSwagger</h3><p><strong>SpringBooté›†æˆSwagger</strong> =&gt; <strong>springfox</strong>ï¼Œä¸¤ä¸ªjaråŒ…</p><ul><li><strong>Springfox-swagger2</strong></li><li>swagger-springmvc</li></ul><p><strong>ä½¿ç”¨Swagger</strong></p><p>è¦æ±‚ï¼šjdk 1.8 + å¦åˆ™swagger2æ— æ³•è¿è¡Œ</p><p>æ­¥éª¤ï¼š</p><p>1ã€æ–°å»ºä¸€ä¸ªSpringBoot-webé¡¹ç›®</p><p>2ã€æ·»åŠ Mavenä¾èµ–</p><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- https://mvnrepository.com/artifact/io.springfox/springfox-swagger2 --&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>   <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>io.springfox<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>   <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>springfox-swagger2<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>   <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.9.2<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><span class="hljs-comment">&lt;!-- https://mvnrepository.com/artifact/io.springfox/springfox-swagger-ui --&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>   <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>io.springfox<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>   <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>springfox-swagger-ui<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>   <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.9.2<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span></code></pre><p>3ã€ç¼–å†™HelloControllerï¼Œæµ‹è¯•ç¡®ä¿è¿è¡ŒæˆåŠŸï¼</p><p>4ã€è¦ä½¿ç”¨Swaggerï¼Œæˆ‘ä»¬éœ€è¦ç¼–å†™ä¸€ä¸ªé…ç½®ç±»-SwaggerConfigæ¥é…ç½® Swagger</p><pre><code class="hljs java"><span class="hljs-meta">@Configuration</span> <span class="hljs-comment">//é…ç½®ç±»</span><span class="hljs-meta">@EnableSwagger</span>2<span class="hljs-comment">// å¼€å¯Swagger2çš„è‡ªåŠ¨é…ç½®</span><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SwaggerConfig</span> </span>{  }j</code></pre><p>5ã€è®¿é—®æµ‹è¯• ï¼š<a href="http://localhost:8080/swagger-ui.html" target="_blank" rel="noopener">http://localhost:8080/swagger-ui.html</a> ï¼Œå¯ä»¥çœ‹åˆ°swaggerçš„ç•Œé¢ï¼›</p><p><img src="https://img2020.cnblogs.com/blog/1905053/202004/1905053-20200412225423594-1396861605.png" srcset="/blog/img/loading.gif" alt="img"></p><h3 id="14-3ã€é…ç½®Swagger"><a href="#14-3ã€é…ç½®Swagger" class="headerlink" title="14.3ã€é…ç½®Swagger"></a>14.3ã€é…ç½®Swagger</h3><p>1ã€Swaggerå®ä¾‹Beanæ˜¯Docketï¼Œæ‰€ä»¥é€šè¿‡é…ç½®Docketå®ä¾‹æ¥é…ç½®Swagggerã€‚</p><pre><code class="hljs java"><span class="hljs-meta">@Bean</span> <span class="hljs-comment">//é…ç½®docketä»¥é…ç½®Swaggerå…·ä½“å‚æ•°</span><span class="hljs-function"><span class="hljs-keyword">public</span> Docket <span class="hljs-title">docket</span><span class="hljs-params">()</span> </span>{   <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Docket(DocumentationType.SWAGGER_2);}</code></pre><p>2ã€å¯ä»¥é€šè¿‡apiInfo()å±æ€§é…ç½®æ–‡æ¡£ä¿¡æ¯</p><pre><code class="hljs java"><span class="hljs-comment">//é…ç½®æ–‡æ¡£ä¿¡æ¯</span><span class="hljs-function"><span class="hljs-keyword">private</span> ApiInfo <span class="hljs-title">apiInfo</span><span class="hljs-params">()</span> </span>{   Contact contact = <span class="hljs-keyword">new</span> Contact(<span class="hljs-string">"è”ç³»äººåå­—"</span>, <span class="hljs-string">"http://xxx.xxx.com/è”ç³»äººè®¿é—®é“¾æ¥"</span>, <span class="hljs-string">"è”ç³»äººé‚®ç®±"</span>);   <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> ApiInfo(           <span class="hljs-string">"Swaggerå­¦ä¹ "</span>, <span class="hljs-comment">// æ ‡é¢˜</span>           <span class="hljs-string">"å­¦ä¹ æ¼”ç¤ºå¦‚ä½•é…ç½®Swagger"</span>, <span class="hljs-comment">// æè¿°</span>           <span class="hljs-string">"v1.0"</span>, <span class="hljs-comment">// ç‰ˆæœ¬</span>           <span class="hljs-string">"http://terms.service.url/ç»„ç»‡é“¾æ¥"</span>, <span class="hljs-comment">// ç»„ç»‡é“¾æ¥</span>           contact, <span class="hljs-comment">// è”ç³»äººä¿¡æ¯</span>           <span class="hljs-string">"Apach 2.0 è®¸å¯"</span>, <span class="hljs-comment">// è®¸å¯</span>           <span class="hljs-string">"è®¸å¯é“¾æ¥"</span>, <span class="hljs-comment">// è®¸å¯è¿æ¥</span>           <span class="hljs-keyword">new</span> ArrayList&lt;&gt;()<span class="hljs-comment">// æ‰©å±•</span>  );}</code></pre><p>3ã€Docket å®ä¾‹å…³è”ä¸Š apiInfo()</p><pre><code class="hljs java"><span class="hljs-meta">@Bean</span><span class="hljs-function"><span class="hljs-keyword">public</span> Docket <span class="hljs-title">docket</span><span class="hljs-params">()</span> </span>{   <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Docket(DocumentationType.SWAGGER_2).apiInfo(apiInfo());}</code></pre><p>4ã€é‡å¯é¡¹ç›®ï¼Œè®¿é—®æµ‹è¯• <a href="http://localhost:8080/swagger-ui.html" target="_blank" rel="noopener">http://localhost:8080/swagger-ui.html</a> çœ‹ä¸‹æ•ˆæœï¼›</p><h3 id="14-4ã€é…ç½®æ‰«ææ¥å£"><a href="#14-4ã€é…ç½®æ‰«ææ¥å£" class="headerlink" title="14.4ã€é…ç½®æ‰«ææ¥å£"></a>14.4ã€é…ç½®æ‰«ææ¥å£</h3><p>1ã€æ„å»ºDocketæ—¶é€šè¿‡select()æ–¹æ³•é…ç½®æ€ä¹ˆæ‰«ææ¥å£ã€‚</p><pre><code class="hljs java">any() <span class="hljs-comment">// æ‰«ææ‰€æœ‰ï¼Œé¡¹ç›®ä¸­çš„æ‰€æœ‰æ¥å£éƒ½ä¼šè¢«æ‰«æåˆ°</span>none() <span class="hljs-comment">// ä¸æ‰«ææ¥å£</span><span class="hljs-comment">// é€šè¿‡æ–¹æ³•ä¸Šçš„æ³¨è§£æ‰«æï¼Œå¦‚withMethodAnnotation(GetMapping.class)åªæ‰«ægetè¯·æ±‚</span>withMethodAnnotation(<span class="hljs-keyword">final</span> Class&lt;? extends Annotation&gt; annotation)<span class="hljs-comment">// é€šè¿‡ç±»ä¸Šçš„æ³¨è§£æ‰«æï¼Œå¦‚.withClassAnnotation(Controller.class)åªæ‰«ææœ‰controlleræ³¨è§£çš„ç±»ä¸­çš„æ¥å£</span>withClassAnnotation(<span class="hljs-keyword">final</span> Class&lt;? extends Annotation&gt; annotation)basePackage(<span class="hljs-keyword">final</span> String basePackage) <span class="hljs-comment">// æ ¹æ®åŒ…è·¯å¾„æ‰«ææ¥å£</span></code></pre><p>2ã€é‡å¯é¡¹ç›®æµ‹è¯•ï¼Œç”±äºæˆ‘ä»¬é…ç½®æ ¹æ®åŒ…çš„è·¯å¾„æ‰«ææ¥å£ï¼Œæ‰€ä»¥æˆ‘ä»¬åªèƒ½çœ‹åˆ°ä¸€ä¸ªç±»</p><p>3ã€é™¤äº†é€šè¿‡åŒ…è·¯å¾„é…ç½®æ‰«ææ¥å£å¤–ï¼Œè¿˜å¯ä»¥é€šè¿‡é…ç½®å…¶ä»–æ–¹å¼æ‰«ææ¥å£ï¼Œè¿™é‡Œæ³¨é‡Šä¸€ä¸‹æ‰€æœ‰çš„é…ç½®æ–¹å¼ï¼š</p><pre><code class="hljs java">any() <span class="hljs-comment">// æ‰«ææ‰€æœ‰ï¼Œé¡¹ç›®ä¸­çš„æ‰€æœ‰æ¥å£éƒ½ä¼šè¢«æ‰«æåˆ°</span>none() <span class="hljs-comment">// ä¸æ‰«ææ¥å£</span><span class="hljs-comment">// é€šè¿‡æ–¹æ³•ä¸Šçš„æ³¨è§£æ‰«æï¼Œå¦‚withMethodAnnotation(GetMapping.class)åªæ‰«ægetè¯·æ±‚</span>withMethodAnnotation(<span class="hljs-keyword">final</span> Class&lt;? extends Annotation&gt; annotation)<span class="hljs-comment">// é€šè¿‡ç±»ä¸Šçš„æ³¨è§£æ‰«æï¼Œå¦‚.withClassAnnotation(Controller.class)åªæ‰«ææœ‰controlleræ³¨è§£çš„ç±»ä¸­çš„æ¥å£</span>withClassAnnotation(<span class="hljs-keyword">final</span> Class&lt;? extends Annotation&gt; annotation)basePackage(<span class="hljs-keyword">final</span> String basePackage) <span class="hljs-comment">// æ ¹æ®åŒ…è·¯å¾„æ‰«ææ¥å£</span></code></pre><p>4ã€é™¤æ­¤ä¹‹å¤–ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥é…ç½®æ¥å£æ‰«æè¿‡æ»¤ï¼š</p><pre><code class="hljs java"><span class="hljs-meta">@Bean</span><span class="hljs-function"><span class="hljs-keyword">public</span> Docket <span class="hljs-title">docket</span><span class="hljs-params">()</span> </span>{   <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Docket(DocumentationType.SWAGGER_2)      .apiInfo(apiInfo())      .select()<span class="hljs-comment">// é€šè¿‡.select()æ–¹æ³•ï¼Œå»é…ç½®æ‰«ææ¥å£,RequestHandlerSelectorsé…ç½®å¦‚ä½•æ‰«ææ¥å£</span>      .apis(RequestHandlerSelectors.basePackage(<span class="hljs-string">"com.kuang.swagger.controller"</span>))       <span class="hljs-comment">// é…ç½®å¦‚ä½•é€šè¿‡pathè¿‡æ»¤,å³è¿™é‡Œåªæ‰«æè¯·æ±‚ä»¥/kuangå¼€å¤´çš„æ¥å£</span>      .paths(PathSelectors.ant(<span class="hljs-string">"/kuang/**"</span>))      .build();}</code></pre><p>5ã€è¿™é‡Œçš„å¯é€‰å€¼è¿˜æœ‰</p><pre><code class="hljs java">any() <span class="hljs-comment">// ä»»ä½•è¯·æ±‚éƒ½æ‰«æ</span>none() <span class="hljs-comment">// ä»»ä½•è¯·æ±‚éƒ½ä¸æ‰«æ</span>regex(<span class="hljs-keyword">final</span> String pathRegex) <span class="hljs-comment">// é€šè¿‡æ­£åˆ™è¡¨è¾¾å¼æ§åˆ¶</span>ant(<span class="hljs-keyword">final</span> String antPattern) <span class="hljs-comment">// é€šè¿‡ant()æ§åˆ¶</span></code></pre><p><img src="https://img2020.cnblogs.com/blog/1905053/202004/1905053-20200412225444394-644044214.png" srcset="/blog/img/loading.gif" alt="img"></p><h3 id="14-5ã€é…ç½®Swaggerå¼€å…³"><a href="#14-5ã€é…ç½®Swaggerå¼€å…³" class="headerlink" title="14.5ã€é…ç½®Swaggerå¼€å…³"></a>14.5ã€é…ç½®Swaggerå¼€å…³</h3><p>1ã€é€šè¿‡enable()æ–¹æ³•é…ç½®æ˜¯å¦å¯ç”¨swaggerï¼Œå¦‚æœæ˜¯falseï¼Œswaggerå°†ä¸èƒ½åœ¨æµè§ˆå™¨ä¸­è®¿é—®äº†</p><pre><code class="hljs java"><span class="hljs-meta">@Bean</span><span class="hljs-function"><span class="hljs-keyword">public</span> Docket <span class="hljs-title">docket</span><span class="hljs-params">()</span> </span>{   <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Docket(DocumentationType.SWAGGER_2)      .apiInfo(apiInfo())      .enable(<span class="hljs-keyword">false</span>) <span class="hljs-comment">//é…ç½®æ˜¯å¦å¯ç”¨Swaggerï¼Œå¦‚æœæ˜¯falseï¼Œåœ¨æµè§ˆå™¨å°†æ— æ³•è®¿é—®</span>      .select()<span class="hljs-comment">// é€šè¿‡.select()æ–¹æ³•ï¼Œå»é…ç½®æ‰«ææ¥å£,RequestHandlerSelectorsé…ç½®å¦‚ä½•æ‰«ææ¥å£</span>      .apis(RequestHandlerSelectors.basePackage(<span class="hljs-string">"com.kuang.swagger.controller"</span>))       <span class="hljs-comment">// é…ç½®å¦‚ä½•é€šè¿‡pathè¿‡æ»¤,å³è¿™é‡Œåªæ‰«æè¯·æ±‚ä»¥/kuangå¼€å¤´çš„æ¥å£</span>      .paths(PathSelectors.ant(<span class="hljs-string">"/kuang/**"</span>))      .build();}</code></pre><p>2ã€å¦‚ä½•åŠ¨æ€é…ç½®å½“é¡¹ç›®å¤„äºtestã€devç¯å¢ƒæ—¶æ˜¾ç¤ºswaggerï¼Œå¤„äºprodæ—¶ä¸æ˜¾ç¤ºï¼Ÿ</p><pre><code class="hljs java"><span class="hljs-meta">@Bean</span><span class="hljs-function"><span class="hljs-keyword">public</span> Docket <span class="hljs-title">docket</span><span class="hljs-params">(Environment environment)</span> </span>{   <span class="hljs-comment">// è®¾ç½®è¦æ˜¾ç¤ºswaggerçš„ç¯å¢ƒ</span>   Profiles of = Profiles.of(<span class="hljs-string">"dev"</span>, <span class="hljs-string">"test"</span>);   <span class="hljs-comment">// åˆ¤æ–­å½“å‰æ˜¯å¦å¤„äºè¯¥ç¯å¢ƒ</span>   <span class="hljs-comment">// é€šè¿‡ enable() æ¥æ”¶æ­¤å‚æ•°åˆ¤æ–­æ˜¯å¦è¦æ˜¾ç¤º</span>   <span class="hljs-keyword">boolean</span> b = environment.acceptsProfiles(of);      <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Docket(DocumentationType.SWAGGER_2)      .apiInfo(apiInfo())      .enable(b) <span class="hljs-comment">//é…ç½®æ˜¯å¦å¯ç”¨Swaggerï¼Œå¦‚æœæ˜¯falseï¼Œåœ¨æµè§ˆå™¨å°†æ— æ³•è®¿é—®</span>      .select()<span class="hljs-comment">// é€šè¿‡.select()æ–¹æ³•ï¼Œå»é…ç½®æ‰«ææ¥å£,RequestHandlerSelectorsé…ç½®å¦‚ä½•æ‰«ææ¥å£</span>      .apis(RequestHandlerSelectors.basePackage(<span class="hljs-string">"com.kuang.swagger.controller"</span>))       <span class="hljs-comment">// é…ç½®å¦‚ä½•é€šè¿‡pathè¿‡æ»¤,å³è¿™é‡Œåªæ‰«æè¯·æ±‚ä»¥/kuangå¼€å¤´çš„æ¥å£</span>      .paths(PathSelectors.ant(<span class="hljs-string">"/kuang/**"</span>))      .build();}</code></pre><p>3ã€å¯ä»¥åœ¨é¡¹ç›®ä¸­å¢åŠ ä¸€ä¸ªdevçš„é…ç½®æ–‡ä»¶æŸ¥çœ‹æ•ˆæœï¼</p><p><img src="https://img2020.cnblogs.com/blog/1905053/202004/1905053-20200412225500625-350010165.png" srcset="/blog/img/loading.gif" alt="img"></p><h3 id="14-6ã€é…ç½®APIåˆ†ç»„"><a href="#14-6ã€é…ç½®APIåˆ†ç»„" class="headerlink" title="14.6ã€é…ç½®APIåˆ†ç»„"></a>14.6ã€é…ç½®APIåˆ†ç»„</h3><p><img src="https://img2020.cnblogs.com/blog/1905053/202004/1905053-20200412225514634-1503893280.png" srcset="/blog/img/loading.gif" alt="img"></p><p>1ã€å¦‚æœæ²¡æœ‰é…ç½®åˆ†ç»„ï¼Œé»˜è®¤æ˜¯defaultã€‚é€šè¿‡groupName()æ–¹æ³•å³å¯é…ç½®åˆ†ç»„ï¼š</p><pre><code class="hljs java"><span class="hljs-meta">@Bean</span><span class="hljs-function"><span class="hljs-keyword">public</span> Docket <span class="hljs-title">docket</span><span class="hljs-params">(Environment environment)</span> </span>{   <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Docket(DocumentationType.SWAGGER_2).apiInfo(apiInfo())      .groupName(<span class="hljs-string">"hello"</span>) <span class="hljs-comment">// é…ç½®åˆ†ç»„</span>       <span class="hljs-comment">// çœç•¥é…ç½®....</span>}</code></pre><p>2ã€é‡å¯é¡¹ç›®æŸ¥çœ‹åˆ†ç»„</p><p>3ã€å¦‚ä½•é…ç½®å¤šä¸ªåˆ†ç»„ï¼Ÿé…ç½®å¤šä¸ªåˆ†ç»„åªéœ€è¦é…ç½®å¤šä¸ªdocketå³å¯ï¼š</p><pre><code class="hljs java"><span class="hljs-meta">@Bean</span><span class="hljs-function"><span class="hljs-keyword">public</span> Docket <span class="hljs-title">docket1</span><span class="hljs-params">()</span></span>{   <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Docket(DocumentationType.SWAGGER_2).groupName(<span class="hljs-string">"group1"</span>);}<span class="hljs-meta">@Bean</span><span class="hljs-function"><span class="hljs-keyword">public</span> Docket <span class="hljs-title">docket2</span><span class="hljs-params">()</span></span>{   <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Docket(DocumentationType.SWAGGER_2).groupName(<span class="hljs-string">"group2"</span>);}<span class="hljs-meta">@Bean</span><span class="hljs-function"><span class="hljs-keyword">public</span> Docket <span class="hljs-title">docket3</span><span class="hljs-params">()</span></span>{   <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Docket(DocumentationType.SWAGGER_2).groupName(<span class="hljs-string">"group3"</span>);}</code></pre><p>4ã€é‡å¯é¡¹ç›®æŸ¥çœ‹å³å¯</p><h3 id="14-7ã€å®ä½“é…ç½®"><a href="#14-7ã€å®ä½“é…ç½®" class="headerlink" title="14.7ã€å®ä½“é…ç½®"></a>14.7ã€å®ä½“é…ç½®</h3><p>1ã€æ–°å»ºä¸€ä¸ªå®ä½“ç±»</p><pre><code class="hljs java"><span class="hljs-meta">@ApiModel</span>(<span class="hljs-string">"ç”¨æˆ·å®ä½“"</span>)<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">User</span> </span>{   <span class="hljs-meta">@ApiModelProperty</span>(<span class="hljs-string">"ç”¨æˆ·å"</span>)   <span class="hljs-keyword">public</span> String username;   <span class="hljs-meta">@ApiModelProperty</span>(<span class="hljs-string">"å¯†ç "</span>)   <span class="hljs-keyword">public</span> String password;}</code></pre><p>2ã€åªè¦è¿™ä¸ªå®ä½“åœ¨<strong>è¯·æ±‚æ¥å£</strong>çš„è¿”å›å€¼ä¸Šï¼ˆå³ä½¿æ˜¯æ³›å‹ï¼‰ï¼Œéƒ½èƒ½æ˜ å°„åˆ°å®ä½“é¡¹ä¸­ï¼š</p><pre><code class="hljs java"><span class="hljs-meta">@RequestMapping</span>(<span class="hljs-string">"/getUser"</span>)<span class="hljs-function"><span class="hljs-keyword">public</span> User <span class="hljs-title">getUser</span><span class="hljs-params">()</span></span>{   <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> User();}</code></pre><p>3ã€é‡å¯æŸ¥çœ‹æµ‹è¯•</p><p><img src="https://img2020.cnblogs.com/blog/1905053/202004/1905053-20200412225529234-1972244754.png" srcset="/blog/img/loading.gif" alt="img"></p><p>æ³¨ï¼šå¹¶ä¸æ˜¯å› ä¸º@ApiModelè¿™ä¸ªæ³¨è§£è®©å®ä½“æ˜¾ç¤ºåœ¨è¿™é‡Œäº†ï¼Œè€Œæ˜¯åªè¦å‡ºç°åœ¨æ¥å£æ–¹æ³•çš„è¿”å›å€¼ä¸Šçš„å®ä½“éƒ½ä¼šæ˜¾ç¤ºåœ¨è¿™é‡Œï¼Œè€Œ@ApiModelå’Œ@ApiModelPropertyè¿™ä¸¤ä¸ªæ³¨è§£åªæ˜¯ä¸ºå®ä½“æ·»åŠ æ³¨é‡Šçš„ã€‚</p><p>@ApiModelä¸ºç±»æ·»åŠ æ³¨é‡Š</p><p>@ApiModelPropertyä¸ºç±»å±æ€§æ·»åŠ æ³¨é‡Š</p><h3 id="14-8ã€å¸¸ç”¨æ³¨è§£"><a href="#14-8ã€å¸¸ç”¨æ³¨è§£" class="headerlink" title="14.8ã€å¸¸ç”¨æ³¨è§£"></a>14.8ã€å¸¸ç”¨æ³¨è§£</h3><p>Swaggerçš„æ‰€æœ‰æ³¨è§£å®šä¹‰åœ¨io.swagger.annotationsåŒ…ä¸‹</p><p>ä¸‹é¢åˆ—ä¸€äº›ç»å¸¸ç”¨åˆ°çš„ï¼Œæœªåˆ—ä¸¾å‡ºæ¥çš„å¯ä»¥å¦è¡ŒæŸ¥é˜…è¯´æ˜ï¼š</p><table><thead><tr><th>Swaggeræ³¨è§£</th><th>ç®€å•è¯´æ˜</th></tr></thead><tbody><tr><td>@Api(tags = â€œxxxæ¨¡å—è¯´æ˜â€)</td><td>ä½œç”¨åœ¨æ¨¡å—ç±»ä¸Š</td></tr><tr><td>@ApiOperation(â€œxxxæ¥å£è¯´æ˜â€)</td><td>ä½œç”¨åœ¨æ¥å£æ–¹æ³•ä¸Š</td></tr><tr><td>@ApiModel(â€œxxxPOJOè¯´æ˜â€)</td><td>ä½œç”¨åœ¨æ¨¡å‹ç±»ä¸Šï¼šå¦‚VOã€BO</td></tr><tr><td>@ApiModelProperty(value = â€œxxxå±æ€§è¯´æ˜â€,hidden = true)</td><td>ä½œç”¨åœ¨ç±»æ–¹æ³•å’Œå±æ€§ä¸Šï¼Œhiddenè®¾ç½®ä¸ºtrueå¯ä»¥éšè—è¯¥å±æ€§</td></tr><tr><td>@ApiParam(â€œxxxå‚æ•°è¯´æ˜â€)</td><td>ä½œç”¨åœ¨å‚æ•°ã€æ–¹æ³•å’Œå­—æ®µä¸Šï¼Œç±»ä¼¼@ApiModelProperty</td></tr></tbody></table><p>æˆ‘ä»¬ä¹Ÿå¯ä»¥ç»™è¯·æ±‚çš„æ¥å£é…ç½®ä¸€äº›æ³¨é‡Š</p><pre><code class="hljs java"><span class="hljs-meta">@ApiOperation</span>(<span class="hljs-string">"ç‹‚ç¥çš„æ¥å£"</span>)<span class="hljs-meta">@PostMapping</span>(<span class="hljs-string">"/kuang"</span>)<span class="hljs-meta">@ResponseBody</span><span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">kuang</span><span class="hljs-params">(@ApiParam(<span class="hljs-string">"è¿™ä¸ªåå­—ä¼šè¢«è¿”å›"</span>)</span>String username)</span>{   <span class="hljs-keyword">return</span> username;}</code></pre><p>è¿™æ ·çš„è¯ï¼Œå¯ä»¥ç»™ä¸€äº›æ¯”è¾ƒéš¾ç†è§£çš„å±æ€§æˆ–è€…æ¥å£ï¼Œå¢åŠ ä¸€äº›é…ç½®ä¿¡æ¯ï¼Œè®©äººæ›´å®¹æ˜“é˜…è¯»ï¼</p><p>ç›¸è¾ƒäºä¼ ç»Ÿçš„Postmanæˆ–Curlæ–¹å¼æµ‹è¯•æ¥å£ï¼Œä½¿ç”¨swaggerç®€ç›´å°±æ˜¯å‚»ç“œå¼æ“ä½œï¼Œä¸éœ€è¦é¢å¤–è¯´æ˜æ–‡æ¡£(å†™å¾—å¥½æœ¬èº«å°±æ˜¯æ–‡æ¡£)è€Œä¸”æ›´ä¸å®¹æ˜“å‡ºé”™ï¼Œåªéœ€è¦å½•å…¥æ•°æ®ç„¶åç‚¹å‡»Executeï¼Œå¦‚æœå†é…åˆè‡ªåŠ¨åŒ–æ¡†æ¶ï¼Œå¯ä»¥è¯´åŸºæœ¬å°±ä¸éœ€è¦äººä¸ºæ“ä½œäº†ã€‚</p><p>Swaggeræ˜¯ä¸ªä¼˜ç§€çš„å·¥å…·ï¼Œç°åœ¨å›½å†…å·²ç»æœ‰å¾ˆå¤šçš„ä¸­å°å‹äº’è”ç½‘å…¬å¸éƒ½åœ¨ä½¿ç”¨å®ƒï¼Œç›¸è¾ƒäºä¼ ç»Ÿçš„è¦å…ˆå‡ºWordæ¥å£æ–‡æ¡£å†æµ‹è¯•çš„æ–¹å¼ï¼Œæ˜¾ç„¶è¿™æ ·ä¹Ÿæ›´ç¬¦åˆç°åœ¨çš„å¿«é€Ÿè¿­ä»£å¼€å‘è¡Œæƒ…ã€‚å½“ç„¶äº†ï¼Œæé†’ä¸‹å¤§å®¶åœ¨æ­£å¼ç¯å¢ƒè¦è®°å¾—å…³é—­Swaggerï¼Œä¸€æ¥å‡ºäºå®‰å…¨è€ƒè™‘äºŒæ¥ä¹Ÿå¯ä»¥èŠ‚çœè¿è¡Œæ—¶å†…å­˜ã€‚</p><h3 id="14-9ã€æ‹“å±•ï¼šå…¶ä»–çš®è‚¤"><a href="#14-9ã€æ‹“å±•ï¼šå…¶ä»–çš®è‚¤" class="headerlink" title="14.9ã€æ‹“å±•ï¼šå…¶ä»–çš®è‚¤"></a>14.9ã€æ‹“å±•ï¼šå…¶ä»–çš®è‚¤</h3><p>æˆ‘ä»¬å¯ä»¥å¯¼å…¥ä¸åŒçš„åŒ…å®ç°ä¸åŒçš„çš®è‚¤å®šä¹‰ï¼š</p><p>1ã€é»˜è®¤çš„ <strong>è®¿é—® <a href="http://localhost:8080/swagger-ui.html" target="_blank" rel="noopener">http://localhost:8080/swagger-ui.html</a></strong></p><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>io.springfox<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>   <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>springfox-swagger-ui<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>   <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.9.2<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span></code></pre><p><img src="https://img2020.cnblogs.com/blog/1905053/202004/1905053-20200412225545785-2143727145.png" srcset="/blog/img/loading.gif" alt="img"></p><p>2ã€bootstrap-ui <strong>è®¿é—® <a href="http://localhost:8080/doc.html" target="_blank" rel="noopener">http://localhost:8080/doc.html</a></strong></p><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- å¼•å…¥swagger-bootstrap-uiåŒ… /doc.html--&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>   <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.github.xiaoymin<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>   <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>swagger-bootstrap-ui<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>   <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.9.1<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span></code></pre><p><img src="https://img2020.cnblogs.com/blog/1905053/202004/1905053-20200412225558425-1483910.png" srcset="/blog/img/loading.gif" alt="img"></p><p>3ã€Layui-ui <strong>è®¿é—® <a href="http://localhost:8080/docs.html" target="_blank" rel="noopener">http://localhost:8080/docs.html</a></strong></p><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- å¼•å…¥swagger-ui-layeråŒ… /docs.html--&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>   <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.github.caspar-chen<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>   <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>swagger-ui-layer<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>   <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.1.3<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span></code></pre><p><img src="https://img2020.cnblogs.com/blog/1905053/202004/1905053-20200412225610315-997693293.png" srcset="/blog/img/loading.gif" alt="img"></p><p>4ã€mg-ui <strong>è®¿é—® <a href="http://localhost:8080/document.html" target="_blank" rel="noopener">http://localhost:8080/document.html</a></strong></p><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- å¼•å…¥swagger-ui-layeråŒ… /document.html--&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>   <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.zyplayer<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>   <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>swagger-mg-ui<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>   <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.0.6<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span></code></pre><p><img src="https://img2020.cnblogs.com/blog/1905053/202004/1905053-20200412225623225-1419329566.png" srcset="/blog/img/loading.gif" alt="img"></p><h1 id="15ã€SpringBootï¼šå¼‚æ­¥ã€å®šæ—¶ã€é‚®ä»¶ä»»åŠ¡"><a href="#15ã€SpringBootï¼šå¼‚æ­¥ã€å®šæ—¶ã€é‚®ä»¶ä»»åŠ¡" class="headerlink" title="15ã€SpringBootï¼šå¼‚æ­¥ã€å®šæ—¶ã€é‚®ä»¶ä»»åŠ¡"></a>15ã€SpringBootï¼šå¼‚æ­¥ã€å®šæ—¶ã€é‚®ä»¶ä»»åŠ¡</h1><p>å‰è¨€</p><blockquote><p>åœ¨æˆ‘ä»¬çš„å·¥ä½œä¸­ï¼Œå¸¸å¸¸ä¼šç”¨åˆ°å¼‚æ­¥å¤„ç†ä»»åŠ¡ï¼Œæ¯”å¦‚æˆ‘ä»¬åœ¨ç½‘ç«™ä¸Šå‘é€é‚®ä»¶ï¼Œåå°ä¼šå»å‘é€é‚®ä»¶ï¼Œæ­¤æ—¶å‰å°ä¼šé€ æˆå“åº”ä¸åŠ¨ï¼Œç›´åˆ°é‚®ä»¶å‘é€å®Œæ¯•ï¼Œå“åº”æ‰ä¼šæˆåŠŸï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸€èˆ¬ä¼šé‡‡ç”¨å¤šçº¿ç¨‹çš„æ–¹å¼å»å¤„ç†è¿™äº›ä»»åŠ¡ã€‚è¿˜æœ‰ä¸€äº›å®šæ—¶ä»»åŠ¡ï¼Œæ¯”å¦‚éœ€è¦åœ¨æ¯å¤©å‡Œæ™¨çš„æ—¶å€™ï¼Œåˆ†æä¸€æ¬¡å‰ä¸€å¤©çš„æ—¥å¿—ä¿¡æ¯ã€‚è¿˜æœ‰å°±æ˜¯é‚®ä»¶çš„å‘é€ï¼Œå¾®ä¿¡çš„å‰èº«ä¹Ÿæ˜¯é‚®ä»¶æœåŠ¡å‘¢ï¼Ÿè¿™äº›ä¸œè¥¿éƒ½æ˜¯æ€ä¹ˆå®ç°çš„å‘¢ï¼Ÿå…¶å®SpringBootéƒ½ç»™æˆ‘ä»¬æä¾›äº†å¯¹åº”çš„æ”¯æŒï¼Œæˆ‘ä»¬ä¸Šæ‰‹ä½¿ç”¨ååˆ†çš„ç®€å•ï¼Œåªéœ€è¦å¼€å¯ä¸€äº›æ³¨è§£æ”¯æŒï¼Œé…ç½®ä¸€äº›é…ç½®æ–‡ä»¶å³å¯ï¼é‚£æˆ‘ä»¬æ¥çœ‹çœ‹å§~</p><p>æœ€åç¼–è¾‘äº2020.3.26 ä½œè€…ï¼šç‹‚ç¥è¯´</p></blockquote><h2 id="15-1ã€å¼‚æ­¥ä»»åŠ¡"><a href="#15-1ã€å¼‚æ­¥ä»»åŠ¡" class="headerlink" title="15.1ã€å¼‚æ­¥ä»»åŠ¡"></a>15.1ã€å¼‚æ­¥ä»»åŠ¡</h2><p>1ã€åˆ›å»ºä¸€ä¸ªserviceåŒ…</p><p>2ã€åˆ›å»ºä¸€ä¸ªç±»AsyncService</p><p>å¼‚æ­¥å¤„ç†è¿˜æ˜¯éå¸¸å¸¸ç”¨çš„ï¼Œæ¯”å¦‚æˆ‘ä»¬åœ¨ç½‘ç«™ä¸Šå‘é€é‚®ä»¶ï¼Œåå°ä¼šå»å‘é€é‚®ä»¶ï¼Œæ­¤æ—¶å‰å°ä¼šé€ æˆå“åº”ä¸åŠ¨ï¼Œç›´åˆ°é‚®ä»¶å‘é€å®Œæ¯•ï¼Œå“åº”æ‰ä¼šæˆåŠŸï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸€èˆ¬ä¼šé‡‡ç”¨å¤šçº¿ç¨‹çš„æ–¹å¼å»å¤„ç†è¿™äº›ä»»åŠ¡ã€‚</p><p>ç¼–å†™æ–¹æ³•ï¼Œå‡è£…æ­£åœ¨å¤„ç†æ•°æ®ï¼Œä½¿ç”¨çº¿ç¨‹è®¾ç½®ä¸€äº›å»¶æ—¶ï¼Œæ¨¡æ‹ŸåŒæ­¥ç­‰å¾…çš„æƒ…å†µï¼›</p><pre><code class="hljs java"><span class="hljs-meta">@Service</span><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">AsyncService</span> </span>{   <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">hello</span><span class="hljs-params">()</span></span>{       <span class="hljs-keyword">try</span> {           Thread.sleep(<span class="hljs-number">3000</span>);      } <span class="hljs-keyword">catch</span> (InterruptedException e) {           e.printStackTrace();      }       System.out.println(<span class="hljs-string">"ä¸šåŠ¡è¿›è¡Œä¸­...."</span>);  }}</code></pre><p>3ã€ç¼–å†™controlleråŒ…</p><p>4ã€ç¼–å†™AsyncControllerç±»</p><p>æˆ‘ä»¬å»å†™ä¸€ä¸ªControlleræµ‹è¯•ä¸€ä¸‹</p><pre><code class="hljs java"><span class="hljs-meta">@RestController</span><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">AsyncController</span> </span>{   <span class="hljs-meta">@Autowired</span>   AsyncService asyncService;   <span class="hljs-meta">@GetMapping</span>(<span class="hljs-string">"/hello"</span>)   <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">hello</span><span class="hljs-params">()</span></span>{       asyncService.hello();       <span class="hljs-keyword">return</span> <span class="hljs-string">"success"</span>;  }}</code></pre><p>5ã€è®¿é—®<a href="http://localhost:8080/helloè¿›è¡Œæµ‹è¯•ï¼Œ3ç§’åå‡ºç°successï¼Œè¿™æ˜¯åŒæ­¥ç­‰å¾…çš„æƒ…å†µã€‚" target="_blank" rel="noopener">http://localhost:8080/helloè¿›è¡Œæµ‹è¯•ï¼Œ3ç§’åå‡ºç°successï¼Œè¿™æ˜¯åŒæ­¥ç­‰å¾…çš„æƒ…å†µã€‚</a></p><p>é—®é¢˜ï¼šæˆ‘ä»¬å¦‚æœæƒ³è®©ç”¨æˆ·ç›´æ¥å¾—åˆ°æ¶ˆæ¯ï¼Œå°±åœ¨åå°ä½¿ç”¨å¤šçº¿ç¨‹çš„æ–¹å¼è¿›è¡Œå¤„ç†å³å¯ï¼Œä½†æ˜¯æ¯æ¬¡éƒ½éœ€è¦è‡ªå·±æ‰‹åŠ¨å»ç¼–å†™å¤šçº¿ç¨‹çš„å®ç°çš„è¯ï¼Œå¤ªéº»çƒ¦äº†ï¼Œæˆ‘ä»¬åªéœ€è¦ç”¨ä¸€ä¸ªç®€å•çš„åŠæ³•ï¼Œåœ¨æˆ‘ä»¬çš„æ–¹æ³•ä¸ŠåŠ ä¸€ä¸ªç®€å•çš„æ³¨è§£å³å¯ï¼Œå¦‚ä¸‹ï¼š</p><p>6ã€ç»™helloæ–¹æ³•æ·»åŠ @Asyncæ³¨è§£ï¼›</p><pre><code class="hljs java"><span class="hljs-comment">//å‘Šè¯‰Springè¿™æ˜¯ä¸€ä¸ªå¼‚æ­¥æ–¹æ³•</span><span class="hljs-meta">@Async</span><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">hello</span><span class="hljs-params">()</span></span>{   <span class="hljs-keyword">try</span> {       Thread.sleep(<span class="hljs-number">3000</span>);  } <span class="hljs-keyword">catch</span> (InterruptedException e) {       e.printStackTrace();  }   System.out.println(<span class="hljs-string">"ä¸šåŠ¡è¿›è¡Œä¸­...."</span>);}</code></pre><p>SpringBootå°±ä¼šè‡ªå·±å¼€ä¸€ä¸ªçº¿ç¨‹æ± ï¼Œè¿›è¡Œè°ƒç”¨ï¼ä½†æ˜¯è¦è®©è¿™ä¸ªæ³¨è§£ç”Ÿæ•ˆï¼Œæˆ‘ä»¬è¿˜éœ€è¦åœ¨ä¸»ç¨‹åºä¸Šæ·»åŠ ä¸€ä¸ªæ³¨è§£@EnableAsync ï¼Œå¼€å¯å¼‚æ­¥æ³¨è§£åŠŸèƒ½ï¼›</p><pre><code class="hljs java"><span class="hljs-meta">@EnableAsync</span> <span class="hljs-comment">//å¼€å¯å¼‚æ­¥æ³¨è§£åŠŸèƒ½</span><span class="hljs-meta">@SpringBootApplication</span><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SpringbootTaskApplication</span> </span>{   <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>{       SpringApplication.run(SpringbootTaskApplication<span class="hljs-class">.<span class="hljs-keyword">class</span>, <span class="hljs-title">args</span>)</span>;  }}</code></pre><p>7ã€é‡å¯æµ‹è¯•ï¼Œç½‘é¡µç¬é—´å“åº”ï¼Œåå°ä»£ç ä¾æ—§æ‰§è¡Œï¼</p><h2 id="15-2ã€å®šæ—¶ä»»åŠ¡"><a href="#15-2ã€å®šæ—¶ä»»åŠ¡" class="headerlink" title="15.2ã€å®šæ—¶ä»»åŠ¡"></a>15.2ã€å®šæ—¶ä»»åŠ¡</h2><p>é¡¹ç›®å¼€å‘ä¸­ç»å¸¸éœ€è¦æ‰§è¡Œä¸€äº›å®šæ—¶ä»»åŠ¡ï¼Œæ¯”å¦‚éœ€è¦åœ¨æ¯å¤©å‡Œæ™¨çš„æ—¶å€™ï¼Œåˆ†æä¸€æ¬¡å‰ä¸€å¤©çš„æ—¥å¿—ä¿¡æ¯ï¼ŒSpringä¸ºæˆ‘ä»¬æä¾›äº†å¼‚æ­¥æ‰§è¡Œä»»åŠ¡è°ƒåº¦çš„æ–¹å¼ï¼Œæä¾›äº†ä¸¤ä¸ªæ¥å£ã€‚</p><ul><li>TaskExecutoræ¥å£</li><li>TaskScheduleræ¥å£</li></ul><p>ä¸¤ä¸ªæ³¨è§£ï¼š</p><ul><li>@EnableScheduling</li><li>@Scheduled</li></ul><p><strong>cronè¡¨è¾¾å¼ï¼š</strong></p><p><img src="https://img2020.cnblogs.com/blog/1905053/202004/1905053-20200412225641164-1934062088.png" srcset="/blog/img/loading.gif" alt="img"></p><p><img src="https://img2020.cnblogs.com/blog/1905053/202004/1905053-20200412225651289-251704533.png" srcset="/blog/img/loading.gif" alt="img"></p><p><strong>æµ‹è¯•æ­¥éª¤ï¼š</strong></p><p>1ã€åˆ›å»ºä¸€ä¸ªScheduledService</p><p>æˆ‘ä»¬é‡Œé¢å­˜åœ¨ä¸€ä¸ªhelloæ–¹æ³•ï¼Œä»–éœ€è¦å®šæ—¶æ‰§è¡Œï¼Œæ€ä¹ˆå¤„ç†å‘¢ï¼Ÿ</p><pre><code class="hljs java"><span class="hljs-meta">@Service</span><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ScheduledService</span> </span>{      <span class="hljs-comment">//ç§’   åˆ†   æ—¶     æ—¥   æœˆ   å‘¨å‡ </span>   <span class="hljs-comment">//0 * * * * MON-FRI</span>   <span class="hljs-comment">//æ³¨æ„cronè¡¨è¾¾å¼çš„ç”¨æ³•ï¼›</span>   <span class="hljs-meta">@Scheduled</span>(cron = <span class="hljs-string">"0 * * * * 0-7"</span>)   <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">hello</span><span class="hljs-params">()</span></span>{       System.out.println(<span class="hljs-string">"hello....."</span>);  }}</code></pre><p>2ã€è¿™é‡Œå†™å®Œå®šæ—¶ä»»åŠ¡ä¹‹åï¼Œæˆ‘ä»¬éœ€è¦åœ¨ä¸»ç¨‹åºä¸Šå¢åŠ @EnableScheduling å¼€å¯å®šæ—¶ä»»åŠ¡åŠŸèƒ½</p><pre><code class="hljs java"><span class="hljs-meta">@EnableAsync</span> <span class="hljs-comment">//å¼€å¯å¼‚æ­¥æ³¨è§£åŠŸèƒ½</span><span class="hljs-meta">@EnableScheduling</span> <span class="hljs-comment">//å¼€å¯åŸºäºæ³¨è§£çš„å®šæ—¶ä»»åŠ¡</span><span class="hljs-meta">@SpringBootApplication</span><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SpringbootTaskApplication</span> </span>{   <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>{       SpringApplication.run(SpringbootTaskApplication<span class="hljs-class">.<span class="hljs-keyword">class</span>, <span class="hljs-title">args</span>)</span>;  }}</code></pre><p>3ã€æˆ‘ä»¬æ¥è¯¦ç»†äº†è§£ä¸‹cronè¡¨è¾¾å¼ï¼›</p><p><a href="http://www.bejson.com/othertools/cron/" target="_blank" rel="noopener">http://www.bejson.com/othertools/cron/</a></p><p>4ã€å¸¸ç”¨çš„è¡¨è¾¾å¼</p><pre><code class="hljs angelscript"> (<span class="hljs-number">1</span>ï¼‰<span class="hljs-number">0</span>/<span class="hljs-number">2</span> * * * * ?   è¡¨ç¤ºæ¯<span class="hljs-number">2</span>ç§’ æ‰§è¡Œä»»åŠ¡ï¼ˆ<span class="hljs-number">1</span>ï¼‰<span class="hljs-number">0</span> <span class="hljs-number">0</span>/<span class="hljs-number">2</span> * * * ?   è¡¨ç¤ºæ¯<span class="hljs-number">2</span>åˆ†é’Ÿ æ‰§è¡Œä»»åŠ¡ï¼ˆ<span class="hljs-number">1</span>ï¼‰<span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">2</span> <span class="hljs-number">1</span> * ?   è¡¨ç¤ºåœ¨æ¯æœˆçš„<span class="hljs-number">1</span>æ—¥çš„å‡Œæ™¨<span class="hljs-number">2</span>ç‚¹è°ƒæ•´ä»»åŠ¡ï¼ˆ<span class="hljs-number">2</span>ï¼‰<span class="hljs-number">0</span> <span class="hljs-number">15</span> <span class="hljs-number">10</span> ? * MON-FRI   è¡¨ç¤ºå‘¨ä¸€åˆ°å‘¨äº”æ¯å¤©ä¸Šåˆ<span class="hljs-number">10</span>:<span class="hljs-number">15</span>æ‰§è¡Œä½œä¸šï¼ˆ<span class="hljs-number">3</span>ï¼‰<span class="hljs-number">0</span> <span class="hljs-number">15</span> <span class="hljs-number">10</span> ? <span class="hljs-number">6</span>L <span class="hljs-number">2002</span><span class="hljs-number">-2006</span>   è¡¨ç¤º<span class="hljs-number">2002</span><span class="hljs-number">-2006</span>å¹´çš„æ¯ä¸ªæœˆçš„æœ€åä¸€ä¸ªæ˜ŸæœŸäº”ä¸Šåˆ<span class="hljs-number">10</span>:<span class="hljs-number">15</span>æ‰§è¡Œä½œï¼ˆ<span class="hljs-number">4</span>ï¼‰<span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">10</span>,<span class="hljs-number">14</span>,<span class="hljs-number">16</span> * * ?   æ¯å¤©ä¸Šåˆ<span class="hljs-number">10</span>ç‚¹ï¼Œä¸‹åˆ<span class="hljs-number">2</span>ç‚¹ï¼Œ<span class="hljs-number">4</span>ç‚¹ï¼ˆ<span class="hljs-number">5</span>ï¼‰<span class="hljs-number">0</span> <span class="hljs-number">0</span>/<span class="hljs-number">30</span> <span class="hljs-number">9</span><span class="hljs-number">-17</span> * * ?   æœä¹æ™šäº”å·¥ä½œæ—¶é—´å†…æ¯åŠå°æ—¶ï¼ˆ<span class="hljs-number">6</span>ï¼‰<span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">12</span> ? * WED   è¡¨ç¤ºæ¯ä¸ªæ˜ŸæœŸä¸‰ä¸­åˆ<span class="hljs-number">12</span>ç‚¹ï¼ˆ<span class="hljs-number">7</span>ï¼‰<span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">12</span> * * ?   æ¯å¤©ä¸­åˆ<span class="hljs-number">12</span>ç‚¹è§¦å‘ï¼ˆ<span class="hljs-number">8</span>ï¼‰<span class="hljs-number">0</span> <span class="hljs-number">15</span> <span class="hljs-number">10</span> ? * *   æ¯å¤©ä¸Šåˆ<span class="hljs-number">10</span>:<span class="hljs-number">15</span>è§¦å‘ï¼ˆ<span class="hljs-number">9</span>ï¼‰<span class="hljs-number">0</span> <span class="hljs-number">15</span> <span class="hljs-number">10</span> * * ?     æ¯å¤©ä¸Šåˆ<span class="hljs-number">10</span>:<span class="hljs-number">15</span>è§¦å‘ï¼ˆ<span class="hljs-number">10</span>ï¼‰<span class="hljs-number">0</span> <span class="hljs-number">15</span> <span class="hljs-number">10</span> * * ?   æ¯å¤©ä¸Šåˆ<span class="hljs-number">10</span>:<span class="hljs-number">15</span>è§¦å‘ï¼ˆ<span class="hljs-number">11</span>ï¼‰<span class="hljs-number">0</span> <span class="hljs-number">15</span> <span class="hljs-number">10</span> * * ? <span class="hljs-number">2005</span>   <span class="hljs-number">2005</span>å¹´çš„æ¯å¤©ä¸Šåˆ<span class="hljs-number">10</span>:<span class="hljs-number">15</span>è§¦å‘ï¼ˆ<span class="hljs-number">12</span>ï¼‰<span class="hljs-number">0</span> * <span class="hljs-number">14</span> * * ?     åœ¨æ¯å¤©ä¸‹åˆ<span class="hljs-number">2</span>ç‚¹åˆ°ä¸‹åˆ<span class="hljs-number">2</span>:<span class="hljs-number">59</span>æœŸé—´çš„æ¯<span class="hljs-number">1</span>åˆ†é’Ÿè§¦å‘ï¼ˆ<span class="hljs-number">13</span>ï¼‰<span class="hljs-number">0</span> <span class="hljs-number">0</span>/<span class="hljs-number">5</span> <span class="hljs-number">14</span> * * ?   åœ¨æ¯å¤©ä¸‹åˆ<span class="hljs-number">2</span>ç‚¹åˆ°ä¸‹åˆ<span class="hljs-number">2</span>:<span class="hljs-number">55</span>æœŸé—´çš„æ¯<span class="hljs-number">5</span>åˆ†é’Ÿè§¦å‘ï¼ˆ<span class="hljs-number">14</span>ï¼‰<span class="hljs-number">0</span> <span class="hljs-number">0</span>/<span class="hljs-number">5</span> <span class="hljs-number">14</span>,<span class="hljs-number">18</span> * * ?     åœ¨æ¯å¤©ä¸‹åˆ<span class="hljs-number">2</span>ç‚¹åˆ°<span class="hljs-number">2</span>:<span class="hljs-number">55</span>æœŸé—´å’Œä¸‹åˆ<span class="hljs-number">6</span>ç‚¹åˆ°<span class="hljs-number">6</span>:<span class="hljs-number">55</span>æœŸé—´çš„æ¯<span class="hljs-number">5</span>åˆ†é’Ÿè§¦å‘ï¼ˆ<span class="hljs-number">15</span>ï¼‰<span class="hljs-number">0</span> <span class="hljs-number">0</span><span class="hljs-number">-5</span> <span class="hljs-number">14</span> * * ?   åœ¨æ¯å¤©ä¸‹åˆ<span class="hljs-number">2</span>ç‚¹åˆ°ä¸‹åˆ<span class="hljs-number">2</span>:<span class="hljs-number">05</span>æœŸé—´çš„æ¯<span class="hljs-number">1</span>åˆ†é’Ÿè§¦å‘ï¼ˆ<span class="hljs-number">16</span>ï¼‰<span class="hljs-number">0</span> <span class="hljs-number">10</span>,<span class="hljs-number">44</span> <span class="hljs-number">14</span> ? <span class="hljs-number">3</span> WED   æ¯å¹´ä¸‰æœˆçš„æ˜ŸæœŸä¸‰çš„ä¸‹åˆ<span class="hljs-number">2</span>:<span class="hljs-number">10</span>å’Œ<span class="hljs-number">2</span>:<span class="hljs-number">44</span>è§¦å‘ï¼ˆ<span class="hljs-number">17</span>ï¼‰<span class="hljs-number">0</span> <span class="hljs-number">15</span> <span class="hljs-number">10</span> ? * MON-FRI   å‘¨ä¸€è‡³å‘¨äº”çš„ä¸Šåˆ<span class="hljs-number">10</span>:<span class="hljs-number">15</span>è§¦å‘ï¼ˆ<span class="hljs-number">18</span>ï¼‰<span class="hljs-number">0</span> <span class="hljs-number">15</span> <span class="hljs-number">10</span> <span class="hljs-number">15</span> * ?   æ¯æœˆ<span class="hljs-number">15</span>æ—¥ä¸Šåˆ<span class="hljs-number">10</span>:<span class="hljs-number">15</span>è§¦å‘ï¼ˆ<span class="hljs-number">19</span>ï¼‰<span class="hljs-number">0</span> <span class="hljs-number">15</span> <span class="hljs-number">10</span> L * ?   æ¯æœˆæœ€åä¸€æ—¥çš„ä¸Šåˆ<span class="hljs-number">10</span>:<span class="hljs-number">15</span>è§¦å‘ï¼ˆ<span class="hljs-number">20</span>ï¼‰<span class="hljs-number">0</span> <span class="hljs-number">15</span> <span class="hljs-number">10</span> ? * <span class="hljs-number">6</span>L   æ¯æœˆçš„æœ€åä¸€ä¸ªæ˜ŸæœŸäº”ä¸Šåˆ<span class="hljs-number">10</span>:<span class="hljs-number">15</span>è§¦å‘ï¼ˆ<span class="hljs-number">21</span>ï¼‰<span class="hljs-number">0</span> <span class="hljs-number">15</span> <span class="hljs-number">10</span> ? * <span class="hljs-number">6</span>L <span class="hljs-number">2002</span><span class="hljs-number">-2005</span>   <span class="hljs-number">2002</span>å¹´è‡³<span class="hljs-number">2005</span>å¹´çš„æ¯æœˆçš„æœ€åä¸€ä¸ªæ˜ŸæœŸäº”ä¸Šåˆ<span class="hljs-number">10</span>:<span class="hljs-number">15</span>è§¦å‘ï¼ˆ<span class="hljs-number">22</span>ï¼‰<span class="hljs-number">0</span> <span class="hljs-number">15</span> <span class="hljs-number">10</span> ? * <span class="hljs-number">6</span>#<span class="hljs-number">3</span>   æ¯æœˆçš„ç¬¬ä¸‰ä¸ªæ˜ŸæœŸäº”ä¸Šåˆ<span class="hljs-number">10</span>:<span class="hljs-number">15</span>è§¦å‘</code></pre><h2 id="15-3ã€é‚®ä»¶ä»»åŠ¡"><a href="#15-3ã€é‚®ä»¶ä»»åŠ¡" class="headerlink" title="15.3ã€é‚®ä»¶ä»»åŠ¡"></a>15.3ã€é‚®ä»¶ä»»åŠ¡</h2><p>é‚®ä»¶å‘é€ï¼Œåœ¨æˆ‘ä»¬çš„æ—¥å¸¸å¼€å‘ä¸­ï¼Œä¹Ÿéå¸¸çš„å¤šï¼ŒSpringbootä¹Ÿå¸®æˆ‘ä»¬åšäº†æ”¯æŒ</p><ul><li>é‚®ä»¶å‘é€éœ€è¦å¼•å…¥spring-boot-start-mail</li><li>SpringBoot è‡ªåŠ¨é…ç½®MailSenderAutoConfiguration</li><li>å®šä¹‰MailPropertieså†…å®¹ï¼Œé…ç½®åœ¨application.ymlä¸­</li><li>è‡ªåŠ¨è£…é…JavaMailSender</li><li>æµ‹è¯•é‚®ä»¶å‘é€</li></ul><p><strong>æµ‹è¯•ï¼š</strong></p><p>1ã€å¼•å…¥pomä¾èµ–</p><pre><code class="hljs java">&lt;&lt;dependency&gt;   &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;   &lt;artifactId&gt;spring-boot-starter-mail&lt;/artifactId&gt;&lt;/dependency&gt;</code></pre><p>çœ‹å®ƒå¼•å…¥çš„ä¾èµ–ï¼Œå¯ä»¥çœ‹åˆ° jakarta.mail</p><pre><code class="hljs java">&lt;dependency&gt;   &lt;groupId&gt;com.sun.mail&lt;/groupId&gt;   &lt;artifactId&gt;jakarta.mail&lt;/artifactId&gt;   &lt;version&gt;1.6.4&lt;/version&gt;   &lt;scope&gt;compile&lt;/scope&gt;&lt;/dependency&gt;</code></pre><p>2ã€æŸ¥çœ‹è‡ªåŠ¨é…ç½®ç±»ï¼šMailSenderAutoConfiguration</p><p><img src="https://img2020.cnblogs.com/blog/1905053/202004/1905053-20200412225708744-252995174.png" srcset="/blog/img/loading.gif" alt="img"></p><p>è¿™ä¸ªç±»ä¸­å­˜åœ¨beanï¼ŒJavaMailSenderImpl</p><p><img src="https://img2020.cnblogs.com/blog/1905053/202004/1905053-20200412225721465-1009548816.png" srcset="/blog/img/loading.gif" alt="img"></p><p>ç„¶åæˆ‘ä»¬å»çœ‹ä¸‹é…ç½®æ–‡ä»¶</p><pre><code class="hljs java"><span class="hljs-meta">@ConfigurationProperties</span>(   prefix = <span class="hljs-string">"spring.mail"</span>)<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MailProperties</span> </span>{   <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> Charset DEFAULT_CHARSET;   <span class="hljs-keyword">private</span> String host;   <span class="hljs-keyword">private</span> Integer port;   <span class="hljs-keyword">private</span> String username;   <span class="hljs-keyword">private</span> String password;   <span class="hljs-keyword">private</span> String protocol = <span class="hljs-string">"smtp"</span>;   <span class="hljs-keyword">private</span> Charset defaultEncoding;   <span class="hljs-keyword">private</span> Map&lt;String, String&gt; properties;   <span class="hljs-keyword">private</span> String jndiName;}</code></pre><p>3ã€é…ç½®æ–‡ä»¶ï¼š</p><pre><code class="hljs properties"><span class="hljs-meta">spring.mail.username</span>=<span class="hljs-string">24736743@qq.comspring.mail.password=ä½ çš„qqæˆæƒç spring.mail.host=smtp.qq.com# qqéœ€è¦é…ç½®sslspring.mail.properties.mail.smtp.ssl.enable=true</span></code></pre><p>è·å–æˆæƒç ï¼šåœ¨QQé‚®ç®±ä¸­çš„è®¾ç½®-&gt;è´¦æˆ·-&gt;å¼€å¯pop3å’ŒsmtpæœåŠ¡</p><p><img src="https://img2020.cnblogs.com/blog/1905053/202004/1905053-20200412225736355-1251829128.png" srcset="/blog/img/loading.gif" alt="img"></p><p>4ã€Springå•å…ƒæµ‹è¯•</p><pre><code class="hljs java"><span class="hljs-meta">@Autowired</span>JavaMailSenderImpl mailSender;<span class="hljs-meta">@Test</span><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">contextLoads</span><span class="hljs-params">()</span> </span>{   <span class="hljs-comment">//é‚®ä»¶è®¾ç½®1ï¼šä¸€ä¸ªç®€å•çš„é‚®ä»¶</span>   SimpleMailMessage message = <span class="hljs-keyword">new</span> SimpleMailMessage();   message.setSubject(<span class="hljs-string">"é€šçŸ¥-æ˜å¤©æ¥ç‹‚ç¥è¿™å¬è¯¾"</span>);   message.setText(<span class="hljs-string">"ä»Šæ™š7:30å¼€ä¼š"</span>);   message.setTo(<span class="hljs-string">"24736743@qq.com"</span>);   message.setFrom(<span class="hljs-string">"24736743@qq.com"</span>);   mailSender.send(message);}<span class="hljs-meta">@Test</span><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">contextLoads2</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> MessagingException </span>{   <span class="hljs-comment">//é‚®ä»¶è®¾ç½®2ï¼šä¸€ä¸ªå¤æ‚çš„é‚®ä»¶</span>   MimeMessage mimeMessage = mailSender.createMimeMessage();   MimeMessageHelper helper = <span class="hljs-keyword">new</span> MimeMessageHelper(mimeMessage, <span class="hljs-keyword">true</span>);   helper.setSubject(<span class="hljs-string">"é€šçŸ¥-æ˜å¤©æ¥ç‹‚ç¥è¿™å¬è¯¾"</span>);   helper.setText(<span class="hljs-string">"&lt;b style='color:red'&gt;ä»Šå¤© 7:30æ¥å¼€ä¼š&lt;/b&gt;"</span>,<span class="hljs-keyword">true</span>);   <span class="hljs-comment">//å‘é€é™„ä»¶</span>   helper.addAttachment(<span class="hljs-string">"1.jpg"</span>,<span class="hljs-keyword">new</span> File(<span class="hljs-string">""</span>));   helper.addAttachment(<span class="hljs-string">"2.jpg"</span>,<span class="hljs-keyword">new</span> File(<span class="hljs-string">""</span>));   helper.setTo(<span class="hljs-string">"24736743@qq.com"</span>);   helper.setFrom(<span class="hljs-string">"24736743@qq.com"</span>);   mailSender.send(mimeMessage);}</code></pre><p>æŸ¥çœ‹é‚®ç®±ï¼Œé‚®ä»¶æ¥æ”¶æˆåŠŸï¼</p><p>æˆ‘ä»¬åªéœ€è¦ä½¿ç”¨Thymeleafè¿›è¡Œå‰åç«¯ç»“åˆå³å¯å¼€å‘è‡ªå·±ç½‘ç«™é‚®ä»¶æ”¶å‘åŠŸèƒ½äº†ï¼</p><h1 id="16ã€SpringBootï¼šå¯Œæ–‡æœ¬ç¼–è¾‘å™¨"><a href="#16ã€SpringBootï¼šå¯Œæ–‡æœ¬ç¼–è¾‘å™¨" class="headerlink" title="16ã€SpringBootï¼šå¯Œæ–‡æœ¬ç¼–è¾‘å™¨"></a>16ã€SpringBootï¼šå¯Œæ–‡æœ¬ç¼–è¾‘å™¨</h1><h3 id="16-1ã€ç®€ä»‹"><a href="#16-1ã€ç®€ä»‹" class="headerlink" title="16.1ã€ç®€ä»‹"></a>16.1ã€ç®€ä»‹</h3><p>æ€è€ƒï¼šæˆ‘ä»¬å¹³æ—¶åœ¨åšå®¢å›­ï¼Œæˆ–è€…CSDNç­‰å¹³å°è¿›è¡Œå†™ä½œçš„æ—¶å€™ï¼Œæœ‰åŒå­¦æ€è€ƒè¿‡ä»–ä»¬çš„ç¼–è¾‘å™¨æ˜¯æ€ä¹ˆå®ç°çš„å—ï¼Ÿ</p><p>åœ¨åšå®¢å›­åå°çš„é€‰é¡¹è®¾ç½®ä¸­ï¼Œå¯ä»¥çœ‹åˆ°ä¸€ä¸ªæ–‡æœ¬ç¼–è¾‘å™¨çš„é€‰é¡¹ï¼š</p><p><img src="https://img2020.cnblogs.com/blog/1905053/202004/1905053-20200412225751589-577736769.png" srcset="/blog/img/loading.gif" alt="img"></p><p>å…¶å®è¿™ä¸ªå°±æ˜¯å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ï¼Œå¸‚é¢ä¸Šæœ‰è®¸å¤šéå¸¸æˆç†Ÿçš„å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ï¼Œæ¯”å¦‚ï¼š</p><ul><li><strong>Editor.md</strong>â€”â€”åŠŸèƒ½éå¸¸ä¸°å¯Œçš„ç¼–è¾‘å™¨ï¼Œå·¦ç«¯ç¼–è¾‘ï¼Œå³ç«¯é¢„è§ˆï¼Œéå¸¸æ–¹ä¾¿ï¼Œå®Œå…¨å…è´¹</li><li><ul><li>å®˜ç½‘ï¼š<a href="https://pandao.github.io/editor.md/" target="_blank" rel="noopener">https://pandao.github.io/editor.md/</a></li></ul></li><li><strong>wangEditor</strong>â€”â€”åŸºäºjavascriptå’Œcsså¼€å‘çš„ Webå¯Œæ–‡æœ¬ç¼–è¾‘å™¨ï¼Œ è½»é‡ã€ç®€æ´ã€ç•Œé¢ç¾è§‚ã€æ˜“ç”¨ã€å¼€æºå…è´¹ã€‚</li><li><ul><li>å®˜ç½‘ï¼š<a href="http://www.wangeditor.com/" target="_blank" rel="noopener">http://www.wangeditor.com/</a></li></ul></li><li><strong>TinyMCE</strong>â€”â€”TinyMCEæ˜¯ä¸€ä¸ªè½»é‡çº§çš„åŸºäºæµè§ˆå™¨çš„æ‰€è§å³æ‰€å¾—ç¼–è¾‘å™¨ï¼Œç”±JavaScriptå†™æˆã€‚å®ƒå¯¹IE6+å’ŒFirefox1.5+éƒ½æœ‰ç€éå¸¸è‰¯å¥½çš„æ”¯æŒã€‚åŠŸèƒ½é½å…¨ï¼Œç•Œé¢ç¾è§‚ï¼Œå°±æ˜¯æ–‡æ¡£æ˜¯è‹±æ–‡çš„ï¼Œå¯¹å¼€å‘äººå‘˜è‹±æ–‡æ°´å¹³æœ‰ä¸€å®šè¦æ±‚ã€‚</li><li><ul><li>å®˜ç½‘ï¼š<a href="https://www.tiny.cloud/docs/demo/full-featured/" target="_blank" rel="noopener">https://www.tiny.cloud/docs/demo/full-featured/</a><ul><li>åšå®¢å›­</li></ul></li></ul></li><li><strong>ç™¾åº¦ueditor</strong>â€”â€”UEditoræ˜¯ç”±ç™¾åº¦webå‰ç«¯ç ”å‘éƒ¨å¼€å‘æ‰€è§å³æ‰€å¾—å¯Œæ–‡æœ¬webç¼–è¾‘å™¨ï¼Œå…·æœ‰è½»é‡ï¼ŒåŠŸèƒ½é½å…¨ï¼Œå¯å®šåˆ¶ï¼Œæ³¨é‡ç”¨æˆ·ä½“éªŒç­‰ç‰¹ç‚¹ï¼Œå¼€æºåŸºäºMITåè®®ï¼Œå…è®¸è‡ªç”±ä½¿ç”¨å’Œä¿®æ”¹ä»£ç ï¼Œç¼ºç‚¹æ˜¯å·²ç»æ²¡æœ‰æ›´æ–°äº†</li><li><ul><li>å®˜ç½‘ï¼š<a href="https://ueditor.baidu.com/website/onlinedemo.html" target="_blank" rel="noopener">https://ueditor.baidu.com/website/onlinedemo.html</a></li></ul></li><li><strong>kindeditor</strong>â€”â€”ç•Œé¢ç»å…¸ã€‚</li><li><ul><li>å®˜ç½‘ï¼š<a href="http://kindeditor.net/demo.php" target="_blank" rel="noopener">http://kindeditor.net/demo.php</a></li></ul></li><li><strong>Textbox</strong>â€”â€”Textboxæ˜¯ä¸€æ¬¾æç®€ä½†åŠŸèƒ½å¼ºå¤§çš„åœ¨çº¿æ–‡æœ¬ç¼–è¾‘å™¨ï¼Œæ”¯æŒæ¡Œé¢è®¾å¤‡å’Œç§»åŠ¨è®¾å¤‡ã€‚ä¸»è¦åŠŸèƒ½åŒ…å«å†…ç½®çš„å›¾åƒå¤„ç†å’Œå­˜å‚¨ã€æ–‡ä»¶æ‹–æ”¾ã€æ‹¼å†™æ£€æŸ¥å’Œè‡ªåŠ¨æ›´æ­£ã€‚æ­¤å¤–ï¼Œè¯¥å·¥å…·è¿˜å®ç°äº†å±å¹•é˜…è¯»å™¨ç­‰è¾…åŠ©æŠ€æœ¯ï¼Œå¹¶ç¬¦åˆWAI-ARIAå¯è®¿é—®æ€§æ ‡å‡†ã€‚</li><li><ul><li>å®˜ç½‘ï¼š<a href="https://textbox.io/" target="_blank" rel="noopener">https://textbox.io/</a></li></ul></li><li><strong>CKEditor</strong>â€”â€”å›½å¤–çš„ï¼Œç•Œé¢ç¾è§‚ã€‚</li><li><ul><li>å®˜ç½‘ï¼š<a href="https://ckeditor.com/ckeditor-5/demo/" target="_blank" rel="noopener">https://ckeditor.com/ckeditor-5/demo/</a></li></ul></li><li><strong>quill</strong>â€”â€”åŠŸèƒ½å¼ºå¤§ï¼Œè¿˜å¯ä»¥ç¼–è¾‘å…¬å¼ç­‰</li><li><ul><li>å®˜ç½‘ï¼š<a href="https://quilljs.com/" target="_blank" rel="noopener">https://quilljs.com/</a></li></ul></li><li><strong>simditor</strong>â€”â€”ç•Œé¢ç¾è§‚ï¼ŒåŠŸèƒ½è¾ƒå…¨ã€‚</li><li><ul><li>å®˜ç½‘ï¼š<a href="https://simditor.tower.im/" target="_blank" rel="noopener">https://simditor.tower.im/</a></li></ul></li><li><strong>summernote</strong>â€”â€”UIå¥½çœ‹ï¼Œç²¾ç¾</li><li><ul><li>å®˜ç½‘ï¼š<a href="https://summernote.org/" target="_blank" rel="noopener">https://summernote.org/</a></li></ul></li><li><strong>jodit</strong>â€”â€”åŠŸèƒ½é½å…¨</li><li><ul><li>å®˜ç½‘ï¼š<a href="https://xdsoft.net/jodit/" target="_blank" rel="noopener">https://xdsoft.net/jodit/</a></li></ul></li><li><strong>froala Editor</strong>â€”â€”ç•Œé¢éå¸¸å¥½çœ‹ï¼ŒåŠŸèƒ½éå¸¸å¼ºå¤§ï¼Œéå¸¸å¥½ç”¨ï¼ˆéå…è´¹ï¼‰</li><li><ul><li>å®˜ç½‘ï¼š<a href="https://www.froala.com/wysiwyg-editor" target="_blank" rel="noopener">https://www.froala.com/wysiwyg-editor</a></li></ul></li></ul><p>æ€»ä¹‹ï¼Œç›®å‰å¯ç”¨çš„å¯Œæ–‡æœ¬ç¼–è¾‘å™¨æœ‰å¾ˆå¤šâ€¦â€¦è¿™åªæ˜¯å…¶ä¸­çš„ä¸€éƒ¨åˆ†</p><h3 id="16-2ã€Editor-md"><a href="#16-2ã€Editor-md" class="headerlink" title="16.2ã€Editor.md"></a>16.2ã€Editor.md</h3><p>æˆ‘è¿™é‡Œä½¿ç”¨çš„å°±æ˜¯Editor.mdï¼Œä½œä¸ºä¸€ä¸ªèµ„æ·±ç å†œï¼ŒMardownå¿…ç„¶æ˜¯æˆ‘ä»¬ç¨‹åºçŒ¿æœ€å–œæ¬¢çš„æ ¼å¼ï¼Œçœ‹ä¸‹é¢ï¼Œå°±çˆ±ä¸Šäº†ï¼</p><p><img src="https://img2020.cnblogs.com/blog/1905053/202004/1905053-20200412225807875-1956792074.png" srcset="/blog/img/loading.gif" alt="img"></p><p>æˆ‘ä»¬å¯ä»¥åœ¨å®˜ç½‘ä¸‹è½½å®ƒï¼š<a href="https://pandao.github.io/editor.md/" target="_blank" rel="noopener">https://pandao.github.io/editor.md/</a> ï¼Œ å¾—åˆ°å®ƒçš„å‹ç¼©åŒ…ï¼</p><p>è§£å‹ä»¥åï¼Œåœ¨examplesç›®å½•ä¸‹é¢ï¼Œå¯ä»¥çœ‹åˆ°ä»–çš„å¾ˆå¤šæ¡ˆä¾‹ä½¿ç”¨ï¼å­¦ä¹ ï¼Œå…¶å®å°±æ˜¯çœ‹äººå®¶æ€ä¹ˆå†™çš„ï¼Œç„¶åè¿›è¡Œæ¨¡ä»¿å°±å¥½äº†ï¼</p><p>æˆ‘ä»¬å¯ä»¥å°†æ•´ä¸ªè§£å‹çš„æ–‡ä»¶å€’å…¥æˆ‘ä»¬çš„é¡¹ç›®ï¼Œå°†ä¸€äº›æ— ç”¨çš„æµ‹è¯•å’Œæ¡ˆä¾‹åˆ æ‰å³å¯ï¼</p><h3 id="16-3ã€åŸºç¡€å·¥ç¨‹æ­å»º"><a href="#16-3ã€åŸºç¡€å·¥ç¨‹æ­å»º" class="headerlink" title="16.3ã€åŸºç¡€å·¥ç¨‹æ­å»º"></a>16.3ã€åŸºç¡€å·¥ç¨‹æ­å»º</h3><blockquote><p>æ•°æ®åº“è®¾è®¡</p></blockquote><p>articleï¼šæ–‡ç« è¡¨</p><table><thead><tr><th>å­—æ®µ</th><th></th><th>å¤‡æ³¨</th></tr></thead><tbody><tr><td>id</td><td>int</td><td>æ–‡ç« çš„å”¯ä¸€ID</td></tr><tr><td>author</td><td>varchar</td><td>ä½œè€…</td></tr><tr><td>title</td><td>varchar</td><td>æ ‡é¢˜</td></tr><tr><td>content</td><td>longtext</td><td>æ–‡ç« çš„å†…å®¹</td></tr></tbody></table><p>å»ºè¡¨SQLï¼š</p><pre><code class="hljs sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> <span class="hljs-string">`article`</span> (<span class="hljs-string">`id`</span> <span class="hljs-built_in">int</span>(<span class="hljs-number">10</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span> AUTO_INCREMENT <span class="hljs-keyword">COMMENT</span> <span class="hljs-string">'intæ–‡ç« çš„å”¯ä¸€ID'</span>,<span class="hljs-string">`author`</span> <span class="hljs-built_in">varchar</span>(<span class="hljs-number">50</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span> <span class="hljs-keyword">COMMENT</span> <span class="hljs-string">'ä½œè€…'</span>,<span class="hljs-string">`title`</span> <span class="hljs-built_in">varchar</span>(<span class="hljs-number">100</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span> <span class="hljs-keyword">COMMENT</span> <span class="hljs-string">'æ ‡é¢˜'</span>,<span class="hljs-string">`content`</span> longtext <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span> <span class="hljs-keyword">COMMENT</span> <span class="hljs-string">'æ–‡ç« çš„å†…å®¹'</span>,PRIMARY <span class="hljs-keyword">KEY</span> (<span class="hljs-string">`id`</span>)) <span class="hljs-keyword">ENGINE</span>=<span class="hljs-keyword">InnoDB</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">CHARSET</span>=utf8</code></pre><blockquote><p>åŸºç¡€é¡¹ç›®æ­å»º</p></blockquote><p>1ã€å»ºä¸€ä¸ªSpringBooté¡¹ç›®é…ç½®</p><pre><code class="hljs yml"><span class="hljs-attr">spring:</span><span class="hljs-attr">datasource:</span>  <span class="hljs-attr">username:</span> <span class="hljs-string">root</span>  <span class="hljs-attr">password:</span> <span class="hljs-number">123456</span>  <span class="hljs-comment">#?serverTimezone=UTCè§£å†³æ—¶åŒºçš„æŠ¥é”™</span>  <span class="hljs-attr">url:</span> <span class="hljs-string">jdbc:mysql://localhost:3306/springboot?serverTimezone=UTC&amp;useUnicode=true&amp;characterEncoding=utf-8</span>  <span class="hljs-attr">driver-class-name:</span> <span class="hljs-string">com.mysql.cj.jdbc.Driver</span><span class="hljs-string">&lt;resources&gt;</span>   <span class="hljs-string">&lt;resource&gt;</span>       <span class="hljs-string">&lt;directory&gt;src/main/java&lt;/directory&gt;</span>       <span class="hljs-string">&lt;includes&gt;</span>           <span class="hljs-string">&lt;include&gt;**/*.xml&lt;/include&gt;</span>       <span class="hljs-string">&lt;/includes&gt;</span>       <span class="hljs-string">&lt;filtering&gt;true&lt;/filtering&gt;</span>   <span class="hljs-string">&lt;/resource&gt;</span><span class="hljs-string">&lt;/resources&gt;</span></code></pre><p>2ã€å®ä½“ç±»ï¼š</p><pre><code class="hljs java"><span class="hljs-comment">//æ–‡ç« ç±»</span><span class="hljs-meta">@Data</span><span class="hljs-meta">@NoArgsConstructor</span><span class="hljs-meta">@AllArgsConstructor</span><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Article</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">Serializable</span> </span>{   <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> id; <span class="hljs-comment">//æ–‡ç« çš„å”¯ä¸€ID</span>   <span class="hljs-keyword">private</span> String author; <span class="hljs-comment">//ä½œè€…å</span>   <span class="hljs-keyword">private</span> String title; <span class="hljs-comment">//æ ‡é¢˜</span>   <span class="hljs-keyword">private</span> String content; <span class="hljs-comment">//æ–‡ç« çš„å†…å®¹</span>}</code></pre><p>3ã€mapperæ¥å£ï¼š</p><pre><code class="hljs java"><span class="hljs-meta">@Mapper</span><span class="hljs-meta">@Repository</span><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">ArticleMapper</span> </span>{   <span class="hljs-comment">//æŸ¥è¯¢æ‰€æœ‰çš„æ–‡ç« </span>   <span class="hljs-function">List&lt;Article&gt; <span class="hljs-title">queryArticles</span><span class="hljs-params">()</span></span>;   <span class="hljs-comment">//æ–°å¢ä¸€ä¸ªæ–‡ç« </span>   <span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">addArticle</span><span class="hljs-params">(Article article)</span></span>;   <span class="hljs-comment">//æ ¹æ®æ–‡ç« idæŸ¥è¯¢æ–‡ç« </span>   <span class="hljs-function">Article <span class="hljs-title">getArticleById</span><span class="hljs-params">(<span class="hljs-keyword">int</span> id)</span></span>;   <span class="hljs-comment">//æ ¹æ®æ–‡ç« idåˆ é™¤æ–‡ç« </span>   <span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">deleteArticleById</span><span class="hljs-params">(<span class="hljs-keyword">int</span> id)</span></span>;}</code></pre><p><strong>æ—¢ç„¶å·²ç»æä¾›äº† myBatis çš„æ˜ å°„é…ç½®æ–‡ä»¶ï¼Œè‡ªç„¶è¦å‘Šè¯‰ spring boot è¿™äº›æ–‡ä»¶çš„ä½ç½®</strong></p><pre><code class="hljs yml"><span class="hljs-attr">mybatis:</span><span class="hljs-attr">mapper-locations:</span> <span class="hljs-string">classpath:com/kuang/mapper/*.xml</span><span class="hljs-attr">type-aliases-package:</span> <span class="hljs-string">com.kuang.pojo</span></code></pre><p>ç¼–å†™ä¸€ä¸ªControlleræµ‹è¯•ä¸‹ï¼Œæ˜¯å¦okï¼›</p><h3 id="16-4ã€æ–‡ç« ç¼–è¾‘æ•´åˆï¼ˆé‡ç‚¹ï¼‰"><a href="#16-4ã€æ–‡ç« ç¼–è¾‘æ•´åˆï¼ˆé‡ç‚¹ï¼‰" class="headerlink" title="16.4ã€æ–‡ç« ç¼–è¾‘æ•´åˆï¼ˆé‡ç‚¹ï¼‰"></a>16.4ã€æ–‡ç« ç¼–è¾‘æ•´åˆï¼ˆé‡ç‚¹ï¼‰</h3><p>1ã€å¯¼å…¥ editor.md èµ„æº ï¼Œåˆ é™¤å¤šä½™æ–‡ä»¶</p><p>2ã€ç¼–è¾‘æ–‡ç« é¡µé¢ editor.htmlã€éœ€è¦å¼•å…¥ jQueryï¼›</p><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE html&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"x-admin-sm"</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"zh"</span> <span class="hljs-attr">xmlns:th</span>=<span class="hljs-string">"http://www.thymeleaf.org"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>   <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span>   <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>ç§¦ç–†'Blog<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>   <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"renderer"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"webkit"</span>&gt;</span>   <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">"X-UA-Compatible"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"IE=edge,chrome=1"</span>&gt;</span>   <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width,user-scalable=yes, minimum-scale=0.4, initial-scale=0.8,target-densitydpi=low-dpi"</span> /&gt;</span>   <span class="hljs-comment">&lt;!--Editor.md--&gt;</span>   <span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"stylesheet"</span> <span class="hljs-attr">th:href</span>=<span class="hljs-string">"@{/editormd/css/editormd.css}"</span>/&gt;</span>   <span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"shortcut icon"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"https://pandao.github.io/editor.md/favicon.ico"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"image/x-icon"</span> /&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"layui-fluid"</span>&gt;</span>   <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"layui-row layui-col-space15"</span>&gt;</span>       <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"layui-col-md12"</span>&gt;</span>           <span class="hljs-comment">&lt;!--åšå®¢è¡¨å•--&gt;</span>           <span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"mdEditorForm"</span>&gt;</span>               <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>                  æ ‡é¢˜ï¼š<span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"title"</span>&gt;</span>               <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>               <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>                  ä½œè€…ï¼š<span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"author"</span>&gt;</span>               <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>               <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"article-content"</span>&gt;</span>                   <span class="hljs-tag">&lt;<span class="hljs-name">textarea</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"content"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"content"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"display:none;"</span>&gt;</span> <span class="hljs-tag">&lt;/<span class="hljs-name">textarea</span>&gt;</span>               <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>           <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span>       <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>   <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><span class="hljs-comment">&lt;!--editormd--&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">th:src</span>=<span class="hljs-string">"@{/editormd/lib/jquery.min.js}"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">th:src</span>=<span class="hljs-string">"@{/editormd/editormd.js}"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text/javascript"</span>&gt;</span><span class="actionscript">   <span class="hljs-keyword">var</span> testEditor;</span><span class="actionscript">   <span class="hljs-comment">//window.onload = function(){ }</span></span><span class="javascript">   $(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{</span><span class="actionscript">       testEditor = editormd(<span class="hljs-string">"article-content"</span>, {</span><span class="actionscript">           width : <span class="hljs-string">"95%"</span>,</span>           height : 400,<span class="actionscript">           syncScrolling : <span class="hljs-string">"single"</span>,</span><span class="actionscript">           path : <span class="hljs-string">"../editormd/lib/"</span>,</span><span class="actionscript">           saveHTMLToTextarea : <span class="hljs-literal">true</span>,    <span class="hljs-comment">// ä¿å­˜ HTML åˆ° Textarea</span></span><span class="actionscript">           emoji: <span class="hljs-literal">true</span>,</span><span class="actionscript">           theme: <span class="hljs-string">"dark"</span>,<span class="hljs-comment">//å·¥å…·æ ä¸»é¢˜</span></span><span class="actionscript">           previewTheme: <span class="hljs-string">"dark"</span>,<span class="hljs-comment">//é¢„è§ˆä¸»é¢˜</span></span><span class="actionscript">           editorTheme: <span class="hljs-string">"pastel-on-dark"</span>,<span class="hljs-comment">//ç¼–è¾‘ä¸»é¢˜</span></span><span class="actionscript">           tex : <span class="hljs-literal">true</span>,                   <span class="hljs-comment">// å¼€å¯ç§‘å­¦å…¬å¼TeXè¯­è¨€æ”¯æŒï¼Œé»˜è®¤å…³é—­</span></span><span class="actionscript">           flowChart : <span class="hljs-literal">true</span>,             <span class="hljs-comment">// å¼€å¯æµç¨‹å›¾æ”¯æŒï¼Œé»˜è®¤å…³é—­</span></span><span class="actionscript">           sequenceDiagram : <span class="hljs-literal">true</span>,       <span class="hljs-comment">// å¼€å¯æ—¶åº/åºåˆ—å›¾æ”¯æŒï¼Œé»˜è®¤å…³é—­,</span></span><span class="actionscript">           <span class="hljs-comment">//å›¾ç‰‡ä¸Šä¼ </span></span><span class="actionscript">           imageUpload : <span class="hljs-literal">true</span>,</span><span class="actionscript">           imageFormats : [<span class="hljs-string">"jpg"</span>, <span class="hljs-string">"jpeg"</span>, <span class="hljs-string">"gif"</span>, <span class="hljs-string">"png"</span>, <span class="hljs-string">"bmp"</span>, <span class="hljs-string">"webp"</span>],</span><span class="actionscript">           imageUploadURL : <span class="hljs-string">"/article/file/upload"</span>,</span><span class="actionscript">           onload : <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{</span><span class="javascript">               <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'onload'</span>, <span class="hljs-keyword">this</span>);</span>          },<span class="actionscript">           <span class="hljs-comment">/*æŒ‡å®šéœ€è¦æ˜¾ç¤ºçš„åŠŸèƒ½æŒ‰é’®*/</span></span><span class="actionscript">           toolbarIcons : <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{</span><span class="actionscript">               <span class="hljs-keyword">return</span> [<span class="hljs-string">"undo"</span>,<span class="hljs-string">"redo"</span>,<span class="hljs-string">"|"</span>,</span><span class="actionscript">                   <span class="hljs-string">"bold"</span>,<span class="hljs-string">"del"</span>,<span class="hljs-string">"italic"</span>,<span class="hljs-string">"quote"</span>,<span class="hljs-string">"ucwords"</span>,<span class="hljs-string">"uppercase"</span>,<span class="hljs-string">"lowercase"</span>,<span class="hljs-string">"|"</span>,</span><span class="actionscript">                   <span class="hljs-string">"h1"</span>,<span class="hljs-string">"h2"</span>,<span class="hljs-string">"h3"</span>,<span class="hljs-string">"h4"</span>,<span class="hljs-string">"h5"</span>,<span class="hljs-string">"h6"</span>,<span class="hljs-string">"|"</span>,</span><span class="actionscript">                   <span class="hljs-string">"list-ul"</span>,<span class="hljs-string">"list-ol"</span>,<span class="hljs-string">"hr"</span>,<span class="hljs-string">"|"</span>,</span><span class="actionscript">                   <span class="hljs-string">"link"</span>,<span class="hljs-string">"reference-link"</span>,<span class="hljs-string">"image"</span>,<span class="hljs-string">"code"</span>,<span class="hljs-string">"preformatted-text"</span>,</span><span class="actionscript">                   <span class="hljs-string">"code-block"</span>,<span class="hljs-string">"table"</span>,<span class="hljs-string">"datetime"</span>,<span class="hljs-string">"emoji"</span>,<span class="hljs-string">"html-entities"</span>,<span class="hljs-string">"pagebreak"</span>,<span class="hljs-string">"|"</span>,</span><span class="actionscript">                   <span class="hljs-string">"goto-line"</span>,<span class="hljs-string">"watch"</span>,<span class="hljs-string">"preview"</span>,<span class="hljs-string">"fullscreen"</span>,<span class="hljs-string">"clear"</span>,<span class="hljs-string">"search"</span>,<span class="hljs-string">"|"</span>,</span><span class="actionscript">                   <span class="hljs-string">"help"</span>,<span class="hljs-string">"info"</span>,<span class="hljs-string">"releaseIcon"</span>, <span class="hljs-string">"index"</span>]</span>          },<span class="actionscript">           <span class="hljs-comment">/*è‡ªå®šä¹‰åŠŸèƒ½æŒ‰é’®ï¼Œä¸‹é¢æˆ‘è‡ªå®šä¹‰äº†2ä¸ªï¼Œä¸€ä¸ªæ˜¯å‘å¸ƒï¼Œä¸€ä¸ªæ˜¯è¿”å›é¦–é¡µ*/</span></span>           toolbarIconTexts : {<span class="handlebars"><span class="xml">               releaseIcon : "<span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">bgcolor</span>=<span class="hljs-string">\</span>"<span class="hljs-attr">gray</span>\"&gt;</span>å‘å¸ƒ<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>",</span></span><span class="handlebars"><span class="xml">               index : "<span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">bgcolor</span>=<span class="hljs-string">\</span>"<span class="hljs-attr">red</span>\"&gt;</span>è¿”å›é¦–é¡µ<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>",</span></span>          },<span class="actionscript">           <span class="hljs-comment">/*ç»™è‡ªå®šä¹‰æŒ‰é’®æŒ‡å®šå›è°ƒå‡½æ•°*/</span></span>           toolbarHandlers:{<span class="actionscript">               releaseIcon : <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(cm, icon, cursor, selection)</span> </span>{</span><span class="actionscript">                   <span class="hljs-comment">//è¡¨å•æäº¤</span></span><span class="actionscript">                   mdEditorForm.method = <span class="hljs-string">"post"</span>;</span><span class="actionscript">                   mdEditorForm.action = <span class="hljs-string">"/article/addArticle"</span>;<span class="hljs-comment">//æäº¤è‡³æœåŠ¡å™¨çš„è·¯å¾„</span></span>                   mdEditorForm.submit();              },<span class="actionscript">               index : <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{</span><span class="javascript">                   <span class="hljs-built_in">window</span>.location.href = <span class="hljs-string">'/'</span>;</span>              },          }      });  });<span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></code></pre><p>3ã€ç¼–å†™Controllerï¼Œè¿›è¡Œè·³è½¬ï¼Œä»¥åŠä¿å­˜æ–‡ç« </p><pre><code class="hljs java"><span class="hljs-meta">@Controller</span><span class="hljs-meta">@RequestMapping</span>(<span class="hljs-string">"/article"</span>)<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ArticleController</span> </span>{   <span class="hljs-meta">@GetMapping</span>(<span class="hljs-string">"/toEditor"</span>)   <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">toEditor</span><span class="hljs-params">()</span></span>{       <span class="hljs-keyword">return</span> <span class="hljs-string">"editor"</span>;  }      <span class="hljs-meta">@PostMapping</span>(<span class="hljs-string">"/addArticle"</span>)   <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">addArticle</span><span class="hljs-params">(Article article)</span></span>{       articleMapper.addArticle(article);       <span class="hljs-keyword">return</span> <span class="hljs-string">"editor"</span>;  }   }</code></pre><blockquote><p>å›¾ç‰‡ä¸Šä¼ é—®é¢˜</p></blockquote><p>1ã€å‰ç«¯jsä¸­æ·»åŠ é…ç½®</p><pre><code class="hljs http">//å›¾ç‰‡ä¸Šä¼ imageUpload : true,imageFormats : ["jpg", "jpeg", "gif", "png", "bmp", "webp"],imageUploadURL : "/article/file/upload", // //è¿™ä¸ªæ˜¯ä¸Šä¼ å›¾ç‰‡æ—¶çš„è®¿é—®åœ°å€</code></pre><p>2ã€åç«¯è¯·æ±‚ï¼Œæ¥æ”¶ä¿å­˜è¿™ä¸ªå›¾ç‰‡, éœ€è¦å¯¼å…¥ FastJson çš„ä¾èµ–ï¼</p><pre><code class="hljs java"><span class="hljs-comment">//åšå®¢å›¾ç‰‡ä¸Šä¼ é—®é¢˜</span><span class="hljs-meta">@RequestMapping</span>(<span class="hljs-string">"/file/upload"</span>)<span class="hljs-meta">@ResponseBody</span><span class="hljs-function"><span class="hljs-keyword">public</span> JSONObject <span class="hljs-title">fileUpload</span><span class="hljs-params">(@RequestParam(value = <span class="hljs-string">"editormd-image-file"</span>, required = <span class="hljs-keyword">true</span>)</span> MultipartFile file, HttpServletRequest request) <span class="hljs-keyword">throws</span> IOException </span>{   <span class="hljs-comment">//ä¸Šä¼ è·¯å¾„ä¿å­˜è®¾ç½®</span>   <span class="hljs-comment">//è·å¾—SpringBootå½“å‰é¡¹ç›®çš„è·¯å¾„ï¼šSystem.getProperty("user.dir")</span>   String path = System.getProperty(<span class="hljs-string">"user.dir"</span>)+<span class="hljs-string">"/upload/"</span>;   <span class="hljs-comment">//æŒ‰ç…§æœˆä»½è¿›è¡Œåˆ†ç±»ï¼š</span>   Calendar instance = Calendar.getInstance();   String month = (instance.get(Calendar.MONTH) + <span class="hljs-number">1</span>)+<span class="hljs-string">"æœˆ"</span>;   path = path+month;   File realPath = <span class="hljs-keyword">new</span> File(path);   <span class="hljs-keyword">if</span> (!realPath.exists()){       realPath.mkdir();  }   <span class="hljs-comment">//ä¸Šä¼ æ–‡ä»¶åœ°å€</span>   System.out.println(<span class="hljs-string">"ä¸Šä¼ æ–‡ä»¶ä¿å­˜åœ°å€ï¼š"</span>+realPath);   <span class="hljs-comment">//è§£å†³æ–‡ä»¶åå­—é—®é¢˜ï¼šæˆ‘ä»¬ä½¿ç”¨uuid;</span>   String filename = <span class="hljs-string">"ks-"</span>+UUID.randomUUID().toString().replaceAll(<span class="hljs-string">"-"</span>, <span class="hljs-string">""</span>);   <span class="hljs-comment">//é€šè¿‡CommonsMultipartFileçš„æ–¹æ³•ç›´æ¥å†™æ–‡ä»¶ï¼ˆæ³¨æ„è¿™ä¸ªæ—¶å€™ï¼‰</span>   file.transferTo(<span class="hljs-keyword">new</span> File(realPath +<span class="hljs-string">"/"</span>+ filename));   <span class="hljs-comment">//ç»™editormdè¿›è¡Œå›è°ƒ</span>   JSONObject res = <span class="hljs-keyword">new</span> JSONObject();   res.put(<span class="hljs-string">"url"</span>,<span class="hljs-string">"/upload/"</span>+month+<span class="hljs-string">"/"</span>+ filename);   res.put(<span class="hljs-string">"success"</span>, <span class="hljs-number">1</span>);   res.put(<span class="hljs-string">"message"</span>, <span class="hljs-string">"upload success!"</span>);   <span class="hljs-keyword">return</span> res;}</code></pre><p>3ã€è§£å†³æ–‡ä»¶å›æ˜¾æ˜¾ç¤ºçš„é—®é¢˜ï¼Œè®¾ç½®è™šæ‹Ÿç›®å½•æ˜ å°„ï¼åœ¨æˆ‘ä»¬è‡ªå·±æ‹“å±•çš„MvcConfigä¸­è¿›è¡Œé…ç½®å³å¯ï¼</p><pre><code class="hljs java"><span class="hljs-meta">@Configuration</span><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyMvcConfig</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">WebMvcConfigurer</span> </span>{   <span class="hljs-comment">// æ–‡ä»¶ä¿å­˜åœ¨çœŸå®ç›®å½•/upload/ä¸‹ï¼Œ</span>   <span class="hljs-comment">// è®¿é—®çš„æ—¶å€™ä½¿ç”¨è™šè·¯å¾„/uploadï¼Œæ¯”å¦‚æ–‡ä»¶åä¸º1.pngï¼Œå°±ç›´æ¥/upload/1.pngå°±okäº†ã€‚</span>   <span class="hljs-meta">@Override</span>   <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">addResourceHandlers</span><span class="hljs-params">(ResourceHandlerRegistry registry)</span> </span>{       registry.addResourceHandler(<span class="hljs-string">"/upload/**"</span>)          .addResourceLocations(<span class="hljs-string">"file:"</span>+System.getProperty(<span class="hljs-string">"user.dir"</span>)+<span class="hljs-string">"/upload/"</span>);  }}</code></pre><blockquote><p>è¡¨æƒ…åŒ…é—®é¢˜</p></blockquote><p>è‡ªå·±æ‰‹åŠ¨ä¸‹è½½ï¼Œemoji è¡¨æƒ…åŒ…ï¼Œæ”¾åˆ°å›¾ç‰‡è·¯å¾„ä¸‹ï¼š</p><p>ä¿®æ”¹editormd.jsæ–‡ä»¶</p><pre><code class="hljs js"><span class="hljs-comment">// Emoji graphics files url path</span>editormd.emoji     = {   path : <span class="hljs-string">"../editormd/plugins/emoji-dialog/emoji/"</span>,   ext   : <span class="hljs-string">".png"</span>};</code></pre><h3 id="16-5ã€æ–‡ç« å±•ç¤º"><a href="#16-5ã€æ–‡ç« å±•ç¤º" class="headerlink" title="16.5ã€æ–‡ç« å±•ç¤º"></a>16.5ã€æ–‡ç« å±•ç¤º</h3><p>1ã€Controller ä¸­å¢åŠ æ–¹æ³•</p><pre><code class="hljs java"><span class="hljs-meta">@GetMapping</span>(<span class="hljs-string">"/{id}"</span>)<span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">show</span><span class="hljs-params">(@PathVariable(<span class="hljs-string">"id"</span>)</span> <span class="hljs-keyword">int</span> id,Model model)</span>{   Article article = articleMapper.getArticleById(id);   model.addAttribute(<span class="hljs-string">"article"</span>,article);   <span class="hljs-keyword">return</span> <span class="hljs-string">"article"</span>;}</code></pre><p>2ã€ç¼–å†™é¡µé¢ article.html</p><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE html&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"en"</span> <span class="hljs-attr">xmlns:th</span>=<span class="hljs-string">"http://www.thymeleaf.org"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>   <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span>   <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1, maximum-scale=1"</span>&gt;</span>   <span class="hljs-tag">&lt;<span class="hljs-name">title</span> <span class="hljs-attr">th:text</span>=<span class="hljs-string">"${article.title}"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>   <span class="hljs-comment">&lt;!--æ–‡ç« å¤´éƒ¨ä¿¡æ¯ï¼šæ ‡é¢˜ï¼Œä½œè€…ï¼Œæœ€åæ›´æ–°æ—¥æœŸï¼Œå¯¼èˆª--&gt;</span>   <span class="hljs-tag">&lt;<span class="hljs-name">h2</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"margin: auto 0"</span> <span class="hljs-attr">th:text</span>=<span class="hljs-string">"${article.title}"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>  ä½œè€…ï¼š<span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"float: left"</span> <span class="hljs-attr">th:text</span>=<span class="hljs-string">"${article.author}"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>   <span class="hljs-comment">&lt;!--æ–‡ç« ä¸»ä½“å†…å®¹--&gt;</span>   <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"doc-content"</span>&gt;</span>       <span class="hljs-tag">&lt;<span class="hljs-name">textarea</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"display:none;"</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">"markdown"</span> <span class="hljs-attr">th:text</span>=<span class="hljs-string">"${article.content}"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">textarea</span>&gt;</span>   <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"stylesheet"</span> <span class="hljs-attr">th:href</span>=<span class="hljs-string">"@{/editormd/css/editormd.preview.css}"</span> /&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">th:src</span>=<span class="hljs-string">"@{/editormd/lib/jquery.min.js}"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">th:src</span>=<span class="hljs-string">"@{/editormd/lib/marked.min.js}"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">th:src</span>=<span class="hljs-string">"@{/editormd/lib/prettify.min.js}"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">th:src</span>=<span class="hljs-string">"@{/editormd/lib/raphael.min.js}"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">th:src</span>=<span class="hljs-string">"@{/editormd/lib/underscore.min.js}"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">th:src</span>=<span class="hljs-string">"@{/editormd/lib/sequence-diagram.min.js}"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">th:src</span>=<span class="hljs-string">"@{/editormd/lib/flowchart.min.js}"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">th:src</span>=<span class="hljs-string">"@{/editormd/lib/jquery.flowchart.min.js}"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">th:src</span>=<span class="hljs-string">"@{/editormd/editormd.js}"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text/javascript"</span>&gt;</span><span class="actionscript">   <span class="hljs-keyword">var</span> testEditor;</span><span class="javascript">   $(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{</span><span class="actionscript">       testEditor = editormd.markdownToHTML(<span class="hljs-string">"doc-content"</span>, {<span class="hljs-comment">//æ³¨æ„ï¼šè¿™é‡Œæ˜¯ä¸Šé¢DIVçš„id</span></span><span class="actionscript">           htmlDecode: <span class="hljs-string">"style,script,iframe"</span>,</span><span class="actionscript">           emoji: <span class="hljs-literal">true</span>,</span><span class="actionscript">           taskList: <span class="hljs-literal">true</span>,</span><span class="actionscript">           tocm: <span class="hljs-literal">true</span>,</span><span class="actionscript">           tex: <span class="hljs-literal">true</span>, <span class="hljs-comment">// é»˜è®¤ä¸è§£æ</span></span><span class="actionscript">           flowChart: <span class="hljs-literal">true</span>, <span class="hljs-comment">// é»˜è®¤ä¸è§£æ</span></span><span class="actionscript">           sequenceDiagram: <span class="hljs-literal">true</span>, <span class="hljs-comment">// é»˜è®¤ä¸è§£æ</span></span><span class="actionscript">           codeFold: <span class="hljs-literal">true</span></span>      });});<span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></code></pre><p>é‡å¯é¡¹ç›®ï¼Œè®¿é—®è¿›è¡Œæµ‹è¯•ï¼å¤§åŠŸå‘Šæˆï¼</p><p>å°ç»“ï¼š</p><p>æœ‰äº†å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ï¼Œæˆ‘ä»¬ç½‘ç«™çš„åŠŸèƒ½å°±ä¼šåˆå¤šä¸€é¡¹ï¼Œå¤§å®¶åˆ°äº†è¿™é‡Œå®Œå…¨å¯ä»¥æœ‰æ—¶é—´å†™ä¸€ä¸ªå±äºè‡ªå·±çš„åšå®¢ç½‘ç«™äº†ï¼Œæ ¹æ®æ‰€å­¦çš„çŸ¥è¯†æ˜¯å®Œå…¨æ²¡æœ‰ä»»ä½•é—®é¢˜çš„ï¼</p><h1 id="17ã€SpringBootï¼šDubboå’ŒZookeeperé›†æˆ"><a href="#17ã€SpringBootï¼šDubboå’ŒZookeeperé›†æˆ" class="headerlink" title="17ã€SpringBootï¼šDubboå’ŒZookeeperé›†æˆ"></a>17ã€SpringBootï¼šDubboå’ŒZookeeperé›†æˆ</h1><p>åˆ†å¸ƒå¼ç†è®º</p><h2 id="17-1ã€ä»€ä¹ˆæ˜¯åˆ†å¸ƒå¼ç³»ç»Ÿï¼Ÿ"><a href="#17-1ã€ä»€ä¹ˆæ˜¯åˆ†å¸ƒå¼ç³»ç»Ÿï¼Ÿ" class="headerlink" title="17.1ã€ä»€ä¹ˆæ˜¯åˆ†å¸ƒå¼ç³»ç»Ÿï¼Ÿ"></a><strong>17.1ã€ä»€ä¹ˆæ˜¯åˆ†å¸ƒå¼ç³»ç»Ÿï¼Ÿ</strong></h2><p>åœ¨ã€Šåˆ†å¸ƒå¼ç³»ç»ŸåŸç†ä¸èŒƒå‹ã€‹ä¸€ä¹¦ä¸­æœ‰å¦‚ä¸‹å®šä¹‰ï¼šâ€œåˆ†å¸ƒå¼ç³»ç»Ÿæ˜¯è‹¥å¹²ç‹¬ç«‹è®¡ç®—æœºçš„é›†åˆï¼Œè¿™äº›è®¡ç®—æœºå¯¹äºç”¨æˆ·æ¥è¯´å°±åƒå•ä¸ªç›¸å…³ç³»ç»Ÿâ€ï¼›</p><p>åˆ†å¸ƒå¼ç³»ç»Ÿæ˜¯ç”±ä¸€ç»„é€šè¿‡ç½‘ç»œè¿›è¡Œé€šä¿¡ã€ä¸ºäº†å®Œæˆå…±åŒçš„ä»»åŠ¡è€Œåè°ƒå·¥ä½œçš„è®¡ç®—æœºèŠ‚ç‚¹ç»„æˆçš„ç³»ç»Ÿã€‚åˆ†å¸ƒå¼ç³»ç»Ÿçš„å‡ºç°æ˜¯ä¸ºäº†ç”¨å»‰ä»·çš„ã€æ™®é€šçš„æœºå™¨å®Œæˆå•ä¸ªè®¡ç®—æœºæ— æ³•å®Œæˆçš„è®¡ç®—ã€å­˜å‚¨ä»»åŠ¡ã€‚å…¶ç›®çš„æ˜¯<strong>åˆ©ç”¨æ›´å¤šçš„æœºå™¨ï¼Œå¤„ç†æ›´å¤šçš„æ•°æ®</strong>ã€‚</p><p>åˆ†å¸ƒå¼ç³»ç»Ÿï¼ˆdistributed systemï¼‰æ˜¯å»ºç«‹åœ¨ç½‘ç»œä¹‹ä¸Šçš„è½¯ä»¶ç³»ç»Ÿã€‚</p><p>é¦–å…ˆéœ€è¦æ˜ç¡®çš„æ˜¯ï¼Œåªæœ‰å½“å•ä¸ªèŠ‚ç‚¹çš„å¤„ç†èƒ½åŠ›æ— æ³•æ»¡è¶³æ—¥ç›Šå¢é•¿çš„è®¡ç®—ã€å­˜å‚¨ä»»åŠ¡çš„æ—¶å€™ï¼Œä¸”ç¡¬ä»¶çš„æå‡ï¼ˆåŠ å†…å­˜ã€åŠ ç£ç›˜ã€ä½¿ç”¨æ›´å¥½çš„CPUï¼‰é«˜æ˜‚åˆ°å¾—ä¸å¿å¤±çš„æ—¶å€™ï¼Œåº”ç”¨ç¨‹åºä¹Ÿä¸èƒ½è¿›ä¸€æ­¥ä¼˜åŒ–çš„æ—¶å€™ï¼Œæˆ‘ä»¬æ‰éœ€è¦è€ƒè™‘åˆ†å¸ƒå¼ç³»ç»Ÿã€‚å› ä¸ºï¼Œåˆ†å¸ƒå¼ç³»ç»Ÿè¦è§£å†³çš„é—®é¢˜æœ¬èº«å°±æ˜¯å’Œå•æœºç³»ç»Ÿä¸€æ ·çš„ï¼Œè€Œç”±äºåˆ†å¸ƒå¼ç³»ç»Ÿå¤šèŠ‚ç‚¹ã€é€šè¿‡ç½‘ç»œé€šä¿¡çš„æ‹“æ‰‘ç»“æ„ï¼Œä¼šå¼•å…¥å¾ˆå¤šå•æœºç³»ç»Ÿæ²¡æœ‰çš„é—®é¢˜ï¼Œä¸ºäº†è§£å†³è¿™äº›é—®é¢˜åˆä¼šå¼•å…¥æ›´å¤šçš„æœºåˆ¶ã€åè®®ï¼Œå¸¦æ¥æ›´å¤šçš„é—®é¢˜ã€‚ã€‚ã€‚</p><h2 id="17-2ã€Dubboæ–‡æ¡£"><a href="#17-2ã€Dubboæ–‡æ¡£" class="headerlink" title="17.2ã€Dubboæ–‡æ¡£"></a><strong>17.2ã€Dubboæ–‡æ¡£</strong></h2><p>éšç€äº’è”ç½‘çš„å‘å±•ï¼Œç½‘ç«™åº”ç”¨çš„è§„æ¨¡ä¸æ–­æ‰©å¤§ï¼Œå¸¸è§„çš„å‚ç›´åº”ç”¨æ¶æ„å·²æ— æ³•åº”å¯¹ï¼Œåˆ†å¸ƒå¼æœåŠ¡æ¶æ„ä»¥åŠæµåŠ¨è®¡ç®—æ¶æ„åŠ¿åœ¨å¿…è¡Œï¼Œæ€¥éœ€<strong>ä¸€ä¸ªæ²»ç†ç³»ç»Ÿ</strong>ç¡®ä¿æ¶æ„æœ‰æ¡ä¸ç´Šçš„æ¼”è¿›ã€‚</p><p>åœ¨Dubboçš„å®˜ç½‘æ–‡æ¡£æœ‰è¿™æ ·ä¸€å¼ å›¾</p><p><img src="https://img2020.cnblogs.com/blog/1905053/202004/1905053-20200412225836241-1744130417.png" srcset="/blog/img/loading.gif" alt="img"></p><h2 id="å•ä¸€åº”ç”¨æ¶æ„"><a href="#å•ä¸€åº”ç”¨æ¶æ„" class="headerlink" title="**å•ä¸€åº”ç”¨æ¶æ„**"></a><strong>**</strong>å•ä¸€åº”ç”¨æ¶æ„<strong>**</strong></h2><p>å½“ç½‘ç«™æµé‡å¾ˆå°æ—¶ï¼Œåªéœ€ä¸€ä¸ªåº”ç”¨ï¼Œå°†æ‰€æœ‰åŠŸèƒ½éƒ½éƒ¨ç½²åœ¨ä¸€èµ·ï¼Œä»¥å‡å°‘éƒ¨ç½²èŠ‚ç‚¹å’Œæˆæœ¬ã€‚æ­¤æ—¶ï¼Œç”¨äºç®€åŒ–å¢åˆ æ”¹æŸ¥å·¥ä½œé‡çš„æ•°æ®è®¿é—®æ¡†æ¶(ORM)æ˜¯å…³é”®ã€‚</p><p><img src="https://img2020.cnblogs.com/blog/1905053/202004/1905053-20200412225848354-475809714.png" srcset="/blog/img/loading.gif" alt="img"></p><p>é€‚ç”¨äºå°å‹ç½‘ç«™ï¼Œå°å‹ç®¡ç†ç³»ç»Ÿï¼Œå°†æ‰€æœ‰åŠŸèƒ½éƒ½éƒ¨ç½²åˆ°ä¸€ä¸ªåŠŸèƒ½é‡Œï¼Œç®€å•æ˜“ç”¨ã€‚</p><p><strong>ç¼ºç‚¹ï¼š</strong></p><p>1ã€æ€§èƒ½æ‰©å±•æ¯”è¾ƒéš¾</p><p>2ã€ååŒå¼€å‘é—®é¢˜</p><p>3ã€ä¸åˆ©äºå‡çº§ç»´æŠ¤</p><h2 id="å‚ç›´åº”ç”¨æ¶æ„"><a href="#å‚ç›´åº”ç”¨æ¶æ„" class="headerlink" title="*\*\å‚ç›´åº”ç”¨æ¶æ„******"></a><strong>*\</strong>*<em>\</em>å‚ç›´åº”ç”¨æ¶æ„*<em>*</em>****</h2><p>å½“è®¿é—®é‡é€æ¸å¢å¤§ï¼Œå•ä¸€åº”ç”¨å¢åŠ æœºå™¨å¸¦æ¥çš„åŠ é€Ÿåº¦è¶Šæ¥è¶Šå°ï¼Œå°†åº”ç”¨æ‹†æˆäº’ä¸ç›¸å¹²çš„å‡ ä¸ªåº”ç”¨ï¼Œä»¥æå‡æ•ˆç‡ã€‚æ­¤æ—¶ï¼Œç”¨äºåŠ é€Ÿå‰ç«¯é¡µé¢å¼€å‘çš„Webæ¡†æ¶(MVC)æ˜¯å…³é”®ã€‚</p><p><img src="https://img2020.cnblogs.com/blog/1905053/202004/1905053-20200412225901199-858224740.png" srcset="/blog/img/loading.gif" alt="img"></p><p>é€šè¿‡åˆ‡åˆ†ä¸šåŠ¡æ¥å®ç°å„ä¸ªæ¨¡å—ç‹¬ç«‹éƒ¨ç½²ï¼Œé™ä½äº†ç»´æŠ¤å’Œéƒ¨ç½²çš„éš¾åº¦ï¼Œå›¢é˜Ÿå„å¸å…¶èŒæ›´æ˜“ç®¡ç†ï¼Œæ€§èƒ½æ‰©å±•ä¹Ÿæ›´æ–¹ä¾¿ï¼Œæ›´æœ‰é’ˆå¯¹æ€§ã€‚</p><p>ç¼ºç‚¹ï¼šå…¬ç”¨æ¨¡å—æ— æ³•é‡å¤åˆ©ç”¨ï¼Œå¼€å‘æ€§çš„æµªè´¹</p><h2 id="åˆ†å¸ƒå¼æœåŠ¡æ¶æ„"><a href="#åˆ†å¸ƒå¼æœåŠ¡æ¶æ„" class="headerlink" title="**åˆ†å¸ƒå¼æœåŠ¡æ¶æ„**"></a><strong><strong>**</strong></strong>åˆ†å¸ƒå¼æœåŠ¡æ¶æ„<strong><strong>**</strong></strong></h2><p>å½“å‚ç›´åº”ç”¨è¶Šæ¥è¶Šå¤šï¼Œåº”ç”¨ä¹‹é—´äº¤äº’ä¸å¯é¿å…ï¼Œå°†æ ¸å¿ƒä¸šåŠ¡æŠ½å–å‡ºæ¥ï¼Œä½œä¸ºç‹¬ç«‹çš„æœåŠ¡ï¼Œé€æ¸å½¢æˆç¨³å®šçš„æœåŠ¡ä¸­å¿ƒï¼Œä½¿å‰ç«¯åº”ç”¨èƒ½æ›´å¿«é€Ÿçš„å“åº”å¤šå˜çš„å¸‚åœºéœ€æ±‚ã€‚æ­¤æ—¶ï¼Œç”¨äºæé«˜ä¸šåŠ¡å¤ç”¨åŠæ•´åˆçš„<strong>åˆ†å¸ƒå¼æœåŠ¡æ¡†æ¶(RPC)</strong>æ˜¯å…³é”®ã€‚</p><p><img src="https://img2020.cnblogs.com/blog/1905053/202004/1905053-20200412225913839-69515130.png" srcset="/blog/img/loading.gif" alt="img"></p><h2 id="æµåŠ¨è®¡ç®—æ¶æ„"><a href="#æµåŠ¨è®¡ç®—æ¶æ„" class="headerlink" title="*\***\æµåŠ¨è®¡ç®—æ¶æ„********"></a><strong>*\</strong>*<em>*</em>*<em>\</em>æµåŠ¨è®¡ç®—æ¶æ„*<em>*</em>*<em>*</em>****</h2><p>å½“æœåŠ¡è¶Šæ¥è¶Šå¤šï¼Œå®¹é‡çš„è¯„ä¼°ï¼Œå°æœåŠ¡èµ„æºçš„æµªè´¹ç­‰é—®é¢˜é€æ¸æ˜¾ç°ï¼Œæ­¤æ—¶éœ€å¢åŠ ä¸€ä¸ªè°ƒåº¦ä¸­å¿ƒåŸºäºè®¿é—®å‹åŠ›å®æ—¶ç®¡ç†é›†ç¾¤å®¹é‡ï¼Œæé«˜é›†ç¾¤åˆ©ç”¨ç‡ã€‚æ­¤æ—¶ï¼Œç”¨äº<strong>æé«˜æœºå™¨åˆ©ç”¨ç‡çš„èµ„æºè°ƒåº¦å’Œæ²»ç†ä¸­å¿ƒ</strong>(SOA)[ Service Oriented Architecture]æ˜¯å…³é”®ã€‚</p><p><img src="https://img2020.cnblogs.com/blog/1905053/202004/1905053-20200412225925894-2054203963.png" srcset="/blog/img/loading.gif" alt="img"></p><p>ä»€ä¹ˆæ˜¯RPC</p><p>RPCã€Remote Procedure Callã€‘æ˜¯æŒ‡è¿œç¨‹è¿‡ç¨‹è°ƒç”¨ï¼Œæ˜¯ä¸€ç§è¿›ç¨‹é—´é€šä¿¡æ–¹å¼ï¼Œä»–æ˜¯ä¸€ç§æŠ€æœ¯çš„æ€æƒ³ï¼Œè€Œä¸æ˜¯è§„èŒƒã€‚å®ƒå…è®¸ç¨‹åºè°ƒç”¨å¦ä¸€ä¸ªåœ°å€ç©ºé—´ï¼ˆé€šå¸¸æ˜¯å…±äº«ç½‘ç»œçš„å¦ä¸€å°æœºå™¨ä¸Šï¼‰çš„è¿‡ç¨‹æˆ–å‡½æ•°ï¼Œè€Œä¸ç”¨ç¨‹åºå‘˜æ˜¾å¼ç¼–ç è¿™ä¸ªè¿œç¨‹è°ƒç”¨çš„ç»†èŠ‚ã€‚å³ç¨‹åºå‘˜æ— è®ºæ˜¯è°ƒç”¨æœ¬åœ°çš„è¿˜æ˜¯è¿œç¨‹çš„å‡½æ•°ï¼Œæœ¬è´¨ä¸Šç¼–å†™çš„è°ƒç”¨ä»£ç åŸºæœ¬ç›¸åŒã€‚</p><p>ä¹Ÿå°±æ˜¯è¯´ä¸¤å°æœåŠ¡å™¨Aï¼ŒBï¼Œä¸€ä¸ªåº”ç”¨éƒ¨ç½²åœ¨AæœåŠ¡å™¨ä¸Šï¼Œæƒ³è¦è°ƒç”¨BæœåŠ¡å™¨ä¸Šåº”ç”¨æä¾›çš„å‡½æ•°/æ–¹æ³•ï¼Œç”±äºä¸åœ¨ä¸€ä¸ªå†…å­˜ç©ºé—´ï¼Œä¸èƒ½ç›´æ¥è°ƒç”¨ï¼Œéœ€è¦é€šè¿‡ç½‘ç»œæ¥è¡¨è¾¾è°ƒç”¨çš„è¯­ä¹‰å’Œä¼ è¾¾è°ƒç”¨çš„æ•°æ®ã€‚ä¸ºä»€ä¹ˆè¦ç”¨RPCå‘¢ï¼Ÿå°±æ˜¯æ— æ³•åœ¨ä¸€ä¸ªè¿›ç¨‹å†…ï¼Œç”šè‡³ä¸€ä¸ªè®¡ç®—æœºå†…é€šè¿‡æœ¬åœ°è°ƒç”¨çš„æ–¹å¼å®Œæˆçš„éœ€æ±‚ï¼Œæ¯”å¦‚ä¸åŒçš„ç³»ç»Ÿé—´çš„é€šè®¯ï¼Œç”šè‡³ä¸åŒçš„ç»„ç»‡é—´çš„é€šè®¯ï¼Œç”±äºè®¡ç®—èƒ½åŠ›éœ€è¦æ¨ªå‘æ‰©å±•ï¼Œéœ€è¦åœ¨å¤šå°æœºå™¨ç»„æˆçš„é›†ç¾¤ä¸Šéƒ¨ç½²åº”ç”¨ã€‚RPCå°±æ˜¯è¦åƒè°ƒç”¨æœ¬åœ°çš„å‡½æ•°ä¸€æ ·å»è°ƒè¿œç¨‹å‡½æ•°ï¼›</p><p>æ¨èé˜…è¯»æ–‡ç« ï¼š<a href="https://www.jianshu.com/p/2accc2840a1b" target="_blank" rel="noopener">https://www.jianshu.com/p/2accc2840a1b</a></p><p><strong>RPCåŸºæœ¬åŸç†</strong></p><p><img src="https://img2020.cnblogs.com/blog/1905053/202004/1905053-20200412225942424-634751471.png" srcset="/blog/img/loading.gif" alt="img"></p><p><strong>æ­¥éª¤è§£æï¼š</strong></p><p><img src="https://img2020.cnblogs.com/blog/1905053/202004/1905053-20200412225954994-2069522644.png" srcset="/blog/img/loading.gif" alt="img"></p><p>RPCä¸¤ä¸ªæ ¸å¿ƒæ¨¡å—ï¼šé€šè®¯ï¼Œåºåˆ—åŒ–ã€‚</p><p>æµ‹è¯•ç¯å¢ƒæ­å»º</p><h2 id="Dubbo"><a href="#Dubbo" class="headerlink" title="*\***\Dubbo********"></a><strong>*\</strong>*<em>*</em>*<em>\</em>Dubbo*<em>*</em>*<em>*</em>****</h2><p>Apache Dubbo |ËˆdÊŒbÉ™ÊŠ| æ˜¯ä¸€æ¬¾é«˜æ€§èƒ½ã€è½»é‡çº§çš„å¼€æºJava RPCæ¡†æ¶ï¼Œå®ƒæä¾›äº†ä¸‰å¤§æ ¸å¿ƒèƒ½åŠ›ï¼šé¢å‘æ¥å£çš„è¿œç¨‹æ–¹æ³•è°ƒç”¨ï¼Œæ™ºèƒ½å®¹é”™å’Œè´Ÿè½½å‡è¡¡ï¼Œä»¥åŠæœåŠ¡è‡ªåŠ¨æ³¨å†Œå’Œå‘ç°ã€‚</p><p>dubboå®˜ç½‘ <a href="http://dubbo.apache.org/zh-cn/index.html" target="_blank" rel="noopener">http://dubbo.apache.org/zh-cn/index.html</a></p><p>1.äº†è§£Dubboçš„ç‰¹æ€§</p><p>2.æŸ¥çœ‹å®˜æ–¹æ–‡æ¡£</p><p><strong>dubboåŸºæœ¬æ¦‚å¿µ</strong></p><p><img src="https://img2020.cnblogs.com/blog/1905053/202004/1905053-20200412230011744-1175379704.png" srcset="/blog/img/loading.gif" alt="img"></p><p><strong>æœåŠ¡æä¾›è€…</strong>ï¼ˆProviderï¼‰ï¼šæš´éœ²æœåŠ¡çš„æœåŠ¡æä¾›æ–¹ï¼ŒæœåŠ¡æä¾›è€…åœ¨å¯åŠ¨æ—¶ï¼Œå‘æ³¨å†Œä¸­å¿ƒæ³¨å†Œè‡ªå·±æä¾›çš„æœåŠ¡ã€‚</p><p><strong>æœåŠ¡æ¶ˆè´¹è€…</strong>ï¼ˆConsumerï¼‰ï¼šè°ƒç”¨è¿œç¨‹æœåŠ¡çš„æœåŠ¡æ¶ˆè´¹æ–¹ï¼ŒæœåŠ¡æ¶ˆè´¹è€…åœ¨å¯åŠ¨æ—¶ï¼Œå‘æ³¨å†Œä¸­å¿ƒè®¢é˜…è‡ªå·±æ‰€éœ€çš„æœåŠ¡ï¼ŒæœåŠ¡æ¶ˆè´¹è€…ï¼Œä»æä¾›è€…åœ°å€åˆ—è¡¨ä¸­ï¼ŒåŸºäºè½¯è´Ÿè½½å‡è¡¡ç®—æ³•ï¼Œé€‰ä¸€å°æä¾›è€…è¿›è¡Œè°ƒç”¨ï¼Œå¦‚æœè°ƒç”¨å¤±è´¥ï¼Œå†é€‰å¦ä¸€å°è°ƒç”¨ã€‚</p><p><strong>æ³¨å†Œä¸­å¿ƒ</strong>ï¼ˆRegistryï¼‰ï¼šæ³¨å†Œä¸­å¿ƒè¿”å›æœåŠ¡æä¾›è€…åœ°å€åˆ—è¡¨ç»™æ¶ˆè´¹è€…ï¼Œå¦‚æœæœ‰å˜æ›´ï¼Œæ³¨å†Œä¸­å¿ƒå°†åŸºäºé•¿è¿æ¥æ¨é€å˜æ›´æ•°æ®ç»™æ¶ˆè´¹è€…</p><p><strong>ç›‘æ§ä¸­å¿ƒ</strong>ï¼ˆMonitorï¼‰ï¼šæœåŠ¡æ¶ˆè´¹è€…å’Œæä¾›è€…ï¼Œåœ¨å†…å­˜ä¸­ç´¯è®¡è°ƒç”¨æ¬¡æ•°å’Œè°ƒç”¨æ—¶é—´ï¼Œå®šæ—¶æ¯åˆ†é’Ÿå‘é€ä¸€æ¬¡ç»Ÿè®¡æ•°æ®åˆ°ç›‘æ§ä¸­å¿ƒ</p><p><strong>è°ƒç”¨å…³ç³»è¯´æ˜</strong></p><p>l æœåŠ¡å®¹å™¨è´Ÿè´£å¯åŠ¨ï¼ŒåŠ è½½ï¼Œè¿è¡ŒæœåŠ¡æä¾›è€…ã€‚</p><p>l æœåŠ¡æä¾›è€…åœ¨å¯åŠ¨æ—¶ï¼Œå‘æ³¨å†Œä¸­å¿ƒæ³¨å†Œè‡ªå·±æä¾›çš„æœåŠ¡ã€‚</p><p>l æœåŠ¡æ¶ˆè´¹è€…åœ¨å¯åŠ¨æ—¶ï¼Œå‘æ³¨å†Œä¸­å¿ƒè®¢é˜…è‡ªå·±æ‰€éœ€çš„æœåŠ¡ã€‚</p><p>l æ³¨å†Œä¸­å¿ƒè¿”å›æœåŠ¡æä¾›è€…åœ°å€åˆ—è¡¨ç»™æ¶ˆè´¹è€…ï¼Œå¦‚æœæœ‰å˜æ›´ï¼Œæ³¨å†Œä¸­å¿ƒå°†åŸºäºé•¿è¿æ¥æ¨é€å˜æ›´æ•°æ®ç»™æ¶ˆè´¹è€…ã€‚</p><p>l æœåŠ¡æ¶ˆè´¹è€…ï¼Œä»æä¾›è€…åœ°å€åˆ—è¡¨ä¸­ï¼ŒåŸºäºè½¯è´Ÿè½½å‡è¡¡ç®—æ³•ï¼Œé€‰ä¸€å°æä¾›è€…è¿›è¡Œè°ƒç”¨ï¼Œå¦‚æœè°ƒç”¨å¤±è´¥ï¼Œå†é€‰å¦ä¸€å°è°ƒç”¨ã€‚</p><p>l æœåŠ¡æ¶ˆè´¹è€…å’Œæä¾›è€…ï¼Œåœ¨å†…å­˜ä¸­ç´¯è®¡è°ƒç”¨æ¬¡æ•°å’Œè°ƒç”¨æ—¶é—´ï¼Œå®šæ—¶æ¯åˆ†é’Ÿå‘é€ä¸€æ¬¡ç»Ÿè®¡æ•°æ®åˆ°ç›‘æ§ä¸­å¿ƒã€‚</p><h2 id="Dubboç¯å¢ƒæ­å»º"><a href="#Dubboç¯å¢ƒæ­å»º" class="headerlink" title="*\***\Dubboç¯å¢ƒæ­å»º********"></a><strong>*\</strong>*<em>*</em>*<em>\</em>Dubboç¯å¢ƒæ­å»º*<em>*</em>*<em>*</em>****</h2><p>ç‚¹è¿›dubboå®˜æ–¹æ–‡æ¡£ï¼Œæ¨èæˆ‘ä»¬ä½¿ç”¨Zookeeper æ³¨å†Œä¸­å¿ƒ</p><p>ä»€ä¹ˆæ˜¯zookeeperå‘¢ï¼Ÿå¯ä»¥æŸ¥çœ‹å®˜æ–¹æ–‡æ¡£</p><h2 id="Windowä¸‹å®‰è£…zookeeper"><a href="#Windowä¸‹å®‰è£…zookeeper" class="headerlink" title="*\***\Windowä¸‹å®‰è£…zookeeper********"></a><strong>*\</strong>*<em>*</em>*<em>\</em>Windowä¸‹å®‰è£…zookeeper*<em>*</em>*<em>*</em>****</h2><p>1ã€ä¸‹è½½zookeeper ï¼šåœ°å€ï¼Œ æˆ‘ä»¬ä¸‹è½½3.4.14 ï¼Œ æœ€æ–°ç‰ˆï¼è§£å‹zookeeper</p><p>2ã€è¿è¡Œ/bin/zkServer.cmd ï¼Œåˆæ¬¡è¿è¡Œä¼šæŠ¥é”™ï¼Œæ²¡æœ‰zoo.cfgé…ç½®æ–‡ä»¶ï¼›</p><p>å¯èƒ½é‡åˆ°é—®é¢˜ï¼šé—ªé€€ !</p><p>è§£å†³æ–¹æ¡ˆï¼šç¼–è¾‘zkServer.cmdæ–‡ä»¶æœ«å°¾æ·»åŠ pause ã€‚è¿™æ ·è¿è¡Œå‡ºé”™å°±ä¸ä¼šé€€å‡ºï¼Œä¼šæç¤ºé”™è¯¯ä¿¡æ¯ï¼Œæ–¹ä¾¿æ‰¾åˆ°åŸå› ã€‚</p><p><img src="https://img2020.cnblogs.com/blog/1905053/202004/1905053-20200412230026479-947348663.png" srcset="/blog/img/loading.gif" alt="img"></p><p><img src="https://img2020.cnblogs.com/blog/1905053/202004/1905053-20200412230037329-740930228.png" srcset="/blog/img/loading.gif" alt="img"></p><p>3ã€ä¿®æ”¹zoo.cfgé…ç½®æ–‡ä»¶</p><p>å°†confæ–‡ä»¶å¤¹ä¸‹é¢çš„zoo_sample.cfgå¤åˆ¶ä¸€ä»½æ”¹åä¸ºzoo.cfgå³å¯ã€‚</p><p>æ³¨æ„å‡ ä¸ªé‡è¦ä½ç½®ï¼š</p><p>dataDir=./ ä¸´æ—¶æ•°æ®å­˜å‚¨çš„ç›®å½•ï¼ˆå¯å†™ç›¸å¯¹è·¯å¾„ï¼‰</p><p>clientPort=2181 zookeeperçš„ç«¯å£å·</p><p>ä¿®æ”¹å®Œæˆåå†æ¬¡å¯åŠ¨zookeeper</p><p><img src="https://img2020.cnblogs.com/blog/1905053/202004/1905053-20200412230050035-1907960449.png" srcset="/blog/img/loading.gif" alt="img"></p><p>4ã€ä½¿ç”¨zkCli.cmdæµ‹è¯•</p><p>ls /ï¼šåˆ—å‡ºzookeeperæ ¹ä¸‹ä¿å­˜çš„æ‰€æœ‰èŠ‚ç‚¹</p><pre><code class="hljs angelscript">[zk: <span class="hljs-number">127.0</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span>:<span class="hljs-number">2181</span>(CONNECTED) <span class="hljs-number">4</span>] ls /[zookeeper]</code></pre><p>create â€“e /kuangshen 123ï¼šåˆ›å»ºä¸€ä¸ªkuangshenèŠ‚ç‚¹ï¼Œå€¼ä¸º123</p><p><img src="https://img2020.cnblogs.com/blog/1905053/202004/1905053-20200412230103589-1318102017.png" srcset="/blog/img/loading.gif" alt="img"></p><p>get /kuangshenï¼šè·å–/kuangshenèŠ‚ç‚¹çš„å€¼</p><p><img src="https://img2020.cnblogs.com/blog/1905053/202004/1905053-20200412230116159-2103649071.png" srcset="/blog/img/loading.gif" alt="img"></p><p>æˆ‘ä»¬å†æ¥æŸ¥çœ‹ä¸€ä¸‹èŠ‚ç‚¹</p><p><img src="https://img2020.cnblogs.com/blog/1905053/202004/1905053-20200412230133804-1513007496.png" srcset="/blog/img/loading.gif" alt="img"></p><h2 id="windowä¸‹å®‰è£…dubbo-admin"><a href="#windowä¸‹å®‰è£…dubbo-admin" class="headerlink" title="*\***\windowä¸‹å®‰è£…dubbo-admin********"></a><strong>*\</strong>*<em>*</em>*<em>\</em>windowä¸‹å®‰è£…dubbo-admin*<em>*</em>*<em>*</em>****</h2><p>dubboæœ¬èº«å¹¶ä¸æ˜¯ä¸€ä¸ªæœåŠ¡è½¯ä»¶ã€‚å®ƒå…¶å®å°±æ˜¯ä¸€ä¸ªjaråŒ…ï¼Œèƒ½å¤Ÿå¸®ä½ çš„javaç¨‹åºè¿æ¥åˆ°zookeeperï¼Œå¹¶åˆ©ç”¨zookeeperæ¶ˆè´¹ã€æä¾›æœåŠ¡ã€‚</p><p>ä½†æ˜¯ä¸ºäº†è®©ç”¨æˆ·æ›´å¥½çš„ç®¡ç†ç›‘æ§ä¼—å¤šçš„dubboæœåŠ¡ï¼Œå®˜æ–¹æä¾›äº†ä¸€ä¸ªå¯è§†åŒ–çš„ç›‘æ§ç¨‹åºdubbo-adminï¼Œä¸è¿‡è¿™ä¸ªç›‘æ§å³ä½¿ä¸è£…ä¹Ÿä¸å½±å“ä½¿ç”¨ã€‚</p><p>æˆ‘ä»¬è¿™é‡Œæ¥å®‰è£…ä¸€ä¸‹ï¼š</p><p><strong>1ã€ä¸‹è½½dubbo-admin</strong></p><p>åœ°å€ ï¼š<a href="https://github.com/apache/dubbo-admin/tree/master" target="_blank" rel="noopener">https://github.com/apache/dubbo-admin/tree/master</a></p><p><strong>2ã€è§£å‹è¿›å…¥ç›®å½•</strong></p><p>ä¿®æ”¹ dubbo-admin\src\main\resources \application.properties æŒ‡å®šzookeeperåœ°å€</p><pre><code class="hljs stylus">server.port=<span class="hljs-number">7001s</span>pring<span class="hljs-selector-class">.velocity</span>.cache=falsespring<span class="hljs-selector-class">.velocity</span>.charset=UTF-<span class="hljs-number">8s</span>pring<span class="hljs-selector-class">.velocity</span>.layout-url=/templates/default<span class="hljs-selector-class">.vmspring</span><span class="hljs-selector-class">.messages</span>.fallback-to-system-locale=falsespring<span class="hljs-selector-class">.messages</span>.basename=i18n/messagespring<span class="hljs-selector-class">.root</span>.password=rootspring<span class="hljs-selector-class">.guest</span>.password=guestdubbo<span class="hljs-selector-class">.registry</span>.address=zookeeper:<span class="hljs-comment">//127.0.0.1:2181</span></code></pre><p><strong>3ã€åœ¨é¡¹ç›®ç›®å½•ä¸‹</strong>æ‰“åŒ…dubbo-admin</p><pre><code class="hljs reasonml">mvn clean package -<span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">Dmaven</span>.</span></span>test.skip=<span class="hljs-literal">true</span></code></pre><p><strong>ç¬¬ä¸€æ¬¡æ‰“åŒ…çš„è¿‡ç¨‹æœ‰ç‚¹æ…¢ï¼Œéœ€è¦è€å¿ƒç­‰å¾…ï¼ç›´åˆ°æˆåŠŸï¼</strong></p><p><img src="https://img2020.cnblogs.com/blog/1905053/202004/1905053-20200412230149119-363508332.png" srcset="/blog/img/loading.gif" alt="img"></p><p>4ã€æ‰§è¡Œ dubbo-admin\target ä¸‹çš„dubbo-admin-0.0.1-SNAPSHOT.jar</p><pre><code class="hljs css"><span class="hljs-selector-tag">java</span> <span class="hljs-selector-tag">-jar</span> <span class="hljs-selector-tag">dubbo-admin-0</span><span class="hljs-selector-class">.0</span><span class="hljs-selector-class">.1-SNAPSHOT</span><span class="hljs-selector-class">.jar</span></code></pre><p>ã€æ³¨æ„ï¼šzookeeperçš„æœåŠ¡ä¸€å®šè¦æ‰“å¼€ï¼ã€‘</p><p>æ‰§è¡Œå®Œæ¯•ï¼Œæˆ‘ä»¬å»è®¿é—®ä¸€ä¸‹ <a href="http://localhost:7001/" target="_blank" rel="noopener">http://localhost:7001/</a> ï¼Œ è¿™æ—¶å€™æˆ‘ä»¬éœ€è¦è¾“å…¥ç™»å½•è´¦æˆ·å’Œå¯†ç ï¼Œæˆ‘ä»¬éƒ½æ˜¯é»˜è®¤çš„root-rootï¼›</p><p>ç™»å½•æˆåŠŸåï¼ŒæŸ¥çœ‹ç•Œé¢</p><p><img src="https://img2020.cnblogs.com/blog/1905053/202004/1905053-20200412230202910-800109291.png" srcset="/blog/img/loading.gif" alt="img"></p><p>å®‰è£…å®Œæˆï¼</p><h2 id="17-3ã€SpringBoot-Dubbo-zookeeper"><a href="#17-3ã€SpringBoot-Dubbo-zookeeper" class="headerlink" title="17.3ã€SpringBoot + Dubbo + zookeeper"></a>17.3ã€SpringBoot + Dubbo + zookeeper</h2><h2 id="æ¡†æ¶æ­å»º"><a href="#æ¡†æ¶æ­å»º" class="headerlink" title="*\***\æ¡†æ¶æ­å»º********"></a><strong>*\</strong>*<em>*</em>*<em>\</em>æ¡†æ¶æ­å»º*<em>*</em>*<em>*</em>****</h2><p><strong>1. å¯åŠ¨zookeeper ï¼</strong></p><p><strong>2. IDEAåˆ›å»ºä¸€ä¸ªç©ºé¡¹ç›®ï¼›</strong></p><p><strong>3.åˆ›å»ºä¸€ä¸ªæ¨¡å—ï¼Œå®ç°æœåŠ¡æä¾›è€…ï¼šprovider-server ï¼Œ é€‰æ‹©webä¾èµ–å³å¯</strong></p><p><strong>4.é¡¹ç›®åˆ›å»ºå®Œæ¯•ï¼Œæˆ‘ä»¬å†™ä¸€ä¸ªæœåŠ¡ï¼Œæ¯”å¦‚å–ç¥¨çš„æœåŠ¡ï¼›</strong></p><p>ç¼–å†™æ¥å£</p><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.kuang.provider.service;<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">TicketService</span> </span>{   <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">getTicket</span><span class="hljs-params">()</span></span>;}</code></pre><p>ç¼–å†™å®ç°ç±»</p><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.kuang.provider.service;<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">TicketServiceImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">TicketService</span> </span>{   <span class="hljs-meta">@Override</span>   <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">getTicket</span><span class="hljs-params">()</span> </span>{       <span class="hljs-keyword">return</span> <span class="hljs-string">"ã€Šç‹‚ç¥è¯´Javaã€‹"</span>;  }}</code></pre><p><strong>5.åˆ›å»ºä¸€ä¸ªæ¨¡å—ï¼Œå®ç°æœåŠ¡æ¶ˆè´¹è€…ï¼šconsumer-server ï¼Œ é€‰æ‹©webä¾èµ–å³å¯</strong></p><p><strong>6.é¡¹ç›®åˆ›å»ºå®Œæ¯•ï¼Œæˆ‘ä»¬å†™ä¸€ä¸ªæœåŠ¡ï¼Œæ¯”å¦‚ç”¨æˆ·çš„æœåŠ¡ï¼›</strong></p><p>ç¼–å†™service</p><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.kuang.consumer.service;<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserService</span> </span>{   <span class="hljs-comment">//æˆ‘ä»¬éœ€è¦å»æ‹¿å»æ³¨å†Œä¸­å¿ƒçš„æœåŠ¡</span>}</code></pre><p><strong>éœ€æ±‚ï¼šç°åœ¨æˆ‘ä»¬çš„ç”¨æˆ·æƒ³ä½¿ç”¨ä¹°ç¥¨çš„æœåŠ¡ï¼Œè¿™è¦æ€ä¹ˆå¼„å‘¢ ï¼Ÿ</strong></p><h2 id="æœåŠ¡æä¾›è€…"><a href="#æœåŠ¡æä¾›è€…" class="headerlink" title="*\***\æœåŠ¡æä¾›è€…********"></a><strong>*\</strong>*<em>*</em>*<em>\</em>æœåŠ¡æä¾›è€…*<em>*</em>*<em>*</em>****</h2><p><strong>1ã€å°†æœåŠ¡æä¾›è€…æ³¨å†Œåˆ°æ³¨å†Œä¸­å¿ƒï¼Œæˆ‘ä»¬éœ€è¦æ•´åˆDubboå’Œzookeeperï¼Œæ‰€ä»¥éœ€è¦å¯¼åŒ…</strong></p><p><strong>æˆ‘ä»¬ä»dubboå®˜ç½‘è¿›å…¥githubï¼Œçœ‹ä¸‹æ–¹çš„å¸®åŠ©æ–‡æ¡£ï¼Œæ‰¾åˆ°dubbo-springbootï¼Œæ‰¾åˆ°ä¾èµ–åŒ…</strong></p><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- Dubbo Spring Boot Starter --&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>   <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.apache.dubbo<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>   <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>dubbo-spring-boot-starter<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>   <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.7.3<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span></code></pre><p><strong>zookeeperçš„åŒ…æˆ‘ä»¬å»mavenä»“åº“ä¸‹è½½ï¼Œzkclientï¼›</strong></p><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- https://mvnrepository.com/artifact/com.github.sgroschupf/zkclient --&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>   <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.github.sgroschupf<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>   <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>zkclient<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>   <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>0.1<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span></code></pre><p><strong>ã€æ–°ç‰ˆçš„å‘ã€‘zookeeperåŠå…¶ä¾èµ–åŒ…ï¼Œè§£å†³æ—¥å¿—å†²çªï¼Œè¿˜éœ€è¦å‰”é™¤æ—¥å¿—ä¾èµ–ï¼›</strong></p><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- å¼•å…¥zookeeper --&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>   <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.apache.curator<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>   <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>curator-framework<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>   <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.12.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>   <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.apache.curator<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>   <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>curator-recipes<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>   <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.12.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>   <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.apache.zookeeper<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>   <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>zookeeper<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>   <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.4.14<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>   <span class="hljs-comment">&lt;!--æ’é™¤è¿™ä¸ªslf4j-log4j12--&gt;</span>   <span class="hljs-tag">&lt;<span class="hljs-name">exclusions</span>&gt;</span>       <span class="hljs-tag">&lt;<span class="hljs-name">exclusion</span>&gt;</span>           <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.slf4j<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>           <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>slf4j-log4j12<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>       <span class="hljs-tag">&lt;/<span class="hljs-name">exclusion</span>&gt;</span>   <span class="hljs-tag">&lt;/<span class="hljs-name">exclusions</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span></code></pre><p><strong>2ã€åœ¨springbooté…ç½®æ–‡ä»¶ä¸­é…ç½®dubboç›¸å…³å±æ€§ï¼</strong></p><pre><code class="hljs properties"><span class="hljs-comment">#å½“å‰åº”ç”¨åå­—</span><span class="hljs-meta">dubbo.application.name</span>=<span class="hljs-string">provider-server</span><span class="hljs-comment">#æ³¨å†Œä¸­å¿ƒåœ°å€</span><span class="hljs-meta">dubbo.registry.address</span>=<span class="hljs-string">zookeeper://127.0.0.1:2181</span><span class="hljs-comment">#æ‰«ææŒ‡å®šåŒ…ä¸‹æœåŠ¡</span><span class="hljs-meta">dubbo.scan.base-packages</span>=<span class="hljs-string">com.kuang.provider.service</span></code></pre><p><strong>3ã€åœ¨serviceçš„å®ç°ç±»ä¸­é…ç½®æœåŠ¡æ³¨è§£ï¼Œå‘å¸ƒæœåŠ¡ï¼æ³¨æ„å¯¼åŒ…é—®é¢˜</strong></p><pre><code class="hljs java"><span class="hljs-keyword">import</span> org.apache.dubbo.config.annotation.Service;<span class="hljs-keyword">import</span> org.springframework.stereotype.Component;<span class="hljs-meta">@Service</span> <span class="hljs-comment">//å°†æœåŠ¡å‘å¸ƒå‡ºå»</span><span class="hljs-meta">@Component</span> <span class="hljs-comment">//æ”¾åœ¨å®¹å™¨ä¸­</span><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">TicketServiceImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">TicketService</span> </span>{   <span class="hljs-meta">@Override</span>   <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">getTicket</span><span class="hljs-params">()</span> </span>{       <span class="hljs-keyword">return</span> <span class="hljs-string">"ã€Šç‹‚ç¥è¯´Javaã€‹"</span>;  }}</code></pre><p><strong>é€»è¾‘ç†è§£ ï¼šåº”ç”¨å¯åŠ¨èµ·æ¥ï¼Œdubboå°±ä¼šæ‰«ææŒ‡å®šçš„åŒ…ä¸‹å¸¦æœ‰@componentæ³¨è§£çš„æœåŠ¡ï¼Œå°†å®ƒå‘å¸ƒåœ¨æŒ‡å®šçš„æ³¨å†Œä¸­å¿ƒä¸­ï¼</strong></p><h2 id="æœåŠ¡æ¶ˆè´¹è€…"><a href="#æœåŠ¡æ¶ˆè´¹è€…" class="headerlink" title="*\***\æœåŠ¡æ¶ˆè´¹è€…********"></a><strong>*\</strong>*<em>*</em>*<em>\</em>æœåŠ¡æ¶ˆè´¹è€…*<em>*</em>*<em>*</em>****</h2><p><strong>1ã€å¯¼å…¥ä¾èµ–ï¼Œå’Œä¹‹å‰çš„ä¾èµ–ä¸€æ ·ï¼›</strong></p><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--dubbo--&gt;</span><span class="hljs-comment">&lt;!-- Dubbo Spring Boot Starter --&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>   <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.apache.dubbo<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>   <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>dubbo-spring-boot-starter<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>   <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.7.3<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><span class="hljs-comment">&lt;!--zookeeper--&gt;</span><span class="hljs-comment">&lt;!-- https://mvnrepository.com/artifact/com.github.sgroschupf/zkclient --&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>   <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.github.sgroschupf<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>   <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>zkclient<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>   <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>0.1<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><span class="hljs-comment">&lt;!-- å¼•å…¥zookeeper --&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>   <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.apache.curator<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>   <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>curator-framework<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>   <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.12.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>   <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.apache.curator<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>   <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>curator-recipes<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>   <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.12.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>   <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.apache.zookeeper<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>   <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>zookeeper<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>   <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.4.14<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>   <span class="hljs-comment">&lt;!--æ’é™¤è¿™ä¸ªslf4j-log4j12--&gt;</span>   <span class="hljs-tag">&lt;<span class="hljs-name">exclusions</span>&gt;</span>       <span class="hljs-tag">&lt;<span class="hljs-name">exclusion</span>&gt;</span>           <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.slf4j<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>           <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>slf4j-log4j12<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>       <span class="hljs-tag">&lt;/<span class="hljs-name">exclusion</span>&gt;</span>   <span class="hljs-tag">&lt;/<span class="hljs-name">exclusions</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span></code></pre><p>2ã€<strong>é…ç½®å‚æ•°</strong></p><pre><code class="hljs properties"><span class="hljs-comment">#å½“å‰åº”ç”¨åå­—</span><span class="hljs-meta">dubbo.application.name</span>=<span class="hljs-string">consumer-server</span><span class="hljs-comment">#æ³¨å†Œä¸­å¿ƒåœ°å€</span><span class="hljs-meta">dubbo.registry.address</span>=<span class="hljs-string">zookeeper://127.0.0.1:2181</span></code></pre><p><strong>3. æœ¬æ¥æ­£å¸¸æ­¥éª¤æ˜¯éœ€è¦å°†æœåŠ¡æä¾›è€…çš„æ¥å£æ‰“åŒ…ï¼Œç„¶åç”¨pomæ–‡ä»¶å¯¼å…¥ï¼Œæˆ‘ä»¬è¿™é‡Œä½¿ç”¨ç®€å•çš„æ–¹å¼ï¼Œç›´æ¥å°†æœåŠ¡çš„æ¥å£æ‹¿è¿‡æ¥ï¼Œè·¯å¾„å¿…é¡»ä¿è¯æ­£ç¡®ï¼Œå³å’ŒæœåŠ¡æä¾›è€…ç›¸åŒï¼›</strong></p><p><img src="https://img2020.cnblogs.com/blog/1905053/202004/1905053-20200412230223249-22793107.png" srcset="/blog/img/loading.gif" alt="img"></p><p><strong>4. å®Œå–„æ¶ˆè´¹è€…çš„æœåŠ¡ç±»</strong></p><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.kuang.consumer.service;<span class="hljs-keyword">import</span> com.kuang.provider.service.TicketService;<span class="hljs-keyword">import</span> org.apache.dubbo.config.annotation.Reference;<span class="hljs-keyword">import</span> org.springframework.stereotype.Service;<span class="hljs-meta">@Service</span> <span class="hljs-comment">//æ³¨å…¥åˆ°å®¹å™¨ä¸­</span><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserService</span> </span>{   <span class="hljs-meta">@Reference</span> <span class="hljs-comment">//è¿œç¨‹å¼•ç”¨æŒ‡å®šçš„æœåŠ¡ï¼Œä»–ä¼šæŒ‰ç…§å…¨ç±»åè¿›è¡ŒåŒ¹é…ï¼Œçœ‹è°ç»™æ³¨å†Œä¸­å¿ƒæ³¨å†Œäº†è¿™ä¸ªå…¨ç±»å</span>   TicketService ticketService;   <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">bugTicket</span><span class="hljs-params">()</span></span>{       String ticket = ticketService.getTicket();       System.out.println(<span class="hljs-string">"åœ¨æ³¨å†Œä¸­å¿ƒä¹°åˆ°"</span>+ticket);  }}</code></pre><p><strong>5. æµ‹è¯•ç±»ç¼–å†™ï¼›</strong></p><pre><code class="hljs java"><span class="hljs-meta">@RunWith</span>(SpringRunner<span class="hljs-class">.<span class="hljs-keyword">class</span>)</span><span class="hljs-class">@<span class="hljs-title">SpringBootTest</span></span><span class="hljs-class"><span class="hljs-title">public</span> <span class="hljs-title">class</span> <span class="hljs-title">ConsumerServerApplicationTests</span> </span>{   <span class="hljs-meta">@Autowired</span>   UserService userService;   <span class="hljs-meta">@Test</span>   <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">contextLoads</span><span class="hljs-params">()</span> </span>{       userService.bugTicket();  }}</code></pre><h2 id="å¯åŠ¨æµ‹è¯•"><a href="#å¯åŠ¨æµ‹è¯•" class="headerlink" title="*\***\å¯åŠ¨æµ‹è¯•********"></a><strong>*\</strong>*<em>*</em>*<em>\</em>å¯åŠ¨æµ‹è¯•*<em>*</em>*<em>*</em>****</h2><p><strong>1. å¼€å¯zookeeper</strong></p><p><strong>2. æ‰“å¼€dubbo-adminå®ç°ç›‘æ§ã€å¯ä»¥ä¸ç”¨åšã€‘</strong></p><p><strong>3. å¼€å¯æœåŠ¡è€…</strong></p><p><strong>4. æ¶ˆè´¹è€…æ¶ˆè´¹æµ‹è¯•ï¼Œç»“æœï¼š</strong></p><p><img src="https://img2020.cnblogs.com/blog/1905053/202004/1905053-20200412230239279-1442230316.png" srcset="/blog/img/loading.gif" alt="img"></p><p><strong>ç›‘æ§ä¸­å¿ƒ ï¼š</strong></p><p><img src="https://img2020.cnblogs.com/blog/1905053/202004/1905053-20200412230254269-261185375.png" srcset="/blog/img/loading.gif" alt="img"></p><p><strong>ok , è¿™å°±æ˜¯SpingBoot + dubbo + zookeeperå®ç°åˆ†å¸ƒå¼å¼€å‘çš„åº”ç”¨ï¼Œå…¶å®å°±æ˜¯ä¸€ä¸ªæœåŠ¡æ‹†åˆ†çš„æ€æƒ³ï¼›</strong></p><h1 id="18ã€SpringBootï¼šé›†æˆSpringSecurity"><a href="#18ã€SpringBootï¼šé›†æˆSpringSecurity" class="headerlink" title="18ã€SpringBootï¼šé›†æˆSpringSecurity"></a>18ã€SpringBootï¼šé›†æˆSpringSecurity</h1><h2 id="18-1ã€å®‰å…¨ç®€ä»‹"><a href="#18-1ã€å®‰å…¨ç®€ä»‹" class="headerlink" title="18.1ã€å®‰å…¨ç®€ä»‹"></a>18.1ã€å®‰å…¨ç®€ä»‹</h2><p>åœ¨ Web å¼€å‘ä¸­ï¼Œå®‰å…¨ä¸€ç›´æ˜¯éå¸¸é‡è¦çš„ä¸€ä¸ªæ–¹é¢ã€‚å®‰å…¨è™½ç„¶å±äºåº”ç”¨çš„éåŠŸèƒ½æ€§éœ€æ±‚ï¼Œä½†æ˜¯åº”è¯¥åœ¨åº”ç”¨å¼€å‘çš„åˆæœŸå°±è€ƒè™‘è¿›æ¥ã€‚å¦‚æœåœ¨åº”ç”¨å¼€å‘çš„åæœŸæ‰è€ƒè™‘å®‰å…¨çš„é—®é¢˜ï¼Œå°±å¯èƒ½é™·å…¥ä¸€ä¸ªä¸¤éš¾çš„å¢ƒåœ°ï¼šä¸€æ–¹é¢ï¼Œåº”ç”¨å­˜åœ¨ä¸¥é‡çš„å®‰å…¨æ¼æ´ï¼Œæ— æ³•æ»¡è¶³ç”¨æˆ·çš„è¦æ±‚ï¼Œå¹¶å¯èƒ½é€ æˆç”¨æˆ·çš„éšç§æ•°æ®è¢«æ”»å‡»è€…çªƒå–ï¼›å¦ä¸€æ–¹é¢ï¼Œåº”ç”¨çš„åŸºæœ¬æ¶æ„å·²ç»ç¡®å®šï¼Œè¦ä¿®å¤å®‰å…¨æ¼æ´ï¼Œå¯èƒ½éœ€è¦å¯¹ç³»ç»Ÿçš„æ¶æ„åšå‡ºæ¯”è¾ƒé‡å¤§çš„è°ƒæ•´ï¼Œå› è€Œéœ€è¦æ›´å¤šçš„å¼€å‘æ—¶é—´ï¼Œå½±å“åº”ç”¨çš„å‘å¸ƒè¿›ç¨‹ã€‚å› æ­¤ï¼Œä»åº”ç”¨å¼€å‘çš„ç¬¬ä¸€å¤©å°±åº”è¯¥æŠŠå®‰å…¨ç›¸å…³çš„å› ç´ è€ƒè™‘è¿›æ¥ï¼Œå¹¶åœ¨æ•´ä¸ªåº”ç”¨çš„å¼€å‘è¿‡ç¨‹ä¸­ã€‚</p><p>å¸‚é¢ä¸Šå­˜åœ¨æ¯”è¾ƒæœ‰åçš„ï¼šShiroï¼ŒSpring Security ï¼</p><p>è¿™é‡Œéœ€è¦é˜è¿°ä¸€ä¸‹çš„æ˜¯ï¼Œæ¯ä¸€ä¸ªæ¡†æ¶çš„å‡ºç°éƒ½æ˜¯ä¸ºäº†è§£å†³æŸä¸€é—®é¢˜è€Œäº§ç”Ÿäº†ï¼Œé‚£ä¹ˆSpring Securityæ¡†æ¶çš„å‡ºç°æ˜¯ä¸ºäº†è§£å†³ä»€ä¹ˆé—®é¢˜å‘¢ï¼Ÿ</p><p>é¦–å…ˆæˆ‘ä»¬çœ‹ä¸‹å®ƒçš„å®˜ç½‘ä»‹ç»ï¼šSpring Securityå®˜ç½‘åœ°å€</p><p>Spring Security is a powerful and highly customizable authentication and access-control framework. It is the de-facto standard for securing Spring-based applications.</p><p>Spring Security is a framework that focuses on providing both authentication and authorization to Java applications. Like all Spring projects, the real power of Spring Security is found in how easily it can be extended to meet custom requirements</p><p>Spring Securityæ˜¯ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§ä¸”é«˜åº¦å¯å®šåˆ¶çš„èº«ä»½éªŒè¯å’Œè®¿é—®æ§åˆ¶æ¡†æ¶ã€‚å®ƒå®é™…ä¸Šæ˜¯ä¿æŠ¤åŸºäºspringçš„åº”ç”¨ç¨‹åºçš„æ ‡å‡†ã€‚</p><p>Spring Securityæ˜¯ä¸€ä¸ªæ¡†æ¶ï¼Œä¾§é‡äºä¸ºJavaåº”ç”¨ç¨‹åºæä¾›èº«ä»½éªŒè¯å’Œæˆæƒã€‚ä¸æ‰€æœ‰Springé¡¹ç›®ä¸€æ ·ï¼ŒSpringå®‰å…¨æ€§çš„çœŸæ­£å¼ºå¤§ä¹‹å¤„åœ¨äºå®ƒå¯ä»¥è½»æ¾åœ°æ‰©å±•ä»¥æ»¡è¶³å®šåˆ¶éœ€æ±‚</p><p>ä»å®˜ç½‘çš„ä»‹ç»ä¸­å¯ä»¥çŸ¥é“è¿™æ˜¯ä¸€ä¸ªæƒé™æ¡†æ¶ã€‚æƒ³æˆ‘ä»¬ä¹‹å‰åšé¡¹ç›®æ˜¯æ²¡æœ‰ä½¿ç”¨æ¡†æ¶æ˜¯æ€ä¹ˆæ§åˆ¶æƒé™çš„ï¼Ÿå¯¹äºæƒé™ ä¸€èˆ¬ä¼šç»†åˆ†ä¸ºåŠŸèƒ½æƒé™ï¼Œè®¿é—®æƒé™ï¼Œå’Œèœå•æƒé™ã€‚ä»£ç ä¼šå†™çš„éå¸¸çš„ç¹çï¼Œå†—ä½™ã€‚</p><p>æ€ä¹ˆè§£å†³ä¹‹å‰å†™æƒé™ä»£ç ç¹çï¼Œå†—ä½™çš„é—®é¢˜ï¼Œä¸€äº›ä¸»æµæ¡†æ¶å°±åº”è¿è€Œç”Ÿè€ŒSpring Scecurityå°±æ˜¯å…¶ä¸­çš„ä¸€ç§ã€‚</p><p>Spring æ˜¯ä¸€ä¸ªéå¸¸æµè¡Œå’ŒæˆåŠŸçš„ Java åº”ç”¨å¼€å‘æ¡†æ¶ã€‚Spring Security åŸºäº Spring æ¡†æ¶ï¼Œæä¾›äº†ä¸€å¥— Web åº”ç”¨å®‰å…¨æ€§çš„å®Œæ•´è§£å†³æ–¹æ¡ˆã€‚ä¸€èˆ¬æ¥è¯´ï¼ŒWeb åº”ç”¨çš„å®‰å…¨æ€§åŒ…æ‹¬ç”¨æˆ·è®¤è¯ï¼ˆAuthenticationï¼‰å’Œç”¨æˆ·æˆæƒï¼ˆAuthorizationï¼‰ä¸¤ä¸ªéƒ¨åˆ†ã€‚ç”¨æˆ·è®¤è¯æŒ‡çš„æ˜¯éªŒè¯æŸä¸ªç”¨æˆ·æ˜¯å¦ä¸ºç³»ç»Ÿä¸­çš„åˆæ³•ä¸»ä½“ï¼Œä¹Ÿå°±æ˜¯è¯´ç”¨æˆ·èƒ½å¦è®¿é—®è¯¥ç³»ç»Ÿã€‚ç”¨æˆ·è®¤è¯ä¸€èˆ¬è¦æ±‚ç”¨æˆ·æä¾›ç”¨æˆ·åå’Œå¯†ç ã€‚ç³»ç»Ÿé€šè¿‡æ ¡éªŒç”¨æˆ·åå’Œå¯†ç æ¥å®Œæˆè®¤è¯è¿‡ç¨‹ã€‚ç”¨æˆ·æˆæƒæŒ‡çš„æ˜¯éªŒè¯æŸä¸ªç”¨æˆ·æ˜¯å¦æœ‰æƒé™æ‰§è¡ŒæŸä¸ªæ“ä½œã€‚åœ¨ä¸€ä¸ªç³»ç»Ÿä¸­ï¼Œä¸åŒç”¨æˆ·æ‰€å…·æœ‰çš„æƒé™æ˜¯ä¸åŒçš„ã€‚æ¯”å¦‚å¯¹ä¸€ä¸ªæ–‡ä»¶æ¥è¯´ï¼Œæœ‰çš„ç”¨æˆ·åªèƒ½è¿›è¡Œè¯»å–ï¼Œè€Œæœ‰çš„ç”¨æˆ·å¯ä»¥è¿›è¡Œä¿®æ”¹ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œç³»ç»Ÿä¼šä¸ºä¸åŒçš„ç”¨æˆ·åˆ†é…ä¸åŒçš„è§’è‰²ï¼Œè€Œæ¯ä¸ªè§’è‰²åˆ™å¯¹åº”ä¸€ç³»åˆ—çš„æƒé™ã€‚</p><p>å¯¹äºä¸Šé¢æåˆ°çš„ä¸¤ç§åº”ç”¨æƒ…æ™¯ï¼ŒSpring Security æ¡†æ¶éƒ½æœ‰å¾ˆå¥½çš„æ”¯æŒã€‚åœ¨ç”¨æˆ·è®¤è¯æ–¹é¢ï¼ŒSpring Security æ¡†æ¶æ”¯æŒä¸»æµçš„è®¤è¯æ–¹å¼ï¼ŒåŒ…æ‹¬ HTTP åŸºæœ¬è®¤è¯ã€HTTP è¡¨å•éªŒè¯ã€HTTP æ‘˜è¦è®¤è¯ã€OpenID å’Œ LDAP ç­‰ã€‚åœ¨ç”¨æˆ·æˆæƒæ–¹é¢ï¼ŒSpring Security æä¾›äº†åŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶å’Œè®¿é—®æ§åˆ¶åˆ—è¡¨ï¼ˆAccess Control Listï¼ŒACLï¼‰ï¼Œå¯ä»¥å¯¹åº”ç”¨ä¸­çš„é¢†åŸŸå¯¹è±¡è¿›è¡Œç»†ç²’åº¦çš„æ§åˆ¶ã€‚</p><h2 id="18-2ã€å®æˆ˜æµ‹è¯•"><a href="#18-2ã€å®æˆ˜æµ‹è¯•" class="headerlink" title="18.2ã€å®æˆ˜æµ‹è¯•"></a>18.2ã€å®æˆ˜æµ‹è¯•</h2><h3 id="18-2-1ã€å®éªŒç¯å¢ƒæ­å»º"><a href="#18-2-1ã€å®éªŒç¯å¢ƒæ­å»º" class="headerlink" title="18.2.1ã€å®éªŒç¯å¢ƒæ­å»º"></a>18.2.1ã€å®éªŒç¯å¢ƒæ­å»º</h3><p>1ã€æ–°å»ºä¸€ä¸ªåˆå§‹çš„springbooté¡¹ç›®webæ¨¡å—ï¼Œthymeleafæ¨¡å—</p><p>2ã€å¯¼å…¥é™æ€èµ„æº</p><pre><code class="hljs angelscript">welcome.html|views|level1<span class="hljs-number">1.</span>html<span class="hljs-number">2.</span>html<span class="hljs-number">3.</span>html|level2<span class="hljs-number">1.</span>html<span class="hljs-number">2.</span>html<span class="hljs-number">3.</span>html|level3<span class="hljs-number">1.</span>html<span class="hljs-number">2.</span>html<span class="hljs-number">3.</span>htmlLogin.html</code></pre><p>3ã€controllerè·³è½¬ï¼</p><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.kuang.controller;<span class="hljs-keyword">import</span> org.springframework.stereotype.Controller;<span class="hljs-keyword">import</span> org.springframework.web.bind.annotation.PathVariable;<span class="hljs-keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;<span class="hljs-meta">@Controller</span><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">RouterController</span> </span>{   <span class="hljs-meta">@RequestMapping</span>({<span class="hljs-string">"/"</span>,<span class="hljs-string">"/index"</span>})   <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">index</span><span class="hljs-params">()</span></span>{       <span class="hljs-keyword">return</span> <span class="hljs-string">"index"</span>;  }   <span class="hljs-meta">@RequestMapping</span>(<span class="hljs-string">"/toLogin"</span>)   <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">toLogin</span><span class="hljs-params">()</span></span>{       <span class="hljs-keyword">return</span> <span class="hljs-string">"views/login"</span>;  }   <span class="hljs-meta">@RequestMapping</span>(<span class="hljs-string">"/level1/{id}"</span>)   <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">level1</span><span class="hljs-params">(@PathVariable(<span class="hljs-string">"id"</span>)</span> <span class="hljs-keyword">int</span> id)</span>{       <span class="hljs-keyword">return</span> <span class="hljs-string">"views/level1/"</span>+id;  }   <span class="hljs-meta">@RequestMapping</span>(<span class="hljs-string">"/level2/{id}"</span>)   <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">level2</span><span class="hljs-params">(@PathVariable(<span class="hljs-string">"id"</span>)</span> <span class="hljs-keyword">int</span> id)</span>{       <span class="hljs-keyword">return</span> <span class="hljs-string">"views/level2/"</span>+id;  }   <span class="hljs-meta">@RequestMapping</span>(<span class="hljs-string">"/level3/{id}"</span>)   <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">level3</span><span class="hljs-params">(@PathVariable(<span class="hljs-string">"id"</span>)</span> <span class="hljs-keyword">int</span> id)</span>{       <span class="hljs-keyword">return</span> <span class="hljs-string">"views/level3/"</span>+id;  }}</code></pre><p>4ã€æµ‹è¯•å®éªŒç¯å¢ƒæ˜¯å¦OKï¼</p><h3 id="18-2-2ã€è®¤è¯†SpringSecurity"><a href="#18-2-2ã€è®¤è¯†SpringSecurity" class="headerlink" title="18.2.2ã€è®¤è¯†SpringSecurity"></a>18.2.2ã€è®¤è¯†SpringSecurity</h3><p>Spring Security æ˜¯é’ˆå¯¹Springé¡¹ç›®çš„å®‰å…¨æ¡†æ¶ï¼Œä¹Ÿæ˜¯Spring Bootåº•å±‚å®‰å…¨æ¨¡å—é»˜è®¤çš„æŠ€æœ¯é€‰å‹ï¼Œä»–å¯ä»¥å®ç°å¼ºå¤§çš„Webå®‰å…¨æ§åˆ¶ï¼Œå¯¹äºå®‰å…¨æ§åˆ¶ï¼Œæˆ‘ä»¬ä»…éœ€è¦å¼•å…¥spring-boot-starter-security æ¨¡å—ï¼Œè¿›è¡Œå°‘é‡çš„é…ç½®ï¼Œå³å¯å®ç°å¼ºå¤§çš„å®‰å…¨ç®¡ç†ï¼</p><p>è®°ä½å‡ ä¸ªç±»ï¼š</p><ul><li>WebSecurityConfigurerAdapterï¼šè‡ªå®šä¹‰Securityç­–ç•¥</li><li>AuthenticationManagerBuilderï¼šè‡ªå®šä¹‰è®¤è¯ç­–ç•¥</li><li>@EnableWebSecurityï¼šå¼€å¯WebSecurityæ¨¡å¼</li></ul><p>Spring Securityçš„ä¸¤ä¸ªä¸»è¦ç›®æ ‡æ˜¯ â€œè®¤è¯â€ å’Œ â€œæˆæƒâ€ï¼ˆè®¿é—®æ§åˆ¶ï¼‰ã€‚</p><p><strong>â€œè®¤è¯â€ï¼ˆAuthenticationï¼‰</strong></p><p>èº«ä»½éªŒè¯æ˜¯å…³äºéªŒè¯æ‚¨çš„å‡­æ®ï¼Œå¦‚ç”¨æˆ·å/ç”¨æˆ·IDå’Œå¯†ç ï¼Œä»¥éªŒè¯æ‚¨çš„èº«ä»½ã€‚</p><p>èº«ä»½éªŒè¯é€šå¸¸é€šè¿‡ç”¨æˆ·åå’Œå¯†ç å®Œæˆï¼Œæœ‰æ—¶ä¸èº«ä»½éªŒè¯å› ç´ ç»“åˆä½¿ç”¨ã€‚</p><p><strong>â€œæˆæƒâ€ ï¼ˆAuthorizationï¼‰</strong></p><p>æˆæƒå‘ç”Ÿåœ¨ç³»ç»ŸæˆåŠŸéªŒè¯æ‚¨çš„èº«ä»½åï¼Œæœ€ç»ˆä¼šæˆäºˆæ‚¨è®¿é—®èµ„æºï¼ˆå¦‚ä¿¡æ¯ï¼Œæ–‡ä»¶ï¼Œæ•°æ®åº“ï¼Œèµ„é‡‘ï¼Œä½ç½®ï¼Œå‡ ä¹ä»»ä½•å†…å®¹ï¼‰çš„å®Œå…¨æƒé™ã€‚</p><p>è¿™ä¸ªæ¦‚å¿µæ˜¯é€šç”¨çš„ï¼Œè€Œä¸æ˜¯åªåœ¨Spring Security ä¸­å­˜åœ¨ã€‚</p><h3 id="18-2-3ã€è®¤è¯å’Œæˆæƒ"><a href="#18-2-3ã€è®¤è¯å’Œæˆæƒ" class="headerlink" title="18.2.3ã€è®¤è¯å’Œæˆæƒ"></a>18.2.3ã€è®¤è¯å’Œæˆæƒ</h3><p>ç›®å‰ï¼Œæˆ‘ä»¬çš„æµ‹è¯•ç¯å¢ƒï¼Œæ˜¯è°éƒ½å¯ä»¥è®¿é—®çš„ï¼Œæˆ‘ä»¬ä½¿ç”¨ Spring Security å¢åŠ ä¸Šè®¤è¯å’Œæˆæƒçš„åŠŸèƒ½</p><p>1ã€å¼•å…¥ Spring Security æ¨¡å—</p><pre><code class="hljs java">&lt;dependency&gt;   &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;   &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;&lt;/dependency&gt;</code></pre><p>2ã€ç¼–å†™ Spring Security é…ç½®ç±»</p><p>å‚è€ƒå®˜ç½‘ï¼š<a href="https://spring.io/projects/spring-security" target="_blank" rel="noopener">https://spring.io/projects/spring-security</a></p><p>æŸ¥çœ‹æˆ‘ä»¬è‡ªå·±é¡¹ç›®ä¸­çš„ç‰ˆæœ¬ï¼Œæ‰¾åˆ°å¯¹åº”çš„å¸®åŠ©æ–‡æ¡£ï¼š</p><p><a href="https://docs.spring.io/spring-security/site/docs/5.3.0.RELEASE/reference/html5" target="_blank" rel="noopener">https://docs.spring.io/spring-security/site/docs/5.3.0.RELEASE/reference/html5</a> #servlet-applications 8.16.4</p><p><img src="https://img2020.cnblogs.com/blog/1905053/202004/1905053-20200412230317849-1998269068.png" srcset="/blog/img/loading.gif" alt="img"></p><p>3ã€ç¼–å†™åŸºç¡€é…ç½®ç±»</p><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.kuang.config;<span class="hljs-keyword">import</span> org.springframework.security.config.annotation.web.builders.HttpSecurity;<span class="hljs-keyword">import</span> org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;<span class="hljs-keyword">import</span> org.springframework.security.config.annotation.web.configuration.WebSecurityConfigurerAdapter;<span class="hljs-meta">@EnableWebSecurity</span> <span class="hljs-comment">// å¼€å¯WebSecurityæ¨¡å¼</span><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SecurityConfig</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">WebSecurityConfigurerAdapter</span> </span>{   <span class="hljs-meta">@Override</span>   <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">configure</span><span class="hljs-params">(HttpSecurity http)</span> <span class="hljs-keyword">throws</span> Exception </span>{         }}</code></pre><p>4ã€å®šåˆ¶è¯·æ±‚çš„æˆæƒè§„åˆ™</p><pre><code class="hljs java"><span class="hljs-meta">@Override</span><span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">configure</span><span class="hljs-params">(HttpSecurity http)</span> <span class="hljs-keyword">throws</span> Exception </span>{   <span class="hljs-comment">// å®šåˆ¶è¯·æ±‚çš„æˆæƒè§„åˆ™</span>   <span class="hljs-comment">// é¦–é¡µæ‰€æœ‰äººå¯ä»¥è®¿é—®</span>   http.authorizeRequests().antMatchers(<span class="hljs-string">"/"</span>).permitAll()  .antMatchers(<span class="hljs-string">"/level1/**"</span>).hasRole(<span class="hljs-string">"vip1"</span>)  .antMatchers(<span class="hljs-string">"/level2/**"</span>).hasRole(<span class="hljs-string">"vip2"</span>)  .antMatchers(<span class="hljs-string">"/level3/**"</span>).hasRole(<span class="hljs-string">"vip3"</span>);}</code></pre><p>5ã€æµ‹è¯•ä¸€ä¸‹ï¼šå‘ç°é™¤äº†é¦–é¡µéƒ½è¿›ä¸å»äº†ï¼å› ä¸ºæˆ‘ä»¬ç›®å‰æ²¡æœ‰ç™»å½•çš„è§’è‰²ï¼Œå› ä¸ºè¯·æ±‚éœ€è¦ç™»å½•çš„è§’è‰²æ‹¥æœ‰å¯¹åº”çš„æƒé™æ‰å¯ä»¥ï¼</p><p>6ã€åœ¨configure()æ–¹æ³•ä¸­åŠ å…¥ä»¥ä¸‹é…ç½®ï¼Œå¼€å¯è‡ªåŠ¨é…ç½®çš„ç™»å½•åŠŸèƒ½ï¼</p><pre><code class="hljs java"><span class="hljs-comment">// å¼€å¯è‡ªåŠ¨é…ç½®çš„ç™»å½•åŠŸèƒ½</span><span class="hljs-comment">// /login è¯·æ±‚æ¥åˆ°ç™»å½•é¡µ</span><span class="hljs-comment">// /login?error é‡å®šå‘åˆ°è¿™é‡Œè¡¨ç¤ºç™»å½•å¤±è´¥</span>http.formLogin();</code></pre><p>7ã€æµ‹è¯•ä¸€ä¸‹ï¼šå‘ç°ï¼Œæ²¡æœ‰æƒé™çš„æ—¶å€™ï¼Œä¼šè·³è½¬åˆ°ç™»å½•çš„é¡µé¢ï¼</p><p><img src="https://img2020.cnblogs.com/blog/1905053/202004/1905053-20200412230333154-1538491155.png" srcset="/blog/img/loading.gif" alt="img"></p><p>8ã€æŸ¥çœ‹åˆšæ‰ç™»å½•é¡µçš„æ³¨é‡Šä¿¡æ¯ï¼›</p><p>æˆ‘ä»¬å¯ä»¥å®šä¹‰è®¤è¯è§„åˆ™ï¼Œé‡å†™configure(AuthenticationManagerBuilder auth)æ–¹æ³•</p><pre><code class="hljs java"><span class="hljs-comment">//å®šä¹‰è®¤è¯è§„åˆ™</span><span class="hljs-meta">@Override</span><span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">configure</span><span class="hljs-params">(AuthenticationManagerBuilder auth)</span> <span class="hljs-keyword">throws</span> Exception </span>{      <span class="hljs-comment">//åœ¨å†…å­˜ä¸­å®šä¹‰ï¼Œä¹Ÿå¯ä»¥åœ¨jdbcä¸­å»æ‹¿....</span>   auth.inMemoryAuthentication()          .withUser(<span class="hljs-string">"kuangshen"</span>).password(<span class="hljs-string">"123456"</span>).roles(<span class="hljs-string">"vip2"</span>,<span class="hljs-string">"vip3"</span>)          .and()          .withUser(<span class="hljs-string">"root"</span>).password(<span class="hljs-string">"123456"</span>).roles(<span class="hljs-string">"vip1"</span>,<span class="hljs-string">"vip2"</span>,<span class="hljs-string">"vip3"</span>)          .and()          .withUser(<span class="hljs-string">"guest"</span>).password(<span class="hljs-string">"123456"</span>).roles(<span class="hljs-string">"vip1"</span>,<span class="hljs-string">"vip2"</span>);}</code></pre><p>9ã€æµ‹è¯•ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨è¿™äº›è´¦å·ç™»å½•è¿›è¡Œæµ‹è¯•ï¼å‘ç°ä¼šæŠ¥é”™ï¼</p><p>There is no PasswordEncoder mapped for the id â€œnullâ€</p><p><img src="https://img2020.cnblogs.com/blog/1905053/202004/1905053-20200412230347555-1367252514.png" srcset="/blog/img/loading.gif" alt="img"></p><p>10ã€åŸå› ï¼Œæˆ‘ä»¬è¦å°†å‰ç«¯ä¼ è¿‡æ¥çš„å¯†ç è¿›è¡ŒæŸç§æ–¹å¼åŠ å¯†ï¼Œå¦åˆ™å°±æ— æ³•ç™»å½•ï¼Œä¿®æ”¹ä»£ç </p><pre><code class="hljs java"><span class="hljs-comment">//å®šä¹‰è®¤è¯è§„åˆ™</span><span class="hljs-meta">@Override</span><span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">configure</span><span class="hljs-params">(AuthenticationManagerBuilder auth)</span> <span class="hljs-keyword">throws</span> Exception </span>{   <span class="hljs-comment">//åœ¨å†…å­˜ä¸­å®šä¹‰ï¼Œä¹Ÿå¯ä»¥åœ¨jdbcä¸­å»æ‹¿....</span>   <span class="hljs-comment">//Spring security 5.0ä¸­æ–°å¢äº†å¤šç§åŠ å¯†æ–¹å¼ï¼Œä¹Ÿæ”¹å˜äº†å¯†ç çš„æ ¼å¼ã€‚</span>   <span class="hljs-comment">//è¦æƒ³æˆ‘ä»¬çš„é¡¹ç›®è¿˜èƒ½å¤Ÿæ­£å¸¸ç™»é™†ï¼Œéœ€è¦ä¿®æ”¹ä¸€ä¸‹configureä¸­çš„ä»£ç ã€‚æˆ‘ä»¬è¦å°†å‰ç«¯ä¼ è¿‡æ¥çš„å¯†ç è¿›è¡ŒæŸç§æ–¹å¼åŠ å¯†</span>   <span class="hljs-comment">//spring security å®˜æ–¹æ¨èçš„æ˜¯ä½¿ç”¨bcryptåŠ å¯†æ–¹å¼ã€‚</span>      auth.inMemoryAuthentication().passwordEncoder(<span class="hljs-keyword">new</span> BCryptPasswordEncoder())          .withUser(<span class="hljs-string">"kuangshen"</span>).password(<span class="hljs-keyword">new</span> BCryptPasswordEncoder().encode(<span class="hljs-string">"123456"</span>)).roles(<span class="hljs-string">"vip2"</span>,<span class="hljs-string">"vip3"</span>)          .and()          .withUser(<span class="hljs-string">"root"</span>).password(<span class="hljs-keyword">new</span> BCryptPasswordEncoder().encode(<span class="hljs-string">"123456"</span>)).roles(<span class="hljs-string">"vip1"</span>,<span class="hljs-string">"vip2"</span>,<span class="hljs-string">"vip3"</span>)          .and()          .withUser(<span class="hljs-string">"guest"</span>).password(<span class="hljs-keyword">new</span> BCryptPasswordEncoder().encode(<span class="hljs-string">"123456"</span>)).roles(<span class="hljs-string">"vip1"</span>,<span class="hljs-string">"vip2"</span>);}</code></pre><p>11ã€æµ‹è¯•ï¼Œå‘ç°ï¼Œç™»å½•æˆåŠŸï¼Œå¹¶ä¸”æ¯ä¸ªè§’è‰²åªèƒ½è®¿é—®è‡ªå·±è®¤è¯ä¸‹çš„è§„åˆ™ï¼æå®š</p><h3 id="18-2-4ã€æƒé™æ§åˆ¶å’Œæ³¨é”€"><a href="#18-2-4ã€æƒé™æ§åˆ¶å’Œæ³¨é”€" class="headerlink" title="18.2.4ã€æƒé™æ§åˆ¶å’Œæ³¨é”€"></a>18.2.4ã€æƒé™æ§åˆ¶å’Œæ³¨é”€</h3><p>1ã€å¼€å¯è‡ªåŠ¨é…ç½®çš„æ³¨é”€çš„åŠŸèƒ½</p><pre><code class="hljs java"><span class="hljs-comment">//å®šåˆ¶è¯·æ±‚çš„æˆæƒè§„åˆ™</span><span class="hljs-meta">@Override</span><span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">configure</span><span class="hljs-params">(HttpSecurity http)</span> <span class="hljs-keyword">throws</span> Exception </span>{   <span class="hljs-comment">//....</span>   <span class="hljs-comment">//å¼€å¯è‡ªåŠ¨é…ç½®çš„æ³¨é”€çš„åŠŸèƒ½</span>      <span class="hljs-comment">// /logout æ³¨é”€è¯·æ±‚</span>   http.logout();}</code></pre><p>2ã€æˆ‘ä»¬åœ¨å‰ç«¯ï¼Œå¢åŠ ä¸€ä¸ªæ³¨é”€çš„æŒ‰é’®ï¼Œindex.html å¯¼èˆªæ ä¸­</p><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"item"</span> <span class="hljs-attr">th:href</span>=<span class="hljs-string">"@{/logout}"</span>&gt;</span>   <span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"address card icon"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span> æ³¨é”€<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span></code></pre><p>3ã€æˆ‘ä»¬å¯ä»¥å»æµ‹è¯•ä¸€ä¸‹ï¼Œç™»å½•æˆåŠŸåç‚¹å‡»æ³¨é”€ï¼Œå‘ç°æ³¨é”€å®Œæ¯•ä¼šè·³è½¬åˆ°ç™»å½•é¡µé¢ï¼</p><p>4ã€ä½†æ˜¯ï¼Œæˆ‘ä»¬æƒ³è®©ä»–æ³¨é”€æˆåŠŸåï¼Œä¾æ—§å¯ä»¥è·³è½¬åˆ°é¦–é¡µï¼Œè¯¥æ€ä¹ˆå¤„ç†å‘¢ï¼Ÿ</p><pre><code class="hljs java"><span class="hljs-comment">// .logoutSuccessUrl("/"); æ³¨é”€æˆåŠŸæ¥åˆ°é¦–é¡µ</span>http.logout().logoutSuccessUrl(<span class="hljs-string">"/"</span>);</code></pre><p>5ã€æµ‹è¯•ï¼Œæ³¨é”€å®Œæ¯•åï¼Œå‘ç°è·³è½¬åˆ°é¦–é¡µOK</p><p>6ã€æˆ‘ä»¬ç°åœ¨åˆæ¥ä¸€ä¸ªéœ€æ±‚ï¼šç”¨æˆ·æ²¡æœ‰ç™»å½•çš„æ—¶å€™ï¼Œå¯¼èˆªæ ä¸Šåªæ˜¾ç¤ºç™»å½•æŒ‰é’®ï¼Œç”¨æˆ·ç™»å½•ä¹‹åï¼Œå¯¼èˆªæ å¯ä»¥æ˜¾ç¤ºç™»å½•çš„ç”¨æˆ·ä¿¡æ¯åŠæ³¨é”€æŒ‰é’®ï¼è¿˜æœ‰å°±æ˜¯ï¼Œæ¯”å¦‚kuangshenè¿™ä¸ªç”¨æˆ·ï¼Œå®ƒåªæœ‰ vip2ï¼Œvip3åŠŸèƒ½ï¼Œé‚£ä¹ˆç™»å½•åˆ™åªæ˜¾ç¤ºè¿™ä¸¤ä¸ªåŠŸèƒ½ï¼Œè€Œvip1çš„åŠŸèƒ½èœå•ä¸æ˜¾ç¤ºï¼è¿™ä¸ªå°±æ˜¯çœŸå®çš„ç½‘ç«™æƒ…å†µäº†ï¼è¯¥å¦‚ä½•åšå‘¢ï¼Ÿ</p><p><strong>æˆ‘ä»¬éœ€è¦ç»“åˆthymeleafä¸­çš„ä¸€äº›åŠŸèƒ½</strong></p><p>secï¼šauthorize=â€isAuthenticated()â€:æ˜¯å¦è®¤è¯ç™»å½•ï¼æ¥æ˜¾ç¤ºä¸åŒçš„é¡µé¢</p><p>Mavenä¾èµ–ï¼š</p><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- https://mvnrepository.com/artifact/org.thymeleaf.extras/thymeleaf-extras-springsecurity4 --&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>   <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.thymeleaf.extras<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>   <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>thymeleaf-extras-springsecurity5<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>   <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.0.4.RELEASE<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span></code></pre><p>7ã€ä¿®æ”¹æˆ‘ä»¬çš„ å‰ç«¯é¡µé¢</p><ol><li><p>å¯¼å…¥å‘½åç©ºé—´</p></li><li><pre><code class="html">xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity5"<span class="comment"><pre><code class="hljs dust"><span class="xml">3. ä¿®æ”¹å¯¼èˆªæ ï¼Œå¢åŠ è®¤è¯åˆ¤æ–­</span><span class="xml">4. ```html</span><span class="xml"><span class="hljs-comment">&lt;!--ç™»å½•æ³¨é”€--&gt;</span></span><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"right menu"</span>&gt;</span></span><span class="xml"></span><span class="xml">   <span class="hljs-comment">&lt;!--å¦‚æœæœªç™»å½•--&gt;</span></span><span class="xml">   <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">sec:authorize</span>=<span class="hljs-string">"!isAuthenticated()"</span>&gt;</span></span><span class="xml">       <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"item"</span> <span class="hljs-attr">th:href</span>=<span class="hljs-string">"@</span></span></span><span class="hljs-template-tag">{/<span class="hljs-name">login</span>}</span><span class="xml"><span class="hljs-tag"><span class="hljs-string">"</span>&gt;</span></span><span class="xml">           <span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"address card icon"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span> ç™»å½•</span><span class="xml">       <span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span></span><span class="xml">   <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><span class="xml"></span><span class="xml">   <span class="hljs-comment">&lt;!--å¦‚æœå·²ç™»å½•--&gt;</span></span><span class="xml">   <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">sec:authorize</span>=<span class="hljs-string">"isAuthenticated()"</span>&gt;</span></span><span class="xml">       <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"item"</span>&gt;</span></span><span class="xml">           <span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"address card icon"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span></span><span class="xml">          ç”¨æˆ·åï¼š<span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">sec:authentication</span>=<span class="hljs-string">"principal.username"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><span class="xml">          è§’è‰²ï¼š<span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">sec:authentication</span>=<span class="hljs-string">"principal.authorities"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><span class="xml">       <span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span></span><span class="xml">   <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><span class="xml"></span><span class="xml">   <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">sec:authorize</span>=<span class="hljs-string">"isAuthenticated()"</span>&gt;</span></span><span class="xml">       <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"item"</span> <span class="hljs-attr">th:href</span>=<span class="hljs-string">"@</span></span></span><span class="hljs-template-tag">{/<span class="hljs-name">logout</span>}</span><span class="xml"><span class="hljs-tag"><span class="hljs-string">"</span>&gt;</span></span><span class="xml">           <span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"address card icon"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span> æ³¨é”€</span><span class="xml">       <span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span></span><span class="xml">   <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span></code></pre></span></code></pre></li></ol><p>8ã€é‡å¯æµ‹è¯•ï¼Œæˆ‘ä»¬å¯ä»¥ç™»å½•è¯•è¯•çœ‹ï¼Œç™»å½•æˆåŠŸåç¡®å®ï¼Œæ˜¾ç¤ºäº†æˆ‘ä»¬æƒ³è¦çš„é¡µé¢ï¼›</p><p>9ã€å¦‚æœæ³¨é”€404äº†ï¼Œå°±æ˜¯å› ä¸ºå®ƒé»˜è®¤é˜²æ­¢csrfè·¨ç«™è¯·æ±‚ä¼ªé€ ï¼Œå› ä¸ºä¼šäº§ç”Ÿå®‰å…¨é—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥å°†è¯·æ±‚æ”¹ä¸ºpostè¡¨å•æäº¤ï¼Œæˆ–è€…åœ¨spring securityä¸­å…³é—­csrfåŠŸèƒ½ï¼›æˆ‘ä»¬è¯•è¯•ï¼šåœ¨ é…ç½®ä¸­å¢åŠ  <code>http.csrf().disable();</code></p><pre><code class="hljs java">http.csrf().disable();<span class="hljs-comment">//å…³é—­csrfåŠŸèƒ½:è·¨ç«™è¯·æ±‚ä¼ªé€ ,é»˜è®¤åªèƒ½é€šè¿‡postæ–¹å¼æäº¤logoutè¯·æ±‚</span>http.logout().logoutSuccessUrl(<span class="hljs-string">"/"</span>);</code></pre><p>10ã€æˆ‘ä»¬ç»§ç»­å°†ä¸‹é¢çš„è§’è‰²åŠŸèƒ½å—è®¤è¯å®Œæˆï¼</p><pre><code class="hljs html"><span class="hljs-comment">&lt;!-- sec:authorize="hasRole('vip1')" --&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"column"</span> <span class="hljs-attr">sec:authorize</span>=<span class="hljs-string">"hasRole('vip1')"</span>&gt;</span>   <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"ui raised segment"</span>&gt;</span>       <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"ui"</span>&gt;</span>           <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"content"</span>&gt;</span>               <span class="hljs-tag">&lt;<span class="hljs-name">h5</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"content"</span>&gt;</span>Level 1<span class="hljs-tag">&lt;/<span class="hljs-name">h5</span>&gt;</span>               <span class="hljs-tag">&lt;<span class="hljs-name">hr</span>&gt;</span>               <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">th:href</span>=<span class="hljs-string">"@{/level1/1}"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"bullhorn icon"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span> Level-1-1<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>               <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">th:href</span>=<span class="hljs-string">"@{/level1/2}"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"bullhorn icon"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span> Level-1-2<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>               <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">th:href</span>=<span class="hljs-string">"@{/level1/3}"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"bullhorn icon"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span> Level-1-3<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>           <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>       <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>   <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"column"</span> <span class="hljs-attr">sec:authorize</span>=<span class="hljs-string">"hasRole('vip2')"</span>&gt;</span>   <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"ui raised segment"</span>&gt;</span>       <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"ui"</span>&gt;</span>           <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"content"</span>&gt;</span>               <span class="hljs-tag">&lt;<span class="hljs-name">h5</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"content"</span>&gt;</span>Level 2<span class="hljs-tag">&lt;/<span class="hljs-name">h5</span>&gt;</span>               <span class="hljs-tag">&lt;<span class="hljs-name">hr</span>&gt;</span>               <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">th:href</span>=<span class="hljs-string">"@{/level2/1}"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"bullhorn icon"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span> Level-2-1<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>               <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">th:href</span>=<span class="hljs-string">"@{/level2/2}"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"bullhorn icon"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span> Level-2-2<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>               <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">th:href</span>=<span class="hljs-string">"@{/level2/3}"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"bullhorn icon"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span> Level-2-3<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>           <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>       <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>   <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"column"</span> <span class="hljs-attr">sec:authorize</span>=<span class="hljs-string">"hasRole('vip3')"</span>&gt;</span>   <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"ui raised segment"</span>&gt;</span>       <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"ui"</span>&gt;</span>           <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"content"</span>&gt;</span>               <span class="hljs-tag">&lt;<span class="hljs-name">h5</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"content"</span>&gt;</span>Level 3<span class="hljs-tag">&lt;/<span class="hljs-name">h5</span>&gt;</span>               <span class="hljs-tag">&lt;<span class="hljs-name">hr</span>&gt;</span>               <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">th:href</span>=<span class="hljs-string">"@{/level3/1}"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"bullhorn icon"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span> Level-3-1<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>               <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">th:href</span>=<span class="hljs-string">"@{/level3/2}"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"bullhorn icon"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span> Level-3-2<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>               <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">th:href</span>=<span class="hljs-string">"@{/level3/3}"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"bullhorn icon"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span> Level-3-3<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>           <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>       <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>   <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></code></pre><p>11ã€æµ‹è¯•ä¸€ä¸‹ï¼</p><p>12ã€æƒé™æ§åˆ¶å’Œæ³¨é”€æå®šï¼</p><h3 id="18-2-5ã€è®°ä½æˆ‘"><a href="#18-2-5ã€è®°ä½æˆ‘" class="headerlink" title="18.2.5ã€è®°ä½æˆ‘"></a>18.2.5ã€è®°ä½æˆ‘</h3><p>ç°åœ¨çš„æƒ…å†µï¼Œæˆ‘ä»¬åªè¦ç™»å½•ä¹‹åï¼Œå…³é—­æµè§ˆå™¨ï¼Œå†ç™»å½•ï¼Œå°±ä¼šè®©æˆ‘ä»¬é‡æ–°ç™»å½•ï¼Œä½†æ˜¯å¾ˆå¤šç½‘ç«™çš„æƒ…å†µï¼Œå°±æ˜¯æœ‰ä¸€ä¸ªè®°ä½å¯†ç çš„åŠŸèƒ½ï¼Œè¿™ä¸ªè¯¥å¦‚ä½•å®ç°å‘¢ï¼Ÿå¾ˆç®€å•</p><p>1ã€å¼€å¯è®°ä½æˆ‘åŠŸèƒ½</p><pre><code class="hljs java"><span class="hljs-comment">//å®šåˆ¶è¯·æ±‚çš„æˆæƒè§„åˆ™</span><span class="hljs-meta">@Override</span><span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">configure</span><span class="hljs-params">(HttpSecurity http)</span> <span class="hljs-keyword">throws</span> Exception </span>{<span class="hljs-comment">//ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚</span>   <span class="hljs-comment">//è®°ä½æˆ‘</span>   http.rememberMe();}</code></pre><p>2ã€æˆ‘ä»¬å†æ¬¡å¯åŠ¨é¡¹ç›®æµ‹è¯•ä¸€ä¸‹ï¼Œå‘ç°ç™»å½•é¡µå¤šäº†ä¸€ä¸ªè®°ä½æˆ‘åŠŸèƒ½ï¼Œæˆ‘ä»¬ç™»å½•ä¹‹åå…³é—­ æµè§ˆå™¨ï¼Œç„¶åé‡æ–°æ‰“å¼€æµè§ˆå™¨è®¿é—®ï¼Œå‘ç°ç”¨æˆ·ä¾æ—§å­˜åœ¨ï¼</p><p>æ€è€ƒï¼šå¦‚ä½•å®ç°çš„å‘¢ï¼Ÿå…¶å®éå¸¸ç®€å•</p><p>æˆ‘ä»¬å¯ä»¥æŸ¥çœ‹æµè§ˆå™¨çš„cookie</p><p><img src="https://img2020.cnblogs.com/blog/1905053/202004/1905053-20200412230410090-275194565.png" srcset="/blog/img/loading.gif" alt="img"></p><p>3ã€æˆ‘ä»¬ç‚¹å‡»æ³¨é”€çš„æ—¶å€™ï¼Œå¯ä»¥å‘ç°ï¼Œspring security å¸®æˆ‘ä»¬è‡ªåŠ¨åˆ é™¤äº†è¿™ä¸ª cookie</p><p><img src="https://img2020.cnblogs.com/blog/1905053/202004/1905053-20200412230424964-1382261300.png" srcset="/blog/img/loading.gif" alt="img"><br>4ã€ç»“è®ºï¼šç™»å½•æˆåŠŸåï¼Œå°†cookieå‘é€ç»™æµè§ˆå™¨ä¿å­˜ï¼Œä»¥åç™»å½•å¸¦ä¸Šè¿™ä¸ªcookieï¼Œåªè¦é€šè¿‡æ£€æŸ¥å°±å¯ä»¥å…ç™»å½•äº†ã€‚å¦‚æœç‚¹å‡»æ³¨é”€ï¼Œåˆ™ä¼šåˆ é™¤è¿™ä¸ªcookieï¼Œå…·ä½“çš„åŸç†æˆ‘ä»¬åœ¨JavaWebé˜¶æ®µéƒ½è®²è¿‡äº†ï¼Œè¿™é‡Œå°±ä¸åœ¨å¤šè¯´äº†ï¼</p><h3 id="18-2-6ã€å®šåˆ¶ç™»å½•é¡µ"><a href="#18-2-6ã€å®šåˆ¶ç™»å½•é¡µ" class="headerlink" title="18.2.6ã€å®šåˆ¶ç™»å½•é¡µ"></a>18.2.6ã€å®šåˆ¶ç™»å½•é¡µ</h3><p>ç°åœ¨è¿™ä¸ªç™»å½•é¡µé¢éƒ½æ˜¯spring security é»˜è®¤çš„ï¼Œæ€ä¹ˆæ ·å¯ä»¥ä½¿ç”¨æˆ‘ä»¬è‡ªå·±å†™çš„Loginç•Œé¢å‘¢ï¼Ÿ</p><p>1ã€åœ¨åˆšæ‰çš„ç™»å½•é¡µé…ç½®åé¢æŒ‡å®š loginpage</p><pre><code class="hljs java">http.formLogin().loginPage(<span class="hljs-string">"/toLogin"</span>);</code></pre><p>2ã€ç„¶åå‰ç«¯ä¹Ÿéœ€è¦æŒ‡å‘æˆ‘ä»¬è‡ªå·±å®šä¹‰çš„ loginè¯·æ±‚</p><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"item"</span> <span class="hljs-attr">th:href</span>=<span class="hljs-string">"@{/toLogin}"</span>&gt;</span>   <span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"address card icon"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span> ç™»å½•<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span></code></pre><p>3ã€æˆ‘ä»¬ç™»å½•ï¼Œéœ€è¦å°†è¿™äº›ä¿¡æ¯å‘é€åˆ°å“ªé‡Œï¼Œæˆ‘ä»¬ä¹Ÿéœ€è¦é…ç½®ï¼Œlogin.html é…ç½®æäº¤è¯·æ±‚åŠæ–¹å¼ï¼Œæ–¹å¼å¿…é¡»ä¸ºpost:</p><p>åœ¨ loginPage()æºç ä¸­çš„æ³¨é‡Šä¸Šæœ‰å†™æ˜ï¼š</p><p><img src="https://img2020.cnblogs.com/blog/1905053/202004/1905053-20200412230440929-230804638.png" srcset="/blog/img/loading.gif" alt="img"></p><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">th:action</span>=<span class="hljs-string">"@{/login}"</span> <span class="hljs-attr">method</span>=<span class="hljs-string">"post"</span>&gt;</span>   <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"field"</span>&gt;</span>       <span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span>Username<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>       <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"ui left icon input"</span>&gt;</span>           <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">"Username"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"username"</span>&gt;</span>           <span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"user icon"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span>       <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>   <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>   <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"field"</span>&gt;</span>       <span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span>Password<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>       <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"ui left icon input"</span>&gt;</span>           <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"password"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"password"</span>&gt;</span>           <span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"lock icon"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span>       <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>   <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>   <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"submit"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"ui blue submit button"</span>/&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span></code></pre><p>4ã€è¿™ä¸ªè¯·æ±‚æäº¤ä¸Šæ¥ï¼Œæˆ‘ä»¬è¿˜éœ€è¦éªŒè¯å¤„ç†ï¼Œæ€ä¹ˆåšå‘¢ï¼Ÿæˆ‘ä»¬å¯ä»¥æŸ¥çœ‹formLogin()æ–¹æ³•çš„æºç ï¼æˆ‘ä»¬é…ç½®æ¥æ”¶ç™»å½•çš„ç”¨æˆ·åå’Œå¯†ç çš„å‚æ•°ï¼</p><pre><code class="hljs java">http.formLogin()  .usernameParameter(<span class="hljs-string">"username"</span>)  .passwordParameter(<span class="hljs-string">"password"</span>)  .loginPage(<span class="hljs-string">"/toLogin"</span>)  .loginProcessingUrl(<span class="hljs-string">"/login"</span>); <span class="hljs-comment">// ç™»é™†è¡¨å•æäº¤è¯·æ±‚</span></code></pre><p>5ã€åœ¨ç™»å½•é¡µå¢åŠ è®°ä½æˆ‘çš„å¤šé€‰æ¡†</p><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"checkbox"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"remember"</span>&gt;</span> è®°ä½æˆ‘</code></pre><p>6ã€åç«¯éªŒè¯å¤„ç†ï¼</p><pre><code class="hljs java"><span class="hljs-comment">//å®šåˆ¶è®°ä½æˆ‘çš„å‚æ•°ï¼</span>http.rememberMe().rememberMeParameter(<span class="hljs-string">"remember"</span>);</code></pre><p>7ã€æµ‹è¯•ï¼ŒOK</p><h2 id="18-3ã€å®Œæ•´é…ç½®ä»£ç "><a href="#18-3ã€å®Œæ•´é…ç½®ä»£ç " class="headerlink" title="18.3ã€å®Œæ•´é…ç½®ä»£ç "></a>18.3ã€å®Œæ•´é…ç½®ä»£ç </h2><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.kuang.config;<span class="hljs-keyword">import</span> org.springframework.security.config.annotation.authentication.builders.AuthenticationManagerBuilder;<span class="hljs-keyword">import</span> org.springframework.security.config.annotation.web.builders.HttpSecurity;<span class="hljs-keyword">import</span> org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;<span class="hljs-keyword">import</span> org.springframework.security.config.annotation.web.configuration.WebSecurityConfigurerAdapter;<span class="hljs-keyword">import</span> org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder;<span class="hljs-meta">@EnableWebSecurity</span><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SecurityConfig</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">WebSecurityConfigurerAdapter</span> </span>{   <span class="hljs-comment">//å®šåˆ¶è¯·æ±‚çš„æˆæƒè§„åˆ™</span>   <span class="hljs-meta">@Override</span>   <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">configure</span><span class="hljs-params">(HttpSecurity http)</span> <span class="hljs-keyword">throws</span> Exception </span>{       http.authorizeRequests().antMatchers(<span class="hljs-string">"/"</span>).permitAll()      .antMatchers(<span class="hljs-string">"/level1/**"</span>).hasRole(<span class="hljs-string">"vip1"</span>)      .antMatchers(<span class="hljs-string">"/level2/**"</span>).hasRole(<span class="hljs-string">"vip2"</span>)      .antMatchers(<span class="hljs-string">"/level3/**"</span>).hasRole(<span class="hljs-string">"vip3"</span>);       <span class="hljs-comment">//å¼€å¯è‡ªåŠ¨é…ç½®çš„ç™»å½•åŠŸèƒ½ï¼šå¦‚æœæ²¡æœ‰æƒé™ï¼Œå°±ä¼šè·³è½¬åˆ°ç™»å½•é¡µé¢ï¼</span>           <span class="hljs-comment">// /login è¯·æ±‚æ¥åˆ°ç™»å½•é¡µ</span>           <span class="hljs-comment">// /login?error é‡å®šå‘åˆ°è¿™é‡Œè¡¨ç¤ºç™»å½•å¤±è´¥</span>       http.formLogin()          .usernameParameter(<span class="hljs-string">"username"</span>)          .passwordParameter(<span class="hljs-string">"password"</span>)          .loginPage(<span class="hljs-string">"/toLogin"</span>)          .loginProcessingUrl(<span class="hljs-string">"/login"</span>); <span class="hljs-comment">// ç™»é™†è¡¨å•æäº¤è¯·æ±‚</span>       <span class="hljs-comment">//å¼€å¯è‡ªåŠ¨é…ç½®çš„æ³¨é”€çš„åŠŸèƒ½</span>           <span class="hljs-comment">// /logout æ³¨é”€è¯·æ±‚</span>           <span class="hljs-comment">// .logoutSuccessUrl("/"); æ³¨é”€æˆåŠŸæ¥åˆ°é¦–é¡µ</span>       http.csrf().disable();<span class="hljs-comment">//å…³é—­csrfåŠŸèƒ½:è·¨ç«™è¯·æ±‚ä¼ªé€ ,é»˜è®¤åªèƒ½é€šè¿‡postæ–¹å¼æäº¤logoutè¯·æ±‚</span>       http.logout().logoutSuccessUrl(<span class="hljs-string">"/"</span>);       <span class="hljs-comment">//è®°ä½æˆ‘</span>       http.rememberMe().rememberMeParameter(<span class="hljs-string">"remember"</span>);  }   <span class="hljs-comment">//å®šä¹‰è®¤è¯è§„åˆ™</span>   <span class="hljs-meta">@Override</span>   <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">configure</span><span class="hljs-params">(AuthenticationManagerBuilder auth)</span> <span class="hljs-keyword">throws</span> Exception </span>{       <span class="hljs-comment">//åœ¨å†…å­˜ä¸­å®šä¹‰ï¼Œä¹Ÿå¯ä»¥åœ¨jdbcä¸­å»æ‹¿....</span>       <span class="hljs-comment">//Spring security 5.0ä¸­æ–°å¢äº†å¤šç§åŠ å¯†æ–¹å¼ï¼Œä¹Ÿæ”¹å˜äº†å¯†ç çš„æ ¼å¼ã€‚</span>       <span class="hljs-comment">//è¦æƒ³æˆ‘ä»¬çš„é¡¹ç›®è¿˜èƒ½å¤Ÿæ­£å¸¸ç™»é™†ï¼Œéœ€è¦ä¿®æ”¹ä¸€ä¸‹configureä¸­çš„ä»£ç ã€‚æˆ‘ä»¬è¦å°†å‰ç«¯ä¼ è¿‡æ¥çš„å¯†ç è¿›è¡ŒæŸç§æ–¹å¼åŠ å¯†</span>       <span class="hljs-comment">//spring security å®˜æ–¹æ¨èçš„æ˜¯ä½¿ç”¨bcryptåŠ å¯†æ–¹å¼ã€‚</span>       auth.inMemoryAuthentication().passwordEncoder(<span class="hljs-keyword">new</span> BCryptPasswordEncoder())              .withUser(<span class="hljs-string">"kuangshen"</span>).password(<span class="hljs-keyword">new</span> BCryptPasswordEncoder().encode(<span class="hljs-string">"123456"</span>)).roles(<span class="hljs-string">"vip2"</span>,<span class="hljs-string">"vip3"</span>)              .and()              .withUser(<span class="hljs-string">"root"</span>).password(<span class="hljs-keyword">new</span> BCryptPasswordEncoder().encode(<span class="hljs-string">"123456"</span>)).roles(<span class="hljs-string">"vip1"</span>,<span class="hljs-string">"vip2"</span>,<span class="hljs-string">"vip3"</span>)              .and()              .withUser(<span class="hljs-string">"guest"</span>).password(<span class="hljs-keyword">new</span> BCryptPasswordEncoder().encode(<span class="hljs-string">"123456"</span>)).roles(<span class="hljs-string">"vip1"</span>,<span class="hljs-string">"vip2"</span>);  }}</code></pre><p>å»è¿›è¡Œä¸€æ³¢æºç åˆ†æï¼</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;è½¬è‡ª&lt;a href=&quot;https://space.bilibili.com/95256449?spm_id_from=333.788.b_765f7570696e666f.1&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;ç‹‚ç¥è€å¸ˆ&lt;/a&gt;ï¼Œéå¸¸æ„Ÿè°¢è€å¸ˆï¼Œä»…ä½œä¸ºä¸ªäººç¬”è®°ä½¿ç”¨&lt;/p&gt;
&lt;p&gt;éƒ¨åˆ†æ¥è‡ª&lt;a href=&quot;https://blog.csdn.net/qq_26017543/article/details/108530412?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522160164522319725255512089%2522%252C%2522scm%2522%253A%252220140713.130102334.pc%255Fall.%2522%257D&amp;amp;request_id=160164522319725255512089&amp;amp;biz_id=0&amp;amp;utm_medium=distribute.pc_search_result.none-task-blog-2~all~first_rank_v2~rank_v28_p-12-108530412.pc_first_rank_v2_rank_v28_p&amp;amp;utm_term=%E7%8B%82%E7%A5%9E+springboot&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;CSDN&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
    
      <category term="uncategorized" scheme="https://melodyjerry.github.io/blog/categories/uncategorized/"/>
    
    
      <category term="ç¬”è®°" scheme="https://melodyjerry.github.io/blog/tags/%E7%AC%94%E8%AE%B0/"/>
    
      <category term="JavaWeb" scheme="https://melodyjerry.github.io/blog/tags/JavaWeb/"/>
    
      <category term="SSM" scheme="https://melodyjerry.github.io/blog/tags/SSM/"/>
    
      <category term="SpringBoot" scheme="https://melodyjerry.github.io/blog/tags/SpringBoot/"/>
    
  </entry>
  
  <entry>
    <title>Linuxä¸‹å®‰è£…node v12.16.3</title>
    <link href="https://melodyjerry.github.io/blog/2020/09/23/Linux%E4%B8%8B%E5%AE%89%E8%A3%85node-v12.16.3/"/>
    <id>https://melodyjerry.github.io/blog/2020/09/23/Linux%E4%B8%8B%E5%AE%89%E8%A3%85node-v12.16.3/</id>
    <published>2020-09-23T09:21:21.000Z</published>
    <updated>2020-09-24T08:55:08.023Z</updated>
    
    <content type="html"><![CDATA[<ol><li>ä¸‹è½½nodejs</li></ol><pre><code class="hljs bash"><span class="hljs-built_in">cd</span> ~wget http://nodejs.org/dist/v12.16.3/node-v12.16.3-linux-x64.tar.gz</code></pre><ol start="2"><li>è§£å‹å¹¶ä¿®æ”¹è§£å‹åæ–‡ä»¶å</li></ol><pre><code class="hljs bash">tar -zxvf node-v12.16.3-linux-x64.tar.gz mv node-v12.16.3-linux-x64 nodejs</code></pre><ol start="3"><li>åˆ‡æ¢è·¯å¾„åˆ°è§£å‹åæ–‡ä»¶</li></ol><pre><code class="hljs bash"><span class="hljs-built_in">cd</span> nodejs/bin   //ã€€ã€€åˆ‡æ¢è·¯å¾„./node -v        //æŸ¥çœ‹nodeæ˜¯å¦å®‰è£…æˆåŠŸ è‹¥æˆåŠŸè¿”å› v12.16.3pwm               //æŸ¥çœ‹nodeè·¯å¾„   (æˆ‘å®‰è£…åœ¨æ ¹ç›®å½•ä¸‹)è¿”å› /root/nodejs/bin</code></pre><ol start="4"><li>é…ç½®ç¯å¢ƒå˜é‡</li></ol><pre><code class="hljs bash"><span class="hljs-built_in">cd</span> ~ //åˆ‡æ¢åˆ°æ ¹ç›®å½•vim ~/.bash_profile     //æŸ¥çœ‹ç¯å¢ƒå˜é‡æ–‡ä»¶//åœ¨é…ç½®æ–‡ä»¶é‡Œé¢ï¼Œè®¾ç½®PATHç¯å¢ƒå˜é‡//æˆ‘æŸ¥çœ‹æ—¶ï¼ŒPATHç¯å¢ƒå˜é‡ä¸ºPATH=<span class="hljs-variable">$PATH</span>:<span class="hljs-variable">$HOME</span>/binã€‚åœ¨å…¶åé¢æ·»åŠ ï¼šï¼Œåœ¨ï¼šåé¢æ·»åŠ ä¹‹å‰æ‰§è¡Œpwmè¿”å›çš„è·¯å¾„PATH=<span class="hljs-variable">$PATH</span>:<span class="hljs-variable">$HOME</span>/bin:/root/nodejs/bin     //é”®ç›˜è¾“å…¥i åˆ‡æ¢ä¸ºè¾“å…¥çŠ¶æ€ã€‚ç¼–è¾‘å®Œä¹‹å ç‚¹å‡»escé”® é€€å‡ºç¼–è¾‘çŠ¶æ€  è¾“å…¥ï¼šwq ä¿å­˜ç¦»å¼€<span class="hljs-built_in">source</span> ~/.bash_profile     //ä¿å­˜é…ç½®æ–‡ä»¶  å¯ä¸æ‰§è¡Œ</code></pre><ol start="5"><li>æŸ¥çœ‹nodeç‰ˆæœ¬</li></ol><pre><code class="hljs bash">node -v</code></pre><a id="more"></a><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      &lt;ol&gt;
&lt;li&gt;ä¸‹è½½nodejs&lt;/li&gt;
&lt;/ol&gt;
&lt;pre&gt;&lt;code class=&quot;hljs bash&quot;&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;cd&lt;/span&gt; ~
wget http://nodejs.org/dist/v12.16.3/node-v12.16.3-linux-x64.tar.gz&lt;/code&gt;&lt;/pre&gt;

&lt;ol start=&quot;2&quot;&gt;
&lt;li&gt;è§£å‹å¹¶ä¿®æ”¹è§£å‹åæ–‡ä»¶å&lt;/li&gt;
&lt;/ol&gt;
&lt;pre&gt;&lt;code class=&quot;hljs bash&quot;&gt;tar -zxvf node-v12.16.3-linux-x64.tar.gz 
mv node-v12.16.3-linux-x64 nodejs&lt;/code&gt;&lt;/pre&gt;

&lt;ol start=&quot;3&quot;&gt;
&lt;li&gt;åˆ‡æ¢è·¯å¾„åˆ°è§£å‹åæ–‡ä»¶&lt;/li&gt;
&lt;/ol&gt;
&lt;pre&gt;&lt;code class=&quot;hljs bash&quot;&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;cd&lt;/span&gt; nodejs/bin   //ã€€ã€€åˆ‡æ¢è·¯å¾„
./node -v        //æŸ¥çœ‹nodeæ˜¯å¦å®‰è£…æˆåŠŸ è‹¥æˆåŠŸè¿”å› v12.16.3
pwm               //æŸ¥çœ‹nodeè·¯å¾„   (æˆ‘å®‰è£…åœ¨æ ¹ç›®å½•ä¸‹)è¿”å› /root/nodejs/bin&lt;/code&gt;&lt;/pre&gt;

&lt;ol start=&quot;4&quot;&gt;
&lt;li&gt;é…ç½®ç¯å¢ƒå˜é‡&lt;/li&gt;
&lt;/ol&gt;
&lt;pre&gt;&lt;code class=&quot;hljs bash&quot;&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;cd&lt;/span&gt; ~ //åˆ‡æ¢åˆ°æ ¹ç›®å½•
vim ~/.bash_profile     //æŸ¥çœ‹ç¯å¢ƒå˜é‡æ–‡ä»¶
//åœ¨é…ç½®æ–‡ä»¶é‡Œé¢ï¼Œè®¾ç½®PATHç¯å¢ƒå˜é‡
//æˆ‘æŸ¥çœ‹æ—¶ï¼ŒPATHç¯å¢ƒå˜é‡ä¸ºPATH=&lt;span class=&quot;hljs-variable&quot;&gt;$PATH&lt;/span&gt;:&lt;span class=&quot;hljs-variable&quot;&gt;$HOME&lt;/span&gt;/binã€‚åœ¨å…¶åé¢æ·»åŠ ï¼šï¼Œåœ¨ï¼šåé¢æ·»åŠ ä¹‹å‰æ‰§è¡Œpwmè¿”å›çš„è·¯å¾„
PATH=&lt;span class=&quot;hljs-variable&quot;&gt;$PATH&lt;/span&gt;:&lt;span class=&quot;hljs-variable&quot;&gt;$HOME&lt;/span&gt;/bin:/root/nodejs/bin     //é”®ç›˜è¾“å…¥i åˆ‡æ¢ä¸ºè¾“å…¥çŠ¶æ€ã€‚ç¼–è¾‘å®Œä¹‹å ç‚¹å‡»escé”® é€€å‡ºç¼–è¾‘çŠ¶æ€  è¾“å…¥ï¼šwq ä¿å­˜ç¦»å¼€
&lt;span class=&quot;hljs-built_in&quot;&gt;source&lt;/span&gt; ~/.bash_profile     //ä¿å­˜é…ç½®æ–‡ä»¶  å¯ä¸æ‰§è¡Œ&lt;/code&gt;&lt;/pre&gt;

&lt;ol start=&quot;5&quot;&gt;
&lt;li&gt;æŸ¥çœ‹nodeç‰ˆæœ¬&lt;/li&gt;
&lt;/ol&gt;
&lt;pre&gt;&lt;code class=&quot;hljs bash&quot;&gt;node -v&lt;/code&gt;&lt;/pre&gt;
    
    </summary>
    
    
      <category term="uncategorized" scheme="https://melodyjerry.github.io/blog/categories/uncategorized/"/>
    
    
      <category term="Linux" scheme="https://melodyjerry.github.io/blog/tags/Linux/"/>
    
  </entry>
  
  <entry>
    <title>yumå¸¸è§å‘½ä»¤-å®‰è£…ä¸å¸è½½è½¯ä»¶</title>
    <link href="https://melodyjerry.github.io/blog/2020/09/23/yum%E5%B8%B8%E8%A7%81%E5%91%BD%E4%BB%A4-%E5%AE%89%E8%A3%85%E4%B8%8E%E5%8D%B8%E8%BD%BD%E8%BD%AF%E4%BB%B6/"/>
    <id>https://melodyjerry.github.io/blog/2020/09/23/yum%E5%B8%B8%E8%A7%81%E5%91%BD%E4%BB%A4-%E5%AE%89%E8%A3%85%E4%B8%8E%E5%8D%B8%E8%BD%BD%E8%BD%AF%E4%BB%B6/</id>
    <published>2020-09-23T04:21:21.000Z</published>
    <updated>2020-09-24T08:55:08.043Z</updated>
    
    <content type="html"><![CDATA[<a id="more"></a><h2 id="1-ä½¿ç”¨yumå®‰è£…å’Œå¸è½½è½¯ä»¶"><a href="#1-ä½¿ç”¨yumå®‰è£…å’Œå¸è½½è½¯ä»¶" class="headerlink" title="1.ä½¿ç”¨yumå®‰è£…å’Œå¸è½½è½¯ä»¶"></a>1.ä½¿ç”¨yumå®‰è£…å’Œå¸è½½è½¯ä»¶</h2><ul><li>æœ‰ä¸ªå‰ææ˜¯yumå®‰è£…çš„è½¯ä»¶åŒ…éƒ½æ˜¯rpmæ ¼å¼çš„</li></ul><p>å®‰è£…çš„å‘½ä»¤æ˜¯ï¼Œ<code>yum install ~</code>ï¼Œyumä¼šæŸ¥è¯¢æ•°æ®åº“ï¼Œæœ‰æ— è¿™ä¸€è½¯ä»¶åŒ…ï¼Œå¦‚æœæœ‰ï¼Œåˆ™æ£€æŸ¥å…¶ä¾èµ–å†²çªå…³ç³»ï¼Œå¦‚æœæ²¡æœ‰ä¾èµ–å†²çªï¼Œé‚£ä¹ˆæœ€å¥½ï¼Œä¸‹è½½å®‰è£…;å¦‚æœæœ‰ï¼Œåˆ™ä¼šç»™å‡ºæç¤ºï¼Œè¯¢é—®æ˜¯å¦è¦åŒæ—¶å®‰è£…ä¾èµ–ï¼Œæˆ–åˆ é™¤å†²çªçš„åŒ…ï¼Œä½ å¯ä»¥è‡ªå·±ä½œå‡ºåˆ¤æ–­ï¼›</p><p>åˆ é™¤çš„å‘½ä»¤æ˜¯ï¼Œ<code>yum remove ~</code>ï¼ŒåŒå®‰è£…ä¸€æ ·ï¼Œyumä¹Ÿä¼šæŸ¥è¯¢æ•°æ®åº“ï¼Œç»™å‡ºè§£å†³ä¾èµ–å…³ç³»çš„æç¤ºã€‚</p><p>å…¶ä¸­<code>~</code>ä»£è¡¨è½¯ä»¶å</p><p>1) ç”¨YUMå®‰è£…è½¯ä»¶åŒ…å‘½ä»¤ï¼š<code>yum install ~</code></p><p>2) ç”¨YUMåˆ é™¤è½¯ä»¶åŒ…å‘½ä»¤ï¼š<code>yum remove ~</code></p><h2 id="2-ç”¨yumæŸ¥è¯¢æƒ³å®‰è£…çš„è½¯ä»¶"><a href="#2-ç”¨yumæŸ¥è¯¢æƒ³å®‰è£…çš„è½¯ä»¶" class="headerlink" title="2.ç”¨yumæŸ¥è¯¢æƒ³å®‰è£…çš„è½¯ä»¶"></a>2.ç”¨yumæŸ¥è¯¢æƒ³å®‰è£…çš„è½¯ä»¶</h2><p>â€‹    æˆ‘ä»¬å¸¸ä¼šç¢°åˆ°è¿™æ ·çš„æƒ…å†µï¼Œæƒ³å®‰è£…ä¸€ä¸ªè½¯ä»¶ï¼ŒåªçŸ¥é“å®ƒå’ŒæŸæ–¹é¢æœ‰å…³ï¼Œä½†åˆä¸èƒ½ç¡®åˆ‡çŸ¥é“å®ƒçš„åå­—ã€‚è¿™æ—¶yumçš„æŸ¥è¯¢åŠŸèƒ½å°±èµ·ä½œç”¨äº†ã€‚æˆ‘ä»¬å¯ä»¥ç”¨<code>yum search keyword</code>è¿™æ ·çš„å‘½ä»¤æ¥è¿›è¡Œæœç´¢ï¼Œæ¯”å¦‚æˆ‘ä»¬è¦åˆ™å®‰è£…ä¸€ä¸ªInstantMessengerï¼Œä½†åˆä¸çŸ¥åˆ°åº•æœ‰å“ªäº›ï¼Œè¿™æ—¶ä¸å¦¨ç”¨<code>yum search messenger</code>è¿™æ ·çš„æŒ‡ä»¤è¿›è¡Œæœç´¢ï¼Œyumä¼šæœç´¢æ‰€æœ‰å¯ç”¨rpmçš„æè¿°ï¼Œåˆ—å‡ºæ‰€æœ‰æè¿°ä¸­å’Œmessegeræœ‰å…³çš„rpmåŒ…ï¼Œäºæ˜¯æˆ‘ä»¬å¯èƒ½å¾—åˆ° gaimï¼Œkopeteç­‰ç­‰ï¼Œå¹¶ä»ä¸­é€‰æ‹©ã€‚</p><p>æœ‰æ—¶æˆ‘ä»¬è¿˜ä¼šç¢°åˆ°å®‰è£…äº†ä¸€ä¸ªåŒ…ï¼Œä½†åˆä¸çŸ¥é“å…¶ç”¨é€”ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨<code>yuminfo packagename</code>è¿™ä¸ªæŒ‡ä»¤æ¥è·å–ä¿¡æ¯ã€‚</p><ol><li><p>ä½¿ç”¨YUMæŸ¥æ‰¾è½¯ä»¶åŒ…</p><p>å‘½ä»¤ï¼š<code>yum search ~</code></p><p>2.åˆ—å‡ºæ‰€æœ‰å¯å®‰è£…çš„è½¯ä»¶åŒ…</p><p>å‘½ä»¤ï¼š<code>yum list</code></p><p>3.åˆ—å‡ºæ‰€æœ‰å¯æ›´æ–°çš„è½¯ä»¶åŒ…</p><p>å‘½ä»¤ï¼š<code>yum list updates</code></p><p>4.åˆ—å‡ºæ‰€æœ‰å·²å®‰è£…çš„è½¯ä»¶åŒ…</p><p>å‘½ä»¤ï¼š<code>yum list installed</code></p><p>5.åˆ—å‡ºæ‰€æœ‰å·²å®‰è£…ä½†ä¸åœ¨Yum Repositoryå…§çš„è½¯ä»¶åŒ…</p><p>å‘½ä»¤ï¼š<code>yum list extras</code></p><p>6.åˆ—å‡ºæ‰€æŒ‡å®šè½¯ä»¶åŒ…</p><p>å‘½ä»¤ï¼š<code>yum list ~</code></p><p>7.ä½¿ç”¨YUMè·å–è½¯ä»¶åŒ…ä¿¡æ¯</p><p>å‘½ä»¤ï¼š<code>yum info ~</code></p><p>8.åˆ—å‡ºæ‰€æœ‰è½¯ä»¶åŒ…çš„ä¿¡æ¯</p><p>å‘½ä»¤ï¼š<code>yum info</code></p><p>9.åˆ—å‡ºæ‰€æœ‰å¯æ›´æ–°çš„è½¯ä»¶åŒ…ä¿¡æ¯</p><p>å‘½ä»¤ï¼š<code>yum info updates</code></p><p>10.åˆ—å‡ºæ‰€æœ‰å·²å®‰è£çš„è½¯ä»¶åŒ…ä¿¡æ¯</p><p>å‘½ä»¤ï¼š<code>yum info installed</code></p><p>11.åˆ—å‡ºæ‰€æœ‰å·²å®‰è£ä½†ä¸åœ¨Yum Repositoryå…§çš„è½¯ä»¶åŒ…ä¿¡æ¯</p><p>å‘½ä»¤ï¼š<code>yum info extras</code></p><p>12.åˆ—å‡ºè½¯ä»¶åŒ…æä¾›å“ªäº›æ–‡ä»¶</p><p>å‘½ä»¤ï¼š<code>yum provides ~</code></p></li></ol><h2 id="3-æ¸…é™¤yumç¼“å­˜"><a href="#3-æ¸…é™¤yumç¼“å­˜" class="headerlink" title="3.æ¸…é™¤yumç¼“å­˜"></a>3.æ¸…é™¤yumç¼“å­˜</h2><p>yumä¼šæŠŠä¸‹è½½çš„è½¯ä»¶åŒ…å’Œheaderå­˜å‚¨åœ¨cacheä¸­ï¼Œè€Œä¸ä¼šè‡ªåŠ¨åˆ é™¤ã€‚å¦‚æœæˆ‘ä»¬è§‰å¾—å®ƒä»¬å ç”¨äº†ç£ç›˜ç©ºé—´ï¼Œå¯ä»¥ä½¿ç”¨<code>yum clean</code>æŒ‡ä»¤è¿›è¡Œæ¸…é™¤ï¼Œæ›´ç²¾ç¡®çš„ç”¨æ³•æ˜¯<code>yumclean headers</code>æ¸…é™¤headerï¼Œ<code>yum clean packages</code>æ¸…é™¤ä¸‹è½½çš„rpmåŒ…ï¼Œ<code>yum clean all</code> æ¸…é™¤æ‰€æœ‰ã€‚</p><p>1.æ¸…é™¤ç¼“å­˜ç›®å½•(/var/cache/yum)ä¸‹çš„è½¯ä»¶åŒ…</p><p>å‘½ä»¤ï¼š<code>yum clean packages</code></p><p>2.æ¸…é™¤ç¼“å­˜ç›®å½•(/var/cache/yum)ä¸‹çš„ headers</p><p>å‘½ä»¤ï¼š<code>yum clean headers</code></p><p>3.æ¸…é™¤ç¼“å­˜ç›®å½•(/var/cache/yum)ä¸‹æ—§çš„ headers</p><p>å‘½ä»¤ï¼š<code>yum clean oldheaders</code></p><p>4.æ¸…é™¤ç¼“å­˜ç›®å½•(/var/cache/yum)ä¸‹çš„è½¯ä»¶åŒ…åŠæ—§çš„headers</p><p>å‘½ä»¤ï¼š<code>yum clean, yum clean all (= yum clean packages; yum clean oldheaders)</code></p><h2 id="4-yumå‘½ä»¤å·¥å…·ä½¿ç”¨ä¸¾ä¾‹"><a href="#4-yumå‘½ä»¤å·¥å…·ä½¿ç”¨ä¸¾ä¾‹" class="headerlink" title="4.yumå‘½ä»¤å·¥å…·ä½¿ç”¨ä¸¾ä¾‹"></a>4.yumå‘½ä»¤å·¥å…·ä½¿ç”¨ä¸¾ä¾‹</h2><p><code>yum update</code> å‡çº§ç³»ç»Ÿ</p><p><code>yum install  ~</code> å®‰è£…æŒ‡å®šè½¯ä»¶åŒ…</p><p><code>yum update ~</code> å‡çº§æŒ‡å®šè½¯ä»¶åŒ…</p><p><code>yum remove ~</code> å¸è½½æŒ‡å®šè½¯ä»¶</p><p><code>yum grouplist</code> æŸ¥çœ‹ç³»ç»Ÿä¸­å·²ç»å®‰è£…çš„å’Œå¯ç”¨çš„è½¯ä»¶ç»„ï¼Œå¯ç”¨çš„å¯ä»¥å®‰è£…</p><p><code>yum groupinstall ~</code> å®‰è£…ä¸Šä¸€ä¸ªå‘½ä»¤æ˜¾ç¤ºçš„å¯ç”¨çš„è½¯ä»¶ç»„ä¸­çš„ä¸€ä¸ª</p><p><code>yum groupupdate ~</code> æ›´æ–°æŒ‡å®šè½¯ä»¶ç»„çš„è½¯ä»¶åŒ…</p><p><code>yum groupremove ~</code> å¸è½½æŒ‡å®šè½¯ä»¶ç»„ä¸­çš„è½¯ä»¶åŒ…</p><p><code>yum deplist ~</code> æŸ¥è¯¢æŒ‡å®šè½¯ä»¶åŒ…çš„ä¾èµ–å…³ç³»</p><p><code>yum list yum\*</code> åˆ—å‡ºæ‰€æœ‰ä»¥yumå¼€å¤´çš„è½¯ä»¶åŒ…</p><p><code>yum localinstall ~</code> ä»ç¡¬ç›˜å®‰è£…rpmåŒ…å¹¶ä½¿ç”¨yumè§£å†³ä¾èµ–</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      
      
        &lt;a id=&quot;more&quot;&gt;&lt;/a&gt;

&lt;h2 id=&quot;1-ä½¿ç”¨yumå®‰è£…å’Œå¸è½½è½¯ä»¶&quot;&gt;&lt;a href=&quot;#1-ä½¿ç”¨yumå®‰è£…å’Œå¸è½½è½¯ä»¶&quot; class=&quot;headerlink&quot; title=&quot;1.ä½¿ç”¨yumå®‰è£…å’Œå¸è½½è½¯ä»¶&quot;&gt;&lt;/a&gt;1.ä½¿ç”¨yumå®‰è£…å’Œå¸è½½è½¯ä»¶&lt;/h2&gt;&lt;ul&gt;
&lt;
      
    
    </summary>
    
    
      <category term="uncategorized" scheme="https://melodyjerry.github.io/blog/categories/uncategorized/"/>
    
    
      <category term="Linux" scheme="https://melodyjerry.github.io/blog/tags/Linux/"/>
    
  </entry>
  
  <entry>
    <title>Linuxä¸‹æ›´æ–°Nodeåˆ°æœ€æ–°ç‰ˆæœ¬</title>
    <link href="https://melodyjerry.github.io/blog/2020/09/22/Linux%E4%B8%8B%E6%9B%B4%E6%96%B0Node%E5%88%B0%E6%9C%80%E6%96%B0%E7%89%88%E6%9C%AC/"/>
    <id>https://melodyjerry.github.io/blog/2020/09/22/Linux%E4%B8%8B%E6%9B%B4%E6%96%B0Node%E5%88%B0%E6%9C%80%E6%96%B0%E7%89%88%E6%9C%AC/</id>
    <published>2020-09-22T14:21:21.000Z</published>
    <updated>2020-09-24T08:55:08.024Z</updated>
    
    <content type="html"><![CDATA[<h5 id="1-æŸ¥çœ‹å½“å‰nodeçš„ç‰ˆæœ¬å·"><a href="#1-æŸ¥çœ‹å½“å‰nodeçš„ç‰ˆæœ¬å·" class="headerlink" title="1. æŸ¥çœ‹å½“å‰nodeçš„ç‰ˆæœ¬å·"></a>1. æŸ¥çœ‹å½“å‰nodeçš„ç‰ˆæœ¬å·</h5><pre><code class="hljs bash">node --version</code></pre><p><img src="https://s1.ax1x.com/2020/09/22/wXeQwF.png" srcset="/blog/img/loading.gif" alt="wXeQwF.png"></p><h5 id="2-æ¸…ç†npmçš„cache"><a href="#2-æ¸…ç†npmçš„cache" class="headerlink" title="2. æ¸…ç†npmçš„cache"></a>2. æ¸…ç†npmçš„cache</h5><pre><code class="hljs bash">npm cache clean -f</code></pre><h5 id="3-ç‰ˆæœ¬ç®¡ç†å·¥å…·-åç§°ï¼š-n"><a href="#3-ç‰ˆæœ¬ç®¡ç†å·¥å…·-åç§°ï¼š-n" class="headerlink" title="3. ç‰ˆæœ¬ç®¡ç†å·¥å…· åç§°ï¼š n"></a>3. ç‰ˆæœ¬ç®¡ç†å·¥å…· åç§°ï¼š n</h5><pre><code class="hljs undefined">npm install -g n</code></pre><p><img src="https://s1.ax1x.com/2020/09/22/wXe8Y9.png" srcset="/blog/img/loading.gif" alt="wXe8Y9.png"></p><h5 id="4-æ›´æ–°åˆ°æœ€æ–°ç‰ˆ"><a href="#4-æ›´æ–°åˆ°æœ€æ–°ç‰ˆ" class="headerlink" title="4. æ›´æ–°åˆ°æœ€æ–°ç‰ˆ"></a>4. æ›´æ–°åˆ°æœ€æ–°ç‰ˆ</h5><pre><code class="hljs undefined">n latest</code></pre><p><img src="https://s1.ax1x.com/2020/09/22/wXeqXV.png" srcset="/blog/img/loading.gif" alt="wXeqXV.png"></p><ul><li><code>n</code> å¸¸ç”¨çš„å‘½ä»¤æœ‰ï¼š<br>  <code>n</code> ä¼šåˆ—å‡ºæ‰€æœ‰å®‰è£…çš„ç‰ˆæœ¬ä¾›ä½ åˆ‡æ¢<br>  <code>n latest</code> å®‰è£…æœ€æ–°ç‰ˆæœ¬<br>  <code>n stable</code> å®‰è£…æœ€æ–°ç¨³å®šç‰ˆ<br>  <code>n lts</code> å®‰è£…æœ€æ–°é•¿æœŸæ”¯æŒç‰ˆæœ¬<br>  <code>n rm [ç‰ˆæœ¬å·]</code> åˆ é™¤æŸä¸€ç‰ˆæœ¬<br>  <code>n -h</code> å¸®åŠ©å‘½ä»¤<br>  <code>n [ç‰ˆæœ¬å·]</code> å®‰è£…æŒ‡å®šç‰ˆæœ¬node</li></ul><h5 id="5-éªŒè¯æ˜¯å¦æˆåŠŸ"><a href="#5-éªŒè¯æ˜¯å¦æˆåŠŸ" class="headerlink" title="5. éªŒè¯æ˜¯å¦æˆåŠŸ"></a>5. éªŒè¯æ˜¯å¦æˆåŠŸ</h5><pre><code class="hljs undefined">node -v</code></pre><a id="more"></a><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      &lt;h5 id=&quot;1-æŸ¥çœ‹å½“å‰nodeçš„ç‰ˆæœ¬å·&quot;&gt;&lt;a href=&quot;#1-æŸ¥çœ‹å½“å‰nodeçš„ç‰ˆæœ¬å·&quot; class=&quot;headerlink&quot; title=&quot;1. æŸ¥çœ‹å½“å‰nodeçš„ç‰ˆæœ¬å·&quot;&gt;&lt;/a&gt;1. æŸ¥çœ‹å½“å‰nodeçš„ç‰ˆæœ¬å·&lt;/h5&gt;&lt;pre&gt;&lt;code class=&quot;hljs bash&quot;&gt;node --version&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;img src=&quot;https://s1.ax1x.com/2020/09/22/wXeQwF.png&quot; srcset=&quot;/blog/img/loading.gif&quot; alt=&quot;wXeQwF.png&quot;&gt;&lt;/p&gt;
&lt;h5 id=&quot;2-æ¸…ç†npmçš„cache&quot;&gt;&lt;a href=&quot;#2-æ¸…ç†npmçš„cache&quot; class=&quot;headerlink&quot; title=&quot;2. æ¸…ç†npmçš„cache&quot;&gt;&lt;/a&gt;2. æ¸…ç†npmçš„cache&lt;/h5&gt;&lt;pre&gt;&lt;code class=&quot;hljs bash&quot;&gt;npm cache clean -f&lt;/code&gt;&lt;/pre&gt;

&lt;h5 id=&quot;3-ç‰ˆæœ¬ç®¡ç†å·¥å…·-åç§°ï¼š-n&quot;&gt;&lt;a href=&quot;#3-ç‰ˆæœ¬ç®¡ç†å·¥å…·-åç§°ï¼š-n&quot; class=&quot;headerlink&quot; title=&quot;3. ç‰ˆæœ¬ç®¡ç†å·¥å…· åç§°ï¼š n&quot;&gt;&lt;/a&gt;3. ç‰ˆæœ¬ç®¡ç†å·¥å…· åç§°ï¼š n&lt;/h5&gt;&lt;pre&gt;&lt;code class=&quot;hljs undefined&quot;&gt;npm install -g n&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;img src=&quot;https://s1.ax1x.com/2020/09/22/wXe8Y9.png&quot; srcset=&quot;/blog/img/loading.gif&quot; alt=&quot;wXe8Y9.png&quot;&gt;&lt;/p&gt;
&lt;h5 id=&quot;4-æ›´æ–°åˆ°æœ€æ–°ç‰ˆ&quot;&gt;&lt;a href=&quot;#4-æ›´æ–°åˆ°æœ€æ–°ç‰ˆ&quot; class=&quot;headerlink&quot; title=&quot;4. æ›´æ–°åˆ°æœ€æ–°ç‰ˆ&quot;&gt;&lt;/a&gt;4. æ›´æ–°åˆ°æœ€æ–°ç‰ˆ&lt;/h5&gt;&lt;pre&gt;&lt;code class=&quot;hljs undefined&quot;&gt;n latest&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;img src=&quot;https://s1.ax1x.com/2020/09/22/wXeqXV.png&quot; srcset=&quot;/blog/img/loading.gif&quot; alt=&quot;wXeqXV.png&quot;&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;n&lt;/code&gt; å¸¸ç”¨çš„å‘½ä»¤æœ‰ï¼š&lt;br&gt;  &lt;code&gt;n&lt;/code&gt; ä¼šåˆ—å‡ºæ‰€æœ‰å®‰è£…çš„ç‰ˆæœ¬ä¾›ä½ åˆ‡æ¢&lt;br&gt;  &lt;code&gt;n latest&lt;/code&gt; å®‰è£…æœ€æ–°ç‰ˆæœ¬&lt;br&gt;  &lt;code&gt;n stable&lt;/code&gt; å®‰è£…æœ€æ–°ç¨³å®šç‰ˆ&lt;br&gt;  &lt;code&gt;n lts&lt;/code&gt; å®‰è£…æœ€æ–°é•¿æœŸæ”¯æŒç‰ˆæœ¬&lt;br&gt;  &lt;code&gt;n rm [ç‰ˆæœ¬å·]&lt;/code&gt; åˆ é™¤æŸä¸€ç‰ˆæœ¬&lt;br&gt;  &lt;code&gt;n -h&lt;/code&gt; å¸®åŠ©å‘½ä»¤&lt;br&gt;  &lt;code&gt;n [ç‰ˆæœ¬å·]&lt;/code&gt; å®‰è£…æŒ‡å®šç‰ˆæœ¬node&lt;/li&gt;
&lt;/ul&gt;
&lt;h5 id=&quot;5-éªŒè¯æ˜¯å¦æˆåŠŸ&quot;&gt;&lt;a href=&quot;#5-éªŒè¯æ˜¯å¦æˆåŠŸ&quot; class=&quot;headerlink&quot; title=&quot;5. éªŒè¯æ˜¯å¦æˆåŠŸ&quot;&gt;&lt;/a&gt;5. éªŒè¯æ˜¯å¦æˆåŠŸ&lt;/h5&gt;&lt;pre&gt;&lt;code class=&quot;hljs undefined&quot;&gt;node -v&lt;/code&gt;&lt;/pre&gt;
    
    </summary>
    
    
      <category term="uncategorized" scheme="https://melodyjerry.github.io/blog/categories/uncategorized/"/>
    
    
      <category term="Linux" scheme="https://melodyjerry.github.io/blog/tags/Linux/"/>
    
  </entry>
  
  <entry>
    <title>Ubuntuä¸‹mongodbå®‰è£…</title>
    <link href="https://melodyjerry.github.io/blog/2020/09/22/Ubuntu%E4%B8%8Bmongodb%E5%AE%89%E8%A3%85/"/>
    <id>https://melodyjerry.github.io/blog/2020/09/22/Ubuntu%E4%B8%8Bmongodb%E5%AE%89%E8%A3%85/</id>
    <published>2020-09-22T13:21:21.000Z</published>
    <updated>2020-09-24T08:55:08.025Z</updated>
    
    <content type="html"><![CDATA[<ol><li><p>ä¸‹è½½mongodbæºç ï¼Œå¹¶è§£å‹ï¼š</p> <pre><code class="hljs bash">wget https://fastdl.mongodb.org/linux/mongodb-linux-x86_64-ubuntu1604-4.0.11.tgztar -zxvf mongodb-linux-x86_64-ubuntu1604-4.0.11.tgz</code></pre></li><li><p>åˆ›å»ºmongoä¸“å±ç›®å½•ï¼Œæ‹·è´binä¸‹æ–‡ä»¶åˆ°mongodbç›®å½•ä¸‹binä¸­ï¼š</p> <pre><code class="hljs bash">mkdir /usr/<span class="hljs-built_in">local</span>/mongodb<span class="hljs-built_in">cd</span> /usr/<span class="hljs-built_in">local</span>/mongodbmkdir bincp .../mongodb-linux-x86_64-ubuntu1604-4.0.11/bin/* ./bin/</code></pre></li><li><p>åˆ›å»ºæ•°æ®åº“æ–‡ä»¶ç›®å½•ã€æ—¥å¿—ç›®å½•ã€é…ç½®æ–‡ä»¶ï¼š</p> <pre><code class="hljs bash">mkdir datatouch mongodb.logtouch mongodb.conf</code></pre></li><li><p>é…ç½®æ–‡ä»¶å†…å®¹ï¼š</p> <pre><code class="hljs bash">dbpath=/usr/<span class="hljs-built_in">local</span>/mongodb/datalogpath=/usr/<span class="hljs-built_in">local</span>/mongodb/mongodb.loglogappend=<span class="hljs-literal">true</span>journal=<span class="hljs-literal">true</span>fork=<span class="hljs-literal">true</span>bind_ip = 127.0.0.1port = 27017noauth = <span class="hljs-literal">true</span><span class="hljs-comment">#auth = true</span></code></pre></li><li><p>å°†mongoæ·»åŠ pathï¼š</p> <pre><code class="hljs bash"><span class="hljs-comment">#æ‰“å¼€profile</span>vi /etc/profile<span class="hljs-comment">#è¾“å…¥ä¸‹é¢å†…å®¹ï¼š</span>MONGO_DB=<span class="hljs-string">"/usr/local/mongodb"</span>PATH=<span class="hljs-variable">$MONGO_DB</span>/bin:<span class="hljs-variable">$PATH</span>:<span class="hljs-built_in">export</span> PATH<span class="hljs-comment">#åŠ è½½é…ç½®</span><span class="hljs-built_in">source</span> /etc/profile</code></pre></li><li><p>å¯åŠ¨mongodbï¼š</p> <pre><code class="hljs bash">/usr/<span class="hljs-built_in">local</span>/mongodb/bin/mongod --config /usr/<span class="hljs-built_in">local</span>/mongodb/mongodb.conf</code></pre> <pre><code class="hljs bash"><span class="hljs-comment">#å¯åŠ¨åä¼šçœ‹åˆ°ï¼š</span>about to fork child process, waiting until server is ready <span class="hljs-keyword">for</span> connections.forked process: 1361child process started successfully, parent exiting</code></pre>  <a id="more"></a></li></ol><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      &lt;ol&gt;
&lt;li&gt;&lt;p&gt;ä¸‹è½½mongodbæºç ï¼Œå¹¶è§£å‹ï¼š&lt;/p&gt;
 &lt;pre&gt;&lt;code class=&quot;hljs bash&quot;&gt;wget https://fastdl.mongodb.org/linux/mongodb-linux-x86_64-ubuntu1604-4.0.11.tgz

tar -zxvf mongodb-linux-x86_64-ubuntu1604-4.0.11.tgz&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;åˆ›å»ºmongoä¸“å±ç›®å½•ï¼Œæ‹·è´binä¸‹æ–‡ä»¶åˆ°mongodbç›®å½•ä¸‹binä¸­ï¼š&lt;/p&gt;
 &lt;pre&gt;&lt;code class=&quot;hljs bash&quot;&gt;mkdir /usr/&lt;span class=&quot;hljs-built_in&quot;&gt;local&lt;/span&gt;/mongodb

&lt;span class=&quot;hljs-built_in&quot;&gt;cd&lt;/span&gt; /usr/&lt;span class=&quot;hljs-built_in&quot;&gt;local&lt;/span&gt;/mongodb

mkdir bin

cp .../mongodb-linux-x86_64-ubuntu1604-4.0.11/bin/* ./bin/&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;åˆ›å»ºæ•°æ®åº“æ–‡ä»¶ç›®å½•ã€æ—¥å¿—ç›®å½•ã€é…ç½®æ–‡ä»¶ï¼š&lt;/p&gt;
 &lt;pre&gt;&lt;code class=&quot;hljs bash&quot;&gt;mkdir data

touch mongodb.log

touch mongodb.conf&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;é…ç½®æ–‡ä»¶å†…å®¹ï¼š&lt;/p&gt;
 &lt;pre&gt;&lt;code class=&quot;hljs bash&quot;&gt;dbpath=/usr/&lt;span class=&quot;hljs-built_in&quot;&gt;local&lt;/span&gt;/mongodb/data
logpath=/usr/&lt;span class=&quot;hljs-built_in&quot;&gt;local&lt;/span&gt;/mongodb/mongodb.log

logappend=&lt;span class=&quot;hljs-literal&quot;&gt;true&lt;/span&gt;
journal=&lt;span class=&quot;hljs-literal&quot;&gt;true&lt;/span&gt;
fork=&lt;span class=&quot;hljs-literal&quot;&gt;true&lt;/span&gt;

bind_ip = 127.0.0.1
port = 27017

noauth = &lt;span class=&quot;hljs-literal&quot;&gt;true&lt;/span&gt;
&lt;span class=&quot;hljs-comment&quot;&gt;#auth = true&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;å°†mongoæ·»åŠ pathï¼š&lt;/p&gt;
 &lt;pre&gt;&lt;code class=&quot;hljs bash&quot;&gt;&lt;span class=&quot;hljs-comment&quot;&gt;#æ‰“å¼€profile&lt;/span&gt;
vi /etc/profile

&lt;span class=&quot;hljs-comment&quot;&gt;#è¾“å…¥ä¸‹é¢å†…å®¹ï¼š&lt;/span&gt;
MONGO_DB=&lt;span class=&quot;hljs-string&quot;&gt;&quot;/usr/local/mongodb&quot;&lt;/span&gt;
PATH=&lt;span class=&quot;hljs-variable&quot;&gt;$MONGO_DB&lt;/span&gt;/bin:&lt;span class=&quot;hljs-variable&quot;&gt;$PATH&lt;/span&gt;:
&lt;span class=&quot;hljs-built_in&quot;&gt;export&lt;/span&gt; PATH

&lt;span class=&quot;hljs-comment&quot;&gt;#åŠ è½½é…ç½®&lt;/span&gt;
&lt;span class=&quot;hljs-built_in&quot;&gt;source&lt;/span&gt; /etc/profile&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;å¯åŠ¨mongodbï¼š&lt;/p&gt;
 &lt;pre&gt;&lt;code class=&quot;hljs bash&quot;&gt;/usr/&lt;span class=&quot;hljs-built_in&quot;&gt;local&lt;/span&gt;/mongodb/bin/mongod --config /usr/&lt;span class=&quot;hljs-built_in&quot;&gt;local&lt;/span&gt;/mongodb/mongodb.conf&lt;/code&gt;&lt;/pre&gt;

 &lt;pre&gt;&lt;code class=&quot;hljs bash&quot;&gt;&lt;span class=&quot;hljs-comment&quot;&gt;#å¯åŠ¨åä¼šçœ‹åˆ°ï¼š&lt;/span&gt;

about to fork child process, waiting until server is ready &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; connections.
forked process: 1361
child process started successfully, parent exiting&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;&lt;/ol&gt;
    
    </summary>
    
    
      <category term="uncategorized" scheme="https://melodyjerry.github.io/blog/categories/uncategorized/"/>
    
    
      <category term="Linux" scheme="https://melodyjerry.github.io/blog/tags/Linux/"/>
    
  </entry>
  
  <entry>
    <title>[è½¬]JavaScript åˆå­¦è€…æ•™ç¨‹ï¼ˆæŒ‡å—ï¼‰</title>
    <link href="https://melodyjerry.github.io/blog/2020/09/22/JavaScript-%E5%88%9D%E5%AD%A6%E8%80%85%E6%95%99%E7%A8%8B%EF%BC%88%E6%8C%87%E5%8D%97%EF%BC%89/"/>
    <id>https://melodyjerry.github.io/blog/2020/09/22/JavaScript-%E5%88%9D%E5%AD%A6%E8%80%85%E6%95%99%E7%A8%8B%EF%BC%88%E6%8C%87%E5%8D%97%EF%BC%89/</id>
    <published>2020-09-22T13:21:13.000Z</published>
    <updated>2020-09-24T08:55:08.020Z</updated>
    
    <content type="html"><![CDATA[<h1 id="JavaScript-åˆå­¦è€…æ•™ç¨‹ï¼ˆæŒ‡å—ï¼‰"><a href="#JavaScript-åˆå­¦è€…æ•™ç¨‹ï¼ˆæŒ‡å—ï¼‰" class="headerlink" title="JavaScript åˆå­¦è€…æ•™ç¨‹ï¼ˆæŒ‡å—ï¼‰"></a>JavaScript åˆå­¦è€…æ•™ç¨‹ï¼ˆæŒ‡å—ï¼‰</h1><blockquote><p>åŸæ–‡é“¾æ¥ï¼š<a href="https://segmentfault.com/a/1190000016337325" target="_blank" rel="noopener">https://segmentfault.com/a/1190000016337325</a></p><p>ä½œè€…ï¼šjoyqi</p></blockquote><p>JavaScript æ˜¯å‰ç«¯å¼€å‘è€…ä½¿ç”¨çš„ä¸»è¦ç¼–ç¨‹è¯­è¨€ï¼Œéšç€å‰ç«¯æŠ€æœ¯çš„å‘å±•ï¼Œè¿™é—¨è¯­è¨€çš„è¾¹ç•Œä¹Ÿå¾—ä»¥ä¸æ–­æ‰©å±•ã€‚æˆ‘ä»¬åœ¨è¿™é‡Œé€‰æ‹©äº†ä¸ JavaScript ç›¸å…³çš„ç»å…¸æ–‡ç« ï¼Œå¯ä»¥è®©å¤§å®¶å¯¹å¦‚ä½•å­¦ä¹ è¿™é—¨è¯­è¨€æœ‰ä¸€äº›å…¨é¢çš„è®¤è¯†ã€‚ç‰¹åˆ«çš„ï¼Œæˆ‘ä»¬è¿˜ç€é‡äº JavaScript è¿™é—¨è¯­è¨€ä¸å…¶å®ƒç¼–ç¨‹è¯­è¨€çš„ä¸åŒä¹‹å¤„ï¼Œæ–¹ä¾¿å¤§å®¶æ·±å…¥ç†è§£ã€‚</p><h2 id="è¯­è¨€ç‰¹æ€§"><a href="#è¯­è¨€ç‰¹æ€§" class="headerlink" title="è¯­è¨€ç‰¹æ€§"></a>è¯­è¨€ç‰¹æ€§</h2><ul><li><a href="https://segmentfault.com/a/1190000016110909" target="_blank" rel="noopener">JavaScript å¾ªç¯</a></li><li><a href="https://segmentfault.com/a/1190000009324194" target="_blank" rel="noopener">JavaScript æ­£åˆ™è¡¨è¾¾å¼</a></li><li><a href="https://segmentfault.com/a/1190000000652891" target="_blank" rel="noopener">JavaScript é—­åŒ…</a></li><li><a href="https://segmentfault.com/a/1190000007535316" target="_blank" rel="noopener">JavaScript async/await</a></li><li><a href="https://segmentfault.com/a/1190000016133613" target="_blank" rel="noopener">ES6 å…ƒç¼–ç¨‹</a></li><li><a href="https://segmentfault.com/a/1190000015569915" target="_blank" rel="noopener">JavaScript åƒåœ¾å†…å­˜å›æ”¶æœºåˆ¶</a></li><li><a href="https://segmentfault.com/a/1190000014495089" target="_blank" rel="noopener">JavaScript è£…é¥°å™¨</a></li><li><a href="https://segmentfault.com/a/1190000016231512" target="_blank" rel="noopener">JavaScript AST æŠ½è±¡è¯­æ³•æ ‘</a></li><li><a href="https://segmentfault.com/a/1190000012925872" target="_blank" rel="noopener">JavaScript å•çº¿ç¨‹è¿è¡Œæœºåˆ¶</a></li></ul><h2 id="é¢å‘å¯¹è±¡"><a href="#é¢å‘å¯¹è±¡" class="headerlink" title="é¢å‘å¯¹è±¡"></a>é¢å‘å¯¹è±¡</h2><ul><li><a href="https://segmentfault.com/a/1190000015727237" target="_blank" rel="noopener">JavaScript ç»§æ‰¿ åŸå‹é“¾ prototype</a></li><li><a href="https://segmentfault.com/a/1190000011801127" target="_blank" rel="noopener">JavaScript <strong>proto</strong> ä¸ prototype</a></li><li><a href="https://segmentfault.com/a/1190000015444951" target="_blank" rel="noopener">JavaScript this</a></li><li><a href="https://segmentfault.com/a/1190000013107871" target="_blank" rel="noopener">JavaScript æ‹·è´å¯¹è±¡</a></li></ul><h2 id="å‡½æ•°è§£æ"><a href="#å‡½æ•°è§£æ" class="headerlink" title="å‡½æ•°è§£æ"></a>å‡½æ•°è§£æ</h2><ul><li><a href="https://segmentfault.com/a/1190000003810652" target="_blank" rel="noopener">JavaScript Fetch</a></li><li><a href="https://segmentfault.com/a/1190000007434923" target="_blank" rel="noopener">JavaScript Object.defineProperty</a></li><li><a href="https://segmentfault.com/a/1190000012578794" target="_blank" rel="noopener">JavaScript cookie/localStorage/sessionStorage</a></li><li><a href="https://segmentfault.com/a/1190000015908109" target="_blank" rel="noopener">JavaScript Array æ•°ç»„</a></li><li><a href="https://segmentfault.com/a/1190000010731933" target="_blank" rel="noopener">JavaScript Array.reduce</a></li><li><a href="https://segmentfault.com/a/1190000011652907" target="_blank" rel="noopener">JavaScript Promise</a></li><li><a href="https://segmentfault.com/a/1190000011389726" target="_blank" rel="noopener">JavaScript call/apply/bind</a></li><li><a href="https://segmentfault.com/a/1190000016098130" target="_blank" rel="noopener">JavaScript Date</a></li><li><a href="https://segmentfault.com/a/1190000000410506" target="_blank" rel="noopener">JavaScript Array.sort</a></li><li><a href="https://segmentfault.com/a/1190000016116657" target="_blank" rel="noopener">JavaScript setInterval/setTimeout</a></li></ul><h2 id="ç¼–ç¨‹æŠ€å·§"><a href="#ç¼–ç¨‹æŠ€å·§" class="headerlink" title="ç¼–ç¨‹æŠ€å·§"></a>ç¼–ç¨‹æŠ€å·§</h2><ul><li><a href="https://segmentfault.com/a/1190000016256731" target="_blank" rel="noopener">Chrome è°ƒè¯•æŠ€å·§</a></li><li><a href="https://segmentfault.com/a/1190000016005163" target="_blank" rel="noopener">JavaScript è·å–å‚æ•°</a></li><li><a href="https://segmentfault.com/a/1190000012673854" target="_blank" rel="noopener">JavaScript ä»£ç ç®€å†™</a></li><li><a href="https://segmentfault.com/a/1190000015597029" target="_blank" rel="noopener">JavaScript è·¨åŸŸé—®é¢˜</a></li><li><a href="https://segmentfault.com/a/1190000004292479" target="_blank" rel="noopener">scriptæ ‡ç­¾æ”¾åœ¨bodyé‡Œè¿˜æ˜¯headeré‡Œ</a></li></ul><h2 id="ç¼–ç¨‹æ€æƒ³"><a href="#ç¼–ç¨‹æ€æƒ³" class="headerlink" title="ç¼–ç¨‹æ€æƒ³"></a>ç¼–ç¨‹æ€æƒ³</h2><ul><li><a href="https://segmentfault.com/a/1190000016276287" target="_blank" rel="noopener">JavaScript æ¨¡å—åŒ–</a></li><li><a href="https://segmentfault.com/a/1190000014919700" target="_blank" rel="noopener">JavaScript è®¾è®¡æ¨¡å¼</a></li><li><a href="https://segmentfault.com/a/1190000016101940" target="_blank" rel="noopener">JavaScript å…¨æ ˆå¼€å‘</a></li></ul><h2 id="å…¶å®ƒ"><a href="#å…¶å®ƒ" class="headerlink" title="å…¶å®ƒ"></a>å…¶å®ƒ</h2><ul><li><a href="https://segmentfault.com/a/1190000015668383" target="_blank" rel="noopener">Ajax åŸºç¡€çŸ¥è¯†</a></li><li><a href="https://segmentfault.com/a/1190000004322358" target="_blank" rel="noopener">JavaScript åŒæ­¥ å¼‚æ­¥ äº‹ä»¶å¾ªç¯</a></li><li><a href="https://segmentfault.com/a/1190000014643900" target="_blank" rel="noopener">JavaScript WebSocket</a></li><li><a href="https://segmentfault.com/a/1190000000481884" target="_blank" rel="noopener">JavaScript consoleå¯¹è±¡</a></li><li><a href="https://segmentfault.com/a/1190000013412206" target="_blank" rel="noopener">JavaScript å‰ªè´´æ¿</a></li></ul><a id="more"></a><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;JavaScript-åˆå­¦è€…æ•™ç¨‹ï¼ˆæŒ‡å—ï¼‰&quot;&gt;&lt;a href=&quot;#JavaScript-åˆå­¦è€…æ•™ç¨‹ï¼ˆæŒ‡å—ï¼‰&quot; class=&quot;headerlink&quot; title=&quot;JavaScript åˆå­¦è€…æ•™ç¨‹ï¼ˆæŒ‡å—ï¼‰&quot;&gt;&lt;/a&gt;JavaScript åˆå­¦è€…æ•™ç¨‹ï¼ˆæŒ‡å—ï¼‰&lt;/h1&gt;&lt;blockquote&gt;
&lt;p&gt;åŸæ–‡é“¾æ¥ï¼š&lt;a href=&quot;https://segmentfault.com/a/1190000016337325&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;https://segmentfault.com/a/1190000016337325&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;ä½œè€…ï¼šjoyqi&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;JavaScript æ˜¯å‰ç«¯å¼€å‘è€…ä½¿ç”¨çš„ä¸»è¦ç¼–ç¨‹è¯­è¨€ï¼Œéšç€å‰ç«¯æŠ€æœ¯çš„å‘å±•ï¼Œè¿™é—¨è¯­è¨€çš„è¾¹ç•Œä¹Ÿå¾—ä»¥ä¸æ–­æ‰©å±•ã€‚æˆ‘ä»¬åœ¨è¿™é‡Œé€‰æ‹©äº†ä¸ JavaScript ç›¸å…³çš„ç»å…¸æ–‡ç« ï¼Œå¯ä»¥è®©å¤§å®¶å¯¹å¦‚ä½•å­¦ä¹ è¿™é—¨è¯­è¨€æœ‰ä¸€äº›å…¨é¢çš„è®¤è¯†ã€‚ç‰¹åˆ«çš„ï¼Œæˆ‘ä»¬è¿˜ç€é‡äº JavaScript è¿™é—¨è¯­è¨€ä¸å…¶å®ƒç¼–ç¨‹è¯­è¨€çš„ä¸åŒä¹‹å¤„ï¼Œæ–¹ä¾¿å¤§å®¶æ·±å…¥ç†è§£ã€‚&lt;/p&gt;
&lt;h2 id=&quot;è¯­è¨€ç‰¹æ€§&quot;&gt;&lt;a href=&quot;#è¯­è¨€ç‰¹æ€§&quot; class=&quot;headerlink&quot; title=&quot;è¯­è¨€ç‰¹æ€§&quot;&gt;&lt;/a&gt;è¯­è¨€ç‰¹æ€§&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://segmentfault.com/a/1190000016110909&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;JavaScript å¾ªç¯&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://segmentfault.com/a/1190000009324194&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;JavaScript æ­£åˆ™è¡¨è¾¾å¼&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://segmentfault.com/a/1190000000652891&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;JavaScript é—­åŒ…&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://segmentfault.com/a/1190000007535316&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;JavaScript async/await&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://segmentfault.com/a/1190000016133613&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;ES6 å…ƒç¼–ç¨‹&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://segmentfault.com/a/1190000015569915&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;JavaScript åƒåœ¾å†…å­˜å›æ”¶æœºåˆ¶&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://segmentfault.com/a/1190000014495089&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;JavaScript è£…é¥°å™¨&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://segmentfault.com/a/1190000016231512&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;JavaScript AST æŠ½è±¡è¯­æ³•æ ‘&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://segmentfault.com/a/1190000012925872&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;JavaScript å•çº¿ç¨‹è¿è¡Œæœºåˆ¶&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;é¢å‘å¯¹è±¡&quot;&gt;&lt;a href=&quot;#é¢å‘å¯¹è±¡&quot; class=&quot;headerlink&quot; title=&quot;é¢å‘å¯¹è±¡&quot;&gt;&lt;/a&gt;é¢å‘å¯¹è±¡&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://segmentfault.com/a/1190000015727237&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;JavaScript ç»§æ‰¿ åŸå‹é“¾ prototype&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://segmentfault.com/a/1190000011801127&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;JavaScript &lt;strong&gt;proto&lt;/strong&gt; ä¸ prototype&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://segmentfault.com/a/1190000015444951&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;JavaScript this&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://segmentfault.com/a/1190000013107871&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;JavaScript æ‹·è´å¯¹è±¡&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;å‡½æ•°è§£æ&quot;&gt;&lt;a href=&quot;#å‡½æ•°è§£æ&quot; class=&quot;headerlink&quot; title=&quot;å‡½æ•°è§£æ&quot;&gt;&lt;/a&gt;å‡½æ•°è§£æ&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://segmentfault.com/a/1190000003810652&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;JavaScript Fetch&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://segmentfault.com/a/1190000007434923&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;JavaScript Object.defineProperty&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://segmentfault.com/a/1190000012578794&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;JavaScript cookie/localStorage/sessionStorage&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://segmentfault.com/a/1190000015908109&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;JavaScript Array æ•°ç»„&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://segmentfault.com/a/1190000010731933&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;JavaScript Array.reduce&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://segmentfault.com/a/1190000011652907&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;JavaScript Promise&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://segmentfault.com/a/1190000011389726&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;JavaScript call/apply/bind&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://segmentfault.com/a/1190000016098130&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;JavaScript Date&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://segmentfault.com/a/1190000000410506&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;JavaScript Array.sort&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://segmentfault.com/a/1190000016116657&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;JavaScript setInterval/setTimeout&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;ç¼–ç¨‹æŠ€å·§&quot;&gt;&lt;a href=&quot;#ç¼–ç¨‹æŠ€å·§&quot; class=&quot;headerlink&quot; title=&quot;ç¼–ç¨‹æŠ€å·§&quot;&gt;&lt;/a&gt;ç¼–ç¨‹æŠ€å·§&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://segmentfault.com/a/1190000016256731&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Chrome è°ƒè¯•æŠ€å·§&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://segmentfault.com/a/1190000016005163&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;JavaScript è·å–å‚æ•°&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://segmentfault.com/a/1190000012673854&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;JavaScript ä»£ç ç®€å†™&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://segmentfault.com/a/1190000015597029&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;JavaScript è·¨åŸŸé—®é¢˜&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://segmentfault.com/a/1190000004292479&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;scriptæ ‡ç­¾æ”¾åœ¨bodyé‡Œè¿˜æ˜¯headeré‡Œ&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;ç¼–ç¨‹æ€æƒ³&quot;&gt;&lt;a href=&quot;#ç¼–ç¨‹æ€æƒ³&quot; class=&quot;headerlink&quot; title=&quot;ç¼–ç¨‹æ€æƒ³&quot;&gt;&lt;/a&gt;ç¼–ç¨‹æ€æƒ³&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://segmentfault.com/a/1190000016276287&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;JavaScript æ¨¡å—åŒ–&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://segmentfault.com/a/1190000014919700&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;JavaScript è®¾è®¡æ¨¡å¼&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://segmentfault.com/a/1190000016101940&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;JavaScript å…¨æ ˆå¼€å‘&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;å…¶å®ƒ&quot;&gt;&lt;a href=&quot;#å…¶å®ƒ&quot; class=&quot;headerlink&quot; title=&quot;å…¶å®ƒ&quot;&gt;&lt;/a&gt;å…¶å®ƒ&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://segmentfault.com/a/1190000015668383&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Ajax åŸºç¡€çŸ¥è¯†&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://segmentfault.com/a/1190000004322358&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;JavaScript åŒæ­¥ å¼‚æ­¥ äº‹ä»¶å¾ªç¯&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://segmentfault.com/a/1190000014643900&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;JavaScript WebSocket&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://segmentfault.com/a/1190000000481884&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;JavaScript consoleå¯¹è±¡&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://segmentfault.com/a/1190000013412206&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;JavaScript å‰ªè´´æ¿&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
    
    </summary>
    
    
      <category term="uncategorized" scheme="https://melodyjerry.github.io/blog/categories/uncategorized/"/>
    
    
      <category term="JavaScript" scheme="https://melodyjerry.github.io/blog/tags/JavaScript/"/>
    
  </entry>
  
  <entry>
    <title>[è½¬]Yapiç¯å¢ƒæ­å»º(å²ä¸Šæœ€è¯¦ç»†æ­¥éª¤)</title>
    <link href="https://melodyjerry.github.io/blog/2020/09/22/[%E8%BD%AC]Yapi%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA(%E5%8F%B2%E4%B8%8A%E6%9C%80%E8%AF%A6%E7%BB%86%E6%AD%A5%E9%AA%A4)/"/>
    <id>https://melodyjerry.github.io/blog/2020/09/22/[%E8%BD%AC]Yapi%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA(%E5%8F%B2%E4%B8%8A%E6%9C%80%E8%AF%A6%E7%BB%86%E6%AD%A5%E9%AA%A4)/</id>
    <published>2020-09-22T09:21:21.000Z</published>
    <updated>2020-09-24T08:55:08.035Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>å‚è€ƒæ–‡ç« ï¼š<a href="https://zhuanlan.zhihu.com/p/94297858" target="_blank" rel="noopener">å†…ç½‘æ­å»ºyapiæ¥å£ç®¡ç†å¹³å°</a></p></blockquote><h2 id="ç¯å¢ƒå‡†å¤‡"><a href="#ç¯å¢ƒå‡†å¤‡" class="headerlink" title="ç¯å¢ƒå‡†å¤‡"></a>ç¯å¢ƒå‡†å¤‡</h2><ul><li><p><strong>æ“ä½œç³»ç»Ÿï¼š</strong>centos 7</p></li><li><p>ç¯å¢ƒè¦æ±‚ï¼š</p><ul><li>nodejs 7.6+</li><li>mongodb 2.6+</li><li>git</li></ul></li></ul><a id="more"></a><h2 id="å®‰è£…nodejs"><a href="#å®‰è£…nodejs" class="headerlink" title="å®‰è£…nodejs"></a>å®‰è£…nodejs</h2><ol><li>è·å–èµ„æºï¼ˆéƒ¨ç½²nodejså°½å¯èƒ½é€‰æ‹©å¶æ•°ç‰ˆæœ¬ï¼Œå› ä¸ºå¶æ•°ç‰ˆæœ¬å®˜æ–¹æœ‰è¾ƒé•¿çš„ç»´æŠ¤æ—¶é—´ï¼Œæ•…è¿™æ¬¡é€‰æ‹©8.xã€‚ï¼‰<br> <code>curl -sL https://rpm.nodesource.com/setup_8.x | bash -</code></li><li>å®‰è£…<br> <code>yum install -y nodejs</code></li><li>æŸ¥çœ‹ç‰ˆæœ¬<br> <code>node -v</code></li><li>æŸ¥çœ‹npmç‰ˆæœ¬<br> <code>npm -v</code></li></ol><h2 id="å®‰è£…mongodb"><a href="#å®‰è£…mongodb" class="headerlink" title="å®‰è£…mongodb"></a>å®‰è£…mongodb</h2><ol><li>æ›´æ–°yumæºï¼Œéå¿…é¡»ä½†æ˜¯æ›´æ–°ä¸€ä¸‹æ— å®³<br> <code>yum -y update</code></li><li>æ·»åŠ mongodbæºæ–‡ä»¶ï¼Œåœ¨/etc/yum.repos.d åˆ›å»ºä¸€ä¸ª mongodb-org.repo æ–‡ä»¶<br> <code>touch /etc/yum.repos.d/mongodb-org.repo</code></li><li>ç¼–è¾‘mongodb-org.repoæ–‡ä»¶<br> <code>vim /etc/yum.repos.d/mongodb-org.repo</code></li><li>æ·»åŠ æ–‡ä»¶å†…å®¹</li></ol><pre><code class="hljs ini"><span class="hljs-section">[mongodb-org]</span><span class="hljs-attr">name</span>=MongoDB Repository<span class="hljs-attr">baseurl</span>=http://mirrors.aliyun.com/mongodb/yum/redhat/<span class="hljs-number">7</span>Server/mongodb-org/<span class="hljs-number">3.2</span>/x<span class="hljs-number">86_64</span>/<span class="hljs-attr">gpgcheck</span>=<span class="hljs-number">0</span><span class="hljs-attr">enabled</span>=<span class="hljs-number">1</span></code></pre><blockquote><p>è¿™é‡Œå¯èƒ½é€€ä¸å‡ºVimï¼Œå‚è€ƒ<a href="https://www.cnblogs.com/melodyjerry/p/13714705.html" target="_blank" rel="noopener">https://www.cnblogs.com/melodyjerry/p/13714705.html</a></p></blockquote><ol><li>å®‰è£…mongodb<br> <code>yum install -y mongodb-org</code></li><li>å¯åŠ¨mongodb<br> <code>service mongod start</code></li><li>è®¾ç½®å¼€æœºå¯åŠ¨<br> <code>chkconfig mongod on</code></li><li>æ‰“å¼€moMongoDB(å¯å¿½ç•¥)<br> <code>/bin/mongo</code></li><li>é…ç½®è¿œç¨‹è®¿é—®</li></ol><ul><li>ä¿®æ”¹mongod.confé…ç½®æ–‡ä»¶<br>  <code>vim /etc/mongod.conf</code></li><li>æ³¨é‡Š bindIp: 127.0.0.1<br>  <code>#bindIp: 127.0.0.1</code></li><li>é‡å¯mongod<br>  <code>service mongod restart</code></li></ul><h2 id="å®‰è£…git"><a href="#å®‰è£…git" class="headerlink" title="å®‰è£…git"></a>å®‰è£…git</h2><ul><li>å®˜æ–¹æ¨èï¼Œåœ¨å†…ç½‘éƒ¨ç½²çš„æ—¶å€™å®‰è£…gitï¼Œå¯ä»¥æ ¹æ®è‡ªå·±æ‰€éœ€å®‰è£…<br>  <code>yum -y install git</code></li></ul><h2 id="æ­å»ºYApiç¯å¢ƒ"><a href="#æ­å»ºYApiç¯å¢ƒ" class="headerlink" title="æ­å»ºYApiç¯å¢ƒ"></a>æ­å»ºYApiç¯å¢ƒ</h2><p><strong>æ­å»ºYApi</strong></p><ol><li>å‡†å¤‡ç¯å¢ƒæ­å»ºå®Œæˆåï¼Œå¼€å§‹æ­å»ºYApi,å®‰è£…å‘½ä»¤</li></ol><pre><code class="hljs bash">npm install -g yapi-cli --registry https://registry.npm.taobao.orgyapi server</code></pre><blockquote><pre><code class="hljs bash">$ yapi server/usr/lib/node_modules/yapi-cli/src/utils.js:68  getVersions: async <span class="hljs-function"><span class="hljs-title">function</span></span>(){                     ^^^^^^^^SyntaxError: Unexpected token <span class="hljs-keyword">function</span>    at createScript (vm.js:56:10)    at Object.runInThisContext (vm.js:97:10)    at Module._compile (module.js:549:28)    at Object.Module._extensions..js (module.js:586:10)    at Module.load (module.js:494:32)    at tryModuleLoad (module.js:453:12)    at Function.Module._load (module.js:445:3)    at Module.require (module.js:504:17)    at require (internal/module.js:20:19)    at Object.&lt;anonymous&gt; (/usr/lib/node_modules/yapi-cli/src/index.js:4:15)</code></pre><p>è§£å†³åŠæ³•ï¼šå°†nodeå‡çº§åˆ°ç‰ˆæœ¬&gt;7.6</p><p><a href="https://www.cnblogs.com/melodyjerry/p/13715111.html" target="_blank" rel="noopener">https://www.cnblogs.com/melodyjerry/p/13715111.html</a></p></blockquote><ul><li><p>å®ä¾‹æˆªå›¾ï¼š</p><p>  <img src="https://s1.ax1x.com/2020/09/22/wXMJrq.png" srcset="/blog/img/loading.gif" alt="wXMJrq.png"></p></li></ul><blockquote><p><code>yapi server</code>åæç¤ºï¼š</p><pre><code class="hljs bash">Accessing non-existent property <span class="hljs-string">'cat'</span> of module exports inside circular dependency</code></pre><p>äº§ç”Ÿè¿™ä¸ªçš„åŸå› æ˜¯nodeçš„ç‰ˆæœ¬å¤ªé«˜äº†<br>è§£å†³çš„åŠæ³•å¾ˆç®€å•ï¼Œå¸è½½æœ€æ–°ç‰ˆçš„node v14ï¼Œé‡æ–°å®‰è£…ç¨³å®šç‰ˆçš„node v12ï¼Œè¿™ä¸ªé—®é¢˜å°±è§£å†³äº†</p></blockquote><blockquote><p>æœ‰ä½¿ç”¨å®å¡”çš„è¯ï¼Œè¿˜éœ€è¦åˆ°<strong>å®å¡”é˜²ç«å¢™é‡Œæ”¾è¡Œ9090ç«¯å£</strong>ã€‚</p></blockquote><h2 id="éƒ¨ç½²YApi"><a href="#éƒ¨ç½²YApi" class="headerlink" title="éƒ¨ç½²YApi"></a>éƒ¨ç½²YApi</h2><ol><li>æ‰§è¡Œ yapi server å¯åŠ¨å¯è§†åŒ–éƒ¨ç½²ç¨‹åºï¼Œæµè§ˆå™¨æ‰“å¼€æç¤ºçª—å£ä¸Šçš„åœ°å€ï¼Œéæœ¬åœ°æœåŠ¡å™¨ï¼Œå°†0.0.0.0æ›¿æ¢æŒ‡å®šçš„åŸŸåæˆ–IPï¼Œè¿›å…¥éƒ¨ç½²é¡µé¢ã€‚</li></ol><ul><li>å®ä¾‹æˆªå›¾<br><img src="https://s1.ax1x.com/2020/09/23/wjZPfA.png" srcset="/blog/img/loading.gif" alt="wjZPfA.png"></li></ul><ol start="2"><li>æ ¹æ®é¡¹ç›®å®é™…éœ€è¦å¯ä»¥ä¿®æ”¹éƒ¨ç½²ä¿¡æ¯ï¼Œç‚¹å‡»ã€å¼€å§‹éƒ¨ç½²ã€‘ï¼Œå®Œæˆéƒ¨ç½²ä»»åŠ¡</li></ol><ul><li><p>éƒ¨ç½²æˆåŠŸæˆªå›¾<br><img src="https://s1.ax1x.com/2020/09/23/wj66rn.png" srcset="/blog/img/loading.gif" alt="wj66rn.png"></p></li><li><p>MongoDBæ•°æ®åº“è¿æ¥å¤±è´¥ï¼Œæ£€æŸ¥æ˜¯ä¸æ˜¯é…ç½®æ–‡ä»¶çš„ipã€portå‡ºé”™ã€‚æˆ–è€…ï¼Œç›´æ¥<code>shutdown -r now</code>é‡å¯ä¸€ä¸‹æœåŠ¡å™¨ï¼Œåæ­£æˆ‘å°±æ˜¯hhã€‚<br><img src="https://s1.ax1x.com/2020/09/23/wjKeiD.png" srcset="/blog/img/loading.gif" alt="wjKeiD.png"></p></li></ul><p><strong>3.æ ¹æ®éƒ¨ç½²æ—¥å¿—æˆªå›¾ä¸Šçš„æç¤ºä¿¡æ¯ï¼Œå¯åŠ¨æœåŠ¡</strong><br>å¯åŠ¨æœåŠ¡ï¼š<code>node vendors/server/app.js</code><br>æµè§ˆå™¨æ‰“å¼€éƒ¨ç½²æ—¥å¿—ä¸Šçš„è®¿é—®åœ°å€ <code>http://127.0.0.1:3000</code> å°±å¯ä»¥è®¿é—®æ­å»ºçš„YApiå·¥å…·äº†ï¼ˆéæœ¬åœ°æœåŠ¡å™¨ï¼Œå°†127.0.0.1æ›¿æ¢æŒ‡å®šçš„åŸŸåæˆ–IPï¼‰ï¼Œæ­¤æ—¶YApiæœ¬åœ°ç¯å¢ƒæ­å»ºå®Œæˆ</p><p>å¦‚æœæ˜¯é˜¿é‡Œäº‘ecsæœåŠ¡å™¨ï¼Œç«¯å£éœ€è¦åœ¨å®‰å…¨ç»„é‡Œå¼€æ”¾ï¼Œä¸ç„¶è®¿é—®ä¸äº†</p><p><strong>4.pm2æ–¹å¼ç®¡ç†è¿›ç¨‹</strong></p><p>è¦ä¿è¯åå°ä¿æŒè¿›ç¨‹ï¼Œéœ€è¦å®‰è£…pm2ã€‚<br>å…¨å±€å®‰è£…ï¼š</p><pre><code class="hljs bash">npm install -g pm2`</code></pre><p>å¯åŠ¨ï¼š</p><pre><code class="hljs bash">pm2 start /root/my-yapi/vendors/server/app.js --watch -i 1</code></pre><blockquote><p>è¿™æ ·ä»¥åå°±å¯ä»¥å¾ˆæ–¹ä¾¿çš„ç”¨<strong>pm2</strong>å°±è¡Œå¯åŠ¨å…³é—­å•¦~</p></blockquote><ol start="5"><li>é€šè¿‡<code>pm2 save</code>ä¿å­˜å½“å‰è¿›ç¨‹çŠ¶æ€ã€‚</li></ol><p>æŸ¥çœ‹ï¼š</p><pre><code class="hljs bash">pm2 list</code></pre><p>é‡å¯ï¼š</p><pre><code class="hljs bash">pm2 restart service/app.js</code></pre><p>åœæ­¢ï¼š</p><p>å¯ä»¥å…ˆé€šè¿‡<code>pm2 list</code>è·å–åº”ç”¨çš„åå­—ï¼ˆâ€“nameæŒ‡å®šçš„ï¼‰æˆ–è€…è¿›ç¨‹idã€‚</p><pre><code class="hljs bash"><span class="hljs-comment"># pm2 stop app_name|app_id</span>pm2 stop /root/my-yapi/vendors/server/app.js</code></pre><blockquote><p>pm2ä½¿ç”¨å‚è€ƒæ–‡æ¡£ï¼š<br><a href="http://imweb.io/topic/57c8cbb27f226f687b365636" target="_blank" rel="noopener">http://imweb.io/topic/57c8cbb27f226f687b365636</a></p></blockquote><p><strong>6.å‡çº§</strong></p><p>å‡çº§é¡¹ç›®ç‰ˆæœ¬æ˜¯éå¸¸å®¹æ˜“çš„ï¼Œå¹¶ä¸”ä¸ä¼šå½±å“å·²æœ‰çš„é¡¹ç›®æ•°æ®ï¼Œåªä¼šåŒæ­¥ vendors ç›®å½•ä¸‹çš„æºç æ–‡ä»¶ã€‚</p><pre><code class="hljs stata"><span class="hljs-keyword">cd</span> {é¡¹ç›®ç›®å½•}yapi <span class="hljs-keyword">ls</span> <span class="hljs-comment">//æŸ¥çœ‹ç‰ˆæœ¬å·åˆ—è¡¨</span>yapi <span class="hljs-keyword">update</span> <span class="hljs-comment">//æ›´æ–°åˆ°æœ€æ–°ç‰ˆæœ¬</span>yapi <span class="hljs-keyword">update</span> -v {<span class="hljs-keyword">Version</span>} <span class="hljs-comment">//æ›´æ–°åˆ°æŒ‡å®šç‰ˆæœ¬</span></code></pre><p><strong>9.nginxä»£ç†</strong></p><p>å¦‚æœæ‚¨æ˜¯å°†æœåŠ¡å™¨ä»£ç†åˆ° nginx æœåŠ¡å™¨ï¼Œè¯·é…ç½® nginx æ”¯æŒ websocketã€‚</p><pre><code class="hljs routeros">åœ¨location /æ·»åŠ proxy_http_version 1.1;proxy_set_header<span class="hljs-built_in"> Upgrade </span><span class="hljs-variable">$http_upgrade</span>;proxy_set_header<span class="hljs-built_in"> Connection </span><span class="hljs-string">"upgrade"</span>;</code></pre><p><strong>10.ç¦æ­¢æ³¨å†Œ</strong></p><p>åœ¨ config.json æ·»åŠ  <code>closeRegister:true</code> é…ç½®é¡¹,å°±å¯ä»¥ç¦æ­¢ç”¨æˆ·æ³¨å†Œ yapi å¹³å°ï¼Œä¿®æ”¹å®Œæˆåï¼Œè¯·é‡å¯ yapi æœåŠ¡å™¨ã€‚</p><pre><code class="hljs json">{<span class="hljs-attr">"port"</span>: <span class="hljs-string">"*****"</span>,<span class="hljs-attr">"closeRegister"</span>:<span class="hljs-literal">true</span>}</code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;å‚è€ƒæ–‡ç« ï¼š&lt;a href=&quot;https://zhuanlan.zhihu.com/p/94297858&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;å†…ç½‘æ­å»ºyapiæ¥å£ç®¡ç†å¹³å°&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;ç¯å¢ƒå‡†å¤‡&quot;&gt;&lt;a href=&quot;#ç¯å¢ƒå‡†å¤‡&quot; class=&quot;headerlink&quot; title=&quot;ç¯å¢ƒå‡†å¤‡&quot;&gt;&lt;/a&gt;ç¯å¢ƒå‡†å¤‡&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;æ“ä½œç³»ç»Ÿï¼š&lt;/strong&gt;centos 7&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;ç¯å¢ƒè¦æ±‚ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;nodejs 7.6+&lt;/li&gt;
&lt;li&gt;mongodb 2.6+&lt;/li&gt;
&lt;li&gt;git&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
    
    </summary>
    
    
      <category term="uncategorized" scheme="https://melodyjerry.github.io/blog/categories/uncategorized/"/>
    
    
      <category term="Linux" scheme="https://melodyjerry.github.io/blog/tags/Linux/"/>
    
      <category term="API" scheme="https://melodyjerry.github.io/blog/tags/API/"/>
    
  </entry>
  
  <entry>
    <title>Vim-ç±»ä¼¼äºViçš„æ–‡æœ¬ç¼–è¾‘å™¨</title>
    <link href="https://melodyjerry.github.io/blog/2020/09/21/Vim-%E7%B1%BB%E4%BC%BC%E4%BA%8EVi%E7%9A%84%E6%96%87%E6%9C%AC%E7%BC%96%E8%BE%91%E5%99%A8/"/>
    <id>https://melodyjerry.github.io/blog/2020/09/21/Vim-%E7%B1%BB%E4%BC%BC%E4%BA%8EVi%E7%9A%84%E6%96%87%E6%9C%AC%E7%BC%96%E8%BE%91%E5%99%A8/</id>
    <published>2020-09-21T13:54:00.000Z</published>
    <updated>2020-09-24T08:55:08.026Z</updated>
    
    <content type="html"><![CDATA[<h1 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h1><p>Vimæ˜¯ä» vi å‘å±•å‡ºæ¥çš„ä¸€ä¸ªæ–‡æœ¬ç¼–è¾‘å™¨ã€‚ä»£ç è¡¥å®Œã€ç¼–è¯‘åŠé”™è¯¯è·³è½¬ç­‰æ–¹ä¾¿ç¼–ç¨‹çš„åŠŸèƒ½ç‰¹åˆ«ä¸°å¯Œï¼Œåœ¨ç¨‹åºå‘˜ä¸­è¢«å¹¿æ³›ä½¿ç”¨ã€‚å’ŒEmacså¹¶åˆ—æˆä¸ºç±»Unixç³»ç»Ÿç”¨æˆ·æœ€å–œæ¬¢çš„ç¼–è¾‘å™¨ã€‚</p><h1 id="é”®ç›˜å›¾"><a href="#é”®ç›˜å›¾" class="headerlink" title="é”®ç›˜å›¾"></a>é”®ç›˜å›¾</h1><blockquote><p>æ¥æºè§æ°´å°</p></blockquote><p><img src="https://s1.ax1x.com/2020/09/21/wq1Y6I.png" srcset="/blog/img/loading.gif" alt="wq1Y6I.png"></p><a id="more"></a><h1 id="ä¸»è¦åŠŸèƒ½"><a href="#ä¸»è¦åŠŸèƒ½" class="headerlink" title="ä¸»è¦åŠŸèƒ½"></a>ä¸»è¦åŠŸèƒ½</h1><ul><li>æ ¹æ®è®¾å®šå¯ä»¥å’ŒåŸå§‹viå®Œå…¨å…¼å®¹</li><li>å¤šç¼“å†²ç¼–è¾‘</li><li>ä»»æ„ä¸ªæ•°çš„åˆ†å‰²çª—å£ï¼ˆæ¨ªï¼Œç«–ï¼‰</li><li>å…·å¤‡åˆ—è¡¨å’Œå­—å…¸åŠŸèƒ½çš„è„šæœ¬è¯­è¨€</li><li>å¯ä»¥åœ¨è„šæœ¬ä¸­è°ƒç”¨ Perl, Ruby, Python, Tcl, MzScheme</li><li>å•è¯ç¼©å†™åŠŸèƒ½</li><li>åŠ¨æ€å•è¯è¡¥å®Œ</li><li>å¤šæ¬¡æ’¤é”€å’Œé‡åš</li><li>å¯¹åº”400ç§ä»¥ä¸Šæ–‡æœ¬æ–‡ä»¶çš„è¯­æ³•é«˜äº®</li><li>C/C++, Perl, Java, Ruby, Python ç­‰40ç§ä»¥ä¸Šè¯­è¨€çš„è‡ªåŠ¨ç¼©æ’</li><li>åˆ©ç”¨ctagsçš„æ ‡ç­¾ä¸­è·³è½¬</li><li>å´©æºƒåæ–‡ä»¶æ¢å¤</li><li>å…‰æ ‡ä½ç½®å’Œæ‰“å¼€çš„ç¼“å†²çŠ¶æ€çš„ä¿å­˜ å¤åŸï¼ˆsessionåŠŸèƒ½ï¼‰</li><li>å¯ä»¥å¯¹ä¸¤ä¸ªæ–‡ä»¶è¿›è¡Œå·®åˆ†ï¼ŒåŒæ­¥åŠŸèƒ½çš„diffæ¨¡å¼</li><li>è¿œç¨‹æ–‡ä»¶ç¼–è¾‘</li><li>Omniè¡¥å®Œï¼ˆä¸Šä¸‹æ–‡ç›¸å…³çš„è¡¥å®Œï¼‰</li></ul><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;ç®€ä»‹&quot;&gt;&lt;a href=&quot;#ç®€ä»‹&quot; class=&quot;headerlink&quot; title=&quot;ç®€ä»‹&quot;&gt;&lt;/a&gt;ç®€ä»‹&lt;/h1&gt;&lt;p&gt;Vimæ˜¯ä» vi å‘å±•å‡ºæ¥çš„ä¸€ä¸ªæ–‡æœ¬ç¼–è¾‘å™¨ã€‚ä»£ç è¡¥å®Œã€ç¼–è¯‘åŠé”™è¯¯è·³è½¬ç­‰æ–¹ä¾¿ç¼–ç¨‹çš„åŠŸèƒ½ç‰¹åˆ«ä¸°å¯Œï¼Œåœ¨ç¨‹åºå‘˜ä¸­è¢«å¹¿æ³›ä½¿ç”¨ã€‚å’ŒEmacså¹¶åˆ—æˆä¸ºç±»Unixç³»ç»Ÿç”¨æˆ·æœ€å–œæ¬¢çš„ç¼–è¾‘å™¨ã€‚&lt;/p&gt;
&lt;h1 id=&quot;é”®ç›˜å›¾&quot;&gt;&lt;a href=&quot;#é”®ç›˜å›¾&quot; class=&quot;headerlink&quot; title=&quot;é”®ç›˜å›¾&quot;&gt;&lt;/a&gt;é”®ç›˜å›¾&lt;/h1&gt;&lt;blockquote&gt;
&lt;p&gt;æ¥æºè§æ°´å°&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;img src=&quot;https://s1.ax1x.com/2020/09/21/wq1Y6I.png&quot; srcset=&quot;/blog/img/loading.gif&quot; alt=&quot;wq1Y6I.png&quot;&gt;&lt;/p&gt;
    
    </summary>
    
    
      <category term="uncategorized" scheme="https://melodyjerry.github.io/blog/categories/uncategorized/"/>
    
    
      <category term="Linux" scheme="https://melodyjerry.github.io/blog/tags/Linux/"/>
    
  </entry>
  
  <entry>
    <title>Linuxä¸‹åˆ é™¤æ™®é€šç”¨æˆ·æ­¥éª¤</title>
    <link href="https://melodyjerry.github.io/blog/2020/09/21/Linux%E4%B8%8B%E5%88%A0%E9%99%A4%E6%99%AE%E9%80%9A%E7%94%A8%E6%88%B7%E6%AD%A5%E9%AA%A4/"/>
    <id>https://melodyjerry.github.io/blog/2020/09/21/Linux%E4%B8%8B%E5%88%A0%E9%99%A4%E6%99%AE%E9%80%9A%E7%94%A8%E6%88%B7%E6%AD%A5%E9%AA%A4/</id>
    <published>2020-09-21T13:47:00.000Z</published>
    <updated>2020-09-24T08:55:08.021Z</updated>
    
    <content type="html"><![CDATA[<ol><li>å…ˆç”¨å‘½ä»¤  <code>cat /etc/passwd</code> æŸ¥çœ‹ä¸€ä¸‹æ‰€æœ‰çš„ç”¨æˆ· å¯ä»¥çœ‹åˆ°ç‰‡ä½ éœ€è¦åˆ é™¤çš„ç”¨æˆ·å</li><li>ç”¨å‘½ä»¤  <code>who</code>  æŸ¥è¯¢å½“å‰ç™»å½•çš„ç”¨æˆ·</li><li>ç”¨å‘½ä»¤  <code>ps -u ç”¨æˆ·å</code>   æŸ¥çœ‹è¯¥ç”¨æˆ·çš„pid </li><li>ç”¨å‘½ä»¤ <code>kill pid</code>  æ€æ‰ä»–çš„sshdæˆ–è€…æ˜¯shellè¿›ç¨‹</li><li>å†ç”¨å‘½ä»¤  <code>userdel -r ç”¨æˆ·å</code>  åˆ é™¤ç”¨æˆ·</li></ol><a id="more"></a><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      &lt;ol&gt;
&lt;li&gt;å…ˆç”¨å‘½ä»¤  &lt;code&gt;cat /etc/passwd&lt;/code&gt; æŸ¥çœ‹ä¸€ä¸‹æ‰€æœ‰çš„ç”¨æˆ· å¯ä»¥çœ‹åˆ°ç‰‡ä½ éœ€è¦åˆ é™¤çš„ç”¨æˆ·å&lt;/li&gt;
&lt;li&gt;ç”¨å‘½ä»¤  &lt;code&gt;who&lt;/code&gt;  æŸ¥è¯¢å½“å‰ç™»å½•çš„ç”¨æˆ·&lt;/li&gt;
&lt;li&gt;ç”¨å‘½ä»¤  &lt;code&gt;ps -u ç”¨æˆ·å&lt;/code&gt;   æŸ¥çœ‹è¯¥ç”¨æˆ·çš„pid &lt;/li&gt;
&lt;li&gt;ç”¨å‘½ä»¤ &lt;code&gt;kill pid&lt;/code&gt;  æ€æ‰ä»–çš„sshdæˆ–è€…æ˜¯shellè¿›ç¨‹&lt;/li&gt;
&lt;li&gt;å†ç”¨å‘½ä»¤  &lt;code&gt;userdel -r ç”¨æˆ·å&lt;/code&gt;  åˆ é™¤ç”¨æˆ·&lt;/li&gt;
&lt;/ol&gt;
    
    </summary>
    
    
      <category term="uncategorized" scheme="https://melodyjerry.github.io/blog/categories/uncategorized/"/>
    
    
      <category term="Linux" scheme="https://melodyjerry.github.io/blog/tags/Linux/"/>
    
  </entry>
  
  <entry>
    <title>Xshell-é…è‰²æ–¹æ¡ˆ</title>
    <link href="https://melodyjerry.github.io/blog/2020/09/21/Xshell-%E9%85%8D%E8%89%B2%E6%96%B9%E6%A1%88/"/>
    <id>https://melodyjerry.github.io/blog/2020/09/21/Xshell-%E9%85%8D%E8%89%B2%E6%96%B9%E6%A1%88/</id>
    <published>2020-09-21T13:21:21.000Z</published>
    <updated>2020-09-24T08:55:08.028Z</updated>
    
    <content type="html"><![CDATA[<h1 id="è®¾ç½®å‘½ä»¤è¡Œæç¤ºç¬¦"><a href="#è®¾ç½®å‘½ä»¤è¡Œæç¤ºç¬¦" class="headerlink" title="è®¾ç½®å‘½ä»¤è¡Œæç¤ºç¬¦"></a>è®¾ç½®å‘½ä»¤è¡Œæç¤ºç¬¦</h1><p>åœ¨å‘½ä»¤è¡Œæç¤ºç¬¦æ˜¾ç¤ºç”¨æˆ·åï¼Œå½“å‰æœºå™¨IPï¼Œå½“å‰æ—¶é—´ï¼Œå½“å‰è·¯å¾„ç­‰ä¿¡æ¯ã€‚ä½†æœ‰æ—¶å€™å¦‚æœæˆ‘ä»¬çš„ç›®å½•å¾ˆé•¿ï¼Œæ•²å‡»å‘½ä»¤å¾ˆä¸æ–¹ä¾¿ï¼Œå¯ä»¥é€šè¿‡ä¿®æ”¹ PS1 ç¯å¢ƒå˜é‡ï¼Œè®©å‘½ä»¤æç¤ºç¬¦åœ¨ç¬¬äºŒè¡Œæ˜¾ç¤ºï¼š</p><p>å¦‚ä¸‹ç¤ºä¾‹ï¼Œåé¢çš„ \n å°±æ˜¯èµ·åˆ°äº†æç¤ºç¬¦ $ åœ¨ç¬¬äºŒè¡Œæ˜¾ç¤ºæ•ˆæœã€‚</p><pre><code class="hljs bash"><span class="hljs-built_in">export</span> PS1=<span class="hljs-string">"\[\033[01;31m\]\u\[\033[00m\]@\[\033[01;32m\]\h\[\033[00m\][\[\033[01;33m\]\t\[\033[00m\]]:\[\033[01;34m\]\w\[\033[00m\]\n$ "</span></code></pre><p>æ•ˆæœå¦‚ä¸‹ï¼š</p><p>â€‹    <img src="http://note.youdao.com/yws/public/resource/202a88734065732c89c84f9e9197ab9c/xmlnote/F3DD95CE99324FCEA6BA15337467F42A/34380" srcset="/blog/img/loading.gif" alt="0"></p><p><strong>æ³¨ï¼š</strong></p><p>  <strong>è®¾ç½®ä¸ºä»€ä¹ˆé¢œè‰²ï¼Œå¯ä»¥è‡ªå·±æ ¹æ®æ˜¾ç¤ºæ•ˆæœè°ƒï¼Œå¾ˆçµæ´»ã€‚</strong></p><a id="more"></a><h1 id="å»ºè®®"><a href="#å»ºè®®" class="headerlink" title="å»ºè®®"></a>å»ºè®®</h1><p>å¦‚æœè¦å†™å…¥shellé…ç½®æ–‡ä»¶ï¼Œå»ºè®®å†™åˆ°<strong>ç¯å¢ƒå˜é‡æ–‡ä»¶</strong><code>~/.bash_profile</code>ï¼Œè€Œä¸è¦å†™å…¥<code>~/.bashrc</code>ï¼Œå¦åˆ™å€ŸåŠ©sshç±»çš„å·¥å…·éƒ½å°†å› ä¸ºtrap DEBUGä¿¡å·çš„ç‰¹æ®Šæ€§è€Œæ— é™ç­‰å¾…ï¼Œæ¯”å¦‚scp/rsyncç­‰ã€‚</p><p>æˆ–è€…ï¼Œç›´æ¥åˆ¤æ–­æ˜¯å¦æ˜¯äº¤äº’å¼ç™»å½•ï¼Œæ˜¯çš„è¯å°±è®¾ç½®ï¼Œå¦åˆ™ä¸è®¾ç½®ï¼š</p><pre><code class="hljs bash"><span class="hljs-keyword">if</span> [ <span class="hljs-string">"<span class="hljs-variable">${-#*i}</span>"</span> != <span class="hljs-string">"$-"</span> ];<span class="hljs-keyword">then</span>    <span class="hljs-comment"># interactively shell</span>    PS1=<span class="hljs-string">"\[\033[01;31m\]\u\[\033[00m\]@\[\033[01;32m\]\h\[\033[00m\][\[\033[01;33m\]\t\[\033[00m\]]:\[\033[01;34m\]\w\[\033[00m\]\n$ "</span>    <span class="hljs-built_in">trap</span> <span class="hljs-string">'echo -ne "\e[0m"'</span> DEBUG<span class="hljs-keyword">fi</span></code></pre><pre><code class="hljs bash"><span class="hljs-comment"># å†™å…¥</span>vim ~/.bash_profile<span class="hljs-comment"># ç«‹å³ç”Ÿæ•ˆ</span><span class="hljs-built_in">source</span> ~/.bash_profile</code></pre><h1 id="å‚æ•°è¯´æ˜"><a href="#å‚æ•°è¯´æ˜" class="headerlink" title="å‚æ•°è¯´æ˜"></a>å‚æ•°è¯´æ˜</h1><blockquote><p>åœ¨ç»ˆç«¯ä¸Šçš„æ˜¾ç¤ºçš„å‘½ä»¤æç¤ºç¬¦ï¼š<code>[root@root ~]#</code></p><p>é…ç½®æ–‡ä»¶ä¸­çš„è®¾ç½®ï¼š<code>PS1="[\u@\h \W]\$"</code></p></blockquote><ul><li>è®¾ç½®æç¤ºç¬¦æ ¼å¼ï¼š<code>PS1</code></li></ul><p><code>PS1</code>çš„å®šä¹‰ä¸­ä¸ªå¸¸ç”¨çš„å‚æ•°çš„å«ä¹‰å¦‚ä¸‹ï¼š</p><p><code>\d</code> ï¼š#ä»£è¡¨æ—¥æœŸï¼Œæ ¼å¼ä¸ºweekday month dateï¼Œä¾‹å¦‚ï¼šâ€Mon Aug 1â€</p><p><code>\H</code> ï¼š#å®Œæ•´çš„ä¸»æœºåç§°</p><p><code>\h</code> ï¼š#ä»…å–ä¸»æœºçš„ç¬¬ä¸€ä¸ªåå­—</p><p><code>\T</code> ï¼š#æ˜¾ç¤ºæ—¶é—´ä¸º24å°æ—¶æ ¼å¼ï¼Œå¦‚ï¼šHHï¼šMMï¼šSS</p><p><code>\t</code> ï¼š#æ˜¾ç¤ºæ—¶é—´ä¸º12å°æ—¶æ ¼å¼ , å¦‚ï¼šHHï¼šMMï¼šSS</p><p><code>\A</code> ï¼š#æ˜¾ç¤ºæ—¶é—´ä¸º12å°æ—¶æ ¼å¼ï¼šHHï¼šMM</p><p><code>\u</code> ï¼š#å½“å‰ç”¨æˆ·çš„è´¦å·åç§°</p><p><code>\v</code> ï¼š#BASHçš„ç‰ˆæœ¬ä¿¡æ¯</p><p><code>\w</code> ï¼š#å®Œæ•´çš„å·¥ä½œç›®å½•åç§°</p><p><code>\W</code> ï¼š#åˆ©ç”¨basenameå–å¾—å·¥ä½œç›®å½•åç§°ï¼Œæ‰€ä»¥åªä¼šåˆ—å‡ºæœ€åä¸€ä¸ªç›®å½•</p><p>`#` ï¼š#ä¸‹è¾¾çš„ç¬¬å‡ ä¸ªå‘½ä»¤</p><p><code>$</code> ï¼š#æç¤ºå­—ç¬¦ï¼Œå¦‚æœæ˜¯rootæ—¶ï¼Œæç¤ºç¬¦ä¸ºï¼š<code>#</code> ï¼Œæ™®é€šç”¨æˆ·åˆ™ä¸ºï¼š<code>$</code></p><h1 id="è®¾ç½®é¢œè‰²"><a href="#è®¾ç½®é¢œè‰²" class="headerlink" title="è®¾ç½®é¢œè‰²"></a>è®¾ç½®é¢œè‰²</h1><blockquote><p>åœ¨<code>PS1</code>ä¸­è®¾ç½®å­—ç¬¦é¢œè‰²çš„æ ¼å¼ä¸ºï¼š<code>[\e[F;Bm]</code>ï¼Œå…¶ä¸­<code>F</code>ä¸ºå­—ä½“é¢œè‰²ï¼Œç¼–å·ä¸º30-37ï¼Œ<code>B</code>ä¸ºèƒŒæ™¯é¢œè‰²ï¼Œç¼–å·ä¸º40-47ã€‚</p></blockquote><p>é¢œè‰²è¡¨å¦‚ä¸‹ï¼š</p><p><code>[\e[F;Bm]</code>éœ€è¦æ”¹å˜é¢œè‰²çš„éƒ¨åˆ†<code>[\e[0m]</code></p><p>å¼€å§‹é¢œè‰²è¾“å…¥ï¼š<code>[\e[F;Bm]</code></p><p>ç»“æŸé¢œè‰²è¾“å…¥ï¼š<code>[\e[0m]</code></p><ul><li>F B å€¼åˆ†åˆ«å¯¹åº”çš„é¢œè‰²<pre><code class="hljs basic"><span class="hljs-symbol">30 </span><span class="hljs-number">40</span> é»‘è‰²<span class="hljs-symbol">31 </span><span class="hljs-number">41</span> çº¢è‰²<span class="hljs-symbol">32 </span><span class="hljs-number">42</span> ç»¿è‰²<span class="hljs-symbol">33 </span><span class="hljs-number">43</span> é»„è‰²<span class="hljs-symbol">34 </span><span class="hljs-number">44</span> è“è‰²<span class="hljs-symbol">35 </span><span class="hljs-number">45</span> ç´«çº¢è‰²<span class="hljs-symbol">36 </span><span class="hljs-number">46</span> é’è“è‰²<span class="hljs-symbol">37 </span><span class="hljs-number">47</span> ç™½è‰²</code></pre></li></ul><ul><li>è®¾ç½®ç‰¹æ®Šæ˜¾ç¤º<pre><code class="hljs basic"><span class="hljs-symbol">0 </span><span class="hljs-keyword">OFF</span>ï¼Œå…³é—­é¢œè‰²<span class="hljs-symbol">1 </span>é«˜äº®æ˜¾ç¤º<span class="hljs-symbol">4 </span>æ˜¾ç¤ºä¸‹åˆ’çº¿<span class="hljs-symbol">5 </span>é—ªçƒæ˜¾ç¤º<span class="hljs-symbol">7 </span>åç™½æ˜¾ç¤º<span class="hljs-symbol">8 </span>é¢œè‰²ä¸å¯è§</code></pre>ç‰¹æ®Šæ˜¾ç¤ºå¯åœ¨ç»“æŸé¢œè‰²è¾“å…¥é‡Œé¢è®¾ç½®ï¼š<code>[\e[ ç‰¹æ®Šé¢œè‰²ç¼–å· m]</code></li></ul><h1 id="å…¶ä»–é…è‰²é…ç½®"><a href="#å…¶ä»–é…è‰²é…ç½®" class="headerlink" title="å…¶ä»–é…è‰²é…ç½®"></a>å…¶ä»–é…è‰²é…ç½®</h1><p>ç‚¹å‡» Xshell é¢æ¿é¡¶éƒ¨çš„å¦‚ä¸‹æŒ‰é’®ã€‚</p><p>â€‹    <img src="http://note.youdao.com/yws/public/resource/202a88734065732c89c84f9e9197ab9c/xmlnote/BD96E8E97F1041839D778415D8CABE9A/34339" srcset="/blog/img/loading.gif" alt="0"></p><p>ç‚¹å‡» Browse æŒ‰é’®ï¼Œå¼¹å‡ºå¦‚ä¸‹é¢æ¿ï¼Œé€‰æ‹© ANSI Colors on Blackï¼Œç„¶åç‚¹å‡»å³ä¾§save as æŒ‰é’®ï¼Œå‘½åä¸º zklã€‚</p><p>è¿™é‡Œå…¶å®å°±æ˜¯å¤åˆ¶ä¸€ä»½ ANSI Colors on Black çš„é¢œè‰²æ–¹æ¡ˆï¼Œæˆ–è€…æˆ‘ä»¬ä¹Ÿå¯ä»¥ New ä¸€ä¸ªæ–¹æ¡ˆã€‚</p><p>ANSI é¢œè‰²å·²ç»å¾ˆå¥½çœ‹ï¼Œè¿™é‡Œæˆ‘ä»¬æ˜¯æ²¿ç”¨ ANSI é¢œè‰²ï¼Œå¹¶åŠ ä»¥ä¿®æ”¹ï¼Œä»¥å¾—åˆ°è‡ªå·±æƒ³è¦çš„é¢œè‰²æ–¹æ¡ˆã€‚</p><p>â€‹    <img src="http://note.youdao.com/yws/public/resource/202a88734065732c89c84f9e9197ab9c/xmlnote/D1F435F681D641209349778E780A86D7/34342" srcset="/blog/img/loading.gif" alt="0"></p><p>ç„¶åï¼Œç‚¹å‡»å³ä¾§çš„ edit æŒ‰é’®ï¼Œç¼–è¾‘å‰æ™¯è‰²å’ŒèƒŒæ™¯è‰²ã€‚</p><p><strong>1. è®¾ç½®èƒŒæ™¯è‰²</strong></p><p>ç‚¹å‡» Backgroud å³ä¾§çš„ä¸‹æ‹‰åˆ—è¡¨ï¼Œ åœ¨å¼¹å‡ºçš„ç•Œé¢é€‰æ‹© other, å¼¹å‡ºä¸€ä¸ªç•Œé¢ï¼Œç‚¹å‡»è‡ªå®šä¹‰é¢œè‰²ï¼Œç„¶åä¼šå¼¹å‡ºå¦‚ä¸‹ç•Œé¢ï¼š</p><p>æŒ‰ç…§å¦‚ä¸‹ rgb å€¼å¡«å†™é¢œè‰²ï¼Œï¼ˆ0ï¼Œ43, 53ï¼‰</p><p>ç„¶åç‚¹å‡» Add to Custom Colors æŒ‰é’®ï¼Œæ·»åŠ è‡ªå®šä¹‰é¢œè‰²åˆ°å·¦ä¾§é¢æ¿ä¸­çš„ custom colorsä¸‹ï¼Œé€‰æ‹©å®ƒã€‚ç¡®å®šã€‚</p><p>â€‹    <img src="http://note.youdao.com/yws/public/resource/202a88734065732c89c84f9e9197ab9c/xmlnote/39C2F44930674C0BA5109DAA2DC8C7EB/34330" srcset="/blog/img/loading.gif" alt="0"></p><p><strong>2. è®¾ç½®å­—ä½“é¢œè‰²ï¼ˆå‰æ™¯è‰²ï¼‰</strong></p><p>ç‚¹å‡» Normal Textï¼Œè¿›è¡Œè®¾ç½®ã€‚</p><p>rgbé¢œè‰²ï¼šï¼ˆ131,148,150ï¼‰</p><p>â€‹    <img src="http://note.youdao.com/yws/public/resource/202a88734065732c89c84f9e9197ab9c/xmlnote/590A9972CA694D2F8E9F0B8E99DD6FEB/34325" srcset="/blog/img/loading.gif" alt="0"></p><p><strong>3. è®¾ç½®ç›®å½•é¢œè‰²</strong></p><p>â€‹    <img src="http://note.youdao.com/yws/public/resource/202a88734065732c89c84f9e9197ab9c/xmlnote/32C463E5DEEA4F2E8A0BE945E80D02B5/34355" srcset="/blog/img/loading.gif" alt="0"></p><p>é¢œè‰² rgb å€¼å¦‚ä¸‹ï¼šï¼ˆ128ï¼Œ128, 255ï¼‰</p><p>â€‹    <img src="http://note.youdao.com/yws/public/resource/202a88734065732c89c84f9e9197ab9c/xmlnote/ABF6FAEC55324EB9831A00B1FC5B9201/34372" srcset="/blog/img/loading.gif" alt="0"></p><p><strong>4. è®¾ç½®å‹ç¼©æ–‡ä»¶é¢œè‰²</strong></p><p>ANSI é¢œè‰²ä¸­ï¼Œå‹ç¼©æ–‡ä»¶é¢œè‰²é»˜è®¤æ˜¯çº¢è‰²ï¼Œä¸å¹²æ‰°è§†çº¿ï¼Œå¦‚æœæ„Ÿè§‰ä¸å¥½ï¼Œå¯ä»¥è°ƒæ•´ä¸ºå¦‚ä¸‹é¢œè‰²ï¼š</p><p>â€‹    <img src="http://note.youdao.com/yws/public/resource/202a88734065732c89c84f9e9197ab9c/xmlnote/346D3113708F402FA7010678897293A9/34366" srcset="/blog/img/loading.gif" alt="0"></p><p>é¢œè‰² rgb å€¼å¦‚ä¸‹ï¼šï¼ˆ128ï¼Œ128, 0ï¼‰</p><p>â€‹    <img src="http://note.youdao.com/yws/public/resource/202a88734065732c89c84f9e9197ab9c/xmlnote/12A178F7B6E64CB89158765374F356B0/34370" srcset="/blog/img/loading.gif" alt="0"></p><p><strong>5. è®¾ç½®VIMä¸­æ³¨é‡Šçš„é¢œè‰²</strong> </p><p>ç»è¿‡ä»¥ä¸Šè®¾ç½®åï¼Œxshellçš„èƒŒæ™¯é¢œè‰²ï¼Œå­—ä½“é¢œè‰²ï¼Œlinuxçš„ç›®å½•ï¼Œå‹ç¼©æ–‡ä»¶é¢œè‰²éƒ½æ¯”è¾ƒå¥½çœ‹äº†ï¼Œæ•ˆæœå¦‚ä¸‹ã€‚</p><p>â€‹    <img src="http://note.youdao.com/yws/public/resource/202a88734065732c89c84f9e9197ab9c/xmlnote/EE9F095AB52649F1AD384A170879FD59/34399" srcset="/blog/img/loading.gif" alt="0"></p><p>ä½†æ˜¯æˆ‘ä»¬æ‰“å¼€ vimï¼Œç¼–è¾‘ä¸€ä¸ª c++, python ä»£ç æ–‡ä»¶æ—¶ä¼šå‘ç°æ³¨é‡Šçš„é¢œè‰²å¾ˆä¸å¥½çœ‹ã€‚éœ€è¦å†è¿›è¡Œè®¾ç½®ã€‚</p><p>â€‹    <img src="http://note.youdao.com/yws/public/resource/202a88734065732c89c84f9e9197ab9c/xmlnote/8CF1086E999A478682FE26CBBD6F66A4/34389" srcset="/blog/img/loading.gif" alt="0"></p><p>è®¾ç½®å¦‚ä¸‹é¢œè‰²å³å¯ï¼š</p><p>rgbé¢œè‰²ï¼šï¼ˆ255,128,64ï¼‰</p><p>â€‹    <img src="http://note.youdao.com/yws/public/resource/202a88734065732c89c84f9e9197ab9c/xmlnote/D75AA5C048F846E2BC0DCFB897051CAE/34405" srcset="/blog/img/loading.gif" alt="0"></p><p>ä¿®æ”¹åçš„ä»£ç æ–‡ä»¶æ˜¾ç¤ºæ•ˆæœå¦‚ä¸‹ï¼š</p><p>â€‹    <img src="http://note.youdao.com/yws/public/resource/202a88734065732c89c84f9e9197ab9c/xmlnote/F851D90807A74A27BDDD1905B947627E/34391" srcset="/blog/img/loading.gif" alt="0"></p><p><strong>6. å¯¼å‡ºé¢œè‰²æ–¹æ¡ˆ</strong></p><p>xshell éå¸¸å¼ºå¤§ï¼Œå„ç§åŠŸèƒ½ã€‚æˆ‘ä»¬è®¾ç½®çš„é¢œè‰²æ–¹æ¡ˆä¹Ÿå¯ä»¥å¯¼å‡ºä¿å­˜ï¼Œå½“æˆ‘ä»¬åœ¨å…¶ä»–æœºå™¨ä¸Šä½¿ç”¨æ—¶ï¼Œå¯ä»¥å¯¼å…¥é¢œè‰²æ–¹æ¡ˆã€‚</p><p>ä¸‹é¢ç•Œé¢ä¸­çš„ import å’Œ export å³å¯å®Œæˆå¯¼å…¥å’Œå¯¼å‡ºé¢œè‰²æ–¹æ¡ˆï¼Œä¸‹é¢è¿™ä¸ªæ–‡ä»¶æ˜¯ä¸Šè¿°é…ç½®å¯¹åº”çš„é¢œè‰²æ–¹æ¡ˆæ–‡ä»¶ï¼š</p><p>â€‹    <img src="http://note.youdao.com/yws/public/resource/202a88734065732c89c84f9e9197ab9c/xmlnote/83051EC210554E98A38A8767481ADBA8/34432" srcset="/blog/img/loading.gif" alt="zkl.xcs"></p><p>â€‹    <img src="http://note.youdao.com/yws/public/resource/202a88734065732c89c84f9e9197ab9c/xmlnote/0E901C3307584455B61DF5E18A68D001/34427" srcset="/blog/img/loading.gif" alt="0"></p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;è®¾ç½®å‘½ä»¤è¡Œæç¤ºç¬¦&quot;&gt;&lt;a href=&quot;#è®¾ç½®å‘½ä»¤è¡Œæç¤ºç¬¦&quot; class=&quot;headerlink&quot; title=&quot;è®¾ç½®å‘½ä»¤è¡Œæç¤ºç¬¦&quot;&gt;&lt;/a&gt;è®¾ç½®å‘½ä»¤è¡Œæç¤ºç¬¦&lt;/h1&gt;&lt;p&gt;åœ¨å‘½ä»¤è¡Œæç¤ºç¬¦æ˜¾ç¤ºç”¨æˆ·åï¼Œå½“å‰æœºå™¨IPï¼Œå½“å‰æ—¶é—´ï¼Œå½“å‰è·¯å¾„ç­‰ä¿¡æ¯ã€‚ä½†æœ‰æ—¶å€™å¦‚æœæˆ‘ä»¬çš„ç›®å½•å¾ˆé•¿ï¼Œæ•²å‡»å‘½ä»¤å¾ˆä¸æ–¹ä¾¿ï¼Œå¯ä»¥é€šè¿‡ä¿®æ”¹ PS1 ç¯å¢ƒå˜é‡ï¼Œè®©å‘½ä»¤æç¤ºç¬¦åœ¨ç¬¬äºŒè¡Œæ˜¾ç¤ºï¼š&lt;/p&gt;
&lt;p&gt;å¦‚ä¸‹ç¤ºä¾‹ï¼Œåé¢çš„ \n å°±æ˜¯èµ·åˆ°äº†æç¤ºç¬¦ $ åœ¨ç¬¬äºŒè¡Œæ˜¾ç¤ºæ•ˆæœã€‚&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;hljs bash&quot;&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;export&lt;/span&gt; PS1=&lt;span class=&quot;hljs-string&quot;&gt;&quot;\[\033[01;31m\]\u\[\033[00m\]@\[\033[01;32m\]\h\[\033[00m\][\[\033[01;33m\]\t\[\033[00m\]]:\[\033[01;34m\]\w\[\033[00m\]\n$ &quot;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;æ•ˆæœå¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;p&gt;â€‹    &lt;img src=&quot;http://note.youdao.com/yws/public/resource/202a88734065732c89c84f9e9197ab9c/xmlnote/F3DD95CE99324FCEA6BA15337467F42A/34380&quot; srcset=&quot;/blog/img/loading.gif&quot; alt=&quot;0&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;æ³¨ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;  &lt;strong&gt;è®¾ç½®ä¸ºä»€ä¹ˆé¢œè‰²ï¼Œå¯ä»¥è‡ªå·±æ ¹æ®æ˜¾ç¤ºæ•ˆæœè°ƒï¼Œå¾ˆçµæ´»ã€‚&lt;/strong&gt;&lt;/p&gt;
    
    </summary>
    
    
      <category term="uncategorized" scheme="https://melodyjerry.github.io/blog/categories/uncategorized/"/>
    
    
      <category term="å°æŠ€å·§" scheme="https://melodyjerry.github.io/blog/tags/%E5%B0%8F%E6%8A%80%E5%B7%A7/"/>
    
      <category term="Linux" scheme="https://melodyjerry.github.io/blog/tags/Linux/"/>
    
  </entry>
  
  <entry>
    <title>ä½¿ç”¨Hexo+GitHubå»ºç«™</title>
    <link href="https://melodyjerry.github.io/blog/2020/09/19/Hexo+GitHub/"/>
    <id>https://melodyjerry.github.io/blog/2020/09/19/Hexo+GitHub/</id>
    <published>2020-09-19T11:24:01.000Z</published>
    <updated>2020-09-24T08:55:08.019Z</updated>
    
    <content type="html"><![CDATA[<p>å‰è¨€ï¼š ä½¿ç”¨<a href="https://blog.csdn.net/weixin_43438052" target="_blank" rel="noopener">CSDN</a>æˆ–<strong>ç®€ä¹¦</strong>æ’°å†™åšå®¢ä¼¼ä¹æ˜¯ä¸€ä»¶ç¾äº‹ï¼Œåªä¸è¿‡ä¸ªäººè§‰å¾—å¤ªè¿‡äºä¾èµ–ä»–äººå¹³å°ï¼Œä¸å¦‚å°±è‡ªå·±æ­å»ºä¸€ä¸ªå±äºè‡ªå·±çš„åšå®¢ã€‚</p><p>æœ€ç»ˆï¼Œä¸ªäººé€‰æ‹©äº†<strong>Hexo+GitHubï¼ˆPagesï¼‰</strong>çš„æ–¹å¼ã€‚</p><blockquote><p><a href="https://pages.github.com/" target="_blank" rel="noopener">GitHub Pages</a> æ˜¯å¼€æºåä½œç¤¾åŒº GitHub çš„ä¸€ä¸ªæœåŠ¡ï¼Œå°†åšå®¢éƒ¨ç½²åˆ°å®ƒä¸Šé¢å†åˆé€‚ä¸è¿‡äº†ã€‚</p></blockquote><table><thead><tr><th>Q</th><th>W</th></tr></thead><tbody><tr><td>ä¸ºä»€ä¹ˆè¦éƒ¨ç½²åˆ° GitHub Pages ä¸Šï¼Ÿ</td><td>é¦–å…ˆå…è´¹ï¼Œå…¶æ¬¡çœå¿ƒï¼Œæœ€åå¯ä»¥å­¦ä¹ ä½¿ç”¨ GitHubã€‚</td></tr><tr><td>GitHub Pages æœ‰å®¹é‡é™åˆ¶å—ï¼Ÿ</td><td>æœ‰ï¼Œç”± <a href="https://help.github.com/articles/what-is-github-pages/" target="_blank" rel="noopener">What is GitHub Pages?</a> å¯çŸ¥ï¼šå¤§å°é™åˆ¶ä¸º 1GBï¼Œä¸€ä¸ªæœˆ 100GB æµé‡ã€‚</td></tr><tr><td>è¶…å‡ºé™åˆ¶çš„å®¹é‡æ€ä¹ˆåŠï¼Ÿ</td><td>è®²çœŸï¼Œå¦‚æœå›¾ç‰‡éŸ³ä¹è§†é¢‘ç­‰å¤§æ–‡ä»¶éƒ½æ”¾åœ¨<a href="https://www.qiniu.com/" target="_blank" rel="noopener">ä¸ƒç‰›äº‘ KODO</a>ã€<a href="https://www.aliyun.com/product/oss" target="_blank" rel="noopener">é˜¿é‡Œäº‘ OSS</a> æˆ–å…¶å®ƒäº‘å­˜å‚¨ä¸Šã€‚<br>å›¾ç‰‡æˆ‘æ›´å¤šæ˜¯å­˜æ”¾åœ¨å›¾åºŠä¸Šï¼Œæ¯”å¦‚<a href="https://imgchr.com/" target="_blank" rel="noopener">è·¯è¿‡å›¾åºŠ</a>æˆ–<a href="https://sm.ms/" target="_blank" rel="noopener">SM.MS</a>ã€‚</td></tr><tr><td>å›½å†…è®¿é—®é€Ÿåº¦è¡Œä¸è¡Œï¼Œæœ‰å¿…è¦åŒæ—¶éƒ¨ç½²åœ¨ <a href="https://coding.net/" target="_blank" rel="noopener">Coding</a> ä¸Šå—ï¼Ÿ</td><td>ä¸ªäººæ„Ÿè§‰å¯æœ‰å¯æ— å§ï¼Œè‡ªå·±ä¸ç”¨æ¢¯å­æ—¶ï¼Œæ„Ÿè§‰è®¿é—®é€Ÿåº¦å¯ä»¥ï¼Œæ¯•ç«Ÿç«™ç‚¹çš„å¤§æ–‡ä»¶éƒ½æ˜¯æ”¾åœ¨äº†äº‘å­˜å‚¨ä¸Šï¼Œå›¾ç‰‡éƒ½æ˜¯å›½å†…å›¾åºŠï¼ŒåŠ è½½è¾ƒå¿«ã€‚</td></tr><tr><td>æˆ‘å¯ä»¥ç”¨è‡ªå·±çš„åŸŸåå—ï¼Ÿ</td><td>å¯ä»¥ï¼Œå¹¶ä¸”åŸç”Ÿæ”¯æŒ httpsã€‚</td></tr></tbody></table><a id="more"></a> <hr><h1 id="å®‰è£…ç¯‡"><a href="#å®‰è£…ç¯‡" class="headerlink" title="å®‰è£…ç¯‡"></a>å®‰è£…ç¯‡</h1><hr><h2 id="ä¸€ã€å®‰è£…-Hexoå‰çš„å‡†å¤‡"><a href="#ä¸€ã€å®‰è£…-Hexoå‰çš„å‡†å¤‡" class="headerlink" title="ä¸€ã€å®‰è£… Hexoå‰çš„å‡†å¤‡"></a>ä¸€ã€å®‰è£… Hexoå‰çš„å‡†å¤‡</h2><h3 id="1ã€å®‰è£…Hexoå‰çš„å¿…è¦å·¥ä½œ"><a href="#1ã€å®‰è£…Hexoå‰çš„å¿…è¦å·¥ä½œ" class="headerlink" title="1ã€å®‰è£…Hexoå‰çš„å¿…è¦å·¥ä½œ"></a>1ã€å®‰è£…Hexoå‰çš„å¿…è¦å·¥ä½œ</h3><p>å®‰è£…ä»¥ä¸‹ä¸¤ä¸ªç¨‹åºï¼š</p><p>ç¨‹åº | ä¸‹è½½åœ°å€ | è¯´æ˜|<br>â€“|â€“|â€“|â€“<br>Git|<a href="https://git-scm.com/downloads" target="_blank" rel="noopener">Git - Downloads</a>| ç½‘é€Ÿçš„åŒå­¦ï¼Œå¯ä»¥è‡ªè¡Œç™¾åº¦ç§»æ­¥åˆ°å›½å†…é•œåƒ |<br>Node.js|<a href="https://nodejs.org/en/" target="_blank" rel="noopener">Node.js - Downloads</a>| æœ‰LTSå’ŒCurrentä¸¤ä¸ªç‰ˆæœ¬ï¼Œå®‰è£… LTS ç‰ˆå³å¯ã€‚ |ç”±äºæ–°ç‰ˆçš„nodejså·²ç»é›†æˆäº†npmï¼Œæ‰€ä»¥ä¹‹å‰npmä¹Ÿä¸€å¹¶å®‰è£…å¥½äº†ã€‚åŒæ ·å¯ä»¥é€šè¿‡è¾“å…¥ <strong>â€œnpm -vâ€</strong> æ¥æµ‹è¯•æ˜¯å¦æˆåŠŸå®‰è£…ã€‚</p><p>æ³¨æ„ï¼šå…³äºGitå’ŒNode.jsçš„å®‰è£…å¯èƒ½ä¼šæœ‰é—®é¢˜ï¼Œå°¤å…¶æ˜¯Gitçš„å®‰è£…ã€‚è¿™é‡Œè´´ä¸Šå‡ å¼ å®‰è£…ç•Œé¢çš„æˆªå›¾ã€‚</p><p><img src="https://s1.ax1x.com/2020/09/19/wI2wcT.png" srcset="/blog/img/loading.gif" alt="wI2wcT.png"></p><p><img src="https://s1.ax1x.com/2020/09/19/wI2R9x.png" srcset="/blog/img/loading.gif" alt="wI2R9x.png"></p><p><img src="https://s1.ax1x.com/2020/09/19/wI2oHH.png" srcset="/blog/img/loading.gif" alt="wI2oHH.png"></p><p>å®‰è£…å®Œæˆåï¼Œåœ¨å¼€å§‹èœå•é‡Œæ‰¾åˆ°â€œGitâ€-&gt;â€œGit Bashâ€ï¼Œè¹¦å‡ºä¸€ä¸ªç±»ä¼¼å‘½ä»¤è¡Œçª—å£çš„ä¸œè¥¿ï¼Œå°±è¯´æ˜Gitå®‰è£…æˆåŠŸï¼<br><img src="https://i.loli.net/2019/11/07/pFcNrU8QYBVROGw.png" srcset="/blog/img/loading.gif" alt="image.png"></p><h3 id="2ã€æ–°å»ºGitHubä»“åº“"><a href="#2ã€æ–°å»ºGitHubä»“åº“" class="headerlink" title="2ã€æ–°å»ºGitHubä»“åº“"></a>2ã€æ–°å»ºGitHubä»“åº“</h3><ol><li>æŒ‰ç…§ä¸‹å›¾æ¥æ–°å»ºä¸€ä¸ªRepoï¼š</li></ol><ul><li>æœ€å¥½å‹¾é€‰``Initialize this repository with a README`ï¼Œå›¾ä¸­å¿˜è®°å‹¾é€‰äº†ã€‚</li></ul><p><img src="https://s1.ax1x.com/2020/09/19/wIov7T.png" srcset="/blog/img/loading.gif" alt="wIov7T.png"></p><ol start="2"><li>è®¿é—®GitHub Pages</li></ol><p>åœ¨å»ºå¥½çš„ä»“åº“å³ä¾§æœ‰ä¸ª<code>settings</code>æŒ‰é’®ï¼Œç‚¹å‡»å®ƒ</p><p><img src="https://s1.ax1x.com/2020/09/19/wITtUS.png" srcset="/blog/img/loading.gif" alt="wITtUS.png"></p><p>å‘ä¸‹æ‹‰åˆ°<code>GitHub Pages</code>ï¼Œæç¤ºçš„é“¾æ¥ä¾¿æ˜¯åšå®¢çš„é¦–é¡µäº†ï¼Œå¯ä»¥ç‚¹å‡»æµè§ˆã€‚ï¼ˆåæœŸå¯ä»¥åœ¨è¿™é‡Œç»‘å®šåŸŸåï¼‰</p><p><img src="https://s1.ax1x.com/2020/09/19/wIT5K1.png" srcset="/blog/img/loading.gif" alt="wIT5K1.png"></p><h2 id="äºŒã€æ­£å¼å®‰è£…Hexo"><a href="#äºŒã€æ­£å¼å®‰è£…Hexo" class="headerlink" title="äºŒã€æ­£å¼å®‰è£…Hexo"></a>äºŒã€æ­£å¼å®‰è£…Hexo</h2><blockquote><p>Hexo æ˜¯ä¸€ä¸ªå¿«é€Ÿã€ç®€æ´ä¸”é«˜æ•ˆçš„åšå®¢æ¡†æ¶ã€‚Hexo ä½¿ç”¨ Markdownï¼ˆæˆ–å…¶ä»–æ¸²æŸ“å¼•æ“ï¼‰è§£ææ–‡ç« ï¼Œåœ¨å‡ ç§’å†…ï¼Œå³å¯åˆ©ç”¨é“ä¸½çš„ä¸»é¢˜ç”Ÿæˆé™æ€ç½‘é¡µã€‚â€”â€”å®˜æ–¹</p></blockquote><p>å‡†å¤‡å·¥ä½œå®Œæˆåï¼Œæ¥å®‰è£…hexoæ¡†æ¶å§ï¼<br> <strong>ä¸»è¦æ ¹æ®hexoå®˜æ–¹çš„<a href="https://hexo.io/zh-cn/docs/" target="_blank" rel="noopener">æ–‡æ¡£</a>æ¥å®‰è£…Hexoã€‚</strong></p><ul><li><p>åœ¨æœ¬åœ°ç”µè„‘ä¸Šæ–°å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œç”¨æ¥å­˜æ”¾æ•´ä¸ªHexoåšå®¢é¡¹ç›®ã€‚è¿™é‡Œé»˜è®¤è·¯å¾„æ˜¯<strong>D:\blog</strong>ã€‚</p></li><li><p>ä½¿ç”¨ npm å®‰è£… Hexoï¼š</p></li></ul><pre><code class="hljs bash">$ npm install -g hexo-cli</code></pre><p><img src="https://i.loli.net/2019/11/07/BZIuA2XzYeaDQ8k.png" srcset="/blog/img/loading.gif" alt="image.png"></p><p>è¿™æ ·ï¼ŒHexoå°±å®‰è£…å®Œæˆäº†ã€‚</p><blockquote><p>å¯ä½¿ç”¨è¾“å…¥<code>hexo -v</code>ï¼Œæ£€æŸ¥<code>Hexo</code>æ˜¯å¦å®‰è£…æˆåŠŸ</p></blockquote><h2 id="ä¸‰ã€åˆå§‹åŒ–Hexo"><a href="#ä¸‰ã€åˆå§‹åŒ–Hexo" class="headerlink" title="ä¸‰ã€åˆå§‹åŒ–Hexo"></a>ä¸‰ã€åˆå§‹åŒ–Hexo</h2><p><code>hexo init</code>ï¼Œå°±ä¼šè‡ªåŠ¨æ„å»ºä¸€ä¸ª <code>hexo</code> é¡¹ç›®ï¼Œçœ‹åˆ°åé¢çš„<code>Start blogging with Hexoï¼</code>å°±è¯´æ˜åˆå§‹åŒ–å¥½äº†ã€‚</p><pre><code class="hljs bash"><span class="hljs-comment"># åˆå§‹åŒ–Hexo</span>$ hexo init</code></pre><h2 id="å››ã€å®‰è£…npmå¿…éœ€ç»„ä»¶"><a href="#å››ã€å®‰è£…npmå¿…éœ€ç»„ä»¶" class="headerlink" title="å››ã€å®‰è£…npmå¿…éœ€ç»„ä»¶"></a>å››ã€å®‰è£…npmå¿…éœ€ç»„ä»¶</h2><pre><code class="hljs bash">$ npm install</code></pre><h2 id="äº”ã€ç”Ÿæˆå¹¶é¢„è§ˆ"><a href="#äº”ã€ç”Ÿæˆå¹¶é¢„è§ˆ" class="headerlink" title="äº”ã€ç”Ÿæˆå¹¶é¢„è§ˆ"></a>äº”ã€ç”Ÿæˆå¹¶é¢„è§ˆ</h2><p>æ‰§è¡Œ <code>hexo s</code>ï¼Œæµè§ˆå™¨è®¿é—® <code>localhost:4000</code> å°±å¯ä»¥çœ‹åˆ°æ•ˆæœå•¦ï¼</p><pre><code class="hljs bash"><span class="hljs-comment"># æœ¬åœ°é¢„è§ˆ</span>$ hexo s</code></pre><p>åˆå§‹åŒ–çš„é»˜è®¤åšå®¢é¡µé¢ï¼š</p><p><img src="https://s1.ax1x.com/2020/09/19/wII0iQ.png" srcset="/blog/img/loading.gif" alt="wII0iQ.png"></p><h1 id="é…ç½®ç¯‡"><a href="#é…ç½®ç¯‡" class="headerlink" title="é…ç½®ç¯‡"></a>é…ç½®ç¯‡</h1><h2 id="ä¸€ã€é…ç½®git"><a href="#ä¸€ã€é…ç½®git" class="headerlink" title="ä¸€ã€é…ç½®git"></a>ä¸€ã€é…ç½®git</h2><h3 id="1ã€-å…¨å±€å˜é‡nameã€email"><a href="#1ã€-å…¨å±€å˜é‡nameã€email" class="headerlink" title="1ã€ å…¨å±€å˜é‡nameã€email"></a>1ã€ å…¨å±€å˜é‡nameã€email</h3><ul><li><em>å¯ä»¥åœ¨æœªæ¥éƒ¨ç½²ï¼Œå¹¶éä¸€å®šç°åœ¨</em></li></ul><blockquote><p>å› ä¸ºGitæ˜¯åˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿï¼Œæ‰€ä»¥ï¼Œæ¯ä¸ªæœºå™¨éƒ½å¿…é¡»è‡ªæŠ¥å®¶é—¨ï¼šä½ çš„åå­—å’ŒEmailåœ°å€ã€‚æ³¨æ„<code>git config</code>å‘½ä»¤çš„<code>--global</code>å‚æ•°ï¼Œç”¨äº†è¿™ä¸ªå‚æ•°ï¼Œè¡¨ç¤ºä½ è¿™å°æœºå™¨ä¸Šæ‰€æœ‰çš„Gitä»“åº“éƒ½ä¼šä½¿ç”¨è¿™ä¸ªé…ç½®ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥å¯¹æŸä¸ªä»“åº“æŒ‡å®šä¸åŒçš„ç”¨æˆ·åå’ŒEmailåœ°å€ã€‚</p></blockquote><pre><code>$ git config --global user.name  "your name"`$ git config --global user.email "your Email"</code></pre><h3 id="2ã€ç”Ÿæˆç§é’¥å’Œå…¬é’¥"><a href="#2ã€ç”Ÿæˆç§é’¥å’Œå…¬é’¥" class="headerlink" title="2ã€ç”Ÿæˆç§é’¥å’Œå…¬é’¥"></a>2ã€ç”Ÿæˆç§é’¥å’Œå…¬é’¥</h3><pre><code class="hljs ba">$ ssh-keygen -t rsa</code></pre><p><img src="https://s1.ax1x.com/2020/09/18/wh8K6e.png" srcset="/blog/img/loading.gif" alt="wh8K6e.png"></p><h3 id="3ã€ç»‘å®šSSHå…¬é’¥"><a href="#3ã€ç»‘å®šSSHå…¬é’¥" class="headerlink" title="3ã€ç»‘å®šSSHå…¬é’¥"></a>3ã€ç»‘å®šSSHå…¬é’¥</h3><p>ç™»å½•Githubï¼Œç‚¹å‡»å¤´åƒä¸‹çš„<code>settings</code></p><p><img src="https://s1.ax1x.com/2020/09/19/wI7FPg.png" srcset="/blog/img/loading.gif" alt="wI7FPg.png"></p><p>å·¦ä¾§ç‚¹å‡»<code>SSH and GPG keys</code>ï¼Œæ·»åŠ sshï¼Œæ–°å»ºä¸€ä¸ª<code>New SSH key</code>ï¼Œå°†<code>id_rsa.pub</code>æ–‡ä»¶é‡Œçš„å†…å®¹å¤åˆ¶ä¸Šå»</p><p><img src="https://s1.ax1x.com/2020/09/18/wh810A.png" srcset="/blog/img/loading.gif" alt="wh810A.png"></p><ul><li>Titleå¯ä»¥ç›´æ¥ä¸å¡«ï¼ŒKeyç²˜è´´<code>id_rsa.pub</code>æ–‡ä»¶é‡Œçš„å†…å®¹</li></ul><p><img src="https://s1.ax1x.com/2020/09/18/wh8oA1.png" srcset="/blog/img/loading.gif" alt="wh8oA1.png"></p><h3 id="4ã€ä¿®æ”¹-config-ymlä¸­çš„Deployment"><a href="#4ã€ä¿®æ”¹-config-ymlä¸­çš„Deployment" class="headerlink" title="4ã€ä¿®æ”¹_config.ymlä¸­çš„Deployment"></a>4ã€ä¿®æ”¹_config.ymlä¸­çš„Deployment</h3><p>é…ç½®<code>Deployment</code>ï¼Œåœ¨å…¶æ–‡ä»¶å¤¹ä¸­ï¼Œæ‰¾åˆ°<code>_config.yml</code>æ–‡ä»¶ï¼Œä¿®æ”¹<code>repo</code>å€¼ï¼ˆåœ¨æœ«å°¾ï¼‰ï¼Œ<code>repo</code>å€¼æ˜¯<code>github</code>é¡¹ç›®é‡Œçš„<code>ssh</code></p><p><img src="https://s1.ax1x.com/2020/09/19/wIbQgJ.png" srcset="/blog/img/loading.gif" alt="wIbQgJ.png"></p><h2 id="äºŒã€å®‰è£…hexo-deployer-gitæ’ä»¶"><a href="#äºŒã€å®‰è£…hexo-deployer-gitæ’ä»¶" class="headerlink" title="äºŒã€å®‰è£…hexo-deployer-gitæ’ä»¶"></a>äºŒã€å®‰è£…hexo-deployer-gitæ’ä»¶</h2><ul><li>HexoBlogéƒ¨ç½²åˆ°<code>git</code>æˆ‘ä»¬éœ€è¦å®‰è£…<code>hexo-deployer-git</code>æ’ä»¶ï¼Œåœ¨blogç›®å½•ä¸‹è¿è¡Œä¸€ä¸‹å‘½ä»¤è¿›è¡Œå®‰è£…</li></ul><pre><code class="hljs bash">$ npm install hexo-deployer-git --save</code></pre><h2 id="ä¸‰ã€å†™ä½œ"><a href="#ä¸‰ã€å†™ä½œ" class="headerlink" title="ä¸‰ã€å†™ä½œ"></a>ä¸‰ã€å†™ä½œ</h2><pre><code class="hljs bash"><span class="hljs-comment"># åˆ›å»ºæ–‡ç« ï¼Œé»˜è®¤layoutå¸ƒå±€ä¸ºï¼špost</span>$ hexo new [layout] &lt;title&gt;<span class="hljs-comment"># ä¾‹å¦‚</span>$ hexo new post HelloHexo</code></pre><blockquote><p>å…³äºè¿™å—ï¼Œæœ€å¥½çœ‹å®˜æ–¹æ–‡æ¡£ï¼š<a href="https://hexo.io/zh-cn/docs/writing" target="_blank" rel="noopener">https://hexo.io/zh-cn/docs/writing</a></p></blockquote><p>ä¹‹åä¼šåœ¨<code>source</code>æ–‡ä»¶å¤¹çš„<code>_post</code>æ–‡ä»¶å¤¹ä¸­çœ‹åˆ°ä½ æ–°å»ºçš„æ–‡ä»¶<code>HelloHexo.md</code></p><h2 id="å››ã€ç”Ÿæˆå¹¶éƒ¨ç½²åšå®¢"><a href="#å››ã€ç”Ÿæˆå¹¶éƒ¨ç½²åšå®¢" class="headerlink" title="å››ã€ç”Ÿæˆå¹¶éƒ¨ç½²åšå®¢"></a>å››ã€ç”Ÿæˆå¹¶éƒ¨ç½²åšå®¢</h2><pre><code class="hljs bash">$ hexo d -g</code></pre><p>ç”Ÿæˆä»¥åŠéƒ¨ç½²äº†ï¼Œåœ¨æ‰“å¼€ä½ çš„åšå®¢ä¸»é¡µï¼ˆmelodyjerry.github.ioï¼‰å°±å¯ä»¥çœ‹åˆ°ä½ åˆ›å»ºçš„æ–‡ç« äº†ã€‚</p><h1 id="é«˜é˜¶ç¯‡"><a href="#é«˜é˜¶ç¯‡" class="headerlink" title="é«˜é˜¶ç¯‡"></a>é«˜é˜¶ç¯‡</h1><h2 id="ä¸€ã€ä¸»é¢˜"><a href="#ä¸€ã€ä¸»é¢˜" class="headerlink" title="ä¸€ã€ä¸»é¢˜"></a>ä¸€ã€ä¸»é¢˜</h2><h3 id="1ã€é€‰å–å–œæ¬¢çš„ä¸»é¢˜"><a href="#1ã€é€‰å–å–œæ¬¢çš„ä¸»é¢˜" class="headerlink" title="1ã€é€‰å–å–œæ¬¢çš„ä¸»é¢˜"></a>1ã€é€‰å–å–œæ¬¢çš„ä¸»é¢˜</h3><p>åœ¨Hexoå®˜æ–¹ï¼Œæœ‰è®¸å¤šç°æˆçš„ä¸»é¢˜äº†ã€‚å½“ç„¶ï¼Œä½ æƒ³è‡ªå·±åŸåˆ›è®¾è®¡æˆ–äºŒæ¬¡å¼€å‘ä¹Ÿå¯ä»¥çš„:angel:</p><p>å¤§é‡ä¸»é¢˜ï¼š<a href="https://hexo.io/zh-cn/docs/themes.html" target="_blank" rel="noopener">https://hexo.io/zh-cn/docs/themes.html</a></p><p>æ‰¾åˆ°åˆé€‚çš„å°±æŒ‰è¦æ±‚ä¸‹è½½å³å¯ã€‚</p><p>ä»¥ä¸»é¢˜<code>fluid</code>ä¸ºä¾‹ï¼Œ<code>fluid</code>çš„é…ç½®æ–‡æ¡£åœ¨<a href="https://hexo.fluid-dev.com/docs/guide/#%E5%BF%AB%E9%80%9F%E5%BC%80%E5%A7%8B" target="_blank" rel="noopener">è¿™é‡Œ</a>ã€‚</p><pre><code class="hljs bash"><span class="hljs-comment"># ä¸‹è½½åˆ°themesæ–‡ä»¶å¤¹ä¸‹</span>$ git <span class="hljs-built_in">clone</span> https://github.com/fluid-dev/hexo-theme-fluid fluid</code></pre><h3 id="2ã€-é…ç½®ä¸»é¢˜"><a href="#2ã€-é…ç½®ä¸»é¢˜" class="headerlink" title="2ã€ é…ç½®ä¸»é¢˜"></a>2ã€ é…ç½®ä¸»é¢˜</h3><p>æ‰¾åˆ°<code>_config.yml</code>æ–‡ä»¶ï¼Œä¿®æ”¹<code>theme</code>å€¼ï¼š</p><pre><code class="hljs bash">theme: fluid</code></pre><h3 id="3ã€é‡æ–°ç”Ÿæˆå¹¶é¢„è§ˆ"><a href="#3ã€é‡æ–°ç”Ÿæˆå¹¶é¢„è§ˆ" class="headerlink" title="3ã€é‡æ–°ç”Ÿæˆå¹¶é¢„è§ˆ"></a>3ã€é‡æ–°ç”Ÿæˆå¹¶é¢„è§ˆ</h3><pre><code class="hljs bash">$ hexo clean$ hexo g$ hexo s</code></pre><h2 id="éƒ¨ç½²ä¼˜åŒ–"><a href="#éƒ¨ç½²ä¼˜åŒ–" class="headerlink" title="éƒ¨ç½²ä¼˜åŒ–"></a>éƒ¨ç½²ä¼˜åŒ–</h2><p>æ¯æ¬¡éƒ½è¦æ‰§è¡Œ <code>hexo clean</code> ã€<code>hexo generate</code>ã€ <code>hexo deploy</code>ï¼Œä¸å¦‚å†™ä¸ªæ–°çš„è„šæœ¬ï¼š</p><pre><code class="hljs javascript"><span class="hljs-comment">// package.json</span><span class="hljs-string">"dev"</span>: <span class="hljs-string">"hexo s"</span>,<span class="hljs-string">"build"</span>: <span class="hljs-string">"hexo clean &amp; hexo deploy"</span></code></pre><p>éƒ¨ç½²å‘½ä»¤ï¼š</p><pre><code class="hljs javascript">$ npm run build</code></pre><h1 id="æ³¨æ„äº‹é¡¹"><a href="#æ³¨æ„äº‹é¡¹" class="headerlink" title="æ³¨æ„äº‹é¡¹"></a>æ³¨æ„äº‹é¡¹</h1><h2 id="ç«™ç‚¹æ–‡ä»¶å’Œä¸»é¢˜æ–‡ä»¶çš„åŒºåˆ«"><a href="#ç«™ç‚¹æ–‡ä»¶å’Œä¸»é¢˜æ–‡ä»¶çš„åŒºåˆ«" class="headerlink" title="ç«™ç‚¹æ–‡ä»¶å’Œä¸»é¢˜æ–‡ä»¶çš„åŒºåˆ«"></a>ç«™ç‚¹æ–‡ä»¶å’Œä¸»é¢˜æ–‡ä»¶çš„åŒºåˆ«</h2><p><img src="https://s1.ax1x.com/2020/09/19/wIOAud.png" srcset="/blog/img/loading.gif" alt="wIOAud.png"></p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;å‰è¨€ï¼š ä½¿ç”¨&lt;a href=&quot;https://blog.csdn.net/weixin_43438052&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;CSDN&lt;/a&gt;æˆ–&lt;strong&gt;ç®€ä¹¦&lt;/strong&gt;æ’°å†™åšå®¢ä¼¼ä¹æ˜¯ä¸€ä»¶ç¾äº‹ï¼Œåªä¸è¿‡ä¸ªäººè§‰å¾—å¤ªè¿‡äºä¾èµ–ä»–äººå¹³å°ï¼Œä¸å¦‚å°±è‡ªå·±æ­å»ºä¸€ä¸ªå±äºè‡ªå·±çš„åšå®¢ã€‚&lt;/p&gt;
&lt;p&gt;æœ€ç»ˆï¼Œä¸ªäººé€‰æ‹©äº†&lt;strong&gt;Hexo+GitHubï¼ˆPagesï¼‰&lt;/strong&gt;çš„æ–¹å¼ã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;a href=&quot;https://pages.github.com/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;GitHub Pages&lt;/a&gt; æ˜¯å¼€æºåä½œç¤¾åŒº GitHub çš„ä¸€ä¸ªæœåŠ¡ï¼Œå°†åšå®¢éƒ¨ç½²åˆ°å®ƒä¸Šé¢å†åˆé€‚ä¸è¿‡äº†ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;Q&lt;/th&gt;
&lt;th&gt;W&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;&lt;tr&gt;
&lt;td&gt;ä¸ºä»€ä¹ˆè¦éƒ¨ç½²åˆ° GitHub Pages ä¸Šï¼Ÿ&lt;/td&gt;
&lt;td&gt;é¦–å…ˆå…è´¹ï¼Œå…¶æ¬¡çœå¿ƒï¼Œæœ€åå¯ä»¥å­¦ä¹ ä½¿ç”¨ GitHubã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;GitHub Pages æœ‰å®¹é‡é™åˆ¶å—ï¼Ÿ&lt;/td&gt;
&lt;td&gt;æœ‰ï¼Œç”± &lt;a href=&quot;https://help.github.com/articles/what-is-github-pages/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;What is GitHub Pages?&lt;/a&gt; å¯çŸ¥ï¼šå¤§å°é™åˆ¶ä¸º 1GBï¼Œä¸€ä¸ªæœˆ 100GB æµé‡ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;è¶…å‡ºé™åˆ¶çš„å®¹é‡æ€ä¹ˆåŠï¼Ÿ&lt;/td&gt;
&lt;td&gt;è®²çœŸï¼Œå¦‚æœå›¾ç‰‡éŸ³ä¹è§†é¢‘ç­‰å¤§æ–‡ä»¶éƒ½æ”¾åœ¨&lt;a href=&quot;https://www.qiniu.com/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;ä¸ƒç‰›äº‘ KODO&lt;/a&gt;ã€&lt;a href=&quot;https://www.aliyun.com/product/oss&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;é˜¿é‡Œäº‘ OSS&lt;/a&gt; æˆ–å…¶å®ƒäº‘å­˜å‚¨ä¸Šã€‚&lt;br&gt;å›¾ç‰‡æˆ‘æ›´å¤šæ˜¯å­˜æ”¾åœ¨å›¾åºŠä¸Šï¼Œæ¯”å¦‚&lt;a href=&quot;https://imgchr.com/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;è·¯è¿‡å›¾åºŠ&lt;/a&gt;æˆ–&lt;a href=&quot;https://sm.ms/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;SM.MS&lt;/a&gt;ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;å›½å†…è®¿é—®é€Ÿåº¦è¡Œä¸è¡Œï¼Œæœ‰å¿…è¦åŒæ—¶éƒ¨ç½²åœ¨ &lt;a href=&quot;https://coding.net/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Coding&lt;/a&gt; ä¸Šå—ï¼Ÿ&lt;/td&gt;
&lt;td&gt;ä¸ªäººæ„Ÿè§‰å¯æœ‰å¯æ— å§ï¼Œè‡ªå·±ä¸ç”¨æ¢¯å­æ—¶ï¼Œæ„Ÿè§‰è®¿é—®é€Ÿåº¦å¯ä»¥ï¼Œæ¯•ç«Ÿç«™ç‚¹çš„å¤§æ–‡ä»¶éƒ½æ˜¯æ”¾åœ¨äº†äº‘å­˜å‚¨ä¸Šï¼Œå›¾ç‰‡éƒ½æ˜¯å›½å†…å›¾åºŠï¼ŒåŠ è½½è¾ƒå¿«ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;æˆ‘å¯ä»¥ç”¨è‡ªå·±çš„åŸŸåå—ï¼Ÿ&lt;/td&gt;
&lt;td&gt;å¯ä»¥ï¼Œå¹¶ä¸”åŸç”Ÿæ”¯æŒ httpsã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
    
    </summary>
    
    
      <category term="uncategorized" scheme="https://melodyjerry.github.io/blog/categories/uncategorized/"/>
    
    
      <category term="Hexo" scheme="https://melodyjerry.github.io/blog/tags/Hexo/"/>
    
      <category term="GitHub" scheme="https://melodyjerry.github.io/blog/tags/GitHub/"/>
    
  </entry>
  
  <entry>
    <title>Hexoåšå®¢åŠ å…¥èŠå¤©ç³»ç»ŸDaoVoice</title>
    <link href="https://melodyjerry.github.io/blog/2020/09/18/%E5%8A%A0%E5%85%A5%E8%81%8A%E5%A4%A9%E7%B3%BB%E7%BB%9Fdaovioce/"/>
    <id>https://melodyjerry.github.io/blog/2020/09/18/%E5%8A%A0%E5%85%A5%E8%81%8A%E5%A4%A9%E7%B3%BB%E7%BB%9Fdaovioce/</id>
    <published>2020-09-18T12:23:11.000Z</published>
    <updated>2020-09-19T04:24:28.825Z</updated>
    
    <content type="html"><![CDATA[<h1 id="å…³äº-DaoVoice"><a href="#å…³äº-DaoVoice" class="headerlink" title="å…³äº DaoVoice"></a>å…³äº DaoVoice</h1><p>DaoVoice æ˜¯ä¸€æ¬¾é©å‘½æ€§çš„åº”ç”¨è¿è¥å¹³å°ï¼Œè‡´åŠ›äºå¸®åŠ©ä¼ä¸šå®ç°ä»¥ç”¨æˆ·ä¸ºä¸­å¿ƒçš„ã€Œç²¾ç›Šè¿è¥ã€ä½“ç³»ã€‚</p><p>èåˆã€Œåœ¨çº¿èŠå¤©ã€ã€ã€Œå®¢æœæ”¯æŒã€ã€ã€Œç”¨æˆ·ç”»åƒã€ã€ã€Œæ¶ˆæ¯æ¨é€ã€ã€ã€Œè¡Œä¸ºå¼•å¯¼ã€ç­‰åŠŸèƒ½ä¸ºä¸€ä½“ï¼Œ æŒ‰éœ€è·å–ç”¨æˆ·ä¿¡æ¯å’Œè¡Œä¸ºï¼Œå®ç°åœºæ™¯åŒ–æ¶ˆæ¯æ¨é€ï¼Œè®©é€šçŸ¥æ›´å¯Œæœ‰äººæƒ…å‘³ã€‚</p><p>æ¥å…¥åªéœ€ 5 è¡Œä»£ç ï¼Œå³å¯åˆ›å»ºä¸ç”¨æˆ·å®æ—¶æ²Ÿé€šçš„çª—å£ï¼Œæ— ç¼æ¥å…¥ä¼ä¸šåŸæœ‰äº§å“ä½“ç³»ï¼Œæ‹‰è¿‘ä¼ä¸šä¸ç”¨æˆ·çš„è·ç¦»ã€‚</p><p>ç§‰æ‰¿ã€Œæ•°æ®é©±åŠ¨ï¼Œç²¾ç›Šè¿è¥ã€çš„ç†å¿µï¼Œè®©ç”¨æˆ·å®šä¹‰äº§å“ï¼Œè®©å‚ä¸æ„Ÿé©±åŠ¨äº§å“è¿­ä»£ã€‚</p><p>ç”¨ DaoVoice é©±åŠ¨ç”¨æˆ·è¿è¥ï¼Œå¸®ä½ æœ€ç»ˆå®ç°ç”¨æˆ·è½¬åŒ–ã€‚</p><blockquote><p>â€œDaoVoice å¸®æˆ‘ä»¬æ›´å¥½åœ°è¿è¥ç”¨æˆ·ã€‚å®æ—¶åœ¨çº¿æ²Ÿé€šï¼Œå¯æ›´å¿«è§£å†³ç”¨æˆ·é—®é¢˜ã€‚åå°ç®¡ç†å¯å¸®æˆ‘ä»¬å»ºç«‹ç”¨æˆ·ç”»åƒï¼Œé’ˆå¯¹ä¸åŒçš„ç”¨æˆ·éœ€æ±‚è¿›è¡Œç²¾å‡†è¿è¥ã€‚æ­¤å¤–ï¼ŒDaoVoice å›¢é˜Ÿä¼šå¿«é€Ÿå“åº”æˆ‘ä»¬çš„åé¦ˆï¼Œç»™äºˆé«˜è´¨é‡æœåŠ¡æ”¯æŒã€‚â€    â€”â€”<strong>Travis</strong>åˆ›å§‹äºº &amp; CEO</p></blockquote><a id="more"></a><h1 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h1><p>layout\_third-party\daovoice.ejsï¼š</p><pre><code class="hljs js">&lt;% <span class="hljs-keyword">if</span>(theme.daovoice.enable &amp;&amp; theme.daovoice.appid){ %&gt;  &lt;script&gt;(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">i, s, o, g, r, a, m</span>) </span>{      i[<span class="hljs-string">'DaoVoiceObject'</span>] = r;      i[r] = i[r] ||        <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{          (i[r].q = i[r].q || []).push(<span class="hljs-built_in">arguments</span>);        };      i[r].l = <span class="hljs-number">1</span> * <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>();      a = s.createElement(o);      m = s.getElementsByTagName(o)[<span class="hljs-number">0</span>];      a.async = <span class="hljs-number">1</span>;      a.src = g;      a.charset = <span class="hljs-string">'utf-8'</span>;      m.parentNode.insertBefore(a, m);    })(<span class="hljs-built_in">window</span>, <span class="hljs-built_in">document</span>, <span class="hljs-string">'script'</span>, (<span class="hljs-string">'https:'</span> === <span class="hljs-built_in">document</span>.location.protocol ? <span class="hljs-string">'https:'</span> : <span class="hljs-string">'http:'</span>) + <span class="hljs-string">"//widget.daovoice.io/widget/&lt;%= theme.daovoice.appid %&gt;.js"</span>, <span class="hljs-string">'daovoice'</span>);    daovoice(<span class="hljs-string">'init'</span>, {      app_id: <span class="hljs-string">"&lt;%= theme.daovoice.appid %&gt;"</span>,    });    daovoice(<span class="hljs-string">'update'</span>);  &lt;<span class="hljs-regexp">/script&gt;</span><span class="hljs-regexp">&lt;% } %&gt;</span></code></pre><p>layout\index.ejsï¼š</p><pre><code class="hljs js">&lt;!--DaoVoiceæœåŠ¡http:<span class="hljs-comment">//blog.daovoice.io/--&gt;</span>&lt;%- partial(<span class="hljs-string">'_third-party/daovoice'</span>) %&gt;</code></pre><p>_config.ymlï¼š</p><pre><code class="hljs yaml"><span class="hljs-attr">daovoice:</span>  <span class="hljs-comment"># åœ¨çº¿å®¢æœ Daovoice å‚è€ƒï¼šhttp://dashboard.daovoice.io</span>  <span class="hljs-attr">enable:</span> <span class="hljs-literal">true</span> <span class="hljs-comment"># æ˜¯å¦å¼€å¯åœ¨çº¿å®¢æœèŠå¤©</span>  <span class="hljs-attr">appid:</span> <span class="hljs-string">'exxxxxxx'</span>  <span class="hljs-comment"># åº”ç”¨IDè®¾ç½®</span></code></pre><h1 id="æ•ˆæœ"><a href="#æ•ˆæœ" class="headerlink" title="æ•ˆæœ"></a>æ•ˆæœ</h1><p><img src="https://s1.ax1x.com/2020/09/18/w46j3D.gif" srcset="/blog/img/loading.gif" alt="w46j3D.gif"></p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;å…³äº-DaoVoice&quot;&gt;&lt;a href=&quot;#å…³äº-DaoVoice&quot; class=&quot;headerlink&quot; title=&quot;å…³äº DaoVoice&quot;&gt;&lt;/a&gt;å…³äº DaoVoice&lt;/h1&gt;&lt;p&gt;DaoVoice æ˜¯ä¸€æ¬¾é©å‘½æ€§çš„åº”ç”¨è¿è¥å¹³å°ï¼Œè‡´åŠ›äºå¸®åŠ©ä¼ä¸šå®ç°ä»¥ç”¨æˆ·ä¸ºä¸­å¿ƒçš„ã€Œç²¾ç›Šè¿è¥ã€ä½“ç³»ã€‚&lt;/p&gt;
&lt;p&gt;èåˆã€Œåœ¨çº¿èŠå¤©ã€ã€ã€Œå®¢æœæ”¯æŒã€ã€ã€Œç”¨æˆ·ç”»åƒã€ã€ã€Œæ¶ˆæ¯æ¨é€ã€ã€ã€Œè¡Œä¸ºå¼•å¯¼ã€ç­‰åŠŸèƒ½ä¸ºä¸€ä½“ï¼Œ æŒ‰éœ€è·å–ç”¨æˆ·ä¿¡æ¯å’Œè¡Œä¸ºï¼Œå®ç°åœºæ™¯åŒ–æ¶ˆæ¯æ¨é€ï¼Œè®©é€šçŸ¥æ›´å¯Œæœ‰äººæƒ…å‘³ã€‚&lt;/p&gt;
&lt;p&gt;æ¥å…¥åªéœ€ 5 è¡Œä»£ç ï¼Œå³å¯åˆ›å»ºä¸ç”¨æˆ·å®æ—¶æ²Ÿé€šçš„çª—å£ï¼Œæ— ç¼æ¥å…¥ä¼ä¸šåŸæœ‰äº§å“ä½“ç³»ï¼Œæ‹‰è¿‘ä¼ä¸šä¸ç”¨æˆ·çš„è·ç¦»ã€‚&lt;/p&gt;
&lt;p&gt;ç§‰æ‰¿ã€Œæ•°æ®é©±åŠ¨ï¼Œç²¾ç›Šè¿è¥ã€çš„ç†å¿µï¼Œè®©ç”¨æˆ·å®šä¹‰äº§å“ï¼Œè®©å‚ä¸æ„Ÿé©±åŠ¨äº§å“è¿­ä»£ã€‚&lt;/p&gt;
&lt;p&gt;ç”¨ DaoVoice é©±åŠ¨ç”¨æˆ·è¿è¥ï¼Œå¸®ä½ æœ€ç»ˆå®ç°ç”¨æˆ·è½¬åŒ–ã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;â€œDaoVoice å¸®æˆ‘ä»¬æ›´å¥½åœ°è¿è¥ç”¨æˆ·ã€‚å®æ—¶åœ¨çº¿æ²Ÿé€šï¼Œå¯æ›´å¿«è§£å†³ç”¨æˆ·é—®é¢˜ã€‚åå°ç®¡ç†å¯å¸®æˆ‘ä»¬å»ºç«‹ç”¨æˆ·ç”»åƒï¼Œé’ˆå¯¹ä¸åŒçš„ç”¨æˆ·éœ€æ±‚è¿›è¡Œç²¾å‡†è¿è¥ã€‚æ­¤å¤–ï¼ŒDaoVoice å›¢é˜Ÿä¼šå¿«é€Ÿå“åº”æˆ‘ä»¬çš„åé¦ˆï¼Œç»™äºˆé«˜è´¨é‡æœåŠ¡æ”¯æŒã€‚â€    â€”â€”&lt;strong&gt;Travis&lt;/strong&gt;åˆ›å§‹äºº &amp;amp; CEO&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
    
      <category term="uncategorized" scheme="https://melodyjerry.github.io/blog/categories/uncategorized/"/>
    
    
      <category term="åšå®¢" scheme="https://melodyjerry.github.io/blog/tags/%E5%8D%9A%E5%AE%A2/"/>
    
  </entry>
  
  <entry>
    <title>AspectJçš„åˆ‡å…¥ç‚¹è¡¨è¾¾å¼---executionè¡¨è¾¾å¼</title>
    <link href="https://melodyjerry.github.io/blog/2020/09/18/AspectJ%E7%9A%84%E5%88%87%E5%85%A5%E7%82%B9%E8%A1%A8%E8%BE%BE%E5%BC%8F---execution%E8%A1%A8%E8%BE%BE%E5%BC%8F/"/>
    <id>https://melodyjerry.github.io/blog/2020/09/18/AspectJ%E7%9A%84%E5%88%87%E5%85%A5%E7%82%B9%E8%A1%A8%E8%BE%BE%E5%BC%8F---execution%E8%A1%A8%E8%BE%BE%E5%BC%8F/</id>
    <published>2020-09-18T09:24:41.000Z</published>
    <updated>2020-09-24T08:55:08.014Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>execution(&lt;ä¿®é¥°ç¬¦æ¨¡å¼&gt;?&lt;è¿”å›ç±»å‹æ¨¡å¼&gt;&lt;æ–¹æ³•åæ¨¡å¼&gt;(&lt;å‚æ•°æ¨¡å¼&gt;)&lt;å¼‚å¸¸æ¨¡å¼&gt;?) </p></blockquote> <a id="more"></a><p>é™¤äº†è¿”å›ç±»å‹æ¨¡å¼ã€æ–¹æ³•åæ¨¡å¼å’Œå‚æ•°æ¨¡å¼å¤–ï¼Œå…¶å®ƒé¡¹éƒ½æ˜¯å¯é€‰çš„ã€‚</p><p>ä¸€ã€é€šè¿‡æ–¹æ³•ç­¾åå®šä¹‰åˆ‡ç‚¹</p><blockquote><p> execution(public * *(..))</p></blockquote><p>ã€€ã€€åŒ¹é…æ‰€æœ‰ç›®æ ‡ç±»çš„publicæ–¹æ³•ï¼Œä½†ä¸åŒ¹é…SmartSellerå’Œprotected voidshowGoods()æ–¹æ³•ã€‚ç¬¬ä¸€ä¸ª<em>ä»£è¡¨è¿”å›ç±»å‹ï¼Œç¬¬äºŒä¸ª</em>ä»£è¡¨æ–¹æ³•åï¼Œè€Œ..ä»£è¡¨ä»»æ„å…¥å‚çš„æ–¹æ³•ï¼›</p><blockquote><p> execution(* *To(..))</p></blockquote><p>ã€€ã€€åŒ¹é…ç›®æ ‡ç±»æ‰€æœ‰ä»¥Toä¸ºåç¼€çš„æ–¹æ³•ã€‚å®ƒåŒ¹é…NaiveWaiterå’ŒNaughtyWaiterçš„greetTo()å’ŒserveTo()æ–¹æ³•ã€‚ç¬¬ä¸€ä¸ª<em>ä»£è¡¨è¿”å›ç±»å‹ï¼Œè€Œ</em>Toä»£è¡¨ä»»æ„ä»¥Toä¸ºåç¼€çš„æ–¹æ³•ï¼›</p><p>äºŒã€é€šè¿‡ç±»å®šä¹‰åˆ‡ç‚¹</p><blockquote><p> execution(<em>com.baobaotao.Waiter.</em>(..))</p></blockquote><p>ã€€ã€€åŒ¹é…Waiteræ¥å£çš„æ‰€æœ‰æ–¹æ³•ï¼Œå®ƒåŒ¹é…NaiveWaiterå’ŒNaughtyWaiterç±»çš„greetTo()å’ŒserveTo()æ–¹æ³•ã€‚ç¬¬ä¸€ä¸ª<em>ä»£è¡¨è¿”å›ä»»æ„ç±»å‹ï¼Œcom.baobaotao.Waiter.</em>ä»£è¡¨Waiteræ¥å£ä¸­çš„æ‰€æœ‰æ–¹æ³•ï¼›</p><blockquote><p> execution(<em>com.baobaotao.Waiter+.</em>(..))</p></blockquote><p>ã€€ã€€åŒ¹é…Waiteræ¥å£åŠå…¶æ‰€æœ‰å®ç°ç±»çš„æ–¹æ³•ï¼Œå®ƒä¸ä½†åŒ¹é…NaiveWaiterå’ŒNaughtyWaiterç±»çš„greetTo()å’ŒserveTo()è¿™ä¸¤ä¸ªWaiteræ¥å£å®šä¹‰çš„æ–¹æ³•ï¼ŒåŒæ—¶è¿˜åŒ¹é…NaiveWaiter#smile()å’ŒNaughtyWaiter#joke()è¿™ä¸¤ä¸ªä¸åœ¨Waiteræ¥å£ä¸­å®šä¹‰çš„æ–¹æ³•ã€‚</p><p>ä¸‰ã€é€šè¿‡ç±»åŒ…å®šä¹‰åˆ‡ç‚¹</p><p>ã€€ã€€åœ¨ç±»åæ¨¡å¼ä¸²ä¸­ï¼Œâ€.*â€è¡¨ç¤ºåŒ…ä¸‹çš„æ‰€æœ‰ç±»ï¼Œè€Œâ€..*â€è¡¨ç¤ºåŒ…ã€å­å­™åŒ…ä¸‹çš„æ‰€æœ‰ç±»ã€‚</p><blockquote><p> execution(* com.baobaotao.*(..))l</p></blockquote><p>ã€€ã€€åŒ¹é…com.baobaotaoåŒ…ä¸‹æ‰€æœ‰ç±»çš„æ‰€æœ‰æ–¹æ³•ï¼›</p><blockquote><p> execution(* com.baobaotao..*(..))l</p></blockquote><p>ã€€ã€€åŒ¹é…com.baobaotaoåŒ…ã€å­å­™åŒ…ä¸‹æ‰€æœ‰ç±»çš„æ‰€æœ‰æ–¹æ³•ï¼Œå¦‚com.baobaotao.daoï¼Œcom.baobaotao.servierä»¥åŠcom.baobaotao.dao.useråŒ…ä¸‹çš„æ‰€æœ‰ç±»çš„æ‰€æœ‰æ–¹æ³•éƒ½åŒ¹é…ã€‚â€..â€å‡ºç°åœ¨ç±»åä¸­æ—¶ï¼Œåé¢å¿…é¡»è·Ÿâ€*â€ï¼Œè¡¨ç¤ºåŒ…ã€å­å­™åŒ…ä¸‹çš„æ‰€æœ‰ç±»ï¼›  </p><blockquote><p> execution(* com..<em>.</em>Dao.find*(..))</p></blockquote><p>ã€€ã€€åŒ¹é…åŒ…åå‰ç¼€ä¸ºcomçš„ä»»ä½•åŒ…ä¸‹ç±»ååç¼€ä¸ºDaoçš„æ–¹æ³•ï¼Œæ–¹æ³•åå¿…é¡»ä»¥findä¸ºå‰ç¼€ã€‚å¦‚com.baobaotao.UserDao#findByUserId()ã€com.baobaotao.dao.ForumDao#findById()çš„æ–¹æ³•éƒ½åŒ¹é…åˆ‡ç‚¹ã€‚</p><p>å››ã€é€šè¿‡æ–¹æ³•å…¥å‚å®šä¹‰åˆ‡ç‚¹</p><p>ã€€ã€€åˆ‡ç‚¹è¡¨è¾¾å¼ä¸­æ–¹æ³•å…¥å‚éƒ¨åˆ†æ¯”è¾ƒå¤æ‚ï¼Œå¯ä»¥ä½¿ç”¨â€*â€å’Œâ€..â€é€šé…ç¬¦ï¼Œå…¶ä¸­â€*â€è¡¨ç¤ºä»»æ„ç±»å‹çš„å‚æ•°ï¼Œè€Œâ€..â€è¡¨ç¤ºä»»æ„ç±»å‹å‚æ•°ä¸”å‚æ•°ä¸ªæ•°ä¸é™ã€‚ </p><blockquote><p> execution(* joke(String,int)))</p></blockquote><p>ã€€ã€€åŒ¹é…joke(String,int)æ–¹æ³•ï¼Œä¸”joke()æ–¹æ³•çš„ç¬¬ä¸€ä¸ªå…¥å‚æ˜¯Stringï¼Œç¬¬äºŒä¸ªå…¥å‚æ˜¯intã€‚å®ƒåŒ¹é…NaughtyWaiter#joke(String,int)æ–¹æ³•ã€‚å¦‚æœæ–¹æ³•ä¸­çš„å…¥å‚ç±»å‹æ˜¯<a href="http://lib.csdn.net/base/java" target="_blank" rel="noopener">Java</a>.langåŒ…ä¸‹çš„ç±»ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ç±»åï¼Œå¦åˆ™å¿…é¡»ä½¿ç”¨å…¨é™å®šç±»åï¼Œå¦‚joke(java.util.List,int)ï¼›</p><blockquote><p> execution(* joke(String,*)))</p></blockquote><p>ã€€ã€€åŒ¹é…ç›®æ ‡ç±»ä¸­çš„joke()æ–¹æ³•ï¼Œè¯¥æ–¹æ³•ç¬¬ä¸€ä¸ªå…¥å‚ä¸ºStringï¼Œç¬¬äºŒä¸ªå…¥å‚å¯ä»¥æ˜¯ä»»æ„ç±»å‹ï¼Œå¦‚joke(Strings1,String s2)å’Œjoke(String s1,double d2)éƒ½åŒ¹é…ï¼Œä½†joke(String s1,doubled2,String s3)åˆ™ä¸åŒ¹é…ï¼›</p><blockquote><p> execution(* joke(String,..)))</p></blockquote><p>ã€€ã€€åŒ¹é…ç›®æ ‡ç±»ä¸­çš„joke()æ–¹æ³•ï¼Œè¯¥æ–¹æ³•ç¬¬ ä¸€ä¸ªå…¥å‚ä¸ºStringï¼Œåé¢å¯ä»¥æœ‰ä»»æ„ä¸ªå…¥å‚ä¸”å…¥å‚ç±»å‹ä¸é™ï¼Œå¦‚joke(Strings1)ã€joke(String s1,String s2)å’Œjoke(String s1,double d2,Strings3)éƒ½åŒ¹é…ã€‚</p><blockquote><p> execution(* joke(Object+)))</p></blockquote><p>ã€€ã€€åŒ¹é…ç›®æ ‡ç±»ä¸­çš„joke()æ–¹æ³•ï¼Œæ–¹æ³•æ‹¥æœ‰ä¸€ä¸ªå…¥å‚ï¼Œä¸”å…¥å‚æ˜¯Objectç±»å‹æˆ–è¯¥ç±»çš„å­ç±»ã€‚å®ƒåŒ¹é…joke(Strings1)å’Œjoke(Client c)ã€‚å¦‚æœæˆ‘ä»¬å®šä¹‰çš„åˆ‡ç‚¹æ˜¯execution(*joke(Object))ï¼Œåˆ™åªåŒ¹é…joke(Object object)è€Œä¸åŒ¹é…joke(Stringcc)æˆ–joke(Client c)ã€‚</p><p>äº”ã€args()å’Œ@args()</p><p>ã€€ã€€args()å‡½æ•°çš„å…¥å‚æ˜¯ç±»åï¼Œ@args()å‡½æ•°çš„å…¥å‚å¿…é¡»æ˜¯æ³¨è§£ç±»çš„ç±»åã€‚è™½ç„¶args()å…è®¸åœ¨ç±»ååä½¿ç”¨+é€šé…ç¬¦åç¼€ï¼Œä½†è¯¥é€šé…ç¬¦åœ¨æ­¤å¤„æ²¡æœ‰æ„ä¹‰ï¼šæ·»åŠ å’Œä¸æ·»åŠ æ•ˆæœéƒ½ä¸€æ ·ã€‚</p><p>1ã€args()</p><p>ã€€ã€€è¯¥å‡½æ•°æ¥å—ä¸€ä¸ªç±»åï¼Œè¡¨ç¤ºç›®æ ‡ç±»æ–¹æ³•å…¥å‚å¯¹è±¡æŒ‰ç±»å‹åŒ¹é…äºæŒ‡å®šç±»æ—¶ï¼Œåˆ‡ç‚¹åŒ¹é…ï¼Œå¦‚ä¸‹é¢çš„ä¾‹å­ï¼š</p><blockquote><p>args(com.baobaotao.Waiter)</p></blockquote><p>ã€€ã€€è¡¨ç¤ºè¿è¡Œæ—¶å…¥å‚æ˜¯Waiterç±»å‹çš„æ–¹æ³•ï¼Œå®ƒå’Œexecution(**(com.baobaotao.Waiter))åŒºåˆ«åœ¨äºåè€…æ˜¯é’ˆå¯¹ç±»æ–¹æ³•çš„ç­¾åè€Œè¨€çš„ï¼Œè€Œå‰è€…åˆ™é’ˆå¯¹è¿è¡Œæ—¶çš„å…¥å‚ç±»å‹è€Œè¨€ã€‚å¦‚args(com.baobaotao.Waiter)æ—¢åŒ¹é…äºaddWaiter(Waiterwaiter)ï¼Œä¹ŸåŒ¹é…äºaddNaiveWaiter(NaiveWaiter naiveWaiter)ï¼Œè€Œexecution(**(com.baobaotao.Waiter))åªåŒ¹é…addWaiter(Waiterwaiter)æ–¹æ³•ï¼›å®é™…ä¸Šï¼Œargs(com.baobaotao.Waiter)ç­‰ä»·äºexecution(**(com.baobaotao.Waiter+))ï¼Œå½“ç„¶ä¹Ÿç­‰ä»·äºargs(com.baobaotao.Waiter+)ã€‚</p><p>2ã€@args()</p><p>ã€€ã€€è¯¥å‡½æ•°æ¥å—ä¸€ä¸ªæ³¨è§£ç±»çš„ç±»åï¼Œå½“æ–¹æ³•çš„è¿è¡Œæ—¶å…¥å‚å¯¹è±¡æ ‡æ³¨å‘æŒ‡å®šçš„æ³¨è§£æ—¶ï¼Œæ–¹æ³•åŒ¹é…åˆ‡ç‚¹ã€‚</p><h2 id="æ³¨æ„äº‹é¡¹ï¼š"><a href="#æ³¨æ„äº‹é¡¹ï¼š" class="headerlink" title="æ³¨æ„äº‹é¡¹ï¼š"></a>æ³¨æ„äº‹é¡¹ï¼š</h2><p>é€šè¿‡ç±»åŒ…å®šä¹‰åˆ‡ç‚¹</p><p>åœ¨ç±»åæ¨¡å¼ä¸²ä¸­ï¼Œâ€œ.*â€è¡¨ç¤ºåŒ…ä¸‹çš„æ‰€æœ‰ç±»ï¼Œè€Œâ€œ..*â€è¡¨ç¤ºåŒ…ã€å­å­™åŒ…ä¸‹çš„æ‰€æœ‰ç±»ã€‚</p><p>execution(* com.baobaotao.*(..))</p><p>åŒ¹é…com.baobaotaoåŒ…ä¸‹æ‰€æœ‰ç±»çš„æ‰€æœ‰æ–¹æ³•ï¼›</p><p>execution(* com.baobaotao..*(..))</p><p>åŒ¹ é…com.baobaotaoåŒ…ã€å­å­™åŒ…ä¸‹æ‰€æœ‰ç±»çš„æ‰€æœ‰æ–¹æ³•ï¼Œå¦‚com.baobaotao.daoï¼Œcom.baobaotao.servierä»¥åŠ com.baobaotao.dao.useråŒ…ä¸‹çš„æ‰€æœ‰ç±»çš„æ‰€æœ‰æ–¹æ³•éƒ½åŒ¹é…ã€‚â€œ..â€å‡ºç°åœ¨ç±»åä¸­æ—¶ï¼Œåé¢å¿…é¡»è·Ÿâ€œ*â€ï¼Œè¡¨ç¤ºåŒ…ã€å­å­™åŒ…ä¸‹çš„æ‰€æœ‰ç±»</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;execution(&amp;lt;ä¿®é¥°ç¬¦æ¨¡å¼&amp;gt;?&amp;lt;è¿”å›ç±»å‹æ¨¡å¼&amp;gt;&amp;lt;æ–¹æ³•åæ¨¡å¼&amp;gt;(&amp;lt;å‚æ•°æ¨¡å¼&amp;gt;)&amp;lt;å¼‚å¸¸æ¨¡å¼&amp;gt;?) &lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
    
      <category term="uncategorized" scheme="https://melodyjerry.github.io/blog/categories/uncategorized/"/>
    
    
      <category term="ç¬”è®°" scheme="https://melodyjerry.github.io/blog/tags/%E7%AC%94%E8%AE%B0/"/>
    
      <category term="Java" scheme="https://melodyjerry.github.io/blog/tags/Java/"/>
    
      <category term="SSM" scheme="https://melodyjerry.github.io/blog/tags/SSM/"/>
    
  </entry>
  
  <entry>
    <title>[è½¬]Javaé¢å‘å¯¹è±¡çš„ä¸ƒå¤§åŸåˆ™</title>
    <link href="https://melodyjerry.github.io/blog/2020/09/18/[%E8%BD%AC]Java%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%9A%84%E4%B8%83%E5%A4%A7%E5%8E%9F%E5%88%99/"/>
    <id>https://melodyjerry.github.io/blog/2020/09/18/[%E8%BD%AC]Java%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%9A%84%E4%B8%83%E5%A4%A7%E5%8E%9F%E5%88%99/</id>
    <published>2020-09-18T01:10:00.742Z</published>
    <updated>2020-09-24T08:55:08.031Z</updated>
    
    <content type="html"><![CDATA[<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>å…¶å®æ²¡æœ‰è®¾è®¡æ¨¡å¼æˆ‘ä»¬ä¹Ÿèƒ½å®Œæˆå¼€å‘å·¥ä½œã€‚ä½†æ˜¯ä¸ºä»€ä¹ˆéœ€è¦è®¾è®¡æ¨¡å¼å‘¢ï¼Ÿè®©ä½ çœ‹èµ·æ¥å¾ˆç‰›ï¼Œæ²¡é”™è¿™ä¸ªç®—ä¸€ä¸ªã€‚è®©ä½ çš„ä»£ç å±‚æ¬¡æ„Ÿåˆ†æ˜ï¼Œå¯è¯»æ€§å¼ºè€Œä¸”å®¹æ˜“ç»´æŠ¤ã€‚è®©ä½ åƒæˆ‘ä¸€æ ·æœ‰æ›´å¤šçš„æ‘¸é±¼åˆ’æ°´æ—¶é—´ã€‚<br>å¯èƒ½æœ‰äººè¯´æˆ‘ä¸€ä¸ªç±»æˆ–è€…æ–¹æ³•å°±å¹²å®Œçš„ä¸œè¥¿ï¼Œä½ æäº†ä¸ƒå…«ä¸ªã€‚å½“ç„¶ä½¿ç”¨è®¾è®¡æ¨¡å¼ä¹Ÿæ˜¯è¦æ–Ÿé…Œçš„ã€‚ä¸€äº›ç®€å•ç¨³å®šçš„ä¸šåŠ¡ä¹Ÿä¸æ¨èä½¿ç”¨è®¾è®¡æ¨¡å¼ã€‚è®¾è®¡æ¨¡å¼å¤šç”¨äºå¤æ‚å¤šå˜çš„ä¸šåŠ¡æˆ–è€…è¦æ±‚é€‚é…æ€§ã€æ‰©å±•æ€§æ›´å¼ºçš„åœºæ™¯ä¸­ã€‚ä¸è¦ä¸ºäº†è®¾è®¡æ¨¡å¼è€Œè®¾è®¡æ¨¡å¼ã€‚</p><p>æ¥ä¸‹æ¥æˆ‘ä»¬ç»“åˆå®é™…å¼€æ¢è®¨ä¸€ä¸‹è®¾è®¡æ¨¡å¼çš„ä¸€äº›åŸåˆ™ã€‚</p><h1 id="1ã€å¼€é—­åŸåˆ™"><a href="#1ã€å¼€é—­åŸåˆ™" class="headerlink" title="1ã€å¼€é—­åŸåˆ™"></a>1ã€å¼€é—­åŸåˆ™</h1><pre><code class="hljs angelscript"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-symbol">Seller</span> {    <span class="hljs-keyword">public</span> BigDecimal sellCar(Car car) {        <span class="hljs-keyword">return</span> car.getPrice();    }}</code></pre><p>ä¸Šé¢æ¨¡æ‹Ÿ4Såº—ä¸€ä¸ªé”€å”®åœ¨å–è½¦ã€‚çªç„¶è€æ¿æäº†ä¸€ä¸ªä¿ƒé”€ï¼šåœ¨åŒåä¸€è¦å¼€å±•æ‰“æŠ˜æ´»åŠ¨ã€‚åœ¨sellCaræ–¹æ³•å†…å¢åŠ ä¸€ä¸ªè®¡ç®—å¯è¡Œå—ï¼Ÿè¿™åŠ¿å¿…å½±å“æ•´ä¸ªä¸šåŠ¡ï¼Œå¯¼è‡´æ‰€æœ‰è½¦éƒ½æ‰“æŠ˜ã€‚ä¸è¡Œä¸è¡Œï¼é‚£ä¹ˆåœ¨Caré‡Œé¢æ“ä½œï¼Ÿç„¶åä½ æ”¹å•Šæ”¹ï¼ç»“æœå„ç§é€»è¾‘æµç¨‹åˆ¤æ–­ã€‚æ‰å®ç°äº†ä¸šåŠ¡è¦æ±‚ã€‚å¦‚æœåç»­æ‰“æŠ˜æ´»åŠ¨ç»“æŸäº†æˆ–è€…å‡çº§äº†ï¼Œä½ è¿˜è¦å†è¿›è¡Œå„ç§æ”¹åŠ¨ã€‚ä½ å‘ç°ä¸€ä¸ªæ‰“æŠ˜è®©ä½ çš„ä»£ç é¢ç›®å…¨éã€è‡ƒè‚¿ä¸å ªã€‚ä¸Šé¢è¯´äº†å¯¹äºå¤æ‚è€Œå¤šå˜çš„ä¸šåŠ¡ä½¿ç”¨è®¾è®¡æ¨¡å¼å°±å¯ä»¥è§£å†³ã€‚<br>é‚£ä¹ˆè®¾è®¡æ¨¡å¼æœ€é‡è¦çš„ä¸€ä¸ªåŸåˆ™å°±æ˜¯å¼€é—­åŸåˆ™ã€‚ä¹Ÿå°±æ˜¯è¯´ä¸€ä¸ªè½¯ä»¶æ¨¡å‹å®ä½“å¦‚ç±»ã€æ¨¡å—å’Œå‡½æ•°åº”è¯¥å¯¹æ‰©å±•å¼€æ”¾ï¼Œå¯¹ä¿®æ”¹å…³é—­ã€‚ä¹Ÿå°±æ˜¯éœ€è¦æˆ‘ä»¬å°†ä¸šåŠ¡è¡Œä¸ºæŠ½è±¡å‡ºæ¥ï¼Œä½¿ç”¨æŠ½è±¡æ¥æ„å»ºã€‚å…·ä½“çš„ä¸šåŠ¡é€šè¿‡æŠ½è±¡çš„å®ç°æ¥è§£å†³ã€‚é‚£ä¹ˆæˆ‘ä»¬å°±æä¸€ä¸ªDiscountCaræ¥extends Car.è¿™æ ·sellCaræ˜¯ä»€ä¹ˆå…·ä½“çš„å®ç°å°±æ‰§è¡Œä»€ä¹ˆå…·ä½“çš„é€»è¾‘ã€‚ä¸ä¼šå½±å“ä»¥å‰çš„é€»è¾‘ï¼Œè€Œä¸”ä¸ä¼šå› ä¸ºæ”¹åŠ¨åŸæ¥çš„ä»£ç å½±å“å…¶ä»–é€»è¾‘ã€‚ä¿è¯æ¥å£å¯é æ€§å’Œç¨³å®šæ€§ã€‚å¦‚ä¸‹ï¼š</p><pre><code class="hljs scala">public <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">DiscountCar</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Car</span></span>{          <span class="hljs-keyword">private</span> <span class="hljs-type">BigDecimal</span> price;   <span class="hljs-keyword">private</span> <span class="hljs-type">BigDecimal</span> discount;   <span class="hljs-meta">@Override</span>   public <span class="hljs-type">BigDecimal</span> getPrice() {       <span class="hljs-keyword">return</span> price.multiply(discount);   }}</code></pre><h1 id="2ã€ä¾èµ–å€’ç½®åŸåˆ™"><a href="#2ã€ä¾èµ–å€’ç½®åŸåˆ™" class="headerlink" title="2ã€ä¾èµ–å€’ç½®åŸåˆ™"></a>2ã€ä¾èµ–å€’ç½®åŸåˆ™</h1><p>è¿˜æ‹¿ä¸Šé¢çš„ä¾‹å­æ¥è¯´ã€‚ç»è¿‡ä¸€ç³»åˆ—çš„æ‰“æŠ˜æ´»åŠ¨4Såº—çš„ç”Ÿæ„è’¸è’¸æ—¥ä¸Šã€‚è€æ¿çªç„¶æƒ³æ‰©å±•ä¸€ä¸‹å‘¨è¾¹ï¼ŒåŒæ—¶å‹æ¦¨ä¸€ä¸‹é”€å”®ã€‚è®©ä»–ä»¬å–è½¦çš„åŒæ—¶å–ç‚¹ç»ç’ƒæ°´ã€é˜²å†»æ¶²ä¹‹ç±»çš„ã€‚è¿™ä¸ªéœ€æ±‚å½“ç„¶åˆæŠ›ç»™äº†è‹¦é€¼çš„ç¨‹åºå‘˜ã€‚sellCarå¤ªå…·ä½“äº†ä¸èƒ½æ»¡è¶³éœ€è¦äº†ã€‚å¾ˆå¤šæƒ…å†µä¸‹ä½ ä¼šå¢åŠ ä¸€ä¸ªå–ç»ç’ƒæ°´ã€å–é˜²å†»æ¶²çš„æ–¹æ³•ã€‚å¦‚æœä»¥åå¢åŠ äº†å–å¤§ç±³ï¼Œç”šè‡³ä¹°èµ·äº†é¸¡è›‹é¥¼å‘¢ï¼Ÿæ€»ä¸èƒ½ä¸€ç›´å¢åŠ æ–¹æ³•å§ã€‚æˆ‘ä»¬éœ€è¦è€ƒè™‘è¿™ç§é—®é¢˜ã€‚æˆ‘ä»¬å¯ä»¥æŠ½è±¡æ‰€æœ‰å–ä¸œè¥¿çš„åœºæ™¯ã€‚ç„¶åæˆ‘ä»¬æŠŠå–çš„ç‰©å“æŠ½è±¡æˆäº†ä¸€ä¸ªæŠ½è±¡åŒ–çš„æ¦‚å¿µï¼ˆjavaå¯¹åº”çš„æ˜¯æ¥å£,æŠŠå–çš„è¡Œä¸ºæŠ½è±¡æˆäº†sellæ–¹æ³•ï¼š</p><pre><code class="hljs cs"><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title">Any</span> {<span class="hljs-function">String <span class="hljs-title">getName</span>(<span class="hljs-params"></span>)</span>;<span class="hljs-function">BigDecimal <span class="hljs-title">getPrice</span>(<span class="hljs-params"></span>)</span>;}<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Seller</span> {<span class="hljs-function"><span class="hljs-keyword">public</span> BigDecimal <span class="hljs-title">sell</span>(<span class="hljs-params">Any any</span>)</span> {<span class="hljs-keyword">return</span> any.getPrice();    }}</code></pre><p>è¿™æ ·éšä¾¿è€æ¿ä»¥åå–ä»€ä¹ˆä½ éƒ½å¯ä»¥é€šè¿‡è¯¥æ–¹æ³•è¿›è¡Œå¤„ç†äº†ï¼Œåªéœ€è¦å…³æ³¨äºAnyçš„å®ç°ã€‚</p><h1 id="3ã€èŒè´£å•ä¸€åŸåˆ™"><a href="#3ã€èŒè´£å•ä¸€åŸåˆ™" class="headerlink" title="3ã€èŒè´£å•ä¸€åŸåˆ™"></a>3ã€èŒè´£å•ä¸€åŸåˆ™</h1><p>4Såº—é”€å”®å–äº†ä¸€æ®µä¸œè¥¿åï¼Œå‘ç°å¯¹å®¢æˆ·çš„å¸å¼•åŠ›åº¦ä¸å¤§ã€‚çªç„¶è„‘å­æ¯”è¾ƒçµæ´»çš„è€æ¿åˆæƒ³èµ·äº†ç”µå½±ä¸­çš„ä¸€å¥å°è¯ï¼šå°‘æ—åŠŸå¤«åŠ å”±æ­Œè·³èˆæœ‰æ²¡æœ‰æå¤´ï¼Ÿå¯¹å•Šä½ ä»¬é”€å”®èƒ½ä¸èƒ½ææä»€ä¹ˆå”±ã€è·³ã€Rapï¼Œå½“ç„¶æ‰“ç¯®çƒå°±ä¸è¦äº†åˆ«ç ¸åäº†è½¦ç»ç’ƒã€‚ä½†æ˜¯äººä¸äººæ˜¯ä¸ä¸€æ ·çš„ï¼Œæœ‰çš„äººåªä¼šå”±ï¼Œæœ‰çš„äººåªä¼šè·³ï¼Œæœ‰çš„äººå¯èƒ½å”±è·³Rapéƒ½ä¼šç”šè‡³ç¯®çƒéƒ½å¾ˆæºœã€‚æ‰€ä»¥ä¸ºäº†é€‚é…è¿™ä¹ˆå¤šæƒ…å†µï¼Œæˆ‘ä»¬å¿…é¡»æŠŠæ¯ç§æŠ€èƒ½ç‹¬ç«‹å‡ºæ¥ï¼Œæ ¹æ®ä¸åŒçš„äººæ¥ç»„åˆè¿™äº›æŠ€èƒ½ã€‚</p><pre><code class="hljs aspectj"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Seller</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">Sing</span>, <span class="hljs-title">Jump</span>, <span class="hljs-title">Rap</span> </span>{<span class="hljs-keyword">public</span> <span class="hljs-function">BigDecimal <span class="hljs-title">sell</span><span class="hljs-params">(Any any)</span> </span>{<span class="hljs-function"><span class="hljs-keyword">return</span> any.<span class="hljs-title">doSell</span><span class="hljs-params">()</span></span>;    }<span class="hljs-meta">@Override</span><span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">sing</span><span class="hljs-params">()</span> </span>{        System.out.println(<span class="hljs-string">"seller sing "</span>);    }<span class="hljs-meta">@Override</span><span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">jump</span><span class="hljs-params">()</span> </span>{        System.out.println(<span class="hljs-string">"seller jumping "</span>);    }<span class="hljs-meta">@Override</span><span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">rap</span><span class="hljs-params">()</span> </span>{        System.out.println(<span class="hljs-string">"seller raping "</span>);    }}</code></pre><p>ä½†æ˜¯æ³¨æ„ä¸€å®šè¦é€‚åº¦ï¼Œæ ¹æ®ä¸šåŠ¡æ¥ç»†åˆ†ã€‚å¦åˆ™ä¼šå¯¼è‡´æ¥å£è¿‡å¤šåè€Œå¢å¤§å¼€å‘éš¾åº¦ä»¥åŠä»£ç çš„å¤æ‚åº¦ã€‚</p><h1 id="4ã€è¿ªç±³ç‰¹æ³•åˆ™"><a href="#4ã€è¿ªç±³ç‰¹æ³•åˆ™" class="headerlink" title="4ã€è¿ªç±³ç‰¹æ³•åˆ™"></a>4ã€è¿ªç±³ç‰¹æ³•åˆ™</h1><p>æ–°çš„é”€å”®æ–¹æ³•æäº†ä¸€æ®µæ—¶é—´åï¼Œè€æ¿æƒ³çœ‹çœ‹æ£€éªŒä¸€ä¸‹ä»–è¿™ä¸ªé¦Šä¸»æ„çš„æ•ˆæœã€‚äºæ˜¯å°±å«äº†ä¸€ä¸ªé”€å”®è®©ä»–æä¾›ä¸€ä»½æŠ¥è¡¨å‡ºæ¥çœ‹çœ‹ã€‚é‚£ä¹ˆç¨‹åºå‘˜è¯¥å¦‚ä½•å®ç°è€æ¿æŸ¥çœ‹æŠ¥è¡¨åŠŸèƒ½å‘¢ï¼Œå¾ˆå¯èƒ½æœ‰äººä¼šè¿™ä¹ˆå†™ï¼š</p><pre><code class="hljs angelscript"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-symbol">Boss</span> {    <span class="hljs-keyword">private</span> Seller seller;    <span class="hljs-keyword">private</span> Report report;    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> read() {        seller.apply(report);    }}</code></pre><p>ä¹çœ‹åŠŸèƒ½å®ç°äº†ï¼Œç»†çœ‹ä¼šå‘ç°é€»è¾‘ä¸å¯¹ã€‚å“ªé‡Œä¸å¯¹å‘¢ï¼Ÿè€æ¿å·²ç»æŒæœ‰äº†æŠ¥è¡¨ï¼Œå¦‚æœè€æ¿å·²ç»çŸ¥é“äº†ä½ çš„ä¸šç»©è¿˜å«ä½ å¹²ä»€ä¹ˆï¼Ÿè¿™ç§é€»è¾‘è‚¯å®šæ˜¯ä¸å¯¹çš„ï¼ä¹Ÿå°±æ˜¯è¯´Bossç›´æ¥ä¾èµ–äº†Reportï¼›è€Œè¿™ä¸ªReportä¸åº”è¯¥ç›´æ¥ç”±Bosså¤„ç†ï¼Œè€Œåº”ç”±Selleræ§åˆ¶ã€‚</p><pre><code class="hljs angelscript"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-symbol">Boss</span> {    <span class="hljs-keyword">private</span> Seller seller;        <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> read(){         seller.apply();    }   }<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-symbol">Seller</span> {      <span class="hljs-keyword">private</span> Report report;            <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> apply(){         report.show();      ï½}</code></pre><p>è¿™ç§æœ€å¤§åŒ–éš”ç¦»äº†ç±»ä¸ç±»ä¹‹é—´çš„å…³ç³»ã€‚é™ä½äº†ç±»ä¹‹é—´çš„è€¦åˆã€‚è¿ªç±³ç‰¹æ³•åˆ™å› æ­¤åˆå¾—åæœ€å°‘çŸ¥é“åŸåˆ™ã€‚</p><h1 id="5ã€æ¥å£éš”ç¦»åŸåˆ™"><a href="#5ã€æ¥å£éš”ç¦»åŸåˆ™" class="headerlink" title="5ã€æ¥å£éš”ç¦»åŸåˆ™"></a>5ã€æ¥å£éš”ç¦»åŸåˆ™</h1><p>ç”¨å¤šä¸ªä¸“é—¨çš„æ¥å£ï¼Œè€Œä¸ä½¿ç”¨å•ä¸€çš„æ€»æ¥å£ï¼Œå®¢æˆ·ç«¯ä¸åº”è¯¥ä¾èµ–å®ƒä¸éœ€è¦çš„æ¥å£ã€‚ä¸€ä¸ªç±»å¯¹ä¸€ä¸ªç±»çš„ä¾èµ–åº”è¯¥å»ºç«‹åœ¨æœ€å°çš„æ¥å£ä¸Šã€‚<br>å»ºç«‹å•ä¸€æ¥å£ï¼Œä¸è¦å»ºç«‹åºå¤§è‡ƒè‚¿çš„æ¥å£å°½é‡ç»†åŒ–æ¥å£ï¼Œæ¥å£ä¸­çš„æ–¹æ³•å°½é‡å°‘ï¼Œå°½é‡ç»†åŒ–æ¥å£ã€‚æ³¨æ„é€‚åº¦åŸåˆ™ï¼Œä¸€å®šè¦é€‚åº¦ã€‚ä¸èƒ½æ»¥ç”¨<br>å°±åƒä¸Šé¢çš„å”±è·³ rapï¼Œåˆ†ç¦»æ˜¯æœ€å¥½çš„ã€‚</p><h1 id="6ã€é‡Œæ°ä»£æ¢åŸåˆ™"><a href="#6ã€é‡Œæ°ä»£æ¢åŸåˆ™" class="headerlink" title="6ã€é‡Œæ°ä»£æ¢åŸåˆ™"></a>6ã€é‡Œæ°ä»£æ¢åŸåˆ™</h1><p>è¿™é‡Œä¸»è¦é’ˆå¯¹ç±»çš„ç»§æ‰¿å…³ç³»è€Œè¨€ã€‚æ¯”è¾ƒæ­£å¼çš„å®šä¹‰ï¼šå¦‚æœå¯¹æ¯ä¸€ä¸ªç±»å‹ä¸ºSçš„å¯¹è±¡o1ï¼Œéƒ½æœ‰ç±»å‹ä¸ºTçš„å¯¹è±¡o2ï¼Œä½¿å¾—ä»¥Tå®šä¹‰çš„æ‰€æœ‰ç¨‹åºPåœ¨æ‰€æœ‰çš„å¯¹è±¡o1éƒ½ä»£æ¢æˆo2 æ—¶ï¼Œç¨‹åºPçš„è¡Œä¸ºæ²¡æœ‰å‘ç”Ÿå˜åŒ–ï¼Œé‚£ä¹ˆç±»å‹ S æ˜¯ç±»å‹ T çš„å­ç±»å‹ã€‚<br>åœ¨4Såº—è€æ¿çœ¼é‡Œï¼Œåªè¦æ–°æ¥çš„èƒ½åœ¨é”€å”®å²—ä½ä¸Šåƒé”€å”®è€æ‰‹ä¸€æ ·å–å‡ºæ±½è½¦ï¼Œä»–å°±æ˜¯ä¸€ååˆæ ¼çš„é”€å”®ã€‚æ„Ÿè§‰è¿™ç§å®šä¹‰å°±åƒä¸€å¥åè¨€ï¼šä¸ç®¡ä½ é»‘çŒ«ç™½çŒ«ï¼Œèƒ½æŠ“è€é¼ çš„éƒ½æ˜¯å¥½çŒ«ã€‚<br>ä»æŸç§å«ä¹‰ä¸Šé‡Œæ°ä»£æ¢æœ‰ç€ä»¥ä¸‹çš„å¥‘çº¦ï¼š</p><ol><li>å­ç±»å¿…é¡»å®Œå…¨å®ç°çˆ¶ç±»çš„æ–¹æ³•ã€‚çˆ¶ç±»å‡ºç°çš„åœ°æ–¹å­ç±»éƒ½å¯ä»¥ä»£æ›¿çˆ¶ç±»ã€‚</li><li>å­ç±»å¯ä»¥æœ‰è‡ªå·±çš„ä¸ªæ€§å®šä¹‰ã€‚é‡Œæ°æ›¿æ¢åŸåˆ™ å¯ä»¥æ­£ç€ç”¨ï¼Œä½†æ˜¯ä¸èƒ½åè¿‡æ¥ç”¨ã€‚åœ¨å­ç±»å‡ºç°çš„åœ°æ–¹ï¼Œçˆ¶ç±»æœªå¿…å°±å¯ä»¥èƒœä»»ã€‚å­ç±»ä¸€èˆ¬æ¯”çˆ¶ç±»æœ‰ä¸ªæ€§ã€‚</li><li>è¦†ç›–æˆ–å®ç°çˆ¶ç±»çš„æ–¹æ³•æ—¶è¾“å…¥å‚æ•°å¯ä»¥è¢«æ”¾å¤§ã€‚å¦‚æœ4Såº—è€æ¿è§„å®šåŸºç¡€è½¦è°ˆä»·çš„æŠ˜æ‰£æœ€å¤šä¹æŠ˜ï¼Œé”€å”®æ‰“ä¸ªä¹äº”æŠ˜æ²¡æœ‰é—®é¢˜ï¼Œæ‰“å…«æŠ˜è€æ¿è‚¯å®šè¦è·Ÿä½ è¯´é“è¯´é“äº†ã€‚</li><li>è¦†å†™æˆ–å®ç°çˆ¶ç±»çš„æ–¹æ³•æ—¶è¾“å‡ºç»“æœå¯ä»¥è¢«ç¼©å°ã€‚åŒæ ·æ˜¯15Wæœ¬æ¥åªèƒ½å–å‡ºç»™å®¢æˆ·ä¸€ä¸ªä¹ä¸ç‰ˆï¼Œç»“æœæ¢äº†ä¸ªé”€å”®ç»“æœç»™å‡ºäº†ä¸€è¾†æ——èˆ°ç‰ˆã€‚æ€•ä¸æ˜¯è¿‡ä¸äº†è¯•ç”¨æœŸå“¦ã€‚</li></ol><h1 id="7ã€åˆæˆ-å¤ç”¨åŸåˆ™"><a href="#7ã€åˆæˆ-å¤ç”¨åŸåˆ™" class="headerlink" title="7ã€åˆæˆ/å¤ç”¨åŸåˆ™"></a>7ã€åˆæˆ/å¤ç”¨åŸåˆ™</h1><p>å®ƒè¦æ±‚åœ¨è½¯ä»¶å¤ç”¨æ—¶ï¼Œè¦å°½é‡å…ˆä½¿ç”¨ç»„åˆæˆ–è€…èšåˆç­‰å…³è”å…³ç³»æ¥å®ç°ï¼Œå…¶æ¬¡æ‰è€ƒè™‘ä½¿ç”¨ç»§æ‰¿å…³ç³»æ¥å®ç°ã€‚<br>å¦‚æœè¦ä½¿ç”¨ç»§æ‰¿å…³ç³»ï¼Œåˆ™å¿…é¡»ä¸¥æ ¼éµå¾ªé‡Œæ°æ›¿æ¢åŸåˆ™ã€‚åˆæˆå¤ç”¨åŸåˆ™åŒé‡Œæ°æ›¿æ¢åŸåˆ™ç›¸è¾…ç›¸æˆçš„ï¼Œä¸¤è€…éƒ½æ˜¯å¼€é—­åŸåˆ™çš„å…·ä½“å®ç°è§„èŒƒã€‚<br>æ¬¢è¿å¤§å®¶å…³æ³¨æˆ‘çš„å…¬ç§æµ©ã€ç¨‹åºå‘˜è¿½é£ã€‘ï¼Œæ–‡ç« éƒ½ä¼šåœ¨é‡Œé¢æ›´æ–°ï¼Œæ•´ç†çš„èµ„æ–™ä¹Ÿä¼šæ”¾åœ¨é‡Œé¢ã€‚</p><h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>è¿™ä¸ƒç§è®¾è®¡åŸåˆ™æ˜¯è½¯ä»¶è®¾è®¡æ¨¡å¼å¿…é¡»å°½é‡éµå¾ªçš„åŸåˆ™ï¼Œå„ç§åŸåˆ™è¦æ±‚çš„ä¾§é‡ç‚¹ä¸åŒã€‚å…¶ä¸­ï¼Œå¼€é—­åŸåˆ™æ˜¯æ€»çº²ï¼Œå®ƒå‘Šè¯‰æˆ‘ä»¬è¦å¯¹æ‰©å±•å¼€æ”¾ï¼Œå¯¹ä¿®æ”¹å…³é—­ï¼›é‡Œæ°æ›¿æ¢åŸåˆ™å‘Šè¯‰æˆ‘ä»¬ä¸è¦ç ´åç»§æ‰¿ä½“ç³»ï¼›ä¾èµ–å€’ç½®åŸåˆ™å‘Šè¯‰æˆ‘ä»¬è¦é¢å‘æ¥å£ç¼–ç¨‹ï¼›å•ä¸€èŒè´£åŸåˆ™å‘Šè¯‰æˆ‘ä»¬å®ç°ç±»è¦èŒè´£å•ä¸€ï¼›æ¥å£éš”ç¦»åŸåˆ™å‘Šè¯‰æˆ‘ä»¬åœ¨è®¾è®¡æ¥å£çš„æ—¶å€™è¦ç²¾ç®€å•ä¸€ï¼›è¿ªç±³ç‰¹æ³•åˆ™å‘Šè¯‰æˆ‘ä»¬è¦é™ä½è€¦åˆåº¦ï¼›åˆæˆå¤ç”¨åŸåˆ™å‘Šè¯‰æˆ‘ä»¬è¦ä¼˜å…ˆä½¿ç”¨ç»„åˆæˆ–è€…èšåˆå…³ç³»å¤ç”¨ï¼Œå°‘ç”¨ç»§æ‰¿å…³ç³»å¤ç”¨ã€‚åœ¨å®é™…å¼€å‘ä¸­æˆ‘ä»¬å¯ä»¥æ ¹æ®ä¸šåŠ¡æ¥è¿›è¡Œè®¾è®¡æ¨¡å¼çš„ä½¿ç”¨ï¼Œä½†æ˜¯å¾ˆé‡è¦çš„ä¸€ç‚¹åƒä¸‡ä¸è¦è¢«è¿™äº›æ¡æ¡æ¡†æ¡†æŸç¼šäº†ä½ çš„æ‰‹è„šã€‚</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h1&gt;&lt;p&gt;å…¶å®æ²¡æœ‰è®¾è®¡æ¨¡å¼æˆ‘ä»¬ä¹Ÿèƒ½å®Œæˆå¼€å‘å·¥ä½œã€‚ä½†æ˜¯ä¸ºä»€ä¹ˆéœ€è¦è®¾è®¡æ¨¡å¼å‘¢ï¼Ÿè®©ä½ çœ‹èµ·æ¥å¾ˆç‰›ï¼Œæ²¡é”™è¿™ä¸ªç®—ä¸€ä¸ªã€‚è®©ä½ çš„ä»£ç å±‚æ¬¡æ„Ÿåˆ†æ˜ï¼Œå¯è¯»æ€§å¼ºè€Œä¸”å®¹æ˜“ç»´æŠ¤ã€‚
      
    
    </summary>
    
    
      <category term="uncategorized" scheme="https://melodyjerry.github.io/blog/categories/uncategorized/"/>
    
    
      <category term="ç¬”è®°" scheme="https://melodyjerry.github.io/blog/tags/%E7%AC%94%E8%AE%B0/"/>
    
      <category term="JavaWeb" scheme="https://melodyjerry.github.io/blog/tags/JavaWeb/"/>
    
      <category term="Java" scheme="https://melodyjerry.github.io/blog/tags/Java/"/>
    
      <category term="SSM" scheme="https://melodyjerry.github.io/blog/tags/SSM/"/>
    
  </entry>
  
  <entry>
    <title>å…³äºJavaçš„åå°„æœºåˆ¶ï¼Œ4ç¯‡ä¼˜é€‰å‚è€ƒæ–‡ç« </title>
    <link href="https://melodyjerry.github.io/blog/2020/09/18/%E5%85%B3%E4%BA%8EJava%E7%9A%84%E5%8F%8D%E5%B0%84%E6%9C%BA%E5%88%B6%EF%BC%8C4%E7%AF%87%E4%BC%98%E9%80%89%E5%8F%82%E8%80%83%E6%96%87%E7%AB%A0/"/>
    <id>https://melodyjerry.github.io/blog/2020/09/18/%E5%85%B3%E4%BA%8EJava%E7%9A%84%E5%8F%8D%E5%B0%84%E6%9C%BA%E5%88%B6%EF%BC%8C4%E7%AF%87%E4%BC%98%E9%80%89%E5%8F%82%E8%80%83%E6%96%87%E7%AB%A0/</id>
    <published>2020-09-18T01:10:00.738Z</published>
    <updated>2020-09-18T04:43:03.052Z</updated>
    
    <content type="html"><![CDATA[<ol><li><a href="https://www.jianshu.com/p/9be58ee20dee" target="_blank" rel="noopener">Javaé«˜çº§ç‰¹æ€§â€”â€”åå°„</a></li><li><a href="https://blog.csdn.net/qq_36226453/article/details/82790375" target="_blank" rel="noopener">JavaåŸºç¡€ä¹‹â€”åå°„ï¼ˆéå¸¸é‡è¦ï¼‰</a></li><li><a href="https://www.cnblogs.com/adamjwh/p/9683705.html" target="_blank" rel="noopener">Javaé«˜çº§ç¯‡ï¼ˆå››ï¼‰â€”â€”åå°„</a></li><li><a href="https://www.zhihu.com/question/24304289" target="_blank" rel="noopener">å­¦ä¹ javaåº”è¯¥å¦‚ä½•ç†è§£åå°„ï¼Ÿ</a></li></ol><a id="more"></a><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      &lt;ol&gt;
&lt;li&gt;&lt;a href=&quot;https://www.jianshu.com/p/9be58ee20dee&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Javaé«˜çº§ç‰¹æ€§â€”â€”åå°„&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://blog.csdn.net/qq_36226453/article/details/82790375&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;JavaåŸºç¡€ä¹‹â€”åå°„ï¼ˆéå¸¸é‡è¦ï¼‰&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.cnblogs.com/adamjwh/p/9683705.html&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Javaé«˜çº§ç¯‡ï¼ˆå››ï¼‰â€”â€”åå°„&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.zhihu.com/question/24304289&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;å­¦ä¹ javaåº”è¯¥å¦‚ä½•ç†è§£åå°„ï¼Ÿ&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
    
    </summary>
    
    
      <category term="uncategorized" scheme="https://melodyjerry.github.io/blog/categories/uncategorized/"/>
    
    
      <category term="ç¬”è®°" scheme="https://melodyjerry.github.io/blog/tags/%E7%AC%94%E8%AE%B0/"/>
    
      <category term="JavaWeb" scheme="https://melodyjerry.github.io/blog/tags/JavaWeb/"/>
    
      <category term="Java" scheme="https://melodyjerry.github.io/blog/tags/Java/"/>
    
      <category term="SSM" scheme="https://melodyjerry.github.io/blog/tags/SSM/"/>
    
  </entry>
  
  <entry>
    <title>[è½¬]Java+Spring+MyBatiså®ç°å¤šæ•°æ®æºçš„åŠ¨æ€åˆ‡æ¢</title>
    <link href="https://melodyjerry.github.io/blog/2020/09/08/Java+Spring+MyBatis%E5%AE%9E%E7%8E%B0%E5%A4%9A%E6%95%B0%E6%8D%AE%E6%BA%90%E7%9A%84%E5%8A%A8%E6%80%81%E5%88%87%E6%8D%A2/"/>
    <id>https://melodyjerry.github.io/blog/2020/09/08/Java+Spring+MyBatis%E5%AE%9E%E7%8E%B0%E5%A4%9A%E6%95%B0%E6%8D%AE%E6%BA%90%E7%9A%84%E5%8A%A8%E6%80%81%E5%88%87%E6%8D%A2/</id>
    <published>2020-09-08T06:22:22.000Z</published>
    <updated>2020-09-18T04:43:02.959Z</updated>
    
    <content type="html"><![CDATA[<p>åŸæ–‡é“¾æ¥ï¼š<a href="https://www.cnblogs.com/zt2710/p/11116637.html" target="_blank" rel="noopener">https://www.cnblogs.com/zt2710/p/11116637.html</a></p><p>ç¾¤èŠå¤©è®°å½•æˆªå›¾ğŸ‘‡</p><img src="https://s1.ax1x.com/2020/09/08/wQE7DO.jpg" srcset="/blog/img/loading.gif" alt="wQE7DO.jpg" style="zoom:30%;"><a id="more"></a><hr><h1 id="å›ºå®šå¤šæ•°æ®æºåˆ‡æ¢"><a href="#å›ºå®šå¤šæ•°æ®æºåˆ‡æ¢" class="headerlink" title="å›ºå®šå¤šæ•°æ®æºåˆ‡æ¢"></a>å›ºå®šå¤šæ•°æ®æºåˆ‡æ¢</h1><p>  å›ºå®šå¤šæ•°æ®æºçš„åŠ¨æ€åˆ‡æ¢ï¼Œé€šè¿‡è‡ªå®šä¹‰æ³¨è§£å®ç°åˆ‡æ¢ï¼Œè¿™æ ·åœ¨åˆ‡æ¢æ•°æ®æºæ—¶æ¯”è¾ƒçµæ´»ï¼Œå…·ä½“çš„å®ç°æ–¹å¼å¦‚ä¸‹ï¼š</p><p>  1ã€é…ç½®å¤šæ•°æ®æº</p><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--å®šä¹‰æ•°æ®æº1--&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"oracledataSource"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"org.apache.commons.dbcp.BasicDataSource"</span> <span class="hljs-attr">destroy-method</span>=<span class="hljs-string">"close"</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"driverClassName"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"oracle.jdbc.driver.OracleDriver"</span> /&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"url"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"jdbc:oracle:thin:@127.0.0.1:1522:neworcl"</span> /&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"username"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"emspdadev"</span> /&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"password"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"emspdadev"</span> /&gt;</span>    <span class="hljs-comment">&lt;!-- åˆå§‹åŒ–è¿æ¥å¤§å° --&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"initialSize"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"0"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>    <span class="hljs-comment">&lt;!-- è¿æ¥æ± æœ€å¤§æ•°é‡ --&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"maxActive"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"20"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>    <span class="hljs-comment">&lt;!-- è¿æ¥æ± æœ€å¤§ç©ºé—² --&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"maxIdle"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"20"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>    <span class="hljs-comment">&lt;!-- è¿æ¥æ± æœ€å°ç©ºé—² --&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"minIdle"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"1"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>    <span class="hljs-comment">&lt;!-- è·å–è¿æ¥æœ€å¤§ç­‰å¾…æ—¶é—´ --&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"maxWait"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"60000"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span> <span class="hljs-comment">&lt;!--å®šä¹‰æ•°æ®æº2--&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"mysqldataSource"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"org.apache.commons.dbcp.BasicDataSource"</span> <span class="hljs-attr">destroy-method</span>=<span class="hljs-string">"close"</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"driverClassName"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"com.mysql.jdbc.Driver"</span> /&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"url"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"jdbc:mysql://127.0.0.1:3306/jbpmdb"</span> /&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"username"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"root"</span> /&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"password"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"123456"</span> /&gt;</span>    <span class="hljs-comment">&lt;!-- åˆå§‹åŒ–è¿æ¥å¤§å° --&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"initialSize"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"0"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>    <span class="hljs-comment">&lt;!-- è¿æ¥æ± æœ€å¤§æ•°é‡ --&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"maxActive"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"20"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>    <span class="hljs-comment">&lt;!-- è¿æ¥æ± æœ€å¤§ç©ºé—² --&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"maxIdle"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"20"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>    <span class="hljs-comment">&lt;!-- è¿æ¥æ± æœ€å°ç©ºé—² --&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"minIdle"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"1"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>    <span class="hljs-comment">&lt;!-- è·å–è¿æ¥æœ€å¤§ç­‰å¾…æ—¶é—´ --&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"maxWait"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"60000"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span> <span class="hljs-comment">&lt;!--åŠ¨æ€æ•°æ®æºé…ç½®--&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"dataSource"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"com.ssm.datasource.DynamicDataSource"</span>&gt;</span><span class="hljs-comment">&lt;!--å¼•å…¥å®šä¹‰å¥½çš„æ•°æ®æº--&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span>  <span class="hljs-attr">name</span>=<span class="hljs-string">"targetDataSources"</span>&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">map</span>  <span class="hljs-attr">key-type</span>=<span class="hljs-string">"java.lang.String"</span>&gt;</span>          <span class="hljs-tag">&lt;<span class="hljs-name">entry</span> <span class="hljs-attr">key</span>=<span class="hljs-string">"oracle"</span> <span class="hljs-attr">value-ref</span>=<span class="hljs-string">"oracledataSource"</span> /&gt;</span>          <span class="hljs-tag">&lt;<span class="hljs-name">entry</span> <span class="hljs-attr">key</span>=<span class="hljs-string">"mysql"</span> <span class="hljs-attr">value-ref</span>=<span class="hljs-string">"mysqldataSource"</span> /&gt;</span>        <span class="hljs-tag">&lt;/<span class="hljs-name">map</span>&gt;</span>    <span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><span class="hljs-comment">&lt;!--å®šä¹‰é»˜è®¤æ•°æ®æº--&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"defaultTargetDataSource"</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">"oracledataSource"</span> /&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span> <span class="hljs-comment">&lt;!--springå’Œmybatisæ•´åˆ--&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"sqlSessionFactory"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"org.mybatis.spring.SqlSessionFactoryBean"</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"dataSource"</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">"dataSource"</span> /&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"mapperLocations"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"classpath:mapping/*.xml"</span> /&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"org.mybatis.spring.mapper.MapperScannerConfigurer"</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"basePackage"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"com.ssm.dao"</span> /&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"sqlSessionFactoryBeanName"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"sqlSessionFactory"</span> /&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span></code></pre><p> 2ã€å®šä¹‰æ³¨è§£(æ³¨è§£åä¸ºDataSource)ï¼Œç”¨äºåˆ‡æ¢æ•°æ®æºï¼Œæ³¨è§£çš„å€¼åªèƒ½ä¸ºä¸Šè¿°é…ç½®ä¸­å®šä¹‰çš„key(å¯¹åº”äºä¸Šé¢é…ç½®ä¸­å®šä¹‰çš„oracleã€mysql)</p><pre><code class="hljs less"><span class="hljs-variable">@Retention</span>(RetentionPolicy.RUNTIME)<span class="hljs-variable">@Target</span>(ElementType.METHOD)pub lic <span class="hljs-variable">@interface</span> DataSource {    <span class="hljs-selector-tag">String</span> <span class="hljs-selector-tag">value</span>();}</code></pre><p>  3ã€æ ¹æ®Spingåˆ‡é¢ç¼–ç¨‹ï¼Œå½“è°ƒç”¨æŒ‡å®šçš„åˆ‡é¢ç±»æ—¶ï¼Œè§£é‡Šæ³¨è§£ï¼Œå¹¶æ ¹æ®æ³¨è§£çš„å®šä¹‰ä½¿ç”¨å¯¹åº”çš„æ•°æ®åº“</p><pre><code class="hljs reasonml">public <span class="hljs-keyword">class</span> DataSourceAspect {<span class="hljs-comment">/**</span><span class="hljs-comment">    * å®šä¹‰åˆ‡é¢ï¼Œå½“è°ƒç”¨com.ssm.serviceä¸‹çš„æ‰€æœ‰ç±»çš„æ‰€æœ‰æ–¹æ³•å‰éƒ½ä¼šæ‰§è¡ŒbeforeInvokeæ–¹æ³•</span><span class="hljs-comment">    */</span>    @<span class="hljs-constructor">Pointcut(<span class="hljs-string">"execution(* com.ssm.service.*.*(..))"</span>)</span>    public void point<span class="hljs-constructor">Cut()</span>{};     @<span class="hljs-constructor">Before(<span class="hljs-params">value</span> = <span class="hljs-string">"pointCut()"</span>)</span>    public void before<span class="hljs-constructor">Invoke(JoinPoint <span class="hljs-params">joinpoint</span>)</span> {        <span class="hljs-keyword">try</span> {            String clazzName = joinpoint.get<span class="hljs-constructor">Target()</span>.get<span class="hljs-constructor">Class()</span>.get<span class="hljs-constructor">Name()</span>;            String methodName = joinpoint.get<span class="hljs-constructor">Signature()</span>.get<span class="hljs-constructor">Name()</span>;            Class targetClazz = <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">Class</span>.</span></span>for<span class="hljs-constructor">Name(<span class="hljs-params">clazzName</span>)</span>;            Method<span class="hljs-literal">[]</span> methods = targetClazz.get<span class="hljs-constructor">Methods()</span>;            for(Method <span class="hljs-keyword">method</span> : methods) {                <span class="hljs-keyword">if</span>(<span class="hljs-keyword">method</span>.get<span class="hljs-constructor">Name()</span>.equals(methodName)) {                    <span class="hljs-comment">// é¦–å…ˆæŸ¥çœ‹æ–¹æ³•æ˜¯å¦ä½¿ç”¨æ³¨è§£</span>                    <span class="hljs-comment">// å¦‚æœä½¿ç”¨æ³¨è§£ï¼Œåˆ™è·å–æ³¨è§£å®šä¹‰çš„å€¼ï¼Œå¹¶æ ¹æ®æ³¨è§£çš„å€¼è®¾ç½®è®¿é—®æ•°æ®åº“çš„key</span>                    <span class="hljs-keyword">if</span>(<span class="hljs-keyword">method</span>.is<span class="hljs-constructor">AnnotationPresent(DataSource.<span class="hljs-params">class</span>)</span>) {                        DataSource dataSource = <span class="hljs-keyword">method</span>.get<span class="hljs-constructor">Annotation(DataSource.<span class="hljs-params">class</span>)</span>;                        <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">DatasourceHolder</span>.</span></span>set<span class="hljs-constructor">DataType(<span class="hljs-params">dataSource</span>.<span class="hljs-params">value</span>()</span>);                    }                    break;                }            }        } catch (Exception e) {            e.print<span class="hljs-constructor">StackTrace()</span>;        }     }}</code></pre><p>  4ã€å®šä¹‰åŠ¨æ€åˆ‡æ¢æ•°æ®æº(ç»§æ‰¿Springçš„AbstractRoutingDataSource)</p><pre><code class="hljs scala">public <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">DynamicDataSource</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">AbstractRoutingDataSource</span> </span>{    <span class="hljs-comment">/**</span><span class="hljs-comment">    * æ ¹æ®DatasourceHolderä¸­DataTypeçš„å€¼è·å–å…·ä½“çš„æ•°æ®æº</span><span class="hljs-comment">    */</span>    <span class="hljs-meta">@Override</span>    <span class="hljs-keyword">protected</span> <span class="hljs-type">Object</span> determineCurrentLookupKey() {        <span class="hljs-keyword">return</span> <span class="hljs-type">DatasourceHolder</span>.getDataType();    }}</code></pre><p>  5ã€æ•°æ®æºåˆ‡æ¢çš„ä½¿ç”¨</p><pre><code class="hljs dart"><span class="hljs-meta">@Service</span>public <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">IdxServiceImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">IIdxSevice</span> </span>{     <span class="hljs-meta">@Autowired</span>    private IdxMapper idxMapper;     <span class="hljs-meta">@Override</span>    public <span class="hljs-built_in">List</span>&lt;Idx&gt; listIdxInfo() {        <span class="hljs-keyword">return</span> <span class="hljs-keyword">null</span>;    }     <span class="hljs-comment"><span class="markdown">/**</span></span><span class="hljs-comment"><span class="markdown"><span class="hljs-bullet">    * </span>æ ¹æ®æ³¨è§£çš„é…ç½®ï¼Œä¼šè®¿é—®oracleå¯¹åº”çš„æ•°æ®æº</span></span><span class="hljs-comment"><span class="markdown"><span class="hljs-code">    */</span></span></span>    <span class="hljs-meta">@Override</span>    <span class="hljs-meta">@DataSource</span>(<span class="hljs-string">"oracle"</span>)    public <span class="hljs-built_in">Map</span>&lt;<span class="hljs-built_in">String</span>,<span class="hljs-built_in">Object</span>&gt; getIdxById(<span class="hljs-built_in">int</span> idxId) {        <span class="hljs-keyword">return</span> idxMapper.getIdxById(idxId);    }     <span class="hljs-comment"><span class="markdown">/**</span></span><span class="hljs-comment"><span class="markdown"><span class="hljs-bullet">    * </span>æ ¹æ®æ³¨è§£çš„é…ç½®ï¼Œä¼šè®¿é—®mysqlå¯¹åº”çš„æ•°æ®æº</span></span><span class="hljs-comment"><span class="markdown"><span class="hljs-code">    */</span></span></span>    <span class="hljs-meta">@Override</span>    <span class="hljs-meta">@DataSource</span>(<span class="hljs-string">"mysql"</span>)    public <span class="hljs-built_in">Map</span>&lt;<span class="hljs-built_in">String</span>, <span class="hljs-built_in">Object</span>&gt; getJobInfo(<span class="hljs-built_in">int</span> dbId) {        <span class="hljs-keyword">return</span> idxMapper.getJobInfo(dbId);    }}</code></pre><p>é€šè¿‡ä»¥ä¸Šçš„æ­¥éª¤å³å®ç°äº†æ•°æ®æºçš„åŠ¨æ€åˆ‡æ¢</p><h1 id="åŠ¨æ€å¤šæ•°æ®æºåˆ‡æ¢"><a href="#åŠ¨æ€å¤šæ•°æ®æºåˆ‡æ¢" class="headerlink" title="åŠ¨æ€å¤šæ•°æ®æºåˆ‡æ¢"></a>åŠ¨æ€å¤šæ•°æ®æºåˆ‡æ¢</h1><p>  å¯¹äºåŠ¨æ€çš„å¤šæ•°æ®æºï¼Œæ•°æ®æºçš„é…ç½®ä¸€èˆ¬ä¸æ”¾åœ¨é…ç½®æ–‡ä»¶ä¸­ï¼Œå› ä¸ºå¦‚æœæ”¾åœ¨é…ç½®æ–‡ä»¶ä¸­ï¼Œæ¯æ¬¡æ–°å¢æˆ–åˆ é™¤æ•°æ®æºï¼Œéƒ½éœ€è¦é‡å¯é¡¹ç›®ï¼Œè¿™æ ·çš„å®ç°æ–¹å¼éå¸¸ä¸å‹å¥½ï¼›é€šå¸¸æƒ…å†µå‘æ•°æ®æºçš„é…ç½®æ”¾åœ¨æ•°æ®åº“ä¸­ã€‚å®ç°æ–¹å¼å¦‚ä¸‹ï¼š**<br>**</p><p>  1ã€é…ç½®æ•°æ®æºï¼Œè¿™é‡Œé…ç½®çš„æ•°æ®æºç”¨äºä¿å­˜å…¶ä»–æ•°æ®æºçš„é…ç½®ä¿¡æ¯ï¼Œä»Šåæ•°æ®çš„æ–°å¢ã€åˆ é™¤ã€ä¿®æ”¹å‡åœ¨è¯¥æ•°æ®åº“ä¸­æ“ä½œï¼Œé…ç½®å¦‚ä¸‹ï¼š</p><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--å®šä¹‰æ•°æ®æº--&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"oracledataSource"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"org.apache.commons.dbcp.BasicDataSource"</span> <span class="hljs-attr">destroy-method</span>=<span class="hljs-string">"close"</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"driverClassName"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"oracle.jdbc.driver.OracleDriver"</span> /&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"url"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"jdbc:oracle:thin:@127.0.0.1:1522:neworcl"</span> /&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"username"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"cfgmanage"</span> /&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"password"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"cfgmanage"</span> /&gt;</span>    <span class="hljs-comment">&lt;!-- åˆå§‹åŒ–è¿æ¥å¤§å° --&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"initialSize"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"0"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>    <span class="hljs-comment">&lt;!-- è¿æ¥æ± æœ€å¤§æ•°é‡ --&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"maxActive"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"20"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>    <span class="hljs-comment">&lt;!-- è¿æ¥æ± æœ€å¤§ç©ºé—² --&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"maxIdle"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"20"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>    <span class="hljs-comment">&lt;!-- è¿æ¥æ± æœ€å°ç©ºé—² --&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"minIdle"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"1"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>    <span class="hljs-comment">&lt;!-- è·å–è¿æ¥æœ€å¤§ç­‰å¾…æ—¶é—´ --&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"maxWait"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"60000"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span> <span class="hljs-comment">&lt;!--æŸ¥è¯¢åŠ¨æ€é…ç½®çš„æ•°æ®åº“è¿æ¥ä¿¡æ¯--&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"jdbcTemplate"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"org.springframework.jdbc.core.JdbcTemplate"</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"dataSource"</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">"oracledataSource"</span> /&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"dbConfigService"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"com.teamsun.datasource.DBConfigService"</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"jdbcTemplate"</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">"jdbcTemplate"</span> /&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span> <span class="hljs-comment">&lt;!--å®šä¹‰åŠ¨æ€æ•°æ®æº--&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"dataSource"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"com.teamsun.datasource.DynamicDataSource"</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"masterDataSource"</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">"oracledataSource"</span> /&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"dbConfigService"</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">"dbConfigService"</span> /&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span> <span class="hljs-comment">&lt;!--springå’Œmybatisæ•´åˆ--&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"sqlSessionFactory"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"org.mybatis.spring.SqlSessionFactoryBean"</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"dataSource"</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">"dataSource"</span> /&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"mapperLocations"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"classpath:mapper/*.xml"</span> /&gt;</span>    <span class="hljs-comment">&lt;!--&lt;property name="mapperLocations" value="classpath:mapping/*.xml" /&gt;--&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"org.mybatis.spring.mapper.MapperScannerConfigurer"</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"basePackage"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"com.teamsun.mapper"</span> /&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"sqlSessionFactoryBeanName"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"sqlSessionFactory"</span> /&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span></code></pre><p>2ã€å®ç°æŸ¥è¯¢æ•°æ®æºé…ç½®ä¿¡æ¯çš„ç±»</p><pre><code class="hljs lsl">public class DBConfigService {     private JdbcTemplate jdbcTemplate;     <span class="hljs-comment">/**</span><span class="hljs-comment">     * æŸ¥è¯¢æ•°æ®åº“é…ç½®ä¿¡æ¯</span><span class="hljs-comment">     * @param dbName  æ•°æ®åº“åç§°</span><span class="hljs-comment">     * @return æ•°æ®åº“é…ç½®ä¿¡æ¯</span><span class="hljs-comment">     */</span>    public DBCfg getDBCfg(String dbName) throws Exception {        String querySql = <span class="hljs-string">"select<span class="hljs-subst">\n</span>"</span> +                <span class="hljs-string">"          t.db_type as <span class="hljs-subst">\"</span>dbType<span class="hljs-subst">\"</span>,<span class="hljs-subst">\n</span>"</span> +                <span class="hljs-string">"           t.db_name as <span class="hljs-subst">\"</span>dbName<span class="hljs-subst">\"</span>,<span class="hljs-subst">\n</span>"</span> +                <span class="hljs-string">"           t.db_comment as <span class="hljs-subst">\"</span>dbCommment<span class="hljs-subst">\"</span>,<span class="hljs-subst">\n</span>"</span> +                <span class="hljs-string">"           t.db_driver as <span class="hljs-subst">\"</span>driverClass<span class="hljs-subst">\"</span>,<span class="hljs-subst">\n</span>"</span> +                <span class="hljs-string">"           t.db_username as <span class="hljs-subst">\"</span>userName<span class="hljs-subst">\"</span>,<span class="hljs-subst">\n</span>"</span> +                <span class="hljs-string">"           t.db_password as <span class="hljs-subst">\"</span>passworld<span class="hljs-subst">\"</span>,<span class="hljs-subst">\n</span>"</span> +                <span class="hljs-string">"           t.db_url as <span class="hljs-subst">\"</span>jdbcURL<span class="hljs-subst">\"</span>"</span> +                <span class="hljs-string">"          from TB_RPT_DBCFG t<span class="hljs-subst">\n</span>"</span> +                <span class="hljs-string">"          where t.db_name = '"</span> + dbName + <span class="hljs-string">"'"</span>;         RowMapper&lt;DBCfg&gt; rowMapper = ParameterizedBeanPropertyRowMapper.newInstance(DBCfg.class);        DBCfg dbCfg = (DBCfg) jdbcTemplate.queryForObject(querySql, rowMapper);        return dbCfg;    }     public JdbcTemplate getJdbcTemplate() {        return jdbcTemplate;    }     public void setJdbcTemplate(JdbcTemplate jdbcTemplate) {        this.jdbcTemplate = jdbcTemplate;    }}</code></pre><p>3ã€å®ç°åŠ¨æ€åˆ‡æ¢æ•°æ®æº</p><pre><code class="hljs reasonml"><span class="hljs-comment">/**</span><span class="hljs-comment"> * &lt;p&gt;åŠ¨æ€åˆ›å»ºåŠè®¿é—®å¤šæ•°æ®æº&lt;/p&gt;</span><span class="hljs-comment"> */</span>public <span class="hljs-keyword">class</span> DynamicDataSource extends AbstractRoutingDataSource{     <span class="hljs-keyword">private</span> DBConfigService dbConfigService;     <span class="hljs-keyword">private</span> DataSource masterDataSource;     <span class="hljs-keyword">private</span> Map&lt;Object, Object&gt; targetDataSource = <span class="hljs-keyword">new</span> HashMap&lt;Object, Object&gt;<span class="hljs-literal">()</span>;     <span class="hljs-keyword">private</span> static final String DEFAULT_DB_NAME = <span class="hljs-string">"dataSource"</span>;  <span class="hljs-comment">// é»˜è®¤æ•°æ®åº“å</span>     <span class="hljs-keyword">private</span> static final Logger LOGGER = <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">Logger</span>.</span></span>get<span class="hljs-constructor">Logger(DynamicDataSource.<span class="hljs-params">class</span>)</span>;     <span class="hljs-comment">/**</span><span class="hljs-comment">     * åˆ›å»ºå¹¶è·å–æ•°æ®æº</span><span class="hljs-comment">     * @return</span><span class="hljs-comment">     */</span>    @Override    protected DataSource determine<span class="hljs-constructor">TargetDataSource()</span> {        <span class="hljs-comment">// è·å–æ•°æ®æºåç§°</span>        String dbName = (String) determine<span class="hljs-constructor">CurrentLookupKey()</span>;         <span class="hljs-comment">// è·å–é»˜è®¤æ•°æ®æº</span>        <span class="hljs-keyword">if</span>(<span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">DEFAULT_DB_NAME</span>.</span></span>equals(dbName)) {            return masterDataSource;        }         <span class="hljs-comment">// åˆ›å»ºæ•°æ®æº</span>        DataSource dataSource = (DataSource) targetDataSource.get(dbName);        <span class="hljs-keyword">try</span> {            <span class="hljs-keyword">if</span> (dataSource<span class="hljs-operator"> == </span>null) {                dataSource = get<span class="hljs-constructor">DataSourceByName(<span class="hljs-params">dbName</span>)</span>;            }        } catch (Exception e) {            e.print<span class="hljs-constructor">StackTrace()</span>;        }        return dataSource;    }     <span class="hljs-comment">/**</span><span class="hljs-comment">     * è·å–æ•°æ®åº“åç§°ï¼Œå¯æ ¹æ®è·å–çš„æ•°æ®åº“åç§°æŸ¥è¯¢æ•°æ®åº“é…ç½®ä¿¡æ¯ï¼Œ</span><span class="hljs-comment">     * é€šè¿‡é…ç½®ä¿¡æ¯åŠ¨æ€åˆ›å»ºæ•°æ®æº</span><span class="hljs-comment">     * @return</span><span class="hljs-comment">     */</span>    @Override    protected Object determine<span class="hljs-constructor">CurrentLookupKey()</span> {        String dbName = <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">DatasourceHolder</span>.</span></span>get<span class="hljs-constructor">DBName()</span>;        <span class="hljs-keyword">if</span>(<span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">StringUtils</span>.</span></span>is<span class="hljs-constructor">Empty(<span class="hljs-params">dbName</span>)</span>) {            dbName = DEFAULT_DB_NAME;        }         <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">DatasourceHolder</span>.</span></span>remove<span class="hljs-literal">()</span>;        return dbName;    }     @Override    public void after<span class="hljs-constructor">PropertiesSet()</span> {     }     <span class="hljs-comment">/**</span><span class="hljs-comment">     * é€šè¿‡æ•°æ®åº“çš„é…ç½®ä¿¡æ¯è·å–æ•°æ®æº</span><span class="hljs-comment">     * @param dbName æ•°æ®åº“åç§°</span><span class="hljs-comment">     * @return</span><span class="hljs-comment">     */</span>    public synchronized DataSource get<span class="hljs-constructor">DataSourceByName(String <span class="hljs-params">dbName</span>)</span> throws Exception {                 <span class="hljs-comment">// åˆ›å»ºæ•°æ®æº</span>        BasicDataSource dataSource = create<span class="hljs-constructor">DataSource(<span class="hljs-params">dbName</span>)</span>;                 <span class="hljs-comment">// å¦‚æœåˆ›å»ºæ•°æ®æºæˆåŠŸåˆ™ç¼“å­˜æ•°æ®æºï¼Œé¿å…é‡å¤åˆ›å»ºç›¸åŒçš„æ•°æ®æº</span>        <span class="hljs-keyword">if</span>(dataSource != null) {            targetDataSource.put(dbName, dataSource);        }        return  dataSource;    }     <span class="hljs-comment">/**</span><span class="hljs-comment">     * é€šè¿‡æ•°æ®åº“çš„é…ç½®åˆ›å»ºæ•°æ®æº</span><span class="hljs-comment">     * @param dbName æ•°æ®åº“åç§°</span><span class="hljs-comment">     * @return</span><span class="hljs-comment">     */</span>    public BasicDataSource create<span class="hljs-constructor">DataSource(String <span class="hljs-params">dbName</span>)</span> throws Exception {                 <span class="hljs-comment">// æŸ¥è¯¢åŠ¨æ€æ•°æ®æºé…ç½®ä¿¡æ¯</span>        String oriDBName = <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">DatasourceHolder</span>.</span></span>get<span class="hljs-constructor">DBName()</span>;         <span class="hljs-keyword">if</span>(dbConfigService<span class="hljs-operator"> == </span>null) {            <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">System</span>.</span></span>out.println(<span class="hljs-string">"åˆ›å»ºæ•°æ®æºå¤±è´¥[dbCfgService is null......]"</span>);            <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">LOGGER</span>.</span></span>debug(<span class="hljs-string">"åˆ›å»ºæ•°æ®æºå¤±è´¥[dbCfgService is null......]"</span>);        }         <span class="hljs-comment">// é€šè¿‡æ•°æ®åº“åç§°æŸ¥è¯¢ç›¸å…³çš„æ•°æ®åº“é…ç½®ä¿¡æ¯</span>        <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">DatasourceHolder</span>.</span></span>set<span class="hljs-constructor">DBName(DEFAULT_DB_NAME)</span>;        DBCfg dbCfg = dbConfigService.get<span class="hljs-constructor">DBCfg(<span class="hljs-params">dbName</span>)</span>;        <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">DatasourceHolder</span>.</span></span>set<span class="hljs-constructor">DBName(<span class="hljs-params">oriDBName</span>)</span>;         String driver = dbCfg.get<span class="hljs-constructor">DriverClass()</span>;  <span class="hljs-comment">// æ•°æ®åº“é©±åŠ¨</span>        String url = dbCfg.get<span class="hljs-constructor">JdbcURL()</span>;  <span class="hljs-comment">// æ•°æ®åº“è¿æ¥åœ°å€</span>        String username = dbCfg.get<span class="hljs-constructor">UserName()</span>;  <span class="hljs-comment">// æ•°æ®åº“ç”¨æˆ·å</span>        String password = dbCfg.get<span class="hljs-constructor">Passworld()</span>;  <span class="hljs-comment">// æ•°æ®åº“å¯†ç </span>         <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">LOGGER</span>.</span></span>debug(<span class="hljs-string">"åŠ¨æ€è¿æ¥çš„æ•°æ®åº“ä¸º["</span> + url + <span class="hljs-string">"|"</span> + username + <span class="hljs-string">"]"</span>);         <span class="hljs-comment">// åˆ›å»ºæ•°æ®æº</span>        BasicDataSource basicDataSource = <span class="hljs-keyword">new</span> <span class="hljs-constructor">BasicDataSource()</span>;        basicDataSource.set<span class="hljs-constructor">DriverClassName(<span class="hljs-params">driver</span>)</span>;        basicDataSource.set<span class="hljs-constructor">Url(<span class="hljs-params">url</span>)</span>;        basicDataSource.set<span class="hljs-constructor">Username(<span class="hljs-params">username</span>)</span>;        basicDataSource.set<span class="hljs-constructor">Password(<span class="hljs-params">password</span>)</span>;        basicDataSource.set<span class="hljs-constructor">TestWhileIdle(<span class="hljs-params">true</span>)</span>;         return basicDataSource;    }     <span class="hljs-comment">/**</span><span class="hljs-comment">     * å¦‚æœä¿®æ”¹æˆ–åˆ é™¤æ•°æ®æºçš„é…ç½®ï¼Œåˆ™éœ€è¦åŒæ­¥åˆ é™¤ç¼“å­˜çš„æ•°æ®æº</span><span class="hljs-comment">     * @param dbName</span><span class="hljs-comment">     */</span>    public void remove<span class="hljs-constructor">DataSource(String <span class="hljs-params">dbName</span>)</span> {        this.targetDataSource.remove(dbName);    }     public DataSource get<span class="hljs-constructor">MasterDataSource()</span> {        return masterDataSource;    }     public void set<span class="hljs-constructor">MasterDataSource(DataSource <span class="hljs-params">masterDataSource</span>)</span> {        this.masterDataSource = masterDataSource;    }     public DBConfigService get<span class="hljs-constructor">DbConfigService()</span> {        return dbConfigService;    }     public void set<span class="hljs-constructor">DbConfigService(DBConfigService <span class="hljs-params">dbConfigService</span>)</span> {        this.dbConfigService = dbConfigService;    }}</code></pre><p>4ã€ä½¿ç”¨åŠ¨æ€åˆ‡æ¢æ•°æ®æº</p><pre><code class="hljs reasonml">public <span class="hljs-keyword">class</span> ShowRptServiceImpl implements IShowRptService {     <span class="hljs-keyword">private</span> static final Logger LOGGER = <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">Logger</span>.</span></span>get<span class="hljs-constructor">Logger(ShowRptServiceImpl.<span class="hljs-params">class</span>)</span>;     @Autowired    <span class="hljs-keyword">private</span> DBCfgMapper dbCfgMapper;     @Autowired    <span class="hljs-keyword">private</span> ShowRptInfoMapper showRptInfoMapper;     @Override    public RptResult query<span class="hljs-constructor">RptInfo(BaseRpt <span class="hljs-params">baseRpt</span>, Map&lt;String, String&gt; <span class="hljs-params">params</span>)</span> {        <span class="hljs-comment">// åœ¨è°ƒç”¨Mybatisæ‰§è¡Œæ•°æ®åº“ä¹‹å‰å…ˆé€‰æ‹©æ•°æ®æº</span>        <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">DatasourceHolder</span>.</span></span>set<span class="hljs-constructor">DBName(<span class="hljs-params">dbCfg</span>.<span class="hljs-params">getDbName</span>()</span>);        <span class="hljs-comment">// æŸ¥è¯¢æŠ¥è¡¨æ•°æ®</span>        List&lt;Map&lt;String,Object&gt;&gt; resultList = showRptInfoMapper.query<span class="hljs-constructor">RptData(<span class="hljs-params">querySQL</span>)</span>;          <span class="hljs-comment">// é€‰æ‹©æ•°æ®æº</span>        <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">DatasourceHolder</span>.</span></span>set<span class="hljs-constructor">DBName(<span class="hljs-params">dbCfg</span>.<span class="hljs-params">getDbName</span>()</span>);        <span class="hljs-comment">// æŸ¥è¯¢æ•°æ®æ•°æ®é‡</span>        <span class="hljs-built_in">int</span> totalCount = showRptInfoMapper.query<span class="hljs-constructor">TotalCount(<span class="hljs-params">countSQL</span>)</span>;         RptResult rptResult = <span class="hljs-keyword">new</span> <span class="hljs-constructor">RptResult()</span>;        return rptResult;    } }</code></pre><p>é€šè¿‡ä»¥ä¸Šæ­¥éª¤å³å¯å®ç°åŠ¨æ€å¤šæ•°æ®æºçš„åŠ¨æ€åˆ‡æ¢</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;åŸæ–‡é“¾æ¥ï¼š&lt;a href=&quot;https://www.cnblogs.com/zt2710/p/11116637.html&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;https://www.cnblogs.com/zt2710/p/11116637.html&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;ç¾¤èŠå¤©è®°å½•æˆªå›¾ğŸ‘‡&lt;/p&gt;
&lt;img src=&quot;https://s1.ax1x.com/2020/09/08/wQE7DO.jpg&quot; srcset=&quot;/blog/img/loading.gif&quot; alt=&quot;wQE7DO.jpg&quot; style=&quot;zoom:30%;&quot;&gt;
    
    </summary>
    
    
      <category term="uncategorized" scheme="https://melodyjerry.github.io/blog/categories/uncategorized/"/>
    
    
      <category term="ç¬”è®°" scheme="https://melodyjerry.github.io/blog/tags/%E7%AC%94%E8%AE%B0/"/>
    
      <category term="Java" scheme="https://melodyjerry.github.io/blog/tags/Java/"/>
    
      <category term="SSM" scheme="https://melodyjerry.github.io/blog/tags/SSM/"/>
    
  </entry>
  
  <entry>
    <title>ä¼˜åŒ–IDEAå¡é¡¿ç°è±¡</title>
    <link href="https://melodyjerry.github.io/blog/2020/09/07/%E4%BC%98%E5%8C%96IDEA%E5%8D%A1%E9%A1%BF%E7%8E%B0%E8%B1%A1/"/>
    <id>https://melodyjerry.github.io/blog/2020/09/07/%E4%BC%98%E5%8C%96IDEA%E5%8D%A1%E9%A1%BF%E7%8E%B0%E8%B1%A1/</id>
    <published>2020-09-07T09:24:41.000Z</published>
    <updated>2020-09-18T04:43:03.056Z</updated>
    
    <content type="html"><![CDATA[<h2 id="ä¿®æ”¹-vmoptions-æ–‡ä»¶"><a href="#ä¿®æ”¹-vmoptions-æ–‡ä»¶" class="headerlink" title="ä¿®æ”¹ vmoptions æ–‡ä»¶"></a>ä¿®æ”¹ vmoptions æ–‡ä»¶</h2><p>é¦–å…ˆæ˜¯æ‰¾åˆ° IDEA çš„å®‰è£…ç›®å½•ï¼Œä¹‹ååˆ°å®‰è£…ç›®å½•çš„ bin ç›®å½•ä¸‹ï¼Œæ‰¾åˆ°å¦‚ä¸‹ä¸¤ä¸ªæ–‡ä»¶ï¼š<br><code>idea.exe.vmoptions</code>å’Œ<code>idea64.exe.vmoptions</code><br>çœ‹ä½ æ˜¯å¤šå°‘ä½ç³»ç»Ÿçš„ä½ å°±è¯¥å¯¹åº”çš„å°±å¯ä»¥äº†ï¼Œç¼–è¾‘è¿™ä¸ªé…ç½®æ–‡ä»¶ã€‚<br>ä¿®æ”¹å‰ï¼š</p><pre><code class="hljs haml">-<span class="ruby">Xms128m</span><span class="ruby">-Xmx750m</span><span class="ruby">-<span class="hljs-symbol">XX:</span>ReservedCodeCacheSize=<span class="hljs-number">240</span>m</span><span class="ruby">-<span class="hljs-symbol">XX:</span>+UseConcMarkSweepGC</span><span class="ruby">-<span class="hljs-symbol">XX:</span>SoftRefLRUPolicyMSPerMB=<span class="hljs-number">50</span></span><span class="ruby">-ea</span><span class="ruby">-<span class="hljs-symbol">XX:</span>CICompilerCount=<span class="hljs-number">2</span></span><span class="ruby">-Dsun.io.useCanonPrefixCache=<span class="hljs-literal">false</span></span><span class="ruby">-Djdk.http.auth.tunneling.disabledSchemes=<span class="hljs-string">""</span></span><span class="ruby">-<span class="hljs-symbol">XX:</span>+HeapDumpOnOutOfMemoryError</span><span class="ruby">-<span class="hljs-symbol">XX:</span>-OmitStackTraceInFastThrow</span><span class="ruby">-Djdk.attach.allowAttachSelf=<span class="hljs-literal">true</span></span><span class="ruby">-Dkotlinx.coroutines.debug=off</span><span class="ruby">-Djdk<span class="hljs-class">.<span class="hljs-keyword">module</span>.<span class="hljs-title">illegalAccess</span>.<span class="hljs-title">silent</span>=<span class="hljs-title">true</span></span></span></code></pre><p>ä¿®æ”¹åï¼š<br>åˆ†åˆ«æŠŠ<strong>å†…å­˜</strong>çš„å‚æ•° <strong>128m</strong> å’Œ <strong>750m</strong> æ”¹æˆä½ æƒ³è¦æ”¹çš„å°±å¯ä»¥äº†ï¼Œæˆ‘æ˜¯åˆ†åˆ«æ”¹æˆäº† <strong>1024m</strong> å’Œ <strong>2048m</strong>ï¼Œä¹‹åå¦‚æœè¿˜å¡ï¼Œå†å¾€å¤§äº†è°ƒï¼Œå¯ä»¥æ ¹æ®è‡ªå·±ç”µè„‘çš„å®é™…å†…å­˜è®¾ç½®ã€‚</p><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><p><a href="https://blog.csdn.net/evane1890/article/details/78941968" target="_blank" rel="noopener">JVMè°ƒä¼˜å¸¸ç”¨å‚æ•°</a></p><a id="more"></a><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;ä¿®æ”¹-vmoptions-æ–‡ä»¶&quot;&gt;&lt;a href=&quot;#ä¿®æ”¹-vmoptions-æ–‡ä»¶&quot; class=&quot;headerlink&quot; title=&quot;ä¿®æ”¹ vmoptions æ–‡ä»¶&quot;&gt;&lt;/a&gt;ä¿®æ”¹ vmoptions æ–‡ä»¶&lt;/h2&gt;&lt;p&gt;é¦–å…ˆæ˜¯æ‰¾åˆ° IDEA çš„å®‰è£…ç›®å½•ï¼Œä¹‹ååˆ°å®‰è£…ç›®å½•çš„ bin ç›®å½•ä¸‹ï¼Œæ‰¾åˆ°å¦‚ä¸‹ä¸¤ä¸ªæ–‡ä»¶ï¼š&lt;br&gt;&lt;code&gt;idea.exe.vmoptions&lt;/code&gt;å’Œ&lt;code&gt;idea64.exe.vmoptions&lt;/code&gt;&lt;br&gt;çœ‹ä½ æ˜¯å¤šå°‘ä½ç³»ç»Ÿçš„ä½ å°±è¯¥å¯¹åº”çš„å°±å¯ä»¥äº†ï¼Œç¼–è¾‘è¿™ä¸ªé…ç½®æ–‡ä»¶ã€‚&lt;br&gt;ä¿®æ”¹å‰ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;hljs haml&quot;&gt;-&lt;span class=&quot;ruby&quot;&gt;Xms128m&lt;/span&gt;
&lt;span class=&quot;ruby&quot;&gt;-Xmx750m&lt;/span&gt;
&lt;span class=&quot;ruby&quot;&gt;-&lt;span class=&quot;hljs-symbol&quot;&gt;XX:&lt;/span&gt;ReservedCodeCacheSize=&lt;span class=&quot;hljs-number&quot;&gt;240&lt;/span&gt;m&lt;/span&gt;
&lt;span class=&quot;ruby&quot;&gt;-&lt;span class=&quot;hljs-symbol&quot;&gt;XX:&lt;/span&gt;+UseConcMarkSweepGC&lt;/span&gt;
&lt;span class=&quot;ruby&quot;&gt;-&lt;span class=&quot;hljs-symbol&quot;&gt;XX:&lt;/span&gt;SoftRefLRUPolicyMSPerMB=&lt;span class=&quot;hljs-number&quot;&gt;50&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;ruby&quot;&gt;-ea&lt;/span&gt;
&lt;span class=&quot;ruby&quot;&gt;-&lt;span class=&quot;hljs-symbol&quot;&gt;XX:&lt;/span&gt;CICompilerCount=&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;ruby&quot;&gt;-Dsun.io.useCanonPrefixCache=&lt;span class=&quot;hljs-literal&quot;&gt;false&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;ruby&quot;&gt;-Djdk.http.auth.tunneling.disabledSchemes=&lt;span class=&quot;hljs-string&quot;&gt;&quot;&quot;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;ruby&quot;&gt;-&lt;span class=&quot;hljs-symbol&quot;&gt;XX:&lt;/span&gt;+HeapDumpOnOutOfMemoryError&lt;/span&gt;
&lt;span class=&quot;ruby&quot;&gt;-&lt;span class=&quot;hljs-symbol&quot;&gt;XX:&lt;/span&gt;-OmitStackTraceInFastThrow&lt;/span&gt;
&lt;span class=&quot;ruby&quot;&gt;-Djdk.attach.allowAttachSelf=&lt;span class=&quot;hljs-literal&quot;&gt;true&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;ruby&quot;&gt;-Dkotlinx.coroutines.debug=off&lt;/span&gt;
&lt;span class=&quot;ruby&quot;&gt;-Djdk&lt;span class=&quot;hljs-class&quot;&gt;.&lt;span class=&quot;hljs-keyword&quot;&gt;module&lt;/span&gt;.&lt;span class=&quot;hljs-title&quot;&gt;illegalAccess&lt;/span&gt;.&lt;span class=&quot;hljs-title&quot;&gt;silent&lt;/span&gt;=&lt;span class=&quot;hljs-title&quot;&gt;true&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;ä¿®æ”¹åï¼š&lt;br&gt;åˆ†åˆ«æŠŠ&lt;strong&gt;å†…å­˜&lt;/strong&gt;çš„å‚æ•° &lt;strong&gt;128m&lt;/strong&gt; å’Œ &lt;strong&gt;750m&lt;/strong&gt; æ”¹æˆä½ æƒ³è¦æ”¹çš„å°±å¯ä»¥äº†ï¼Œæˆ‘æ˜¯åˆ†åˆ«æ”¹æˆäº† &lt;strong&gt;1024m&lt;/strong&gt; å’Œ &lt;strong&gt;2048m&lt;/strong&gt;ï¼Œä¹‹åå¦‚æœè¿˜å¡ï¼Œå†å¾€å¤§äº†è°ƒï¼Œå¯ä»¥æ ¹æ®è‡ªå·±ç”µè„‘çš„å®é™…å†…å­˜è®¾ç½®ã€‚&lt;/p&gt;
&lt;h2 id=&quot;å‚è€ƒ&quot;&gt;&lt;a href=&quot;#å‚è€ƒ&quot; class=&quot;headerlink&quot; title=&quot;å‚è€ƒ&quot;&gt;&lt;/a&gt;å‚è€ƒ&lt;/h2&gt;&lt;p&gt;&lt;a href=&quot;https://blog.csdn.net/evane1890/article/details/78941968&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;JVMè°ƒä¼˜å¸¸ç”¨å‚æ•°&lt;/a&gt;&lt;/p&gt;
    
    </summary>
    
    
      <category term="uncategorized" scheme="https://melodyjerry.github.io/blog/categories/uncategorized/"/>
    
    
      <category term="å°æŠ€å·§" scheme="https://melodyjerry.github.io/blog/tags/%E5%B0%8F%E6%8A%80%E5%B7%A7/"/>
    
      <category term="IDEA" scheme="https://melodyjerry.github.io/blog/tags/IDEA/"/>
    
  </entry>
  
  <entry>
    <title>å®å¡”åŒIPæˆ–åŒåŸŸåä¸åŒç«¯å£åˆ†åˆ«å¯¹åº”ä¸åŒç½‘ç«™æ•™ç¨‹</title>
    <link href="https://melodyjerry.github.io/blog/2020/09/05/%E5%AE%9D%E5%A1%94%E5%90%8CIP%E6%88%96%E5%90%8C%E5%9F%9F%E5%90%8D%E4%B8%8D%E5%90%8C%E7%AB%AF%E5%8F%A3%E5%88%86%E5%88%AB%E5%AF%B9%E5%BA%94%E4%B8%8D%E5%90%8C%E7%BD%91%E7%AB%99%E6%95%99%E7%A8%8B/"/>
    <id>https://melodyjerry.github.io/blog/2020/09/05/%E5%AE%9D%E5%A1%94%E5%90%8CIP%E6%88%96%E5%90%8C%E5%9F%9F%E5%90%8D%E4%B8%8D%E5%90%8C%E7%AB%AF%E5%8F%A3%E5%88%86%E5%88%AB%E5%AF%B9%E5%BA%94%E4%B8%8D%E5%90%8C%E7%BD%91%E7%AB%99%E6%95%99%E7%A8%8B/</id>
    <published>2020-09-05T09:24:41.000Z</published>
    <updated>2020-09-18T04:43:03.065Z</updated>
    
    <content type="html"><![CDATA[<h1 id="å‡†å¤‡å·¥ä½œ"><a href="#å‡†å¤‡å·¥ä½œ" class="headerlink" title="å‡†å¤‡å·¥ä½œ"></a>å‡†å¤‡å·¥ä½œ</h1><ul><li><p>IP</p></li><li><p>æœåŠ¡å™¨ç«¯æ”¾è¡Œæ‰€éœ€ç«¯å£</p></li><li><p>å®‰è£…å¥½çš„å®å¡”é¢æ¿ã€‚</p></li></ul><h1 id="å®ç°æ•ˆæœ"><a href="#å®ç°æ•ˆæœ" class="headerlink" title="å®ç°æ•ˆæœ"></a>å®ç°æ•ˆæœ</h1><p>192.168.1.666:80 ç«™ç‚¹ä¸€æŒ‡å‘Aé¡¹ç›®</p><p>192.168.1.666:8081 ç«™ç‚¹äºŒæŒ‡å‘Bé¡¹ç›®</p><h1 id="å…·ä½“æ­¥éª¤"><a href="#å…·ä½“æ­¥éª¤" class="headerlink" title="å…·ä½“æ­¥éª¤"></a>å…·ä½“æ­¥éª¤</h1><p>1ï¼‰ æ–°å»ºä¸€ä¸ªç«™ç‚¹æŒ‡å‘é¡¹ç›®A</p><p><img src="https://img2020.cnblogs.com/blog/1137058/202005/1137058-20200514113737124-1200219923.png" srcset="/blog/img/loading.gif" alt="img"></p><p> 2ï¼‰å†æ¬¡æ·»åŠ ä¸€ä¸ªç«™ç‚¹æŒ‡å‘é¡¹ç›®B</p><p><img src="https://img2020.cnblogs.com/blog/1137058/202005/1137058-20200514114000175-1939839843.png" srcset="/blog/img/loading.gif" alt="img"></p><p> æäº¤ä¹‹åæ‰“å¼€è®¾ç½®</p><p><img src="https://img2020.cnblogs.com/blog/1137058/202005/1137058-20200514114036225-1680296715.png" srcset="/blog/img/loading.gif" alt="img"></p><p> ä¿®æ”¹é…ç½®æ–‡ä»¶å¦‚ä¸‹å›¾ï¼š</p><p><img src="https://img2020.cnblogs.com/blog/1137058/202005/1137058-20200514114317948-567330049.png" srcset="/blog/img/loading.gif" alt="img"></p><p> æäº¤ä¹‹åï¼Œåˆ‡è®°ä¸€å®šè¦é‡å¯nginxï¼Œç„¶åå³æ‰“å¼€ç«™ç‚¹å°±å¯ä»¥çœ‹åˆ°å†…å®¹</p><p>ç…§æ­¤å¯æ·»åŠ å¤šä¸ª</p><a id="more"></a><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;å‡†å¤‡å·¥ä½œ&quot;&gt;&lt;a href=&quot;#å‡†å¤‡å·¥ä½œ&quot; class=&quot;headerlink&quot; title=&quot;å‡†å¤‡å·¥ä½œ&quot;&gt;&lt;/a&gt;å‡†å¤‡å·¥ä½œ&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;&lt;p&gt;IP&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;æœåŠ¡å™¨ç«¯æ”¾è¡Œæ‰€éœ€ç«¯å£&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;å®‰è£…å¥½çš„å®å¡”é¢æ¿ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&quot;å®ç°æ•ˆæœ&quot;&gt;&lt;a href=&quot;#å®ç°æ•ˆæœ&quot; class=&quot;headerlink&quot; title=&quot;å®ç°æ•ˆæœ&quot;&gt;&lt;/a&gt;å®ç°æ•ˆæœ&lt;/h1&gt;&lt;p&gt;192.168.1.666:80 ç«™ç‚¹ä¸€æŒ‡å‘Aé¡¹ç›®&lt;/p&gt;
&lt;p&gt;192.168.1.666:8081 ç«™ç‚¹äºŒæŒ‡å‘Bé¡¹ç›®&lt;/p&gt;
&lt;h1 id=&quot;å…·ä½“æ­¥éª¤&quot;&gt;&lt;a href=&quot;#å…·ä½“æ­¥éª¤&quot; class=&quot;headerlink&quot; title=&quot;å…·ä½“æ­¥éª¤&quot;&gt;&lt;/a&gt;å…·ä½“æ­¥éª¤&lt;/h1&gt;&lt;p&gt;1ï¼‰ æ–°å»ºä¸€ä¸ªç«™ç‚¹æŒ‡å‘é¡¹ç›®A&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/1137058/202005/1137058-20200514113737124-1200219923.png&quot; srcset=&quot;/blog/img/loading.gif&quot; alt=&quot;img&quot;&gt;&lt;/p&gt;
&lt;p&gt; 2ï¼‰å†æ¬¡æ·»åŠ ä¸€ä¸ªç«™ç‚¹æŒ‡å‘é¡¹ç›®B&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/1137058/202005/1137058-20200514114000175-1939839843.png&quot; srcset=&quot;/blog/img/loading.gif&quot; alt=&quot;img&quot;&gt;&lt;/p&gt;
&lt;p&gt; æäº¤ä¹‹åæ‰“å¼€è®¾ç½®&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/1137058/202005/1137058-20200514114036225-1680296715.png&quot; srcset=&quot;/blog/img/loading.gif&quot; alt=&quot;img&quot;&gt;&lt;/p&gt;
&lt;p&gt; ä¿®æ”¹é…ç½®æ–‡ä»¶å¦‚ä¸‹å›¾ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/1137058/202005/1137058-20200514114317948-567330049.png&quot; srcset=&quot;/blog/img/loading.gif&quot; alt=&quot;img&quot;&gt;&lt;/p&gt;
&lt;p&gt; æäº¤ä¹‹åï¼Œåˆ‡è®°ä¸€å®šè¦é‡å¯nginxï¼Œç„¶åå³æ‰“å¼€ç«™ç‚¹å°±å¯ä»¥çœ‹åˆ°å†…å®¹&lt;/p&gt;
&lt;p&gt;ç…§æ­¤å¯æ·»åŠ å¤šä¸ª&lt;/p&gt;
    
    </summary>
    
    
      <category term="uncategorized" scheme="https://melodyjerry.github.io/blog/categories/uncategorized/"/>
    
    
      <category term="æœåŠ¡å™¨" scheme="https://melodyjerry.github.io/blog/tags/%E6%9C%8D%E5%8A%A1%E5%99%A8/"/>
    
      <category term="Linux" scheme="https://melodyjerry.github.io/blog/tags/Linux/"/>
    
  </entry>
  
  <entry>
    <title>Gitç¬”è®°</title>
    <link href="https://melodyjerry.github.io/blog/2020/08/29/Git%E7%AC%94%E8%AE%B0/"/>
    <id>https://melodyjerry.github.io/blog/2020/08/29/Git%E7%AC%94%E8%AE%B0/</id>
    <published>2020-08-29T13:00:00.000Z</published>
    <updated>2020-09-18T04:43:02.948Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Gitç¬”è®°"><a href="#Gitç¬”è®°" class="headerlink" title="Gitç¬”è®°"></a>Gitç¬”è®°</h1><h4 id="åœ¨å½“å‰ç›®å½•ä¸‹åˆå§‹åŒ–ä¸€ä¸ªç©ºçš„gitä»“åº“"><a href="#åœ¨å½“å‰ç›®å½•ä¸‹åˆå§‹åŒ–ä¸€ä¸ªç©ºçš„gitä»“åº“" class="headerlink" title="åœ¨å½“å‰ç›®å½•ä¸‹åˆå§‹åŒ–ä¸€ä¸ªç©ºçš„gitä»“åº“"></a>åœ¨å½“å‰ç›®å½•ä¸‹åˆå§‹åŒ–ä¸€ä¸ªç©ºçš„gitä»“åº“</h4><ul><li><code>git init</code></li></ul><h4 id="è®¾ç½®å…¨å±€ç”¨æˆ·åå’Œé‚®ç®±"><a href="#è®¾ç½®å…¨å±€ç”¨æˆ·åå’Œé‚®ç®±" class="headerlink" title="è®¾ç½®å…¨å±€ç”¨æˆ·åå’Œé‚®ç®±"></a>è®¾ç½®å…¨å±€ç”¨æˆ·åå’Œé‚®ç®±</h4><ul><li><code>git config --global user.name "name"</code></li><li><code>git config --global user.email "xxxxx@email.com"</code></li><li><code>git config user.name</code> æŸ¥çœ‹gitç”¨æˆ·å</li><li><code>git config user.email</code> æŸ¥çœ‹é‚®ç®±é…ç½®</li></ul><h4 id="æŸ¥çœ‹gité…ç½®"><a href="#æŸ¥çœ‹gité…ç½®" class="headerlink" title="æŸ¥çœ‹gité…ç½®"></a>æŸ¥çœ‹gité…ç½®</h4><ul><li><code>git config --list</code></li></ul><h4 id="æäº¤ä¿®æ”¹åˆ°æš‚å­˜åŒº"><a href="#æäº¤ä¿®æ”¹åˆ°æš‚å­˜åŒº" class="headerlink" title="æäº¤ä¿®æ”¹åˆ°æš‚å­˜åŒº"></a>æäº¤ä¿®æ”¹åˆ°æš‚å­˜åŒº</h4><ul><li><code>git add -A</code> æäº¤å…¨éƒ¨ä¿®æ”¹ã€‚ï¼ˆgit add -Allï¼‰</li><li><code>git add -u</code> åªæäº¤ä¿®æ”¹ï¼Œä¸æäº¤æ–°æ–‡ä»¶ã€‚ï¼ˆgit add -update)</li><li><code>git add .</code> ä¸æäº¤åˆ é™¤æ–‡ä»¶</li><li><code>git add &lt;filename&gt;</code> æäº¤æŒ‡å®šæ–‡ä»¶</li></ul><h4 id="æŸ¥çœ‹æš‚å­˜åŒº"><a href="#æŸ¥çœ‹æš‚å­˜åŒº" class="headerlink" title="æŸ¥çœ‹æš‚å­˜åŒº"></a>æŸ¥çœ‹æš‚å­˜åŒº</h4><ul><li><code>git status</code></li></ul><h4 id="ä¿®æ”¹æœ€æ–°æäº¤çš„-commit-message"><a href="#ä¿®æ”¹æœ€æ–°æäº¤çš„-commit-message" class="headerlink" title="ä¿®æ”¹æœ€æ–°æäº¤çš„ commit message"></a>ä¿®æ”¹æœ€æ–°æäº¤çš„ commit message</h4><ul><li><code>git commit --amend</code></li></ul><h4 id="ä¿®æ”¹æŸä¸ªæäº¤çš„-commit-message"><a href="#ä¿®æ”¹æŸä¸ªæäº¤çš„-commit-message" class="headerlink" title="ä¿®æ”¹æŸä¸ªæäº¤çš„ commit message"></a>ä¿®æ”¹æŸä¸ªæäº¤çš„ commit message</h4><ul><li><code>git commit -i &lt;commit id&gt;</code> commit id ä¸ºè¦ä¿®æ”¹çš„ç›®æ ‡ commit çš„çˆ¶äº² commit id</li></ul><h4 id="åˆå¹¶è¿ç»­çš„commit"><a href="#åˆå¹¶è¿ç»­çš„commit" class="headerlink" title="åˆå¹¶è¿ç»­çš„commit"></a>åˆå¹¶è¿ç»­çš„commit</h4><ul><li><code>git rebase -i &lt;commit id&gt;</code> commit id ä¸ºç›®æ ‡commitçš„çˆ¶äº²commit id</li></ul><h4 id="æäº¤ä¿®æ”¹åˆ°æœ¬åœ°ä»“åº“"><a href="#æäº¤ä¿®æ”¹åˆ°æœ¬åœ°ä»“åº“" class="headerlink" title="æäº¤ä¿®æ”¹åˆ°æœ¬åœ°ä»“åº“"></a>æäº¤ä¿®æ”¹åˆ°æœ¬åœ°ä»“åº“</h4><ul><li><code>git commit -m 'msg'</code> æäº¤æš‚å­˜åŒºåˆ°æœ¬åœ°ä»“åº“</li><li><code>git commit -a -m 'msg'</code> æäº¤ä¿®æ”¹åˆ°æœ¬åœ°ä»“åº“ï¼ˆä¸æäº¤æ–°å¢æ–‡ä»¶ï¼‰</li></ul><h4 id="æŸ¥çœ‹æäº¤è®°å½•"><a href="#æŸ¥çœ‹æäº¤è®°å½•" class="headerlink" title="æŸ¥çœ‹æäº¤è®°å½•"></a>æŸ¥çœ‹æäº¤è®°å½•</h4><ul><li><code>git log</code></li></ul><h4 id="æ·»åŠ è¿œç¨‹ä»“åº“"><a href="#æ·»åŠ è¿œç¨‹ä»“åº“" class="headerlink" title="æ·»åŠ è¿œç¨‹ä»“åº“"></a>æ·»åŠ è¿œç¨‹ä»“åº“</h4><ul><li><code>git remote add &lt;name&gt; &lt;url&gt;</code></li></ul><h4 id="æŸ¥çœ‹è¿œç¨‹ä»“åº“ä¿¡æ¯"><a href="#æŸ¥çœ‹è¿œç¨‹ä»“åº“ä¿¡æ¯" class="headerlink" title="æŸ¥çœ‹è¿œç¨‹ä»“åº“ä¿¡æ¯"></a>æŸ¥çœ‹è¿œç¨‹ä»“åº“ä¿¡æ¯</h4><ul><li><code>git remote show &lt;name&gt;</code></li></ul><h4 id="è¿œç¨‹ä»“åº“çš„åˆ é™¤å’Œé‡å‘½å"><a href="#è¿œç¨‹ä»“åº“çš„åˆ é™¤å’Œé‡å‘½å" class="headerlink" title="è¿œç¨‹ä»“åº“çš„åˆ é™¤å’Œé‡å‘½å"></a>è¿œç¨‹ä»“åº“çš„åˆ é™¤å’Œé‡å‘½å</h4><ul><li><code>git remote rm &lt;remote_name&gt;</code></li><li><code>git remote rename &lt;old_name&gt; &lt;new_name&gt;</code></li></ul><h4 id="æ‹‰å–è¿œç¨‹ä»“åº“æ•°æ®åˆ°æœ¬åœ°"><a href="#æ‹‰å–è¿œç¨‹ä»“åº“æ•°æ®åˆ°æœ¬åœ°" class="headerlink" title="æ‹‰å–è¿œç¨‹ä»“åº“æ•°æ®åˆ°æœ¬åœ°"></a>æ‹‰å–è¿œç¨‹ä»“åº“æ•°æ®åˆ°æœ¬åœ°</h4><ul><li><code>git pull &lt;remote_name&gt; &lt;branch_name&gt;</code></li></ul><h4 id="æäº¤æœ¬åœ°ä»“åº“åˆ°è¿œç¨‹ä»“åº“"><a href="#æäº¤æœ¬åœ°ä»“åº“åˆ°è¿œç¨‹ä»“åº“" class="headerlink" title="æäº¤æœ¬åœ°ä»“åº“åˆ°è¿œç¨‹ä»“åº“"></a>æäº¤æœ¬åœ°ä»“åº“åˆ°è¿œç¨‹ä»“åº“</h4><ul><li><code>git push &lt;remote_name&gt; &lt;branch_name&gt;</code></li></ul><h4 id="æŸ¥çœ‹-amp-åˆ›å»º-amp-åˆ‡æ¢åˆ†æ”¯"><a href="#æŸ¥çœ‹-amp-åˆ›å»º-amp-åˆ‡æ¢åˆ†æ”¯" class="headerlink" title="æŸ¥çœ‹&amp;åˆ›å»º&amp;åˆ‡æ¢åˆ†æ”¯"></a>æŸ¥çœ‹&amp;åˆ›å»º&amp;åˆ‡æ¢åˆ†æ”¯</h4><ul><li><code>git branch</code> æŸ¥çœ‹å·²æœ‰åˆ†æ”¯</li><li><code>git branch -v</code> æŸ¥çœ‹å·²æœ‰åˆ†æ”¯åŠå„ä¸ªåˆ†æ”¯æœ€åä¸€ä¸ªæäº¤å¯¹è±¡çš„ä¿¡æ¯</li><li><code>git branch &lt;branch_name&gt;</code> åˆ›å»ºæ–°çš„ç©ºåˆ†æ”¯</li><li><code>git branch &lt;branch_name&gt; &lt;exist_branch_name&gt;</code> åˆ›å»ºæ–°åˆ†æ”¯</li><li><code>git checkout -b &lt;branch_name&gt; &lt;exist_branch_name&gt;</code> åˆ›å»ºå¹¶åˆ‡æ¢åˆ°æ–°åˆ†æ”¯</li><li><code>git checkout &lt;branch_name&gt;</code> åˆ‡æ¢åˆ†æ”¯</li></ul><h4 id="åˆ é™¤-amp-åˆå¹¶åˆ†æ”¯"><a href="#åˆ é™¤-amp-åˆå¹¶åˆ†æ”¯" class="headerlink" title="åˆ é™¤&amp;åˆå¹¶åˆ†æ”¯"></a>åˆ é™¤&amp;åˆå¹¶åˆ†æ”¯</h4><ul><li><code>git branch -D &lt;branch_name&gt;</code> åˆ é™¤åˆ†æ”¯</li><li><code>git merge &lt;branch_name&gt;</code> å½“å‰åˆ†æ”¯åˆå¹¶åˆ°æŒ‡å®šåˆ†æ”¯</li></ul><h4 id="æš‚å­˜åŒºæ¢å¤åˆ°HEAD"><a href="#æš‚å­˜åŒºæ¢å¤åˆ°HEAD" class="headerlink" title="æš‚å­˜åŒºæ¢å¤åˆ°HEAD"></a>æš‚å­˜åŒºæ¢å¤åˆ°HEAD</h4><ul><li><code>git reset HEAD</code></li><li><code>git reset HEAD &lt;file_name&gt;</code></li></ul><h4 id="å·¥ä½œåŒºæ¢å¤åˆ°æš‚å­˜åŒº"><a href="#å·¥ä½œåŒºæ¢å¤åˆ°æš‚å­˜åŒº" class="headerlink" title="å·¥ä½œåŒºæ¢å¤åˆ°æš‚å­˜åŒº"></a>å·¥ä½œåŒºæ¢å¤åˆ°æš‚å­˜åŒº</h4><ul><li><code>git checkout -- &lt;file_name&gt;</code></li></ul><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;Gitç¬”è®°&quot;&gt;&lt;a href=&quot;#Gitç¬”è®°&quot; class=&quot;headerlink&quot; title=&quot;Gitç¬”è®°&quot;&gt;&lt;/a&gt;Gitç¬”è®°&lt;/h1&gt;&lt;h4 id=&quot;åœ¨å½“å‰ç›®å½•ä¸‹åˆå§‹åŒ–ä¸€ä¸ªç©ºçš„gitä»“åº“&quot;&gt;&lt;a href=&quot;#åœ¨å½“å‰ç›®å½•ä¸‹åˆå§‹åŒ–ä¸€ä¸ªç©ºçš„gitä»“åº“&quot; cla
      
    
    </summary>
    
    
      <category term="uncategorized" scheme="https://melodyjerry.github.io/blog/categories/uncategorized/"/>
    
    
      <category term="ç¬”è®°" scheme="https://melodyjerry.github.io/blog/tags/%E7%AC%94%E8%AE%B0/"/>
    
      <category term="Git" scheme="https://melodyjerry.github.io/blog/tags/Git/"/>
    
  </entry>
  
</feed>
